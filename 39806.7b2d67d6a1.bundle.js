/*! For license information please see 39806.7b2d67d6a1.bundle.js.LICENSE.txt */
(self.webpackChunkweb=self.webpackChunkweb||[]).push([[39806],{629206:e=>{"use strict";e.exports=function base(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var n=0;n<e.length;n++){var i=e.charAt(n),o=i.charCodeAt(0);if(255!==t[o])throw new TypeError(i+" is ambiguous");t[o]=n}var s=e.length,a=e.charAt(0),c=Math.log(s)/Math.log(256),u=Math.log(256)/Math.log(s);function decodeUnsafe(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;for(var r=0,n=0,i=0;e[r]===a;)n++,r++;for(var o=(e.length-r)*c+1>>>0,u=new Uint8Array(o);e[r];){var l=t[e.charCodeAt(r)];if(255===l)return;for(var d=0,p=o-1;(0!==l||d<i)&&-1!==p;p--,d++)l+=s*u[p]>>>0,u[p]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");i=d,r++}for(var y=o-i;y!==o&&0===u[y];)y++;for(var g=new Uint8Array(n+(o-y)),m=n;y!==o;)g[m++]=u[y++];return g}return{encode:function encode(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,i=0,o=t.length;i!==o&&0===t[i];)i++,r++;for(var c=(o-i)*u+1>>>0,l=new Uint8Array(c);i!==o;){for(var d=t[i],p=0,y=c-1;(0!==d||p<n)&&-1!==y;y--,p++)d+=256*l[y]>>>0,l[y]=d%s>>>0,d=d/s>>>0;if(0!==d)throw new Error("Non-zero carry");n=p,i++}for(var g=c-n;g!==c&&0===l[g];)g++;for(var m=a.repeat(r);g<c;++g)m+=e.charAt(l[g]);return m},decodeUnsafe,decode:function decode(e){var t=decodeUnsafe(e);if(t)return t;throw new Error("Non-base"+s+" character")}}}},586589:(e,t,r)=>{const n=r(629206);e.exports=n("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")},988596:(e,t,r)=>{"use strict";r.d(t,{Gdf:()=>Pt,fnT:()=>rn,HH7:()=>Rt,FRY:()=>tn,AcW:()=>Ce,KW$:()=>Yr,jy4:()=>Le,cLD:()=>Er,APd:()=>isValidSuiAddress,ibA:()=>messageWithIntent,t4L:()=>normalizeSuiAddress,oxV:()=>toB64,CU6:()=>toSerializedSignature});r(882926);var n=r(586589),i=r.n(n);function dist_fromB64(e,t){for(var r,n,i,o=e.replace(/[^A-Za-z0-9+/]/g,""),s=o.length,a=t?Math.ceil((3*s+1>>2)/t)*t:3*s+1>>2,c=new Uint8Array(a),u=0,l=0,d=0;d<s;d++)if(n=3&d,u|=((i=o.charCodeAt(d))>64&&i<91?i-65:i>96&&i<123?i-71:i>47&&i<58?i+4:43===i?62:47===i?63:0)<<6*(3-n),3===n||s-d==1){for(r=0;r<3&&l<a;r++,l++)c[l]=u>>>(16>>>r&24)&255;u=0}return c}function uint6ToB64(e){return e<26?e+65:e<52?e+71:e<62?e-4:62===e?43:63===e?47:65}function toB64(e){for(var t=2,r="",n=e.length,i=0,o=0;o<n;o++)t=o%3,o>0&&4*o/3%76==0&&(r+=""),i|=e[o]<<(16>>>t&24),2!==t&&e.length-o!=1||(r+=String.fromCodePoint(uint6ToB64(i>>>18&63),uint6ToB64(i>>>12&63),uint6ToB64(i>>>6&63),uint6ToB64(63&i)),i=0);return r.slice(0,r.length-2+t)+(2===t?"":1===t?"=":"==")}function dist_fromHEX(e){let t=e.replace("0x","").match(/.{1,2}/g).map((e=>parseInt(e,16)));if(null===t)throw new Error(`Unable to parse HEX: ${e}`);return Uint8Array.from(t)}function dist_toHEX(e){return e.reduce(((e,t)=>e+t.toString(16).padStart(2,"0")),"")}function toLittleEndian(e,t){let r=new Uint8Array(t),n=0;for(;e>0;)r[n]=Number(e%BigInt(256)),e/=BigInt(256),n+=1;return r}var toB58=e=>i().encode(e),fromB58=e=>i().decode(e),o=class{constructor(e){this.bytePosition=0,this.dataView=new DataView(e.buffer)}shift(e){return this.bytePosition+=e,this}read8(){let e=this.dataView.getUint8(this.bytePosition);return this.shift(1),e}read16(){let e=this.dataView.getUint16(this.bytePosition,!0);return this.shift(2),e}read32(){let e=this.dataView.getUint32(this.bytePosition,!0);return this.shift(4),e}read64(){let e=this.read32(),t=this.read32().toString(16)+e.toString(16).padStart(8,"0");return BigInt("0x"+t).toString(10)}read128(){let e=BigInt(this.read64()),t=BigInt(this.read64()).toString(16)+e.toString(16).padStart(8,"0");return BigInt("0x"+t).toString(10)}read256(){let e=BigInt(this.read128()),t=BigInt(this.read128()).toString(16)+e.toString(16).padStart(16,"0");return BigInt("0x"+t).toString(10)}readBytes(e){let t=this.bytePosition+this.dataView.byteOffset,r=new Uint8Array(this.dataView.buffer,t,e);return this.shift(e),r}readULEB(){let e=this.bytePosition+this.dataView.byteOffset,t=new Uint8Array(this.dataView.buffer,e),{value:r,length:n}=function ulebDecode(e){let t=0,r=0,n=0;for(;;){let i=e[n];if(n+=1,t|=(127&i)<<r,!(128&i))break;r+=7}return{value:t,length:n}}(t);return this.shift(n),r}readVec(e){let t=this.readULEB(),r=[];for(let n=0;n<t;n++)r.push(e(this,n,t));return r}},s=class{constructor({size:e=1024,maxSize:t,allocateSize:r=1024}={}){this.bytePosition=0,this.size=e,this.maxSize=t||e,this.allocateSize=r,this.dataView=new DataView(new ArrayBuffer(e))}ensureSizeOrGrow(e){const t=this.bytePosition+e;if(t>this.size){const e=Math.min(this.maxSize,this.size+this.allocateSize);if(t>e)throw new Error(`Attempting to serialize to BCS, but buffer does not have enough size. Allocated size: ${this.size}, Max size: ${this.maxSize}, Required size: ${t}`);this.size=e;const r=new ArrayBuffer(this.size);new Uint8Array(r).set(new Uint8Array(this.dataView.buffer)),this.dataView=new DataView(r)}}shift(e){return this.bytePosition+=e,this}write8(e){return this.ensureSizeOrGrow(1),this.dataView.setUint8(this.bytePosition,Number(e)),this.shift(1)}write16(e){return this.ensureSizeOrGrow(2),this.dataView.setUint16(this.bytePosition,Number(e),!0),this.shift(2)}write32(e){return this.ensureSizeOrGrow(4),this.dataView.setUint32(this.bytePosition,Number(e),!0),this.shift(4)}write64(e){return toLittleEndian(BigInt(e),8).forEach((e=>this.write8(e))),this}write128(e){return toLittleEndian(BigInt(e),16).forEach((e=>this.write8(e))),this}write256(e){return toLittleEndian(BigInt(e),32).forEach((e=>this.write8(e))),this}writeULEB(e){return function ulebEncode(e){let t=[],r=0;if(0===e)return[0];for(;e>0;)t[r]=127&e,(e>>=7)&&(t[r]|=128),r+=1;return t}(e).forEach((e=>this.write8(e))),this}writeVec(e,t){return this.writeULEB(e.length),Array.from(e).forEach(((r,n)=>t(this,r,n,e.length))),this}*[Symbol.iterator](){for(let e=0;e<this.bytePosition;e++)yield this.dataView.getUint8(e);return this.toBytes()}toBytes(){return new Uint8Array(this.dataView.buffer.slice(0,this.bytePosition))}toString(e){return function encodeStr(e,t){switch(t){case"base58":return toB58(e);case"base64":return toB64(e);case"hex":return dist_toHEX(e);default:throw new Error("Unsupported encoding, supported values are: base64, hex")}}(this.toBytes(),e)}};var a=class{constructor(e){if(this.types=new Map,this.counter=0,e instanceof a)return this.schema=e.schema,void(this.types=new Map(e.types));if(this.schema=e,this.registerAddressType(a.ADDRESS,e.addressLength,e.addressEncoding),this.registerVectorType(e.vectorType),e.types&&e.types.structs)for(let t of Object.keys(e.types.structs))this.registerStructType(t,e.types.structs[t]);if(e.types&&e.types.enums)for(let t of Object.keys(e.types.enums))this.registerEnumType(t,e.types.enums[t]);if(e.types&&e.types.aliases)for(let t of Object.keys(e.types.aliases))this.registerAlias(t,e.types.aliases[t]);!1!==e.withPrimitives&&function registerPrimitives(e){e.registerType(c.U8,(function(e,t){return e.write8(t)}),(function(e){return e.read8()}),(e=>e<256)),e.registerType(c.U16,(function(e,t){return e.write16(t)}),(function(e){return e.read16()}),(e=>e<65536)),e.registerType(c.U32,(function(e,t){return e.write32(t)}),(function(e){return e.read32()}),(e=>e<=4294967296n)),e.registerType(c.U64,(function(e,t){return e.write64(t)}),(function(e){return e.read64()})),e.registerType(c.U128,(function(e,t){return e.write128(t)}),(function(e){return e.read128()})),e.registerType(c.U256,(function(e,t){return e.write256(t)}),(function(e){return e.read256()})),e.registerType(c.BOOL,(function(e,t){return e.write8(t)}),(function(e){return"1"===e.read8().toString(10)})),e.registerType(c.STRING,(function(e,t){return e.writeVec(Array.from(t),((e,t)=>e.write8(t.charCodeAt(0))))}),(function(e){return e.readVec((e=>e.read8())).map((e=>String.fromCharCode(Number(e)))).join("")}),(e=>!0)),e.registerType(c.HEX,(function(e,t){return e.writeVec(Array.from(dist_fromHEX(t)),((e,t)=>e.write8(t)))}),(function(e){let t=e.readVec((e=>e.read8()));return dist_toHEX(new Uint8Array(t))})),e.registerType(c.BASE58,(function(e,t){return e.writeVec(Array.from(fromB58(t)),((e,t)=>e.write8(t)))}),(function(e){let t=e.readVec((e=>e.read8()));return toB58(new Uint8Array(t))})),e.registerType(c.BASE64,(function(e,t){return e.writeVec(Array.from(dist_fromB64(t)),((e,t)=>e.write8(t)))}),(function(e){let t=e.readVec((e=>e.read8()));return toB64(new Uint8Array(t))}))}(this)}tempKey(){return"bcs-struct-"+ ++this.counter}ser(e,t,r){if("string"==typeof e||Array.isArray(e)){const{name:n,params:i}=this.parseTypeName(e);return this.getTypeInterface(n).encode(this,t,r,i)}if("object"==typeof e){const n=this.tempKey();return new a(this).registerStructType(n,e).ser(n,t,r)}throw new Error(`Incorrect type passed into the '.ser()' function. \n${JSON.stringify(e)}`)}de(e,t,r){if("string"==typeof t){if(!r)throw new Error("To pass a string to `bcs.de`, specify encoding");t=function decodeStr(e,t){switch(t){case"base58":return fromB58(e);case"base64":return dist_fromB64(e);case"hex":return dist_fromHEX(e);default:throw new Error("Unsupported encoding, supported values are: base64, hex")}}(t,r)}if("string"==typeof e||Array.isArray(e)){const{name:r,params:n}=this.parseTypeName(e);return this.getTypeInterface(r).decode(this,t,n)}if("object"==typeof e){const n=new a(this),i=this.tempKey();return n.registerStructType(i,e).de(i,t,r)}throw new Error(`Incorrect type passed into the '.de()' function. \n${JSON.stringify(e)}`)}hasType(e){return this.types.has(e)}registerAlias(e,t){return this.types.set(e,t),this}registerType(e,t,r,n=(()=>!0)){const{name:i,params:a}=this.parseTypeName(e);return this.types.set(i,{encode(e,t,r,n){const i=a.reduce(((e,t,r)=>Object.assign(e,{[t]:n[r]})),{});return this._encodeRaw.call(e,new s(r),t,n,i)},decode(e,t,r){const n=a.reduce(((e,t,n)=>Object.assign(e,{[t]:r[n]})),{});return this._decodeRaw.call(e,new o(t),r,n)},_encodeRaw(e,r,o,s){if(n(r))return t.call(this,e,r,o,s);throw new Error(`Validation failed for type ${i}, data: ${r}`)},_decodeRaw(e,t,n){return r.call(this,e,t,n)}}),this}registerAddressType(e,t,r="hex"){switch(r){case"base64":return this.registerType(e,(function encodeAddress(e,t){return dist_fromB64(t).reduce(((e,t)=>e.write8(t)),e)}),(function decodeAddress(e){return toB64(e.readBytes(t))}));case"hex":return this.registerType(e,(function encodeAddress(e,t){return dist_fromHEX(t).reduce(((e,t)=>e.write8(t)),e)}),(function decodeAddress(e){return dist_toHEX(e.readBytes(t))}));default:throw new Error("Unsupported encoding! Use either hex or base64")}}registerVectorType(e){let{name:t,params:r}=this.parseTypeName(e);if(r.length>1)throw new Error("Vector can have only one type parameter; got "+t);return this.registerType(e,(function encodeVector(t,r,n,i){return t.writeVec(r,((t,r)=>{let o=n[0];if(!o)throw new Error(`Incorrect number of type parameters passed a to vector '${e}'`);let{name:s,params:a}=this.parseTypeName(o);if(this.hasType(s))return this.getTypeInterface(s)._encodeRaw.call(this,t,r,a,i);if(!(s in i))throw new Error(`Unable to find a matching type definition for ${s} in vector; make sure you passed a generic`);let{name:c,params:u}=this.parseTypeName(i[s]);return this.getTypeInterface(c)._encodeRaw.call(this,t,r,u,i)}))}),(function decodeVector(t,r,n){return t.readVec((t=>{let i=r[0];if(!i)throw new Error(`Incorrect number of type parameters passed to a vector '${e}'`);let{name:o,params:s}=this.parseTypeName(i);if(this.hasType(o))return this.getTypeInterface(o)._decodeRaw.call(this,t,s,n);if(!(o in n))throw new Error(`Unable to find a matching type definition for ${o} in vector; make sure you passed a generic`);let{name:a,params:c}=this.parseTypeName(n[o]);this.getTypeInterface(a)._decodeRaw.call(this,t,c,n)}))}))}registerStructType(e,t){for(let e in t){let r=this.tempKey(),n=t[e];Array.isArray(n)||"string"==typeof n||(t[e]=r,this.registerStructType(r,n))}let r=Object.freeze(t),n=Object.keys(r),{name:i,params:o}=this.parseTypeName(e);return this.registerType(e,(function encodeStruct(e,t,s,a){if(!t||t.constructor!==Object)throw new Error(`Expected ${i} to be an Object, got: ${t}`);if(s.length!==o.length)throw new Error(`Incorrect number of generic parameters passed; expected: ${o.length}, got: ${s.length}`);for(let c of n){if(!(c in t))throw new Error(`Struct ${i} requires field ${c}:${r[c]}`);const{name:n,params:u}=this.parseTypeName(r[c]);if(o.includes(n)){const r=o.indexOf(n);let{name:u,params:l}=this.parseTypeName(s[r]);if(this.hasType(u)){this.getTypeInterface(u)._encodeRaw.call(this,e,t[c],l,a);continue}if(!(u in a))throw new Error(`Unable to find a matching type definition for ${u} in ${i}; make sure you passed a generic`);let{name:d,params:p}=this.parseTypeName(a[u]);this.getTypeInterface(d)._encodeRaw.call(this,e,t[c],p,a)}else this.getTypeInterface(n)._encodeRaw.call(this,e,t[c],u,a)}return e}),(function decodeStruct(e,t,s){if(t.length!==o.length)throw new Error(`Incorrect number of generic parameters passed; expected: ${o.length}, got: ${t.length}`);let a={};for(let c of n){const{name:n,params:u}=this.parseTypeName(r[c]);if(o.includes(n)){const r=o.indexOf(n);let{name:u,params:l}=this.parseTypeName(t[r]);if(this.hasType(u)){a[c]=this.getTypeInterface(u)._decodeRaw.call(this,e,l,s);continue}if(!(u in s))throw new Error(`Unable to find a matching type definition for ${u} in ${i}; make sure you passed a generic`);let{name:d,params:p}=this.parseTypeName(s[u]);a[c]=this.getTypeInterface(d)._decodeRaw.call(this,e,p,s)}else a[c]=this.getTypeInterface(n)._decodeRaw.call(this,e,u,s)}return a}))}registerEnumType(e,t){for(let e in t){let r=this.tempKey(),n=t[e];null===n||Array.isArray(n)||"string"==typeof n||(t[e]=r,this.registerStructType(r,n))}let r=Object.freeze(t),n=Object.keys(r),{name:i,params:o}=this.parseTypeName(e);return this.registerType(e,(function encodeEnum(e,t,s,a){if(!t)throw new Error(`Unable to write enum "${i}", missing data.\nReceived: "${t}"`);if("object"!=typeof t)throw new Error(`Incorrect data passed into enum "${i}", expected object with properties: "${n.join(" | ")}".\nReceived: "${JSON.stringify(t)}"`);let c=Object.keys(t)[0];if(void 0===c)throw new Error(`Empty object passed as invariant of the enum "${i}"`);let u=n.indexOf(c);if(-1===u)throw new Error(`Unknown invariant of the enum "${i}", allowed values: "${n.join(" | ")}"; received "${c}"`);let l=n[u],d=r[l];if(e.write8(u),null===d)return e;let p=o.indexOf(d),y=-1===p?d:s[p];{let{name:r,params:n}=this.parseTypeName(y);return this.getTypeInterface(r)._encodeRaw.call(this,e,t[c],n,a)}}),(function decodeEnum(e,t,s){let a=e.readULEB(),c=n[a],u=r[c];if(-1===a)throw new Error(`Decoding type mismatch, expected enum "${i}" invariant index, received "${a}"`);if(null===u)return{[c]:!0};let l=o.indexOf(u),d=-1===l?u:t[l];{let{name:t,params:r}=this.parseTypeName(d);return{[c]:this.getTypeInterface(t)._decodeRaw.call(this,e,r,s)}}}))}getTypeInterface(e){let t=this.types.get(e);if("string"==typeof t){let e=[];for(;"string"==typeof t;){if(e.includes(t))throw new Error(`Recursive definition found: ${e.join(" -> ")} -> ${t}`);e.push(t),t=this.types.get(t)}}if(void 0===t)throw new Error(`Type ${e} is not registered`);return t}parseTypeName(e){if(Array.isArray(e)){let[t,...r]=e;return{name:t,params:r}}if("string"!=typeof e)throw new Error(`Illegal type passed as a name of the type: ${e}`);let[t,r]=this.schema.genericSeparators||["<",">"],n=e.indexOf(t),i=Array.from(e).reverse().indexOf(r);if(-1===n&&-1===i)return{name:e,params:[]};if(-1===n||-1===i)throw new Error(`Unclosed generic in name '${e}'`);return{name:e.slice(0,n),params:e.slice(n+1,e.length-i-1).split(",").map((e=>e.trim()))}}},c=a;c.U8="u8",c.U16="u16",c.U32="u32",c.U64="u64",c.U128="u128",c.U256="u256",c.BOOL="bool",c.VECTOR="vector",c.ADDRESS="address",c.STRING="string",c.HEX="hex-string",c.BASE58="base58-string",c.BASE64="base64-string";var u=r(614555),l=r(830036);class StructError extends TypeError{constructor(e,t){let r;const{message:n,explanation:i,...o}=e,{path:s}=e,a=0===s.length?n:`At path: ${s.join(".")} -- ${n}`;super(i??a),null!=i&&(this.cause=a),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>r??(r=[e,...t()])}}function isObject(e){return"object"==typeof e&&null!=e}function print(e){return"symbol"==typeof e?e.toString():"string"==typeof e?JSON.stringify(e):`${e}`}function toFailure(e,t,r,n){if(!0===e)return;!1===e?e={}:"string"==typeof e&&(e={message:e});const{path:i,branch:o}=t,{type:s}=r,{refinement:a,message:c=`Expected a value of type \`${s}\`${a?` with refinement \`${a}\``:""}, but received: \`${print(n)}\``}=e;return{value:n,type:s,refinement:a,key:i[i.length-1],path:i,branch:o,...e,message:c}}function*toFailures(e,t,r,n){(function isIterable(e){return isObject(e)&&"function"==typeof e[Symbol.iterator]})(e)||(e=[e]);for(const i of e){const e=toFailure(i,t,r,n);e&&(yield e)}}function*run(e,t,r={}){const{path:n=[],branch:i=[e],coerce:o=!1,mask:s=!1}=r,a={path:n,branch:i};if(o&&(e=t.coercer(e,a),s&&"type"!==t.type&&isObject(t.schema)&&isObject(e)&&!Array.isArray(e)))for(const r in e)void 0===t.schema[r]&&delete e[r];let c="valid";for(const n of t.validator(e,a))n.explanation=r.message,c="not_valid",yield[n,void 0];for(let[u,l,d]of t.entries(e,a)){const t=run(l,d,{path:void 0===u?n:[...n,u],branch:void 0===u?i:[...i,l],coerce:o,mask:s,message:r.message});for(const r of t)r[0]?(c=null!=r[0].refinement?"not_refined":"not_valid",yield[r[0],void 0]):o&&(l=r[1],void 0===u?e=l:e instanceof Map?e.set(u,l):e instanceof Set?e.add(l):isObject(e)&&(void 0!==l||u in e)&&(e[u]=l))}if("not_valid"!==c)for(const n of t.refiner(e,a))n.explanation=r.message,c="not_refined",yield[n,void 0];"valid"===c&&(yield[void 0,e])}class Struct{constructor(e){const{type:t,schema:r,validator:n,refiner:i,coercer:o=(e=>e),entries:s=function*(){}}=e;this.type=t,this.schema=r,this.entries=s,this.coercer=o,this.validator=n?(e,t)=>toFailures(n(e,t),t,this,e):()=>[],this.refiner=i?(e,t)=>toFailures(i(e,t),t,this,e):()=>[]}assert(e,t){return assert(e,this,t)}create(e,t){return create(e,this,t)}is(e){return dist_is(e,this)}mask(e,t){return mask(e,this,t)}validate(e,t={}){return validate(e,this,t)}}function assert(e,t,r){const n=validate(e,t,{message:r});if(n[0])throw n[0]}function create(e,t,r){const n=validate(e,t,{coerce:!0,message:r});if(n[0])throw n[0];return n[1]}function mask(e,t,r){const n=validate(e,t,{coerce:!0,mask:!0,message:r});if(n[0])throw n[0];return n[1]}function dist_is(e,t){return!validate(e,t)[0]}function validate(e,t,r={}){const n=run(e,t,r),i=function shiftIterator(e){const{done:t,value:r}=e.next();return t?void 0:r}(n);if(i[0]){return[new StructError(i[0],(function*(){for(const e of n)e[0]&&(yield e[0])})),void 0]}return[void 0,i[1]]}function dist_assign(...e){const t="type"===e[0].type,r=e.map((e=>e.schema)),n=Object.assign({},...r);return t?type(n):object(n)}function dist_define(e,t){return new Struct({type:e,schema:null,validator:t})}function any(){return dist_define("any",(()=>!0))}function array(e){return new Struct({type:"array",schema:e,*entries(t){if(e&&Array.isArray(t))for(const[r,n]of t.entries())yield[r,n,e]},coercer:e=>Array.isArray(e)?e.slice():e,validator:e=>Array.isArray(e)||`Expected an array value, but received: ${print(e)}`})}function dist_boolean(){return dist_define("boolean",(e=>"boolean"==typeof e))}function integer(){return dist_define("integer",(e=>"number"==typeof e&&!isNaN(e)&&Number.isInteger(e)||`Expected an integer, but received: ${print(e)}`))}function literal(e){const t=print(e),r=typeof e;return new Struct({type:"literal",schema:"string"===r||"number"===r||"boolean"===r?e:null,validator:r=>r===e||`Expected the literal \`${t}\`, but received: ${print(r)}`})}function never(){return dist_define("never",(()=>!1))}function nullable(e){return new Struct({...e,validator:(t,r)=>null===t||e.validator(t,r),refiner:(t,r)=>null===t||e.refiner(t,r)})}function number(){return dist_define("number",(e=>"number"==typeof e&&!isNaN(e)||`Expected a number, but received: ${print(e)}`))}function object(e){const t=e?Object.keys(e):[],r=never();return new Struct({type:"object",schema:e||null,*entries(n){if(e&&isObject(n)){const i=new Set(Object.keys(n));for(const r of t)i.delete(r),yield[r,n[r],e[r]];for(const e of i)yield[e,n[e],r]}},validator:e=>isObject(e)||`Expected an object, but received: ${print(e)}`,coercer:e=>isObject(e)?{...e}:e})}function optional(e){return new Struct({...e,validator:(t,r)=>void 0===t||e.validator(t,r),refiner:(t,r)=>void 0===t||e.refiner(t,r)})}function record(e,t){return new Struct({type:"record",schema:null,*entries(r){if(isObject(r))for(const n in r){const i=r[n];yield[n,n,e],yield[n,i,t]}},validator:e=>isObject(e)||`Expected an object, but received: ${print(e)}`})}function string(){return dist_define("string",(e=>"string"==typeof e||`Expected a string, but received: ${print(e)}`))}function tuple(e){const t=never();return new Struct({type:"tuple",schema:null,*entries(r){if(Array.isArray(r)){const n=Math.max(e.length,r.length);for(let i=0;i<n;i++)yield[i,r[i],e[i]||t]}},validator:e=>Array.isArray(e)||`Expected an array, but received: ${print(e)}`})}function type(e){const t=Object.keys(e);return new Struct({type:"type",schema:e,*entries(r){if(isObject(r))for(const n of t)yield[n,r[n],e[n]]},validator:e=>isObject(e)||`Expected an object, but received: ${print(e)}`,coercer:e=>isObject(e)?{...e}:e})}function union(e){const t=e.map((e=>e.type)).join(" | ");return new Struct({type:"union",schema:null,coercer(t){for(const r of e){const[e,n]=r.validate(t,{coerce:!0});if(!e)return n}return t},validator(r,n){const i=[];for(const t of e){const[...e]=run(r,t,n),[o]=e;if(!o[0])return[];for(const[t]of e)t&&i.push(t)}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${print(r)}`,...i]}})}function unknown(){return dist_define("unknown",(()=>!0))}var d=r(759499),p=r.n(d),y=r(787091),g=r(239585),__accessCheck=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},__privateGet=(e,t,r)=>(__accessCheck(e,t,"read from private field"),r?r.call(e):t.get(e)),__privateAdd=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},__privateSet=(e,t,r,n)=>(__accessCheck(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),__privateMethod=(e,t,r)=>(__accessCheck(e,t,"access private method"),r),m=string(),b=string(),w=string(),v=string(),E=string(),S=string(),A=union([object({AddressOwner:E}),object({ObjectOwner:E}),object({Shared:object({initial_shared_version:number()})}),literal("Immutable")]),x=dist_define("SuiJsonValue",(()=>!0));function isValidTransactionDigest(e){try{return 32===fromB58(e).length}catch(e){return!1}}var _=32;function isValidSuiAddress(e){return function isHex(e){return/^(0x|0X)?[a-fA-F0-9]+$/.test(e)&&e.length%2==0}(e)&&function getHexByteLength(e){return/^(0x|0X)/.test(e)?(e.length-2)/2:e.length/2}(e)===_}function isValidSuiObjectId(e){return isValidSuiAddress(e)}function normalizeSuiAddress(e,t=!1){let r=e.toLowerCase();return!t&&r.startsWith("0x")&&(r=r.slice(2)),`0x${r.padStart(2*_,"0")}`}function normalizeSuiObjectId(e,t=!1){return normalizeSuiAddress(e,t)}union([string(),literal("package")]);var I=object({digest:m,objectId:string(),version:union([number(),string()])}),T=object({payment:array(I),owner:string(),price:string(),budget:string()}),P=dist_assign(I,object({type:string(),owner:A,previousTransaction:m})),M=record(string(),any()),B=record(string(),string()),O=object({type:string(),fields:M,hasPublicTransfer:dist_boolean()}),k=object({disassembled:B}),C=union([dist_assign(O,object({dataType:literal("moveObject")})),dist_assign(k,object({dataType:literal("package")}))]),N=(object({type:string(),hasPublicTransfer:dist_boolean(),version:S,bcsBytes:array(number())}),object({id:v,moduleMap:record(string(),string())})),j=union([dist_assign(O,object({dataType:literal("moveObject")})),dist_assign(N,object({dataType:literal("package")}))]),R=(BigInt(1e9),string()),U=object({code:string(),error:optional(string()),object_id:optional(v),version:optional(S),digest:optional(R)}),D=object({data:nullable(record(string(),string())),error:nullable(U)}),L=union([D,optional(record(string(),string()))]),K=object({objectId:v,version:S,digest:R,type:optional(string()),content:optional(C),bcs:optional(j),owner:optional(A),previousTransaction:optional(m),storageRebate:optional(string()),display:optional(L)}),H=(object({showType:optional(dist_boolean()),showContent:optional(dist_boolean()),showBcs:optional(dist_boolean()),showOwner:optional(dist_boolean()),showPreviousTransaction:optional(dist_boolean()),showStorageRebate:optional(dist_boolean()),showDisplay:optional(dist_boolean())}),union([literal("Exists"),literal("notExists"),literal("Deleted")]),array(P),object({data:optional(K),error:optional(U)}));function getSuiObjectData(e){return e.data}function getObjectReference(e){if("reference"in e)return e.reference;const t=getSuiObjectData(e);return t?{objectId:t.objectId,version:t.version,digest:t.digest}:function getObjectDeletedResponse(e){if(e.error&&"object_id"in e.error&&"version"in e.error&&"digest"in e.error){const t=e.error;return{objectId:t.object_id,version:t.version,digest:t.digest}}}(e)}function getObjectOwner(e){return dist_is(e,A)?e:getSuiObjectData(e)?.owner}var F=object({objectId:v,atCheckpoint:optional(number())}),q=object({data:array(H),nextCursor:union([nullable(v),nullable(F)]),hasNextPage:dist_boolean()}),z=union([object({details:K,status:literal("VersionFound")}),object({details:v,status:literal("ObjectNotExists")}),object({details:I,status:literal("ObjectDeleted")}),object({details:tuple([v,number()]),status:literal("VersionNotFound")}),object({details:object({asked_version:number(),latest_version:number(),object_id:v}),status:literal("VersionTooHigh")})]),V=object({txDigest:m,eventSeq:S}),$=object({id:V,packageId:v,transactionModule:string(),sender:E,type:string(),parsedJson:optional(record(string(),any())),bcs:optional(string()),timestampMs:optional(string())}),G=object({data:array($),nextCursor:nullable(V),hasNextPage:dist_boolean()}),W=object({subscription:number(),result:$});var J=string(),Z=object({epoch:J,storage_charge:string(),computation_charge:string(),storage_rebate:string(),epoch_start_timestamp_ms:optional(string())}),X=object({epoch:J,round:string(),commit_timestamp_ms:string()}),Y=object({objects:array(v)}),Q=union([literal("GasCoin"),object({Input:number()}),object({Result:number()}),object({NestedResult:tuple([number(),number()])})]),ee=object({arguments:optional(array(Q)),type_arguments:optional(array(string())),package:v,module:string(),function:string()}),te=union([object({MoveCall:ee}),object({TransferObjects:tuple([array(Q),Q])}),object({SplitCoins:tuple([Q,array(Q)])}),object({MergeCoins:tuple([Q,array(Q)])}),object({Publish:union([tuple([k,array(v)]),array(v)])}),object({Upgrade:union([tuple([k,array(v),v,Q]),tuple([array(v),v,Q])])}),object({MakeMoveVec:tuple([nullable(string()),array(Q)])})]),re=union([object({type:literal("pure"),valueType:optional(string()),value:x}),object({type:literal("object"),objectType:literal("immOrOwnedObject"),objectId:v,version:S,digest:R}),object({type:literal("object"),objectType:literal("sharedObject"),objectId:v,initialSharedVersion:S,mutable:dist_boolean()})]),ne=object({transactions:array(te),inputs:array(re)}),ie=union([dist_assign(Z,object({kind:literal("ChangeEpoch")})),dist_assign(X,object({kind:literal("ConsensusCommitPrologue")})),dist_assign(Y,object({kind:literal("Genesis")})),dist_assign(ne,object({kind:literal("ProgrammableTransaction")}))]),oe=object({messageVersion:literal("v1"),transaction:ie,sender:E,gasData:T}),se=string(),ae=(object({epoch:J,signature:union([se,array(se)]),signers_map:array(number())}),object({computationCost:string(),storageCost:string(),storageRebate:string(),nonRefundableStorageFee:string()})),ce=object({status:union([literal("success"),literal("failure")]),error:optional(string())}),ue=object({owner:A,reference:I}),le=object({objectId:v,sequenceNumber:S}),de=object({messageVersion:literal("v1"),status:ce,executedEpoch:J,modifiedAtVersions:optional(array(le)),gasUsed:ae,sharedObjects:optional(array(I)),transactionDigest:m,created:optional(array(ue)),mutated:optional(array(ue)),unwrapped:optional(array(ue)),deleted:optional(array(I)),unwrapped_then_deleted:optional(array(I)),wrapped:optional(array(I)),gasObject:ue,eventsDigest:optional(w),dependencies:optional(array(m))}),he=array($),pe=tuple([array(number()),string()]),ye=tuple([Q,array(number()),string()]),me=object({mutableReferenceOutputs:optional(array(ye)),returnValues:optional(array(pe))}),be=object({effects:de,events:he,results:optional(array(me)),error:optional(string())}),we=string(),ve=object({data:oe,txSignatures:array(string())}),Ee=object({type:literal("published"),packageId:v,version:S,digest:R,modules:array(string())}),Se=object({type:literal("transferred"),sender:E,recipient:A,objectType:string(),objectId:v,version:S,digest:R}),Ae=object({type:literal("mutated"),sender:E,owner:A,objectType:string(),objectId:v,version:S,previousVersion:S,digest:R}),xe=object({type:literal("deleted"),sender:E,objectType:string(),objectId:v,version:S}),_e=object({type:literal("wrapped"),sender:E,objectType:string(),objectId:v,version:S}),Ie=object({type:literal("created"),sender:E,owner:A,objectType:string(),objectId:v,version:S,digest:R}),Te=union([Ee,Se,Ae,xe,_e,Ie]),Pe=object({owner:A,coinType:string(),amount:string()}),Me=object({digest:m,transaction:optional(ve),effects:optional(de),events:optional(he),timestampMs:optional(string()),checkpoint:optional(string()),confirmedLocalExecution:optional(dist_boolean()),objectChanges:optional(array(Te)),balanceChanges:optional(array(Pe)),errors:optional(array(string()))}),Be=(object({showInput:optional(dist_boolean()),showEffects:optional(dist_boolean()),showEvents:optional(dist_boolean()),showObjectChanges:optional(dist_boolean()),showBalanceChanges:optional(dist_boolean())}),object({data:array(Me),nextCursor:nullable(m),hasNextPage:dist_boolean()})),Oe=object({effects:de,events:he,objectChanges:array(Te),balanceChanges:array(Pe),input:optional(oe)});function getOption(e){if("object"!=typeof e||null===e||!("type"in e)||!e.type.startsWith("0x1::option::Option<"))return e}var ke="0x1",Ce="0x2::sui::SUI";normalizeSuiObjectId("0x6");var Ne=object({decimals:number(),name:string(),symbol:string(),description:string(),iconUrl:nullable(string()),id:nullable(v)}),je=class{static isDelegationSuiObject(e){return"type"in e&&e.type===je.SUI_OBJECT_TYPE}constructor(e){this.suiObject=e}nextRewardUnclaimedEpoch(){return this.suiObject.data.fields.next_reward_unclaimed_epoch}activeDelegation(){return BigInt(getOption(this.suiObject.data.fields.active_delegation)||0)}delegateAmount(){return this.suiObject.data.fields.delegate_amount}endingEpoch(){return getOption(this.suiObject.data.fields.ending_epoch)}validatorAddress(){return this.suiObject.data.fields.validator_address}isActive(){return this.activeDelegation()>0&&!this.endingEpoch()}hasUnclaimedRewards(e){return this.nextRewardUnclaimedEpoch()<=e&&(this.isActive()||(this.endingEpoch()||0)>e)}};je.SUI_OBJECT_TYPE="0x2::delegation::Delegation";var Re="vector",Ue={kind:"TransactionKind",sender:c.ADDRESS,gasData:"GasData",expiration:"TransactionExpiration"},De={enums:{"Option<T>":{None:null,Some:"T"},ObjectArg:{ImmOrOwned:"SuiObjectRef",Shared:"SharedObjectRef"},CallArg:{Pure:[Re,c.U8],Object:"ObjectArg",ObjVec:[Re,"ObjectArg"]},TypeTag:{bool:null,u8:null,u64:null,u128:null,address:null,signer:null,vector:"TypeTag",struct:"StructTag",u16:null,u32:null,u256:null},TransactionKind:{ProgrammableTransaction:"ProgrammableTransaction",ChangeEpoch:null,Genesis:null,ConsensusCommitPrologue:null},TransactionExpiration:{None:null,Epoch:c.U64},TransactionData:{V1:"TransactionDataV1"}},structs:{SuiObjectRef:{objectId:c.ADDRESS,version:c.U64,digest:"ObjectDigest"},SharedObjectRef:{objectId:c.ADDRESS,initialSharedVersion:c.U64,mutable:c.BOOL},StructTag:{address:c.ADDRESS,module:c.STRING,name:c.STRING,typeParams:[Re,"TypeTag"]},GasData:{payment:[Re,"SuiObjectRef"],owner:c.ADDRESS,price:c.U64,budget:c.U64},SenderSignedData:{data:"TransactionData",txSignatures:[Re,[Re,c.U8]]},TransactionDataV1:Ue},aliases:{ObjectDigest:c.BASE58}},Le=new c({genericSeparators:["<",">"],vectorType:"vector",addressLength:32,addressEncoding:"hex",types:De});Le.registerType("utf8string",((e,t)=>{const r=Array.from((new TextEncoder).encode(t));return e.writeVec(r,((e,t)=>e.write8(t)))}),(e=>{let t=e.readVec((e=>e.read8()));return(new TextDecoder).decode(new Uint8Array(t))}));var Ke=object({amount:number(),id:v,transferTxDigest:m}),He=(object({transferredGasObjects:array(Ke),error:nullable(string())}),array(union([string(),object({Object:string()})]))),Fe=object({address:string(),name:string()}),qe=union([literal("Private"),literal("Public"),literal("Friend")]),ze=object({abilities:array(string())}),Ve=object({constraints:ze,isPhantom:dist_boolean()}),$e=object({TypeParameter:number()}),Ge=tuple([object({module:string(),package:string(),function:string()}),string()]),We=object({rank3Days:array(Ge),rank7Days:array(Ge),rank30Days:array(Ge)});function isSuiMoveNormalizedType(e){if(!e)return!1;if("string"==typeof e)return!0;if(dist_is(e,$e))return!0;if(isSuiMoveNormalizedStructType(e))return!0;if("object"!=typeof e)return!1;const t=e;return!!dist_is(t.Reference,Je)||(!!dist_is(t.MutableReference,Je)||!!dist_is(t.Vector,Je))}var Je=dist_define("SuiMoveNormalizedType",isSuiMoveNormalizedType);function isSuiMoveNormalizedStructType(e){if(!e||"object"!=typeof e)return!1;const t=e;if(!t.Struct||"object"!=typeof t.Struct)return!1;const r=t.Struct;return!("string"!=typeof r.address||"string"!=typeof r.module||"string"!=typeof r.name||!Array.isArray(r.typeArguments)||!r.typeArguments.every((e=>isSuiMoveNormalizedType(e))))}dist_define("SuiMoveNormalizedStructType",isSuiMoveNormalizedStructType);var Ze=object({visibility:qe,isEntry:dist_boolean(),typeParameters:array(ze),parameters:array(Je),return:array(Je)}),Xe=object({name:string(),type:Je}),Ye=object({abilities:ze,typeParameters:array(Ve),fields:array(Xe)}),Qe=object({fileFormatVersion:number(),address:string(),name:string(),friends:array(Fe),structs:record(string(),Ye),exposedFunctions:record(string(),Ze)}),et=record(string(),Qe);function extractMutableReference(e){return"object"==typeof e&&"MutableReference"in e?e.MutableReference:void 0}function extractStructTag(e){if("object"==typeof e&&"Struct"in e)return e;const t=function extractReference(e){return"object"==typeof e&&"Reference"in e?e.Reference:void 0}(e),r=extractMutableReference(e);return"object"==typeof t&&"Struct"in t?t:"object"==typeof r&&"Struct"in r?r:void 0}var tt=object({apy:number(),address:E}),rt=object({epoch:string(),apys:array(tt)}),nt=(object({value:number()}),object({stakedSuiId:v,stakeRequestEpoch:J,stakeActiveEpoch:J,principal:string(),status:union([literal("Active"),literal("Pending"),literal("Unstaked")]),estimatedReward:optional(string())})),it=object({validatorAddress:E,stakingPool:v,stakes:array(nt)}),ot=object({balance:object({value:number()}),distribution_counter:number(),current_distribution_amount:number(),stake_subsidy_period_length:number(),stake_subsidy_decrease_rate:number()}),st=(object({type:string(),fields:ot}),object({value:number()}),object({id:string(),size:number(),head:object({vec:array()}),tail:object({vec:array()})})),at=(object({id:string(),size:number()}),object({type:string(),fields:st}),object({exchangeRates:object({id:string(),size:number()}),id:string(),pendingStake:number(),pendingPoolTokenWithdraw:number(),pendingTotalSuiWithdraw:number(),poolTokenBalance:number(),rewardsPool:object({value:number()}),activationEpoch:object({vec:array()}),deactivationEpoch:object({vec:array()}),suiBalance:number()})),ct=(object({type:string(),fields:at}),object({epoch:J,validators:array(tuple([we,string()]))})),ut=object({suiAddress:E,protocolPubkeyBytes:string(),networkPubkeyBytes:string(),workerPubkeyBytes:string(),proofOfPossessionBytes:string(),operationCapId:string(),name:string(),description:string(),imageUrl:string(),projectUrl:string(),p2pAddress:string(),netAddress:string(),primaryAddress:string(),workerAddress:string(),nextEpochProtocolPubkeyBytes:nullable(string()),nextEpochProofOfPossession:nullable(string()),nextEpochNetworkPubkeyBytes:nullable(string()),nextEpochWorkerPubkeyBytes:nullable(string()),nextEpochNetAddress:nullable(string()),nextEpochP2pAddress:nullable(string()),nextEpochPrimaryAddress:nullable(string()),nextEpochWorkerAddress:nullable(string()),votingPower:string(),gasPrice:string(),commissionRate:string(),nextEpochStake:string(),nextEpochGasPrice:string(),nextEpochCommissionRate:string(),stakingPoolId:string(),stakingPoolActivationEpoch:nullable(string()),stakingPoolDeactivationEpoch:nullable(string()),stakingPoolSuiBalance:string(),rewardsPool:string(),poolTokenBalance:string(),pendingStake:string(),pendingPoolTokenWithdraw:string(),pendingTotalSuiWithdraw:string(),exchangeRatesId:string(),exchangeRatesSize:string()}),dt=object({epoch:string(),protocolVersion:string(),systemStateVersion:string(),storageFundTotalObjectStorageRebates:string(),storageFundNonRefundableBalance:string(),referenceGasPrice:string(),safeMode:dist_boolean(),safeModeStorageRewards:string(),safeModeComputationRewards:string(),safeModeStorageRebates:string(),safeModeNonRefundableStorageFee:string(),epochStartTimestampMs:string(),epochDurationMs:string(),stakeSubsidyStartEpoch:string(),maxValidatorCount:string(),minValidatorJoiningStake:string(),validatorLowStakeThreshold:string(),validatorVeryLowStakeThreshold:string(),validatorLowStakeGracePeriod:string(),stakeSubsidyBalance:string(),stakeSubsidyDistributionCounter:string(),stakeSubsidyCurrentDistributionAmount:string(),stakeSubsidyPeriodLength:string(),stakeSubsidyDecreaseRate:number(),totalStake:string(),activeValidators:array(ut),pendingActiveValidatorsId:string(),pendingActiveValidatorsSize:string(),pendingRemovals:array(string()),stakingPoolMappingsId:string(),stakingPoolMappingsSize:string(),inactivePoolsId:string(),inactivePoolsSize:string(),validatorCandidatesId:string(),validatorCandidatesSize:string(),atRiskValidators:array(tuple([E,string()])),validatorReportRecords:array(tuple([E,array(E)]))}),ht=object({coinType:string(),coinObjectId:v,version:string(),digest:m,balance:string(),lockedUntilEpoch:optional(nullable(number())),previousTransaction:m}),ft=object({data:array(ht),nextCursor:nullable(v),hasNextPage:dist_boolean()}),pt=object({coinType:string(),coinObjectCount:number(),totalBalance:string(),lockedBalance:object({epochId:optional(number()),number:optional(number())})}),yt=object({value:string()}),mt=object({lastCheckpointId:string(),epochEndTimestamp:string(),protocolVersion:string(),referenceGasPrice:string(),totalStake:string(),storageFundReinvestment:string(),storageCharge:string(),storageRebate:string(),storageFundBalance:string(),stakeSubsidyAmount:string(),totalGasFees:string(),totalStakeRewardsDistributed:string(),leftoverStorageFundInflow:string()}),bt=object({epoch:string(),validators:array(ut),epochTotalTransactions:string(),firstCheckpointId:string(),epochStartTimestamp:string(),endOfEpochInfo:nullable(mt)}),wt=object({data:array(bt),nextCursor:nullable(string()),hasNextPage:dist_boolean()}),vt=object({computationCost:string(),storageCost:string(),storageRebate:string(),nonRefundableStorageFee:string()}),Et=(string(),string()),St=(object({digest:array(number())}),any()),At=string(),xt=object({nextEpochCommittee:array(tuple([string(),string()])),nextEpochProtocolVersion:string(),epochCommitments:array(St)}),_t=(object({transaction:m,effects:b}),object({epoch:string(),sequenceNumber:string(),digest:Et,networkTotalTransactions:string(),previousDigest:optional(Et),epochRollingGasCostSummary:vt,timestampMs:string(),endOfEpochData:optional(xt),validatorSignature:optional(At),transactions:array(m),checkpointCommitments:array(St)})),It=object({data:array(_t),nextCursor:nullable(string()),hasNextPage:dist_boolean()}),Tt={ED25519:0,Secp256k1:1};function toSerializedSignature({signature:e,signatureScheme:t,pubKey:r}){const n=new Uint8Array(1+e.length+r.toBytes().length);return n.set([Tt[t]]),n.set(e,1),n.set(r.toBytes(),1+e.length),toB64(n)}var Pt=class{constructor(e){if("string"==typeof e?this.data=dist_fromB64(e):e instanceof Uint8Array?this.data=e:this.data=Uint8Array.from(e),32!==this.data.length)throw new Error(`Invalid public key input. Expected 32 bytes, got ${this.data.length}`)}equals(e){return bytesEqual(this.toBytes(),e.toBytes())}toBase64(){return toB64(this.toBytes())}toBytes(){return this.data}toString(){return this.toBase64()}toSuiAddress(){let e=new Uint8Array(33);return e.set([Tt.ED25519]),e.set(this.toBytes(),1),normalizeSuiAddress((0,l.My)((0,u.S)(e,{dkLen:32})).slice(0,2*_))}};function bytesEqual(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}Pt.SIZE=32;var Mt=class{constructor(e){if("string"==typeof e?this.data=dist_fromB64(e):e instanceof Uint8Array?this.data=e:this.data=Uint8Array.from(e),33!==this.data.length)throw new Error(`Invalid public key input. Expected 33 bytes, got ${this.data.length}`)}equals(e){return bytesEqual(this.toBytes(),e.toBytes())}toBase64(){return toB64(this.toBytes())}toBytes(){return this.data}toString(){return this.toBase64()}toSuiAddress(){let e=new Uint8Array(34);return e.set([Tt.Secp256k1]),e.set(this.toBytes(),1),normalizeSuiAddress((0,l.My)((0,u.S)(e,{dkLen:32})).slice(0,2*_))}};Mt.SIZE=33;var Bt,Ot=class extends Error{constructor(e){super(e.cause?`RPC Error: ${e.cause.message}`:"Unknown RPC Error",{cause:e.cause}),this.req=e.req,this.code=e.code,this.data=e.data}},kt=class extends Error{constructor(e){super("RPC Validation Error: The response returned from RPC server does not match the TypeScript definition. This is likely because the SDK version is not compatible with the RPC server.",{cause:e.cause}),this.req=e.req,this.result=e.result,this.message=this.toString()}toString(){let e=super.toString();return this.cause&&(e+=`\nCause: ${this.cause}`),this.result&&(e+=`\nReponse Received: ${JSON.stringify(this.result,null,2)}`),e}},Ct=class extends Error{},Nt=object({jsonrpc:literal("2.0"),id:string(),result:any()}),jt=object({jsonrpc:literal("2.0"),id:string(),error:object({code:any(),message:string(),data:optional(any())})}),Rt=class{constructor(e,t){this.rpcClient=new(p())((async(r,n)=>{const i={method:"POST",body:r,headers:{"Content-Type":"application/json","Client-Sdk-Type":"typescript","Client-Sdk-Version":"0.34.1","Client-Target-Api-Version":"1.2.0",...t}};try{let t=await fetch(e,i);const r=await t.text();if(t.ok)n(null,r);else{const e="text/html"===t.headers.get("content-type");n(new Error(`${t.status} ${t.statusText}${e?"":`: ${r}`}`))}}catch(e){n(e)}}),{})}async requestWithType(e,t,r){const n={method:e,args:t},i=await this.request(e,t);if(dist_is(i,jt))throw new Ot({req:n,code:i.error.code,data:i.error.data,cause:new Error(i.error.message)});if(dist_is(i,Nt)){const[e]=validate(i.result,r);return e?(console.warn(new kt({req:n,result:i.result,cause:e})),i.result):i.result}throw new Ot({req:n,data:i})}async request(e,t){return new Promise(((r,n)=>{this.rpcClient.request(e,t,((e,t)=>{e?n(e):r(t)}))}))}},Ut=union([literal("DynamicField"),literal("DynamicObject")]),Dt=object({type:string(),value:any()}),Lt=object({name:Dt,bcsName:string(),type:Ut,objectType:string(),objectId:v,version:number(),digest:string()}),Kt=object({data:array(Lt),nextCursor:nullable(v),hasNextPage:dist_boolean()}),Ht={connectTimeout:15e3,callTimeout:3e4,reconnectInterval:3e3,maxReconnects:5},Ft="suix_subscribeEvent",qt=class{constructor(e,t=Ht){this.endpoint=e,this.options=t,this.connectionState=0,this.connectionTimeout=null,this.isSetup=!1,this.connectionPromise=null,this.eventSubscriptions=new Map,this.endpoint.startsWith("http")&&(this.endpoint=((e,t)=>{const r=new URL(e);return r.protocol=r.protocol.replace("http","ws"),t&&(r.port=t.toString()),r.toString()})(this.endpoint)),this.rpcClient=new y.K(this.endpoint,{reconnect_interval:this.options.reconnectInterval,max_reconnects:this.options.maxReconnects,autoconnect:!1})}setupSocket(){this.isSetup||(this.rpcClient.on("open",(()=>{this.connectionTimeout&&(clearTimeout(this.connectionTimeout),this.connectionTimeout=null),this.connectionState=2,this.rpcClient.socket.on("message",this.onSocketMessage.bind(this))})),this.rpcClient.on("close",(()=>{this.connectionState=0})),this.rpcClient.on("error",console.error),this.isSetup=!0)}onSocketMessage(e){const t=JSON.parse(e),r=t.params;if(t.method===Ft)if((e=>e&&"subscription"in e&&"number"==typeof e.subscription&&"result"in e&&"object"==typeof e.result)(r)){const e=this.eventSubscriptions.get(r.subscription);e&&e.onMessage(r.result)}else if(dist_is(r,W)){const e=this.eventSubscriptions.get(r.subscription);e&&e.onMessage(r.result)}}async connect(){return this.connectionPromise?this.connectionPromise:2===this.connectionState?Promise.resolve():(this.setupSocket(),this.rpcClient.connect(),this.connectionState=1,this.connectionPromise=new Promise(((e,t)=>{this.connectionTimeout=setTimeout((()=>t(new Error("timeout"))),this.options.connectTimeout),this.rpcClient.once("open",(()=>{this.refreshSubscriptions(),this.connectionPromise=null,e()})),this.rpcClient.once("error",(e=>{this.connectionPromise=null,t(e)}))})),this.connectionPromise)}async refreshSubscriptions(){if(0!==this.eventSubscriptions.size)try{let e=new Map;(await Promise.all(Array.from(this.eventSubscriptions.values()).map((async e=>{const t=e.onMessage,r=e.filter;if(!r||!t)return Promise.resolve(null);return{id:await this.subscribeEvent(r,t),onMessage:t,filter:r}})))).forEach((t=>{if(null===t)return;const r=t.filter,n=t.onMessage;e.set(t.id,{filter:r,onMessage:n})})),this.eventSubscriptions=e}catch(e){throw new Error(`error refreshing event subscriptions: ${e}`)}}async subscribeEvent(e,t){try{2!==this.connectionState&&await this.connect();let r=await this.rpcClient.call(Ft,[e],this.options.callTimeout);return this.eventSubscriptions.set(r,{filter:e,onMessage:t}),r}catch(t){throw new Error(`Error subscribing to event: ${JSON.stringify(t,null,2)}, filter: ${JSON.stringify(e)}`)}}async unsubscribeEvent(e){try{2!==this.connectionState&&await this.connect();let t=await this.rpcClient.call("suix_unsubscribeEvent",[e],this.options.callTimeout);return this.eventSubscriptions.delete(e)||t}catch(t){throw new Error(`Error unsubscribing from event: ${t}, subscription: ${e}`)}}};var zt=class{constructor(e){__privateAdd(this,Bt,void 0),__privateSet(this,Bt,e)}get fullnode(){return __privateGet(this,Bt).fullnode}get websocket(){return __privateGet(this,Bt).websocket||__privateGet(this,Bt).fullnode}get faucet(){return __privateGet(this,Bt).faucet}};Bt=new WeakMap;new zt({fullnode:"http://127.0.0.1:9000",faucet:"http://127.0.0.1:9123/gas"});var Vt=new zt({fullnode:"https://fullnode.devnet.sui.io:443/",faucet:"https://faucet.devnet.sui.io/gas"});new zt({fullnode:"https://fullnode.testnet.sui.io:443/",faucet:"https://faucet.testnet.sui.io/gas"}),new zt({fullnode:"https://fullnode.mainnet.sui.io:443/"});function dist_create(e,t){return create(e,t)}var $t=Symbol("transaction-argument-type"),Gt=/^vector<(.+)>$/,Wt=/^([^:]+)::([^:]+)::([^<]+)(<(.+)>)?/,Jt=class{static parseFromStr(e,t=!1){if("address"===e)return{address:null};if("bool"===e)return{bool:null};if("u8"===e)return{u8:null};if("u16"===e)return{u16:null};if("u32"===e)return{u32:null};if("u64"===e)return{u64:null};if("u128"===e)return{u128:null};if("u256"===e)return{u256:null};if("signer"===e)return{signer:null};const r=e.match(Gt);if(r)return{vector:Jt.parseFromStr(r[1],t)};const n=e.match(Wt);if(n){return{struct:{address:t?normalizeSuiAddress(n[1]):n[1],module:n[2],name:n[3],typeParams:void 0===n[5]?[]:Jt.parseStructTypeArgs(n[5],t)}}}throw new Error(`Encountered unexpected token when parsing type args for ${e}`)}static parseStructTypeArgs(e,t=!1){const r=[];let n="",i=0;for(let t=0;t<e.length;t++){const o=e[t];"<"===o&&i++,">"===o&&i--,0!==i||","!==o?n+=o:(r.push(n.trim()),n="")}return r.push(n.trim()),r.map((e=>Jt.parseFromStr(e,t)))}static tagToString(e){if("bool"in e)return"bool";if("u8"in e)return"u8";if("u16"in e)return"u16";if("u32"in e)return"u32";if("u64"in e)return"u64";if("u128"in e)return"u128";if("u256"in e)return"u256";if("address"in e)return"address";if("signer"in e)return"signer";if("vector"in e)return`vector<${Jt.tagToString(e.vector)}>`;if("struct"in e){const t=e.struct,r=t.typeParams.map(Jt.tagToString).join(", ");return`${t.address}::${t.module}::${t.name}${r?`<${r}>`:""}`}throw new Error("Invalid TypeTag")}},Zt=object({kind:literal("Input"),index:integer(),value:optional(any()),type:optional(union([literal("pure"),literal("object")]))}),Xt=[Zt,object({kind:literal("GasCoin")}),object({kind:literal("Result"),index:integer()}),object({kind:literal("NestedResult"),index:integer(),resultIndex:integer()})],Yt=union([...Xt]),Qt=union([...Xt]);Qt[$t]={kind:"object"};var er,PureTransactionArgument=e=>{const t=union([...Xt]);return t[$t]={kind:"pure",type:e},t},tr=object({kind:literal("MoveCall"),target:dist_define("target",string().validator),typeArguments:array(string()),arguments:array(Yt)}),rr=object({kind:literal("TransferObjects"),objects:array(Qt),address:PureTransactionArgument(c.ADDRESS)}),nr=object({kind:literal("SplitCoins"),coin:Qt,amounts:array(PureTransactionArgument("u64"))}),ir=object({kind:literal("MergeCoins"),destination:Qt,sources:array(Qt)}),sr=object({kind:literal("MakeMoveVec"),type:optional((er=record(string(),unknown()),union([object({None:union([literal(!0),literal(null)])}),object({Some:er})]))),objects:array(Qt)}),ar=object({kind:literal("Publish"),modules:array(array(integer())),dependencies:array(v)}),cr=object({kind:literal("Upgrade"),modules:array(array(integer())),dependencies:array(v),packageId:v,ticket:Qt}),ur=[tr,rr,nr,ir,ar,cr,sr],lr=union([...ur]);var dr={MoveCall:e=>dist_create({kind:"MoveCall",target:e.target,arguments:e.arguments??[],typeArguments:e.typeArguments??[]},tr),TransferObjects:(e,t)=>dist_create({kind:"TransferObjects",objects:e,address:t},rr),SplitCoins:(e,t)=>dist_create({kind:"SplitCoins",coin:e,amounts:t},nr),MergeCoins:(e,t)=>dist_create({kind:"MergeCoins",destination:e,sources:t},ir),Publish:({modules:e,dependencies:t})=>dist_create({kind:"Publish",modules:e.map((e=>"string"==typeof e?Array.from(dist_fromB64(e)):e)),dependencies:t.map((e=>normalizeSuiObjectId(e)))},ar),Upgrade:({modules:e,dependencies:t,packageId:r,ticket:n})=>dist_create({kind:"Upgrade",modules:e.map((e=>"string"==typeof e?Array.from(dist_fromB64(e)):e)),dependencies:t.map((e=>normalizeSuiObjectId(e))),packageId:r,ticket:n},cr),MakeMoveVec:({type:e,objects:t})=>dist_create({kind:"MakeMoveVec",type:e?{Some:Jt.parseFromStr(e)}:{None:null},objects:t},sr)},hr="Argument",fr="vector",pr="TypeTag",yr="ProgrammableMoveCall",gr="Transaction",mr="EnumKind",br=[mr,gr],wr=[mr,hr],vr="SimpleProgrammableMoveCall",Er=new c(Le).registerStructType("ProgrammableTransaction",{inputs:[fr,"CallArg"],transactions:[fr,br]}).registerEnumType(hr,{GasCoin:null,Input:{index:c.U16},Result:{index:c.U16},NestedResult:{index:c.U16,resultIndex:c.U16}}).registerStructType(yr,{package:c.ADDRESS,module:c.STRING,function:c.STRING,type_arguments:[fr,pr],arguments:[fr,wr]}).registerEnumType(gr,{MoveCall:vr,TransferObjects:{objects:[fr,wr],address:wr},SplitCoins:{coin:wr,amounts:[fr,wr]},MergeCoins:{destination:wr,sources:[fr,wr]},Publish:{modules:[fr,[fr,c.U8]],dependencies:[fr,c.ADDRESS]},MakeMoveVec:{type:["Option",pr],objects:[fr,wr]},Upgrade:{modules:[fr,[fr,c.U8]],dependencies:[fr,c.ADDRESS],packageId:c.ADDRESS,ticket:wr}});Er.registerType([mr,"T"],(function encode(e,t,r,n){const i={[t.kind]:t},[o]=r;return this.getTypeInterface(o)._encodeRaw.call(this,e,i,r,n)}),(function decode(e,t,r){const[n]=t,i=this.getTypeInterface(n)._decodeRaw.call(this,e,t,r),o=Object.keys(i)[0];return{kind:o,...i[o]}}),(e=>{if("object"!=typeof e&&!("kind"in e))throw new Error(`EnumKind: Missing property "kind" in the input ${JSON.stringify(e)}`);return!0})),Er.registerType(vr,(function encodeProgrammableTx(e,t,r,n){const[i,o,s]=t.target.split("::"),a=t.typeArguments.map((e=>Jt.parseFromStr(e,!0)));return this.getTypeInterface(yr)._encodeRaw.call(this,e,{package:normalizeSuiAddress(i),module:o,function:s,type_arguments:a,arguments:t.arguments},r,n)}),(function decodeProgrammableTx(e,t,r){let n=Er.getTypeInterface(yr)._decodeRaw.call(this,e,t,r);return{target:[n.package,n.module,n.function].join("::"),arguments:n.arguments,typeArguments:n.type_arguments.map(Jt.tagToString)}}),(e=>3===e.target.split("::").length));var Sr=union([object({ImmOrOwned:I}),object({Shared:object({objectId:string(),initialSharedVersion:union([integer(),string()]),mutable:dist_boolean()})})]),Ar=object({Pure:array(integer())}),xr=object({Object:Sr}),_r=union([Ar,xr]),Ir={Pure:(e,t)=>({Pure:Array.from(e instanceof Uint8Array?e:Er.ser(t,e,{maxSize:16384}).toBytes())}),ObjectRef:({objectId:e,digest:t,version:r})=>({Object:{ImmOrOwned:{digest:t,version:r,objectId:normalizeSuiAddress(e)}}}),SharedObjectRef:({objectId:e,mutable:t,initialSharedVersion:r})=>({Object:{Shared:{mutable:t,initialSharedVersion:r,objectId:normalizeSuiAddress(e)}}})};function getIdFromCallArg(e){return"string"==typeof e?normalizeSuiAddress(e):"ImmOrOwned"in e.Object?normalizeSuiAddress(e.Object.ImmOrOwned.objectId):normalizeSuiAddress(e.Object.Shared.objectId)}function getSharedObjectInput(e){return"object"==typeof e&&"Object"in e&&"Shared"in e.Object?e.Object.Shared:void 0}var Tr={address:"0x2",module:"object",name:"ID"},Pr={address:ke,module:"ascii",name:"String"},Mr={address:ke,module:"string",name:"String"},Br={address:ke,module:"option",name:"Option"},isSameStruct=(e,t)=>e.address===t.address&&e.module===t.module&&e.name===t.name;function expectType(e,t){if(void 0!==t&&typeof t!==e)throw new Error(`Expect ${t} to be ${e}, received ${typeof t}`)}var Or=["Address","Bool","U8","U16","U32","U64","U128","U256"];function getPureSerializationType(e,t){if("string"==typeof e&&Or.includes(e)){if(e in["U8","U16","U32","U64","U128","U256"])expectType("number",t);else if("Bool"===e)expectType("boolean",t);else if("Address"===e&&(expectType("string",t),t&&!isValidSuiAddress(t)))throw new Error("Invalid Sui Address");return e.toLowerCase()}if("string"==typeof e)throw new Error(`Unknown pure normalized type ${JSON.stringify(e,null,2)}`);if("Vector"in e){if((void 0===t||"string"==typeof t)&&"U8"===e.Vector)return"string";if(void 0!==t&&!Array.isArray(t))throw new Error(`Expect ${t} to be a array, received ${typeof t}`);const r=getPureSerializationType(e.Vector,t?t[0]:void 0);if(void 0===r)return;return`vector<${r}>`}if("Struct"in e){if(isSameStruct(e.Struct,Pr))return"string";if(isSameStruct(e.Struct,Mr))return"utf8string";if(isSameStruct(e.Struct,Tr))return"address";if(isSameStruct(e.Struct,Br)){return getPureSerializationType({Vector:e.Struct.typeArguments[0]},t)}}}var kr=optional(nullable(union([object({Epoch:integer()}),object({None:union([literal(!0),literal(null)])})]))),Cr=string(),Nr=dist_define("StringEncodedBigint",(e=>{if(!["string","number","bigint"].includes(typeof e))return!1;try{return BigInt(e),!0}catch{return!1}})),jr=object({budget:optional(Nr),price:optional(Nr),payment:optional(array(I)),owner:optional(Cr)}),Rr=object({version:literal(1),sender:optional(Cr),expiration:kr,gasConfig:jr,inputs:array(Zt),transactions:array(lr)});function prepareSuiAddress(e){return normalizeSuiAddress(e).replace("0x","")}var Ur=131072,Dr=class{constructor(e){this.version=1,this.sender=e?.sender,this.expiration=e?.expiration,this.gasConfig=e?.gasConfig??{},this.inputs=e?.inputs??[],this.transactions=e?.transactions??[]}static fromKindBytes(e){const t=Er.de("TransactionKind",e),r=t?.ProgrammableTransaction;if(!r)throw new Error("Unable to deserialize from bytes.");const n=dist_create({version:1,gasConfig:{},inputs:r.inputs.map(((e,t)=>dist_create({kind:"Input",value:e,index:t,type:dist_is(e,Ar)?"pure":"object"},Zt))),transactions:r.transactions},Rr);return Dr.restore(n)}static fromBytes(e){const t=Er.de("TransactionData",e),r=t?.V1,n=r?.kind?.ProgrammableTransaction;if(!r||!n)throw new Error("Unable to deserialize from bytes.");const i=dist_create({version:1,sender:r.sender,expiration:r.expiration,gasConfig:r.gasData,inputs:n.inputs.map(((e,t)=>dist_create({kind:"Input",value:e,index:t,type:dist_is(e,Ar)?"pure":"object"},Zt))),transactions:n.transactions},Rr);return Dr.restore(i)}static restore(e){assert(e,Rr);const t=new Dr;return Object.assign(t,e),t}static getDigestFromBytes(e){const t=function hashTypedData(e,t){const r=Array.from(`${e}::`).map((e=>e.charCodeAt(0))),n=new Uint8Array(r.length+t.length);return n.set(r),n.set(t,r.length),(0,u.S)(n,{dkLen:32})}("TransactionData",e);return toB58(t)}build({overrides:e,onlyTransactionKind:t}={}){const r=this.inputs.map((e=>(assert(e.value,_r),e.value))),n={ProgrammableTransaction:{inputs:r,transactions:this.transactions}};if(t)return Er.ser("TransactionKind",n,{maxSize:Ur}).toBytes();const i=e?.expiration??this.expiration,o=e?.sender??this.sender,s={...this.gasConfig,...e?.gasConfig};if(!o)throw new Error("Missing transaction sender");if(!s.budget)throw new Error("Missing gas budget");if(!s.payment)throw new Error("Missing gas payment");if(!s.price)throw new Error("Missing gas price");const a={sender:prepareSuiAddress(o),expiration:i||{None:!0},gasData:{payment:s.payment,owner:prepareSuiAddress(this.gasConfig.owner??o),price:BigInt(s.price),budget:BigInt(s.budget)},kind:{ProgrammableTransaction:{inputs:r,transactions:this.transactions}}};return Er.ser("TransactionData",{V1:a},{maxSize:Ur}).toBytes()}getDigest(){const e=this.build({onlyTransactionKind:!1});return Dr.getDigestFromBytes(e)}snapshot(){return dist_create(this,Rr)}};function expectProvider(e){if(!e)throw new Error("No provider passed to Transaction#build, but transaction data was not sufficient to build offline.");return e}var Lr,Kr,Hr,Fr,qr,zr,Vr,$r,Gr,Wr,Jr,Zr=Symbol.for("@mysten/transaction"),Xr=class{constructor(e){__privateAdd(this,Kr),__privateAdd(this,Fr),__privateAdd(this,zr),__privateAdd(this,$r),__privateAdd(this,Wr),__privateAdd(this,Lr,void 0),__privateSet(this,Lr,new Dr(e?e.blockData:void 0))}static is(e){return!!e&&"object"==typeof e&&!0===e[Zr]}static fromKind(e){const t=new Xr;return __privateSet(t,Lr,Dr.fromKindBytes("string"==typeof e?dist_fromB64(e):e)),t}static from(e){const t=new Xr;return"string"==typeof e&&e.startsWith("{")?__privateSet(t,Lr,Dr.restore(JSON.parse(e))):__privateSet(t,Lr,Dr.fromBytes("string"==typeof e?dist_fromB64(e):e)),t}static get Transactions(){return dr}static get Inputs(){return Ir}setSender(e){__privateGet(this,Lr).sender=e}setSenderIfNotSet(e){__privateGet(this,Lr).sender||(__privateGet(this,Lr).sender=e)}setExpiration(e){__privateGet(this,Lr).expiration=e}setGasPrice(e){__privateGet(this,Lr).gasConfig.price=String(e)}setGasBudget(e){__privateGet(this,Lr).gasConfig.budget=String(e)}setGasOwner(e){__privateGet(this,Lr).gasConfig.owner=e}setGasPayment(e){if(e.length>=256)throw new Error("Payment objects exceed maximum amount 256");__privateGet(this,Lr).gasConfig.payment=e.map((e=>mask(e,I)))}get blockData(){return __privateGet(this,Lr).snapshot()}get[Zr](){return!0}get gas(){return{kind:"GasCoin"}}object(e){const t=getIdFromCallArg(e);return __privateGet(this,Lr).inputs.find((e=>"object"===e.type&&t===getIdFromCallArg(e.value)))??__privateMethod(this,Kr,Hr).call(this,"object",e)}objectRef(...e){return this.object(Ir.ObjectRef(...e))}sharedObjectRef(...e){return this.object(Ir.SharedObjectRef(...e))}pure(e,t){return __privateMethod(this,Kr,Hr).call(this,"pure",e instanceof Uint8Array?Ir.Pure(e):t?Ir.Pure(e,t):e)}add(e){return function createTransactionResult(e){const t=[],nestedResultFor=r=>t[r]??(t[r]={kind:"NestedResult",index:e,resultIndex:r});return new Proxy({kind:"Result",index:e},{set(){throw new Error("The transaction result is a proxy, and does not support setting properties directly")},get(e,t){if(t in e)return Reflect.get(e,t);if(t===Symbol.iterator)return function*(){let e=0;for(;;)yield nestedResultFor(e),e++};if("symbol"==typeof t)return;const r=parseInt(t,10);return Number.isNaN(r)||r<0?void 0:nestedResultFor(r)}})}(__privateGet(this,Lr).transactions.push(e)-1)}splitCoins(...e){return this.add(dr.SplitCoins(...e))}mergeCoins(...e){return this.add(dr.MergeCoins(...e))}publish(...e){return this.add(dr.Publish(...e))}upgrade(...e){return this.add(dr.Upgrade(...e))}moveCall(...e){return this.add(dr.MoveCall(...e))}transferObjects(...e){return this.add(dr.TransferObjects(...e))}makeMoveVec(...e){return this.add(dr.MakeMoveVec(...e))}serialize(){return JSON.stringify(__privateGet(this,Lr).snapshot())}async build({provider:e,onlyTransactionKind:t}={}){return await __privateMethod(this,Wr,Jr).call(this,{provider:e,onlyTransactionKind:t}),__privateGet(this,Lr).build({onlyTransactionKind:t})}async getDigest({provider:e}={}){return await __privateMethod(this,Wr,Jr).call(this,{provider:e}),__privateGet(this,Lr).getDigest()}},Yr=Xr;Lr=new WeakMap,Kr=new WeakSet,Hr=function(e,t){const r=__privateGet(this,Lr).inputs.length,n=dist_create({kind:"Input",value:"bigint"==typeof t?String(t):t,index:r,type:e},Zt);return __privateGet(this,Lr).inputs.push(n),n},Fr=new WeakSet,qr=async function({provider:e,onlyTransactionKind:t}){if(t||__privateGet(this,Lr).gasConfig.payment)return;const r=__privateGet(this,Lr).gasConfig.owner??__privateGet(this,Lr).sender,n=(await expectProvider(e).getCoins({owner:r,coinType:Ce})).data.filter((e=>!__privateGet(this,Lr).inputs.find((t=>!!(dist_is(t.value,_r)&&"Object"in t.value&&"ImmOrOwned"in t.value.Object)&&e.coinObjectId===t.value.Object.ImmOrOwned.objectId)))).slice(0,255).map((e=>({objectId:e.coinObjectId,digest:e.digest,version:e.version})));if(!n.length)throw new Error("No valid gas coins found for the transaction.");this.setGasPayment(n)},zr=new WeakSet,Vr=async function({provider:e,onlyTransactionKind:t}){t||__privateGet(this,Lr).gasConfig.price||this.setGasPrice(await expectProvider(e).getReferenceGasPrice())},$r=new WeakSet,Gr=async function(e){const{inputs:t,transactions:r}=__privateGet(this,Lr),n=[],i=[];if(r.forEach((e=>{if("MoveCall"===e.kind){return void(e.arguments.some((e=>"Input"===e.kind&&!dist_is(t[e.index].value,_r)))&&n.push(e))}const r=function getTransactionType(e){return assert(e,lr),ur.find((t=>dist_is(e,t)))}(e);r.schema&&Object.entries(e).forEach((([e,n])=>{if("kind"===e)return;const o=r.schema[e],s="array"===o.type,a=s?o.schema[$t]:o[$t];if(!a)return;const encodeInput=e=>{const r=t[e];if(!r)throw new Error(`Missing input ${n.index}`);if(!dist_is(r.value,_r))if("object"===a.kind&&"string"==typeof r.value)i.push({id:r.value,input:r});else{if("pure"!==a.kind)throw new Error("Unexpected input format.");r.value=Ir.Pure(r.value,a.type)}};if(s)n.forEach((e=>{"Input"===e.kind&&encodeInput(e.index)}));else{if("Input"!==n.kind)return;encodeInput(n.index)}}))})),n.length&&await Promise.all(n.map((async r=>{const[n,o,s]=r.target.split("::"),a=await expectProvider(e).getNormalizedMoveFunction({package:normalizeSuiObjectId(n),module:o,function:s}),c=a.parameters.length>0&&function isTxContext(e){const t=extractStructTag(e)?.Struct;return"0x2"===t?.address&&"tx_context"===t?.module&&"TxContext"===t?.name}(a.parameters.at(-1)),u=c?a.parameters.slice(0,a.parameters.length-1):a.parameters;if(u.length!==r.arguments.length)throw new Error("Incorrect number of arguments.");u.forEach(((e,n)=>{const o=r.arguments[n];if("Input"!==o.kind)return;const s=t[o.index];if(dist_is(s.value,_r))return;const a=s.value,c=getPureSerializationType(e,a);if(c)return void(s.value=Ir.Pure(a,c));if(!(null!=extractStructTag(e)||"object"==typeof e&&"TypeParameter"in e))throw new Error(`Unknown call arg type ${JSON.stringify(e,null,2)} for value ${JSON.stringify(a,null,2)}`);if("string"!=typeof a)throw new Error(`Expect the argument to be an object id string, got ${JSON.stringify(a,null,2)}`);i.push({id:a,input:s,normalizedType:e})}))}))),i.length){const t=[...new Set(i.map((({id:e})=>e)))],r=((e,t)=>Array.from({length:Math.ceil(e.length/t)},((r,n)=>e.slice(n*t,n*t+t))))(t,50),n=(await Promise.all(r.map((t=>expectProvider(e).multiGetObjects({ids:t,options:{showOwner:!0}}))))).flat();let o=new Map(t.map(((e,t)=>[e,n[t]])));const s=Array.from(o).filter((([e,t])=>t.error)).map((([e,t])=>e));if(s.length)throw new Error(`The following input objects are not invalid: ${s.join(", ")}`);i.forEach((({id:e,input:t,normalizedType:r})=>{const n=o.get(e),i=function getSharedObjectInitialVersion(e){const t=getObjectOwner(e);return"object"==typeof t&&"Shared"in t?t.Shared.initial_shared_version:void 0}(n);if(i){const n=function isMutableSharedObjectInput(e){return getSharedObjectInput(e)?.mutable??!1}(t.value)||null!=r&&null!=extractMutableReference(r);t.value=Ir.SharedObjectRef({objectId:e,initialSharedVersion:i,mutable:n})}else t.value=Ir.ObjectRef(getObjectReference(n))}))}},Wr=new WeakSet,Jr=async function({provider:e,onlyTransactionKind:t}){if(!t&&!__privateGet(this,Lr).sender)throw new Error("Missing transaction sender");if(await Promise.all([__privateMethod(this,zr,Vr).call(this,{provider:e,onlyTransactionKind:t}),__privateMethod(this,$r,Gr).call(this,e)]),!t&&(await __privateMethod(this,Fr,qr).call(this,{provider:e,onlyTransactionKind:t}),!__privateGet(this,Lr).gasConfig.budget)){const t=await expectProvider(e).dryRunTransactionBlock({transactionBlock:__privateGet(this,Lr).build({overrides:{gasConfig:{budget:String(5e10),payment:[]}}})});if("success"!==t.effects.status.status)throw new Error(`Dry run failed, could not automatically determine a budget: ${t.effects.status.error}`,{cause:t});const r=1000n*BigInt(this.blockData.gasConfig.price||1n),n=BigInt(t.effects.gasUsed.computationCost)+r,i=n+BigInt(t.effects.gasUsed.storageCost)-BigInt(t.effects.gasUsed.storageRebate);this.setGasBudget(i>n?i:n)}};var Qr=object({currentTps:number(),tps30Days:number(),currentCheckpoint:string(),currentEpoch:string(),totalAddresses:string(),totalObjects:string(),totalPackages:string()}),en={socketOptions:Ht,versionCacheTimeoutInSeconds:600},tn=class{constructor(e=Vt,t=en){this.options=t,this.connection=e;const r={...en,...t};this.options=r,this.client=r.rpcClient??new Rt(this.connection.fullnode),this.wsClient=r.websocketClient??new qt(this.connection.websocket,r.socketOptions)}async getRpcApiVersion(){if(this.rpcApiVersion&&this.cacheExpiry&&this.cacheExpiry<=Date.now())return this.rpcApiVersion;try{const e=await this.client.requestWithType("rpc.discover",[],any());return this.rpcApiVersion=e.info.version,this.cacheExpiry=Date.now()+1e3*(this.options.versionCacheTimeoutInSeconds??0),this.rpcApiVersion}catch(e){console.warn("Error fetching version number of the RPC API",e)}}async requestSuiFromFaucet(e,t){if(!this.connection.faucet)throw new Error("Faucet URL is not specified");return async function requestSuiFromFaucet(e,t,r){const n=await fetch(e,{method:"POST",body:JSON.stringify({FixedAmountRequest:{recipient:t}}),headers:{"Content-Type":"application/json",...r||{}}});if(429===n.status)throw new Ct("Too many requests from this client have been sent to the faucet. Please retry later");let i;try{i=await n.json()}catch(e){throw new Error(`Encountered error when parsing response from faucet, error: ${e}, status ${n.status}, response ${n}`)}if(i.error)throw new Error(`Faucet returns error: ${i.error}`);return i}(this.connection.faucet,e,t)}async getCoins(e){if(!e.owner||!isValidSuiAddress(normalizeSuiAddress(e.owner)))throw new Error("Invalid Sui address");return await this.client.requestWithType("suix_getCoins",[e.owner,e.coinType,e.cursor,e.limit],ft)}async getAllCoins(e){if(!e.owner||!isValidSuiAddress(normalizeSuiAddress(e.owner)))throw new Error("Invalid Sui address");return await this.client.requestWithType("suix_getAllCoins",[e.owner,e.cursor,e.limit],ft)}async getBalance(e){if(!e.owner||!isValidSuiAddress(normalizeSuiAddress(e.owner)))throw new Error("Invalid Sui address");return await this.client.requestWithType("suix_getBalance",[e.owner,e.coinType],pt)}async getAllBalances(e){if(!e.owner||!isValidSuiAddress(normalizeSuiAddress(e.owner)))throw new Error("Invalid Sui address");return await this.client.requestWithType("suix_getAllBalances",[e.owner],array(pt))}async getCoinMetadata(e){return await this.client.requestWithType("suix_getCoinMetadata",[e.coinType],Ne)}async getTotalSupply(e){return await this.client.requestWithType("suix_getTotalSupply",[e.coinType],yt)}async call(e,t){const r=await this.client.request(e,t);if(dist_is(r,jt))throw new Ot({req:{method:e,args:t},code:r.error.code,data:r.error.data,cause:new Error(r.error.message)});return r.result}async getMoveFunctionArgTypes(e){return await this.client.requestWithType("sui_getMoveFunctionArgTypes",[e.package,e.module,e.function],He)}async getNormalizedMoveModulesByPackage(e){return await this.client.requestWithType("sui_getNormalizedMoveModulesByPackage",[e.package],et)}async getNormalizedMoveModule(e){return await this.client.requestWithType("sui_getNormalizedMoveModule",[e.package,e.module],Qe)}async getNormalizedMoveFunction(e){return await this.client.requestWithType("sui_getNormalizedMoveFunction",[e.package,e.module,e.function],Ze)}async getNormalizedMoveStruct(e){return await this.client.requestWithType("sui_getNormalizedMoveStruct",[e.package,e.module,e.struct],Ye)}async getOwnedObjects(e){if(!e.owner||!isValidSuiAddress(normalizeSuiAddress(e.owner)))throw new Error("Invalid Sui address");return await this.client.requestWithType("suix_getOwnedObjects",[e.owner,{filter:e.filter,options:e.options},e.cursor,e.limit],q)}async getObject(e){if(!e.id||!isValidSuiObjectId(normalizeSuiObjectId(e.id)))throw new Error("Invalid Sui Object id");return await this.client.requestWithType("sui_getObject",[e.id,e.options],H)}async tryGetPastObject(e){return await this.client.requestWithType("sui_tryGetPastObject",[e.id,e.version,e.options],z)}async multiGetObjects(e){e.ids.forEach((e=>{if(!e||!isValidSuiObjectId(normalizeSuiObjectId(e)))throw new Error(`Invalid Sui Object id ${e}`)}));if(e.ids.length!==new Set(e.ids).size)throw new Error(`Duplicate object ids in batch call ${e.ids}`);return await this.client.requestWithType("sui_multiGetObjects",[e.ids,e.options],array(H))}async queryTransactionBlocks(e){return await this.client.requestWithType("suix_queryTransactionBlocks",[{filter:e.filter,options:e.options},e.cursor,e.limit,"descending"===(e.order||"descending")],Be)}async getTransactionBlock(e){if(!isValidTransactionDigest(e.digest))throw new Error("Invalid Transaction digest");return await this.client.requestWithType("sui_getTransactionBlock",[e.digest,e.options],Me)}async multiGetTransactionBlocks(e){e.digests.forEach((e=>{if(!isValidTransactionDigest(e))throw new Error(`Invalid Transaction digest ${e}`)}));if(e.digests.length!==new Set(e.digests).size)throw new Error(`Duplicate digests in batch call ${e.digests}`);return await this.client.requestWithType("sui_multiGetTransactionBlocks",[e.digests,e.options],array(Me))}async executeTransactionBlock(e){return await this.client.requestWithType("sui_executeTransactionBlock",["string"==typeof e.transactionBlock?e.transactionBlock:toB64(e.transactionBlock),Array.isArray(e.signature)?e.signature:[e.signature],e.options,e.requestType],Me)}async getTotalTransactionBlocks(){const e=await this.client.requestWithType("sui_getTotalTransactionBlocks",[],string());return BigInt(e)}async getReferenceGasPrice(){const e=await this.client.requestWithType("suix_getReferenceGasPrice",[],string());return BigInt(e)}async getStakes(e){if(!e.owner||!isValidSuiAddress(normalizeSuiAddress(e.owner)))throw new Error("Invalid Sui address");return await this.client.requestWithType("suix_getStakes",[e.owner],array(it))}async getStakesByIds(e){return e.stakedSuiIds.forEach((e=>{if(!e||!isValidSuiObjectId(normalizeSuiObjectId(e)))throw new Error(`Invalid Sui Stake id ${e}`)})),await this.client.requestWithType("suix_getStakesByIds",[e.stakedSuiIds],array(it))}async getLatestSuiSystemState(){return await this.client.requestWithType("suix_getLatestSuiSystemState",[],dt)}async queryEvents(e){return await this.client.requestWithType("suix_queryEvents",[e.query,e.cursor,e.limit,"descending"===(e.order||"descending")],G)}async subscribeEvent(e){return this.wsClient.subscribeEvent(e.filter,e.onMessage)}async unsubscribeEvent(e){return this.wsClient.unsubscribeEvent(e.id)}async devInspectTransactionBlock(e){let t;if(Yr.is(e.transactionBlock))e.transactionBlock.setSenderIfNotSet(e.sender),t=toB64(await e.transactionBlock.build({provider:this,onlyTransactionKind:!0}));else if("string"==typeof e.transactionBlock)t=e.transactionBlock;else{if(!(e.transactionBlock instanceof Uint8Array))throw new Error("Unknown transaction block format.");t=toB64(e.transactionBlock)}return await this.client.requestWithType("sui_devInspectTransactionBlock",[e.sender,t,e.gasPrice,e.epoch],be)}async dryRunTransactionBlock(e){return await this.client.requestWithType("sui_dryRunTransactionBlock",["string"==typeof e.transactionBlock?e.transactionBlock:toB64(e.transactionBlock)],Oe)}async getDynamicFields(e){if(!e.parentId||!isValidSuiObjectId(normalizeSuiObjectId(e.parentId)))throw new Error("Invalid Sui Object id");return await this.client.requestWithType("suix_getDynamicFields",[e.parentId,e.cursor,e.limit],Kt)}async getDynamicFieldObject(e){return await this.client.requestWithType("suix_getDynamicFieldObject",[e.parentId,e.name],H)}async getLatestCheckpointSequenceNumber(){const e=await this.client.requestWithType("sui_getLatestCheckpointSequenceNumber",[],string());return String(e)}async getCheckpoint(e){return await this.client.requestWithType("sui_getCheckpoint",[e.id],_t)}async getCheckpoints(e){const t=await this.getRpcApiVersion();return await this.client.requestWithType("sui_getCheckpoints",[e.cursor,t&&(0,g.lt)(t,"0.32.0")?String(e?.limit):e?.limit,e.descendingOrder],It)}async getCommitteeInfo(e){return await this.client.requestWithType("suix_getCommitteeInfo",[e?.epoch],ct)}async getNetworkMetrics(){return await this.client.requestWithType("suix_getNetworkMetrics",[],Qr)}async getEpochs(e){const t=await this.getRpcApiVersion();return await this.client.requestWithType("suix_getEpochs",[e?.cursor,t&&(0,g.lt)(t,"0.32.0")?String(e?.limit):e?.limit,e?.descendingOrder],wt)}async getMoveCallMetrics(){return await this.client.requestWithType("suix_getMoveCallMetrics",[],We)}async getCurrentEpoch(){return await this.client.requestWithType("suix_getCurrentEpoch",[],bt)}async getValidatorsApy(){return await this.client.requestWithType("suix_getValidatorsApy",[],rt)}async waitForTransactionBlock({signal:e,timeout:t=6e4,pollInterval:r=2e3,...n}){const i=AbortSignal.timeout(t),o=new Promise(((e,t)=>{i.addEventListener("abort",(()=>t(i.reason)))}));for(;!i.aborted;){e?.throwIfAborted();try{return await this.getTransactionBlock(n)}catch(e){await Promise.race([new Promise((e=>setTimeout(e,r))),o])}}throw i.throwIfAborted(),new Error("Unexpected error while waiting for transaction block.")}},rn=(e=>(e[e.TransactionData=0]="TransactionData",e[e.TransactionEffects=1]="TransactionEffects",e[e.CheckpointSummary=2]="CheckpointSummary",e[e.PersonalMessage=3]="PersonalMessage",e))(rn||{});function messageWithIntent(e,t){const r=function intentWithScope(e){return[e,0,0]}(e),n=new Uint8Array(r.length+t.length);return n.set(r),n.set(t,r.length),n}normalizeSuiObjectId("0x5")},731434:function(e,t,r){"use strict";var n=r(901048).Buffer,i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n.throw(e))}catch(e){o(e)}}function step(e){e.done?i(e.value):function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Account=void 0;const s=r(368524),a=r(532885),c=r(332564),u=r(962922),l=r(387438),d=o(r(682823)),p=r(881818),{addKey:y,createAccount:g,deleteAccount:m,deleteKey:b,deployContract:w,fullAccessKey:v,functionCall:E,functionCallAccessKey:S,stake:A,transfer:x}=c.actionCreators;function parseJsonFromRawResponse(e){return JSON.parse(n.from(e).toString())}function bytesJsonStringify(e){return n.from(JSON.stringify(e))}class Account{constructor(e,t){this.accessKeyByPublicKeyCache={},this.connection=e,this.accountId=t}state(){return i(this,void 0,void 0,(function*(){return this.connection.provider.query({request_type:"view_account",account_id:this.accountId,finality:"optimistic"})}))}signTransaction(e,t){return i(this,void 0,void 0,(function*(){const r=yield this.findAccessKey(e,t);if(!r)throw new u.TypedError(`Can not sign transactions for account ${this.accountId} on network ${this.connection.networkId}, no matching key pair exists for this account`,"KeyNotFound");const{accessKey:n}=r,i=(yield this.connection.provider.block({finality:"final"})).header.hash,o=n.nonce.add(new d.default(1));return yield(0,c.signTransaction)(e,o,t,(0,p.baseDecode)(i),this.connection.signer,this.accountId,this.connection.networkId)}))}signAndSendTransaction({receiverId:e,actions:t,returnError:r}){return i(this,void 0,void 0,(function*(){let n,o;const s=yield(0,a.exponentialBackoff)(500,12,1.5,(()=>i(this,void 0,void 0,(function*(){[n,o]=yield this.signTransaction(e,t);const r=o.transaction.publicKey;try{return yield this.connection.provider.sendTransaction(o)}catch(t){if("InvalidNonce"===t.type)return(0,l.logWarning)(`Retrying transaction ${e}:${(0,p.baseEncode)(n)} with new nonce.`),delete this.accessKeyByPublicKeyCache[r.toString()],null;if("Expired"===t.type)return(0,l.logWarning)(`Retrying transaction ${e}:${(0,p.baseEncode)(n)} due to expired block hash`),null;throw t.context=new u.ErrorContext((0,p.baseEncode)(n)),t}}))));if(!s)throw new u.TypedError("nonce retries exceeded for transaction. This usually means there are too many parallel requests with the same access key.","RetriesExceeded");if((0,l.printTxOutcomeLogsAndFailures)({contractId:o.transaction.receiverId,outcome:s}),!r&&"object"==typeof s.status&&"object"==typeof s.status.Failure&&null!==s.status.Failure)throw s.status.Failure.error_message&&s.status.Failure.error_type?new u.TypedError(`Transaction ${s.transaction_outcome.id} failed. ${s.status.Failure.error_message}`,s.status.Failure.error_type):(0,l.parseResultError)(s);return s}))}findAccessKey(e,t){return i(this,void 0,void 0,(function*(){const e=yield this.connection.signer.getPublicKey(this.accountId,this.connection.networkId);if(!e)throw new u.TypedError(`no matching key pair found in ${this.connection.signer}`,"PublicKeyNotFound");const t=this.accessKeyByPublicKeyCache[e.toString()];if(void 0!==t)return{publicKey:e,accessKey:t};try{const t=yield this.connection.provider.query({request_type:"view_access_key",account_id:this.accountId,public_key:e.toString(),finality:"optimistic"}),r=Object.assign(Object.assign({},t),{nonce:new d.default(t.nonce)});return this.accessKeyByPublicKeyCache[e.toString()]?{publicKey:e,accessKey:this.accessKeyByPublicKeyCache[e.toString()]}:(this.accessKeyByPublicKeyCache[e.toString()]=r,{publicKey:e,accessKey:r})}catch(e){if("AccessKeyDoesNotExist"==e.type)return null;throw e}}))}createAndDeployContract(e,t,r,n){return i(this,void 0,void 0,(function*(){const i=v();yield this.signAndSendTransaction({receiverId:e,actions:[g(),x(n),y(s.PublicKey.from(t),i),w(r)]});return new Account(this.connection,e)}))}sendMoney(e,t){return i(this,void 0,void 0,(function*(){return this.signAndSendTransaction({receiverId:e,actions:[x(t)]})}))}createAccount(e,t,r){return i(this,void 0,void 0,(function*(){const n=v();return this.signAndSendTransaction({receiverId:e,actions:[g(),x(r),y(s.PublicKey.from(t),n)]})}))}deleteAccount(e){return i(this,void 0,void 0,(function*(){return{ONEKEY_PROXY:void 0,NODE_ENV:"production",TAMAGUI_TARGET:"web"}.NEAR_NO_LOGS||console.log("Deleting an account does not automatically transfer NFTs and FTs to the beneficiary address. Ensure to transfer assets before deleting."),this.signAndSendTransaction({receiverId:this.accountId,actions:[m(e)]})}))}deployContract(e){return i(this,void 0,void 0,(function*(){return this.signAndSendTransaction({receiverId:this.accountId,actions:[w(e)]})}))}encodeJSContractArgs(e,t,r){return n.concat([n.from(e),n.from([0]),n.from(t),n.from([0]),n.from(r)])}functionCall({contractId:e,methodName:t,args:r={},gas:n=l.DEFAULT_FUNCTION_CALL_GAS,attachedDeposit:o,walletMeta:s,walletCallbackUrl:a,stringify:u,jsContract:d}){return i(this,void 0,void 0,(function*(){let i;if(this.validateArgs(r),d){i=["call_js_contract",this.encodeJSContractArgs(e,t,JSON.stringify(r)),n,o,null,!0]}else{const e=void 0===u?c.stringifyJsonOrBytes:u;i=[t,r,n,o,e,!1]}return this.signAndSendTransaction({receiverId:d?this.connection.jsvmAccountId:e,actions:[E.apply(void 0,i)],walletMeta:s,walletCallbackUrl:a})}))}addKey(e,t,r,n){return i(this,void 0,void 0,(function*(){let i;return r||(r=[]),Array.isArray(r)||(r=[r]),i=t?S(t,r,n):v(),this.signAndSendTransaction({receiverId:this.accountId,actions:[y(s.PublicKey.from(e),i)]})}))}deleteKey(e){return i(this,void 0,void 0,(function*(){return this.signAndSendTransaction({receiverId:this.accountId,actions:[b(s.PublicKey.from(e))]})}))}stake(e,t){return i(this,void 0,void 0,(function*(){return this.signAndSendTransaction({receiverId:this.accountId,actions:[A(t,s.PublicKey.from(e))]})}))}signedDelegate({actions:e,blockHeightTtl:t,receiverId:r}){return i(this,void 0,void 0,(function*(){const{provider:n,signer:o}=this.connection,{header:s}=yield n.block({finality:"final"}),{accessKey:a,publicKey:u}=yield this.findAccessKey(null,null),l=(0,c.buildDelegateAction)({actions:e,maxBlockHeight:new d.default(s.height).add(new d.default(t)),nonce:new d.default(a.nonce).add(new d.default(1)),publicKey:u,receiverId:r,senderId:this.accountId}),{signedDelegateAction:p}=yield(0,c.signDelegateAction)({delegateAction:l,signer:{sign:e=>i(this,void 0,void 0,(function*(){const{signature:t}=yield o.signMessage(e,l.senderId,this.connection.networkId);return t}))}});return p}))}validateArgs(e){if(!(void 0!==e.byteLength&&e.byteLength===e.length)&&(Array.isArray(e)||"object"!=typeof e))throw new u.PositionalArgsError}viewFunction({contractId:e,methodName:t,args:r={},parse:o=parseJsonFromRawResponse,stringify:s=bytesJsonStringify,jsContract:a=!1,blockQuery:c={finality:"optimistic"}}){return i(this,void 0,void 0,(function*(){let i;this.validateArgs(r),i=a?this.encodeJSContractArgs(e,t,Object.keys(r).length>0?JSON.stringify(r):""):s(r);const u=yield this.connection.provider.query(Object.assign(Object.assign({request_type:"call_function"},c),{account_id:a?this.connection.jsvmAccountId:e,method_name:a?"view_js_contract":t,args_base64:i.toString("base64")}));return u.logs&&(0,l.printTxOutcomeLogs)({contractId:e,logs:u.logs}),u.result&&u.result.length>0&&o(n.from(u.result))}))}viewState(e,t={finality:"optimistic"}){return i(this,void 0,void 0,(function*(){const{values:r}=yield this.connection.provider.query(Object.assign(Object.assign({request_type:"view_state"},t),{account_id:this.accountId,prefix_base64:n.from(e).toString("base64")}));return r.map((({key:e,value:t})=>({key:n.from(e,"base64"),value:n.from(t,"base64")})))}))}getAccessKeys(){var e;return i(this,void 0,void 0,(function*(){const t=yield this.connection.provider.query({request_type:"view_access_key_list",account_id:this.accountId,finality:"optimistic"});return null===(e=null==t?void 0:t.keys)||void 0===e?void 0:e.map((e=>Object.assign(Object.assign({},e),{access_key:Object.assign(Object.assign({},e.access_key),{nonce:new d.default(e.access_key.nonce)})})))}))}getAccountDetails(){return i(this,void 0,void 0,(function*(){return{authorizedApps:(yield this.getAccessKeys()).filter((e=>"FullAccess"!==e.access_key.permission)).map((e=>{const t=e.access_key.permission;return{contractId:t.FunctionCall.receiver_id,amount:t.FunctionCall.allowance,publicKey:e.public_key}}))}}))}getAccountBalance(){return i(this,void 0,void 0,(function*(){const e=yield this.connection.provider.experimental_protocolConfig({finality:"final"}),t=yield this.state(),r=new d.default(e.runtime_config.storage_amount_per_byte),n=new d.default(t.storage_usage).mul(r),i=new d.default(t.locked),o=new d.default(t.amount).add(i),s=o.sub(d.default.max(i,n));return{total:o.toString(),stateStaked:n.toString(),staked:i.toString(),available:s.toString()}}))}getActiveDelegatedStakeBalance(){return i(this,void 0,void 0,(function*(){const e=yield this.connection.provider.block({finality:"final"}),t=e.header.hash,r=e.header.epoch_id,{current_validators:n,next_validators:i,current_proposals:o}=yield this.connection.provider.validators(r),s=new Set;[...n,...i,...o].forEach((e=>s.add(e.account_id)));const a=[...s],c=a.map((e=>this.viewFunction({contractId:e,methodName:"get_account_total_balance",args:{account_id:this.accountId},blockQuery:{blockId:t}}))),u=yield Promise.allSettled(c);if(u.some((e=>"rejected"===e.status&&"TimeoutError"===e.reason.type)))throw new Error("Failed to get delegated stake balance");const l=u.reduce(((e,t,r)=>{const n=a[r];if("fulfilled"===t.status){const r=new d.default(t.value);if(!r.isZero())return Object.assign(Object.assign({},e),{stakedValidators:[...e.stakedValidators,{validatorId:n,amount:r.toString()}],total:e.total.add(r)})}return"rejected"===t.status?Object.assign(Object.assign({},e),{failedValidators:[...e.failedValidators,{validatorId:n,error:t.reason}]}):e}),{stakedValidators:[],failedValidators:[],total:new d.default(0)});return Object.assign(Object.assign({},l),{total:l.total.toString()})}))}}t.Account=Account},94826:function(e,t,r){"use strict";var n=r(901048).Buffer,i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n.throw(e))}catch(e){o(e)}}function step(e){e.done?i(e.value):function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Account2FA=void 0;const s=r(368524),a=r(962922),c=r(532885),u=r(332564),l=o(r(682823)),d=r(707547),p=r(273812),y=r(836292),{addKey:g,deleteKey:m,deployContract:b,fullAccessKey:w,functionCall:v,functionCallAccessKey:E}=u.actionCreators;class Account2FA extends d.AccountMultisig{constructor(e,t,r){super(e,t,r),this.helperUrl="https://helper.testnet.near.org",this.helperUrl=r.helperUrl||this.helperUrl,this.storage=r.storage,this.sendCode=r.sendCode||this.sendCodeDefault,this.getCode=r.getCode||this.getCodeDefault,this.verifyCode=r.verifyCode||this.verifyCodeDefault,this.onConfirmResult=r.onConfirmResult}signAndSendTransaction({receiverId:e,actions:t}){const r=Object.create(null,{signAndSendTransaction:{get:()=>super.signAndSendTransaction}});return i(this,void 0,void 0,(function*(){yield r.signAndSendTransaction.call(this,{receiverId:e,actions:t}),yield this.sendCode();const n=yield this.promptAndVerify();return this.onConfirmResult&&(yield this.onConfirmResult(n)),n}))}deployMultisig(e){const t=Object.create(null,{signAndSendTransactionWithAccount:{get:()=>super.signAndSendTransactionWithAccount}});return i(this,void 0,void 0,(function*(){const{accountId:r}=this,i=(yield this.getRecoveryMethods()).data.filter((({kind:e,publicKey:t})=>("phrase"===e||"ledger"===e)&&null!==t)).map((e=>e.publicKey)),o=(yield this.getAccessKeys()).filter((({public_key:e,access_key:{permission:t}})=>"FullAccess"===t&&!i.includes(e))).map((e=>e.public_key)).map(toPK),s=toPK((yield this.postSignedJson("/2fa/getAccessKey",{accountId:r})).publicKey),c=n.from(JSON.stringify({num_confirmations:2})),u=[...o.map((e=>m(e))),...o.map((e=>g(e,E(r,p.MULTISIG_CHANGE_METHODS,null)))),g(s,E(r,p.MULTISIG_CONFIRM_METHODS,null)),b(e)],l=u.concat(v("new",c,p.MULTISIG_GAS,p.MULTISIG_DEPOSIT));console.log("deploying multisig contract for",r);const{stateStatus:d}=yield this.checkMultisigCodeAndStateStatus(e);switch(d){case y.MultisigStateStatus.STATE_NOT_INITIALIZED:return yield t.signAndSendTransactionWithAccount.call(this,r,l);case y.MultisigStateStatus.VALID_STATE:return yield t.signAndSendTransactionWithAccount.call(this,r,u);case y.MultisigStateStatus.INVALID_STATE:throw new a.TypedError(`Can not deploy a contract to account ${this.accountId} on network ${this.connection.networkId}, the account has existing state.`,"ContractHasExistingState");default:throw new a.TypedError(`Can not deploy a contract to account ${this.accountId} on network ${this.connection.networkId}, the account state could not be verified.`,"ContractStateUnknown")}}))}disableWithFAK({contractBytes:e,cleanupContractBytes:t}){return i(this,void 0,void 0,(function*(){let r=[];t&&(yield this.deleteAllRequests().catch((e=>e)),r=yield this.get2faDisableCleanupActions(t));const n=yield this.get2faDisableKeyConversionActions(),i=[...r,...n,b(e)],o=yield this.findAccessKey(this.accountId,i);if(o&&o.accessKey&&"FullAccess"!==o.accessKey.permission)throw new a.TypedError("No full access key found in keystore. Unable to bypass multisig","NoFAKFound");return this.signAndSendTransactionWithAccount(this.accountId,i)}))}get2faDisableCleanupActions(e){return i(this,void 0,void 0,(function*(){const t=yield this.viewState("").catch((e=>{const t=e.cause&&e.cause.name;if("NO_CONTRACT_CODE"==t)return[];throw"TOO_LARGE_CONTRACT_STATE"==t?new a.TypedError(`Can not deploy a contract to account ${this.accountId} on network ${this.connection.networkId}, the account has existing state.`,"ContractHasExistingState"):e})),r=t.map((({key:e})=>e.toString("base64")));return t.length?[b(e),v("clean",{keys:r},p.MULTISIG_GAS,new l.default("0"))]:[]}))}get2faDisableKeyConversionActions(){return i(this,void 0,void 0,(function*(){const{accountId:e}=this,t=(yield this.getAccessKeys()).filter((({access_key:e})=>"FullAccess"!==e.permission)).filter((({access_key:t})=>{const r=t.permission.FunctionCall;return r.receiver_id===e&&4===r.method_names.length&&r.method_names.includes("add_request_and_confirm")})),r=s.PublicKey.from((yield this.postSignedJson("/2fa/getAccessKey",{accountId:e})).publicKey);return[m(r),...t.map((({public_key:e})=>m(s.PublicKey.from(e)))),...t.map((({public_key:e})=>g(s.PublicKey.from(e),w())))]}))}disable(e,t){return i(this,void 0,void 0,(function*(){const{stateStatus:r}=yield this.checkMultisigCodeAndStateStatus();if(r!==y.MultisigStateStatus.VALID_STATE&&r!==y.MultisigStateStatus.STATE_NOT_INITIALIZED)throw new a.TypedError(`Can not deploy a contract to account ${this.accountId} on network ${this.connection.networkId}, the account state could not be verified.`,"ContractStateUnknown");let n;yield this.deleteAllRequests().catch((e=>n=e));const i=[...yield this.get2faDisableCleanupActions(t).catch((e=>{if("ContractHasExistingState"===e.type)throw n||e;throw e})),...yield this.get2faDisableKeyConversionActions(),b(e)];return console.log("disabling 2fa for",this.accountId),yield this.signAndSendTransaction({receiverId:this.accountId,actions:i})}))}sendCodeDefault(){return i(this,void 0,void 0,(function*(){const{accountId:e}=this,{requestId:t}=this.getRequest(),r=yield this.get2faMethod();return yield this.postSignedJson("/2fa/send",{accountId:e,method:r,requestId:t}),t}))}getCodeDefault(){return i(this,void 0,void 0,(function*(){throw new Error('There is no getCode callback provided. Please provide your own in AccountMultisig constructor options. It has a parameter method where method.kind is "email" or "phone".')}))}promptAndVerify(){return i(this,void 0,void 0,(function*(){const e=yield this.get2faMethod(),t=yield this.getCode(e);try{return yield this.verifyCode(t)}catch(e){if(console.warn("Error validating security code:",e),e.toString().includes("invalid 2fa code provided")||e.toString().includes("2fa code not valid"))return yield this.promptAndVerify();throw e}}))}verifyCodeDefault(e){return i(this,void 0,void 0,(function*(){const{accountId:t}=this,r=this.getRequest();if(!r)throw new Error("no request pending");const{requestId:n}=r;return yield this.postSignedJson("/2fa/verify",{accountId:t,securityCode:e,requestId:n})}))}getRecoveryMethods(){return i(this,void 0,void 0,(function*(){const{accountId:e}=this;return{accountId:e,data:yield this.postSignedJson("/account/recoveryMethods",{accountId:e})}}))}get2faMethod(){return i(this,void 0,void 0,(function*(){let{data:e}=yield this.getRecoveryMethods();if(e&&e.length&&(e=e.find((e=>0===e.kind.indexOf("2fa-")))),!e)return null;const{kind:t,detail:r}=e;return{kind:t,detail:r}}))}signatureFor(){return i(this,void 0,void 0,(function*(){const{accountId:e}=this,t=(yield this.connection.provider.block({finality:"final"})).header.height.toString(),r=yield this.connection.signer.signMessage(n.from(t),e,this.connection.networkId);return{blockNumber:t,blockNumberSignature:n.from(r.signature).toString("base64")}}))}postSignedJson(e,t){return i(this,void 0,void 0,(function*(){return yield(0,c.fetchJson)(this.helperUrl+e,JSON.stringify(Object.assign(Object.assign({},t),yield this.signatureFor())))}))}}t.Account2FA=Account2FA;const toPK=e=>s.PublicKey.from(e)},525153:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n.throw(e))}catch(e){o(e)}}function step(e){e.done?i(e.value):function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.UrlAccountCreator=t.LocalAccountCreator=t.AccountCreator=void 0;const i=r(532885);class AccountCreator{}t.AccountCreator=AccountCreator;t.LocalAccountCreator=class LocalAccountCreator extends AccountCreator{constructor(e,t){super(),this.masterAccount=e,this.initialBalance=t}createAccount(e,t){return n(this,void 0,void 0,(function*(){yield this.masterAccount.createAccount(e,t,this.initialBalance)}))}};t.UrlAccountCreator=class UrlAccountCreator extends AccountCreator{constructor(e,t){super(),this.connection=e,this.helperUrl=t}createAccount(e,t){return n(this,void 0,void 0,(function*(){yield(0,i.fetchJson)(`${this.helperUrl}/account`,JSON.stringify({newAccountId:e,newAccountPublicKey:t.toString()}))}))}}},707547:function(e,t,r){"use strict";var n=r(901048).Buffer,i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n.throw(e))}catch(e){o(e)}}function step(e){e.done?i(e.value):function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.AccountMultisig=void 0;const o=r(332564),s=r(731434),a=r(273812),c=r(836292),{deployContract:u,functionCall:l}=o.actionCreators;var d;!function(e){e[e.INVALID_CODE=0]="INVALID_CODE",e[e.VALID_CODE=1]="VALID_CODE",e[e.UNKNOWN_CODE=2]="UNKNOWN_CODE"}(d||(d={}));const p={[a.MULTISIG_STORAGE_KEY]:null};class AccountMultisig extends s.Account{constructor(e,t,r){super(e,t),this.storage=r.storage,this.onAddRequestResult=r.onAddRequestResult}signAndSendTransactionWithAccount(e,t){const r=Object.create(null,{signAndSendTransaction:{get:()=>super.signAndSendTransaction}});return i(this,void 0,void 0,(function*(){return r.signAndSendTransaction.call(this,{receiverId:e,actions:t})}))}signAndSendTransaction({receiverId:e,actions:t}){const r=Object.create(null,{signAndSendTransaction:{get:()=>super.signAndSendTransaction}});return i(this,void 0,void 0,(function*(){const{accountId:i}=this,o=n.from(JSON.stringify({request:{receiver_id:e,actions:convertActions(t,i,e)}}));let s;try{s=yield r.signAndSendTransaction.call(this,{receiverId:i,actions:[l("add_request_and_confirm",o,a.MULTISIG_GAS,a.MULTISIG_DEPOSIT)]})}catch(r){if(r.toString().includes("Account has too many active requests. Confirm or delete some"))return yield this.deleteUnconfirmedRequests(),yield this.signAndSendTransaction({receiverId:e,actions:t});throw r}if(!s.status)throw new Error("Request failed");const c=Object.assign({},s.status);if(!c.SuccessValue||"string"!=typeof c.SuccessValue)throw new Error("Request failed");return this.setRequest({accountId:i,actions:t,requestId:parseInt(n.from(c.SuccessValue,"base64").toString("ascii"),10)}),this.onAddRequestResult&&(yield this.onAddRequestResult(s)),this.deleteUnconfirmedRequests(),s}))}checkMultisigCodeAndStateStatus(e){const t=Object.create(null,{signAndSendTransaction:{get:()=>super.signAndSendTransaction}});return i(this,void 0,void 0,(function*(){const r=4294967295,n=e?d.UNKNOWN_CODE:d.VALID_CODE;try{return e?yield t.signAndSendTransaction.call(this,{receiverId:this.accountId,actions:[u(e),l("delete_request",{request_id:r},a.MULTISIG_GAS,a.MULTISIG_DEPOSIT)]}):yield this.deleteRequest(r),{codeStatus:d.VALID_CODE,stateStatus:c.MultisigStateStatus.VALID_STATE}}catch(e){if(new RegExp(c.MultisigDeleteRequestRejectionError.CANNOT_DESERIALIZE_STATE).test(e&&e.kind&&e.kind.ExecutionError))return{codeStatus:n,stateStatus:c.MultisigStateStatus.INVALID_STATE};if(new RegExp(c.MultisigDeleteRequestRejectionError.MULTISIG_NOT_INITIALIZED).test(e&&e.kind&&e.kind.ExecutionError))return{codeStatus:n,stateStatus:c.MultisigStateStatus.STATE_NOT_INITIALIZED};if(new RegExp(c.MultisigDeleteRequestRejectionError.NO_SUCH_REQUEST).test(e&&e.kind&&e.kind.ExecutionError))return{codeStatus:n,stateStatus:c.MultisigStateStatus.VALID_STATE};if(new RegExp(c.MultisigDeleteRequestRejectionError.METHOD_NOT_FOUND).test(e&&e.message))return{codeStatus:d.INVALID_CODE,stateStatus:c.MultisigStateStatus.UNKNOWN_STATE};throw e}}))}deleteRequest(e){return super.signAndSendTransaction({receiverId:this.accountId,actions:[l("delete_request",{request_id:e},a.MULTISIG_GAS,a.MULTISIG_DEPOSIT)]})}deleteAllRequests(){return i(this,void 0,void 0,(function*(){const e=yield this.getRequestIds();e.length&&(yield Promise.all(e.map((e=>this.deleteRequest(e)))))}))}deleteUnconfirmedRequests(){const e=Object.create(null,{signAndSendTransaction:{get:()=>super.signAndSendTransaction}});return i(this,void 0,void 0,(function*(){const t=yield this.getRequestIds(),{requestId:r}=this.getRequest();for(const n of t)if(n!=r)try{yield e.signAndSendTransaction.call(this,{receiverId:this.accountId,actions:[l("delete_request",{request_id:n},a.MULTISIG_GAS,a.MULTISIG_DEPOSIT)]})}catch(e){console.warn("Attempt to delete an earlier request before 15 minutes failed. Will try again.")}}))}getRequestIds(){return i(this,void 0,void 0,(function*(){return this.viewFunction({contractId:this.accountId,methodName:"list_request_ids"})}))}getRequest(){return this.storage?JSON.parse(this.storage.getItem(a.MULTISIG_STORAGE_KEY)||"{}"):p[a.MULTISIG_STORAGE_KEY]}setRequest(e){if(this.storage)return this.storage.setItem(a.MULTISIG_STORAGE_KEY,JSON.stringify(e));p[a.MULTISIG_STORAGE_KEY]=e}}t.AccountMultisig=AccountMultisig;const convertActions=(e,t,r)=>e.map((e=>{const i=e.enum,{gas:o,publicKey:s,methodName:c,args:u,deposit:l,accessKey:d,code:p}=e[i],y={type:i[0].toUpperCase()+i.substr(1),gas:o&&o.toString()||void 0,public_key:s&&(g=s,g.toString().replace("ed25519:",""))||void 0,method_name:c,args:u&&n.from(u).toString("base64")||void 0,code:p&&n.from(p).toString("base64")||void 0,amount:l&&l.toString()||void 0,deposit:l&&l.toString()||"0",permission:void 0};var g;if(d&&(r===t&&"fullAccess"!==d.permission.enum&&(y.permission={receiver_id:t,allowance:a.MULTISIG_ALLOWANCE.toString(),method_names:a.MULTISIG_CHANGE_METHODS}),"functionCall"===d.permission.enum)){const{receiverId:e,methodNames:t,allowance:r}=d.permission.functionCall;y.permission={receiver_id:e,allowance:r&&r.toString()||void 0,method_names:t}}return y}))},495821:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Connection=void 0;const n=r(86796),i=r(532885);class Connection{constructor(e,t,r,n){this.networkId=e,this.provider=t,this.signer=r,this.jsvmAccountId=n}static fromConfig(e){const t=function getProvider(e){switch(e.type){case void 0:return e;case"JsonRpcProvider":return new i.JsonRpcProvider(Object.assign({},e.args));default:throw new Error(`Unknown provider type ${e.type}`)}}(e.provider),r=function getSigner(e){switch(e.type){case void 0:return e;case"InMemorySigner":return new n.InMemorySigner(e.keyStore);default:throw new Error(`Unknown signer type ${e.type}`)}}(e.signer);return new Connection(e.networkId,t,r,e.jsvmAccountId)}}t.Connection=Connection},273812:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MULTISIG_CONFIRM_METHODS=t.MULTISIG_CHANGE_METHODS=t.MULTISIG_DEPOSIT=t.MULTISIG_GAS=t.MULTISIG_ALLOWANCE=t.MULTISIG_STORAGE_KEY=void 0;const i=r(387438),o=n(r(682823));t.MULTISIG_STORAGE_KEY="__multisigRequest",t.MULTISIG_ALLOWANCE=new o.default((0,i.parseNearAmount)("1")),t.MULTISIG_GAS=new o.default("100000000000000"),t.MULTISIG_DEPOSIT=new o.default("0"),t.MULTISIG_CHANGE_METHODS=["add_request","add_request_and_confirm","delete_request","confirm"],t.MULTISIG_CONFIRM_METHODS=["confirm"]},628827:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n.throw(e))}catch(e){o(e)}}function step(e){e.done?i(e.value):function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Contract=void 0;const o=r(387438),s=r(962922),a=i(r(411601)),c=i(r(274421)),u=i(r(682823)),l=i(r(757222)),d=r(664239),p=r(119346);function nameFunction(e,t){return{[e]:(...e)=>t(...e)}[e]}function validateArguments(e,t,r,n){var i;if(!isObject(e))return;if(t.params&&t.params.serialization_type!==d.AbiSerializationType.Json)throw new p.UnsupportedSerializationError(t.name,t.params.serialization_type);if(t.result&&t.result.serialization_type!==d.AbiSerializationType.Json)throw new p.UnsupportedSerializationError(t.name,t.result.serialization_type);const o=(null===(i=t.params)||void 0===i?void 0:i.args)||[];for(const t of o){const i=e[t.name],o=t.type_schema;o.definitions=n.body.root_schema.definitions;const s=r.compile(o);if(!s(i))throw new p.ArgumentSchemaError(t.name,s.errors)}for(const t of Object.keys(e)){if(!o.find((e=>e.name===t)))throw new p.UnknownArgumentError(t,o.map((e=>e.name)))}}const isUint8Array=e=>e&&void 0!==e.byteLength&&e.byteLength===e.length,isObject=e=>"[object Object]"===Object.prototype.toString.call(e);t.Contract=class Contract{constructor(e,t,r){this.account=e,this.contractId=t;const{viewMethods:i=[],changeMethods:o=[],abi:u}=r;let y=i.map((e=>({name:e,abi:null}))),g=o.map((e=>({name:e,abi:null})));if(u){if(y.length>0||g.length>0)throw new p.ConflictingOptions;y=u.body.functions.filter((e=>e.kind===d.AbiFunctionKind.View)).map((e=>({name:e.name,abi:e}))),g=u.body.functions.filter((e=>e.kind===d.AbiFunctionKind.Call)).map((e=>({name:e.name,abi:e})))}const m=function createAjv(){const e=new a.default({strictSchema:!1,formats:{uint32:!0,uint64:!0}});return(0,c.default)(e),e}();y.forEach((({name:e,abi:t})=>{Object.defineProperty(this,e,{writable:!1,enumerable:!0,value:nameFunction(e,((r={},i={},...o)=>n(this,void 0,void 0,(function*(){if(o.length||!isObject(r)&&!isUint8Array(r)||!isObject(i))throw new s.PositionalArgsError;return t&&validateArguments(r,t,m,u),this.account.viewFunction(Object.assign({contractId:this.contractId,methodName:e,args:r},i))}))))})})),g.forEach((({name:e,abi:t})=>{Object.defineProperty(this,e,{writable:!1,enumerable:!0,value:nameFunction(e,((...r)=>n(this,void 0,void 0,(function*(){if(r.length&&(r.length>3||!isObject(r[0])&&!isUint8Array(r[0])))throw new s.PositionalArgsError;if(r.length>1||!r[0]||!r[0].args){(0,l.default)("contract.methodName(args, gas, amount)")("use `contract.methodName({ args, gas?, amount?, callbackUrl?, meta? })` instead"),r[0]={args:r[0],gas:r[1],amount:r[2]}}return t&&validateArguments(r[0].args,t,m,u),this._changeMethod(Object.assign({methodName:e},r[0]))}))))})}))}_changeMethod({args:e,methodName:t,gas:r,amount:i,meta:a,callbackUrl:c}){return n(this,void 0,void 0,(function*(){!function validateBNLike(e){const t="number, decimal string or BN";for(const r of Object.keys(e)){const n=e[r];if(n&&!u.default.isBN(n)&&isNaN(n))throw new s.ArgumentTypeError(r,t,n)}}({gas:r,amount:i});const n=yield this.account.functionCall({contractId:this.contractId,methodName:t,args:e,gas:r,attachedDeposit:i,walletMeta:a,walletCallbackUrl:c});return(0,o.getTransactionLastResult)(n)}))}}},119346:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConflictingOptions=t.ArgumentSchemaError=t.UnknownArgumentError=t.UnsupportedSerializationError=void 0;class UnsupportedSerializationError extends Error{constructor(e,t){super(`Contract method '${e}' is using an unsupported serialization type ${t}`)}}t.UnsupportedSerializationError=UnsupportedSerializationError;class UnknownArgumentError extends Error{constructor(e,t){super(`Unrecognized argument '${e}', expected '${JSON.stringify(t)}'`)}}t.UnknownArgumentError=UnknownArgumentError;class ArgumentSchemaError extends Error{constructor(e,t){super(`Argument '${e}' does not conform to the specified ABI schema: '${JSON.stringify(t)}'`)}}t.ArgumentSchemaError=ArgumentSchemaError;class ConflictingOptions extends Error{constructor(){super("Conflicting contract method options have been passed. You can either specify ABI or a list of view/call methods.")}}t.ConflictingOptions=ConflictingOptions},720989:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MultisigStateStatus=t.MultisigDeleteRequestRejectionError=t.UnsupportedSerializationError=t.UnknownArgumentError=t.ConflictingOptions=t.ArgumentSchemaError=t.Contract=t.MULTISIG_CONFIRM_METHODS=t.MULTISIG_CHANGE_METHODS=t.MULTISIG_DEPOSIT=t.MULTISIG_GAS=t.MULTISIG_ALLOWANCE=t.MULTISIG_STORAGE_KEY=t.Connection=t.AccountMultisig=t.UrlAccountCreator=t.LocalAccountCreator=t.AccountCreator=t.Account2FA=t.Account=void 0;var n=r(731434);Object.defineProperty(t,"Account",{enumerable:!0,get:function(){return n.Account}});var i=r(94826);Object.defineProperty(t,"Account2FA",{enumerable:!0,get:function(){return i.Account2FA}});var o=r(525153);Object.defineProperty(t,"AccountCreator",{enumerable:!0,get:function(){return o.AccountCreator}}),Object.defineProperty(t,"LocalAccountCreator",{enumerable:!0,get:function(){return o.LocalAccountCreator}}),Object.defineProperty(t,"UrlAccountCreator",{enumerable:!0,get:function(){return o.UrlAccountCreator}});var s=r(707547);Object.defineProperty(t,"AccountMultisig",{enumerable:!0,get:function(){return s.AccountMultisig}});var a=r(495821);Object.defineProperty(t,"Connection",{enumerable:!0,get:function(){return a.Connection}});var c=r(273812);Object.defineProperty(t,"MULTISIG_STORAGE_KEY",{enumerable:!0,get:function(){return c.MULTISIG_STORAGE_KEY}}),Object.defineProperty(t,"MULTISIG_ALLOWANCE",{enumerable:!0,get:function(){return c.MULTISIG_ALLOWANCE}}),Object.defineProperty(t,"MULTISIG_GAS",{enumerable:!0,get:function(){return c.MULTISIG_GAS}}),Object.defineProperty(t,"MULTISIG_DEPOSIT",{enumerable:!0,get:function(){return c.MULTISIG_DEPOSIT}}),Object.defineProperty(t,"MULTISIG_CHANGE_METHODS",{enumerable:!0,get:function(){return c.MULTISIG_CHANGE_METHODS}}),Object.defineProperty(t,"MULTISIG_CONFIRM_METHODS",{enumerable:!0,get:function(){return c.MULTISIG_CONFIRM_METHODS}});var u=r(628827);Object.defineProperty(t,"Contract",{enumerable:!0,get:function(){return u.Contract}});var l=r(119346);Object.defineProperty(t,"ArgumentSchemaError",{enumerable:!0,get:function(){return l.ArgumentSchemaError}}),Object.defineProperty(t,"ConflictingOptions",{enumerable:!0,get:function(){return l.ConflictingOptions}}),Object.defineProperty(t,"UnknownArgumentError",{enumerable:!0,get:function(){return l.UnknownArgumentError}}),Object.defineProperty(t,"UnsupportedSerializationError",{enumerable:!0,get:function(){return l.UnsupportedSerializationError}});var d=r(836292);Object.defineProperty(t,"MultisigDeleteRequestRejectionError",{enumerable:!0,get:function(){return d.MultisigDeleteRequestRejectionError}}),Object.defineProperty(t,"MultisigStateStatus",{enumerable:!0,get:function(){return d.MultisigStateStatus}})},836292:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MultisigStateStatus=t.MultisigDeleteRequestRejectionError=void 0,function(e){e.CANNOT_DESERIALIZE_STATE="Cannot deserialize the contract state",e.MULTISIG_NOT_INITIALIZED="Smart contract panicked: Multisig contract should be initialized before usage",e.NO_SUCH_REQUEST="Smart contract panicked: panicked at 'No such request: either wrong number or already confirmed'",e.REQUEST_COOLDOWN_ERROR="Request cannot be deleted immediately after creation.",e.METHOD_NOT_FOUND="Contract method is not found"}(t.MultisigDeleteRequestRejectionError||(t.MultisigDeleteRequestRejectionError={})),function(e){e[e.INVALID_STATE=0]="INVALID_STATE",e[e.STATE_NOT_INITIALIZED=1]="STATE_NOT_INITIALIZED",e[e.VALID_STATE=2]="VALID_STATE",e[e.UNKNOWN_STATE=3]="UNKNOWN_STATE"}(t.MultisigStateStatus||(t.MultisigStateStatus={}))},685745:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KeyType=void 0,function(e){e[e.ED25519=0]="ED25519"}(t.KeyType||(t.KeyType={}))},368524:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PublicKey=t.KeyPairEd25519=t.KeyPair=t.KeyType=void 0;var n=r(685745);Object.defineProperty(t,"KeyType",{enumerable:!0,get:function(){return n.KeyType}});var i=r(868962);Object.defineProperty(t,"KeyPair",{enumerable:!0,get:function(){return i.KeyPair}});var o=r(68420);Object.defineProperty(t,"KeyPairEd25519",{enumerable:!0,get:function(){return o.KeyPairEd25519}});var s=r(447767);Object.defineProperty(t,"PublicKey",{enumerable:!0,get:function(){return s.PublicKey}})},868962:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KeyPair=void 0;const n=r(238980),i=r(68420);class KeyPair extends n.KeyPairBase{static fromRandom(e){if("ED25519"===e.toUpperCase())return i.KeyPairEd25519.fromRandom();throw new Error(`Unknown curve ${e}`)}static fromString(e){const t=e.split(":");if(1===t.length)return new i.KeyPairEd25519(t[0]);if(2===t.length){if("ED25519"===t[0].toUpperCase())return new i.KeyPairEd25519(t[1]);throw new Error(`Unknown curve: ${t[0]}`)}throw new Error("Invalid encoded key format, must be <curve>:<encoded key>")}}t.KeyPair=KeyPair},238980:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KeyPairBase=void 0;t.KeyPairBase=class KeyPairBase{}},68420:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.KeyPairEd25519=void 0;const i=r(881818),o=n(r(882926)),s=r(685745),a=r(238980),c=r(447767);class KeyPairEd25519 extends a.KeyPairBase{constructor(e){super();const t=o.default.sign.keyPair.fromSecretKey((0,i.baseDecode)(e));this.publicKey=new c.PublicKey({keyType:s.KeyType.ED25519,data:t.publicKey}),this.secretKey=e}static fromRandom(){const e=o.default.sign.keyPair();return new KeyPairEd25519((0,i.baseEncode)(e.secretKey))}sign(e){return{signature:o.default.sign.detached(e,(0,i.baseDecode)(this.secretKey)),publicKey:this.publicKey}}verify(e,t){return this.publicKey.verify(e,t)}toString(){return`ed25519:${this.secretKey}`}getPublicKey(){return this.publicKey}}t.KeyPairEd25519=KeyPairEd25519},447767:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PublicKey=void 0;const i=r(962922),o=r(881818),s=n(r(882926)),a=r(685745);class PublicKey extends i.Assignable{static from(e){return"string"==typeof e?PublicKey.fromString(e):e}static fromString(e){const t=e.split(":");let r,n=a.KeyType.ED25519;if(1===t.length)r=t[0];else{if(2!==t.length)throw new Error("Invalid encoded key format, must be <curve>:<encoded key>");r=t[1],n=function str_to_key_type(e){if("ed25519"===e.toLowerCase())return a.KeyType.ED25519;throw new Error(`Unknown key type ${e}`)}(t[0])}const i=(0,o.baseDecode)(r);if(i.length!==s.default.box.publicKeyLength)throw new Error(`Invalid public key size (${i.length}), must be ${s.default.box.publicKeyLength}`);return new PublicKey({keyType:n,data:i})}toString(){return`${function key_type_to_str(e){if(e===a.KeyType.ED25519)return"ed25519";throw new Error(`Unknown key type ${e}`)}(this.keyType)}:${(0,o.baseEncode)(this.data)}`}verify(e,t){if(this.keyType===a.KeyType.ED25519)return s.default.sign.detached.verify(e,t,this.data);throw new Error(`Unknown key type ${this.keyType}`)}}t.PublicKey=PublicKey},799367:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n.throw(e))}catch(e){o(e)}}function step(e){e.done?i(e.value):function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserLocalStorageKeyStore=void 0;const i=r(368524),o=r(520490);class BrowserLocalStorageKeyStore extends o.KeyStore{constructor(e=window.localStorage,t="near-api-js:keystore:"){super(),this.localStorage=e,this.prefix=t}setKey(e,t,r){return n(this,void 0,void 0,(function*(){this.localStorage.setItem(this.storageKeyForSecretKey(e,t),r.toString())}))}getKey(e,t){return n(this,void 0,void 0,(function*(){const r=this.localStorage.getItem(this.storageKeyForSecretKey(e,t));return r?i.KeyPair.fromString(r):null}))}removeKey(e,t){return n(this,void 0,void 0,(function*(){this.localStorage.removeItem(this.storageKeyForSecretKey(e,t))}))}clear(){return n(this,void 0,void 0,(function*(){for(const e of this.storageKeys())e.startsWith(this.prefix)&&this.localStorage.removeItem(e)}))}getNetworks(){return n(this,void 0,void 0,(function*(){const e=new Set;for(const t of this.storageKeys())if(t.startsWith(this.prefix)){const r=t.substring(this.prefix.length).split(":");e.add(r[1])}return Array.from(e.values())}))}getAccounts(e){return n(this,void 0,void 0,(function*(){const t=new Array;for(const r of this.storageKeys())if(r.startsWith(this.prefix)){const n=r.substring(this.prefix.length).split(":");n[1]===e&&t.push(n[0])}return t}))}storageKeyForSecretKey(e,t){return`${this.prefix}${t}:${e}`}*storageKeys(){for(let e=0;e<this.localStorage.length;e++)yield this.localStorage.key(e)}}t.BrowserLocalStorageKeyStore=BrowserLocalStorageKeyStore},928083:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserLocalStorageKeyStore=void 0;var n=r(799367);Object.defineProperty(t,"BrowserLocalStorageKeyStore",{enumerable:!0,get:function(){return n.BrowserLocalStorageKeyStore}})},30735:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n.throw(e))}catch(e){o(e)}}function step(e){e.done?i(e.value):function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.InMemoryKeyStore=void 0;const i=r(368524),o=r(636840);class InMemoryKeyStore extends o.KeyStore{constructor(){super(),this.keys={}}setKey(e,t,r){return n(this,void 0,void 0,(function*(){this.keys[`${t}:${e}`]=r.toString()}))}getKey(e,t){return n(this,void 0,void 0,(function*(){const r=this.keys[`${t}:${e}`];return r?i.KeyPair.fromString(r):null}))}removeKey(e,t){return n(this,void 0,void 0,(function*(){delete this.keys[`${t}:${e}`]}))}clear(){return n(this,void 0,void 0,(function*(){this.keys={}}))}getNetworks(){return n(this,void 0,void 0,(function*(){const e=new Set;return Object.keys(this.keys).forEach((t=>{const r=t.split(":");e.add(r[1])})),Array.from(e.values())}))}getAccounts(e){return n(this,void 0,void 0,(function*(){const t=new Array;return Object.keys(this.keys).forEach((r=>{const n=r.split(":");n[n.length-1]===e&&t.push(n.slice(0,n.length-1).join(":"))})),t}))}toString(){return"InMemoryKeyStore"}}t.InMemoryKeyStore=InMemoryKeyStore},520490:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MergeKeyStore=t.KeyStore=t.InMemoryKeyStore=void 0;var n=r(30735);Object.defineProperty(t,"InMemoryKeyStore",{enumerable:!0,get:function(){return n.InMemoryKeyStore}});var i=r(636840);Object.defineProperty(t,"KeyStore",{enumerable:!0,get:function(){return i.KeyStore}});var o=r(567248);Object.defineProperty(t,"MergeKeyStore",{enumerable:!0,get:function(){return o.MergeKeyStore}})},636840:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KeyStore=void 0;t.KeyStore=class KeyStore{}},567248:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n.throw(e))}catch(e){o(e)}}function step(e){e.done?i(e.value):function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.MergeKeyStore=void 0;const i=r(636840);class MergeKeyStore extends i.KeyStore{constructor(e,t={writeKeyStoreIndex:0}){super(),this.options=t,this.keyStores=e}setKey(e,t,r){return n(this,void 0,void 0,(function*(){yield this.keyStores[this.options.writeKeyStoreIndex].setKey(e,t,r)}))}getKey(e,t){return n(this,void 0,void 0,(function*(){for(const r of this.keyStores){const n=yield r.getKey(e,t);if(n)return n}return null}))}removeKey(e,t){return n(this,void 0,void 0,(function*(){for(const r of this.keyStores)yield r.removeKey(e,t)}))}clear(){return n(this,void 0,void 0,(function*(){for(const e of this.keyStores)yield e.clear()}))}getNetworks(){return n(this,void 0,void 0,(function*(){const e=new Set;for(const t of this.keyStores)for(const r of yield t.getNetworks())e.add(r);return Array.from(e)}))}getAccounts(e){return n(this,void 0,void 0,(function*(){const t=new Set;for(const r of this.keyStores)for(const n of yield r.getAccounts(e))t.add(n);return Array.from(t)}))}toString(){return`MergeKeyStore(${this.keyStores.join(", ")})`}}t.MergeKeyStore=MergeKeyStore},305829:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(698203)),o=n(r(465391)),s=n(r(617334)),a=new o.default.Agent({keepAlive:!0}),c=new s.default.Agent({keepAlive:!0});t.default=function default_1(e,t){return(0,i.default)(e,Object.assign({agent:(r=new URL(e.toString()),"http:"===r.protocol?a:c)},t));var r}},674550:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},s=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n.throw(e))}catch(e){o(e)}}function step(e){e.done?i(e.value):function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.fetchJson=void 0;const c=r(962922),u=a(r(964011)),l=r(394151),logWarning=(...e)=>!{ONEKEY_PROXY:void 0,NODE_ENV:"production",TAMAGUI_TARGET:"web"}.NEAR_NO_LOGS&&console.warn(...e);t.fetchJson=function fetchJson(e,t){return s(this,void 0,void 0,(function*(){let n={url:null};"string"==typeof e?n.url=e:n=e;const i=yield(0,l.exponentialBackoff)(1e3,10,1.5,(()=>s(this,void 0,void 0,(function*(){try{r.g.fetch||(r.g.fetch=(yield Promise.resolve().then((()=>o(r(305829))))).default);const e=yield r.g.fetch(n.url,{method:t?"POST":"GET",body:t||void 0,headers:Object.assign(Object.assign({},n.headers),{"Content-Type":"application/json"})});if(!e.ok){if(503===e.status)return logWarning(`Retrying HTTP request for ${n.url} as it's not available now`),null;throw(0,u.default)(e.status,yield e.text())}return e}catch(e){if(e.toString().includes("FetchError")||e.toString().includes("Failed to fetch"))return logWarning(`Retrying HTTP request for ${n.url} because of error: ${e}`),null;throw e}}))));if(!i)throw new c.TypedError(`Exceeded 10 attempts for ${n.url}.`,"RetriesExceeded");return yield i.json()}))}},532885:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetchJson=t.Provider=t.JsonRpcProvider=t.exponentialBackoff=void 0;var n=r(394151);Object.defineProperty(t,"exponentialBackoff",{enumerable:!0,get:function(){return n.exponentialBackoff}});var i=r(651571);Object.defineProperty(t,"JsonRpcProvider",{enumerable:!0,get:function(){return i.JsonRpcProvider}});var o=r(960560);Object.defineProperty(t,"Provider",{enumerable:!0,get:function(){return o.Provider}});var s=r(674550);Object.defineProperty(t,"fetchJson",{enumerable:!0,get:function(){return s.fetchJson}})},651571:function(e,t,r){"use strict";var n=r(901048).Buffer,i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n.throw(e))}catch(e){o(e)}}function step(e){e.done?i(e.value):function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))},o=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r};Object.defineProperty(t,"__esModule",{value:!0}),t.JsonRpcProvider=void 0;const s=r(387438),a=r(962922),c=r(332564),u=r(881818),l=r(394151),d=r(960560),p=r(674550);let y=123;class JsonRpcProvider extends d.Provider{constructor(e){super(),this.connection=e||{url:""}}status(){return i(this,void 0,void 0,(function*(){return this.sendJsonRpc("status",[])}))}sendTransaction(e){return i(this,void 0,void 0,(function*(){const t=(0,c.encodeTransaction)(e);return this.sendJsonRpc("broadcast_tx_commit",[n.from(t).toString("base64")])}))}sendTransactionAsync(e){return i(this,void 0,void 0,(function*(){const t=(0,c.encodeTransaction)(e);return this.sendJsonRpc("broadcast_tx_async",[n.from(t).toString("base64")])}))}txStatus(e,t){return i(this,void 0,void 0,(function*(){return"string"==typeof e?this.txStatusString(e,t):this.txStatusUint8Array(e,t)}))}txStatusUint8Array(e,t){return i(this,void 0,void 0,(function*(){return this.sendJsonRpc("tx",[(0,u.baseEncode)(e),t])}))}txStatusString(e,t){return i(this,void 0,void 0,(function*(){return this.sendJsonRpc("tx",[e,t])}))}txStatusReceipts(e,t){return i(this,void 0,void 0,(function*(){return"string"==typeof e?this.sendJsonRpc("EXPERIMENTAL_tx_status",[e,t]):this.sendJsonRpc("EXPERIMENTAL_tx_status",[(0,u.baseEncode)(e),t])}))}query(...e){return i(this,void 0,void 0,(function*(){let t;if(1===e.length){const r=e[0],{block_id:n,blockId:i}=r,s=o(r,["block_id","blockId"]);t=yield this.sendJsonRpc("query",Object.assign(Object.assign({},s),{block_id:n||i}))}else{const[r,n]=e;t=yield this.sendJsonRpc("query",[r,n])}if(t&&t.error)throw new a.TypedError(`Querying failed: ${t.error}.\n${JSON.stringify(t,null,2)}`,(0,s.getErrorTypeFromErrorMessage)(t.error,t.error.name));return t}))}block(e){return i(this,void 0,void 0,(function*(){const{finality:t}=e,{blockId:r}=e;return this.sendJsonRpc("block",{block_id:r,finality:t})}))}blockChanges(e){return i(this,void 0,void 0,(function*(){const{finality:t}=e,{blockId:r}=e;return this.sendJsonRpc("EXPERIMENTAL_changes_in_block",{block_id:r,finality:t})}))}chunk(e){return i(this,void 0,void 0,(function*(){return this.sendJsonRpc("chunk",[e])}))}validators(e){return i(this,void 0,void 0,(function*(){return this.sendJsonRpc("validators",[e])}))}experimental_protocolConfig(e){return i(this,void 0,void 0,(function*(){const t=e,{blockId:r}=t,n=o(t,["blockId"]);return yield this.sendJsonRpc("EXPERIMENTAL_protocol_config",Object.assign(Object.assign({},n),{block_id:r}))}))}lightClientProof(e){return i(this,void 0,void 0,(function*(){return yield this.sendJsonRpc("EXPERIMENTAL_light_client_proof",e)}))}nextLightClientBlock(e){return i(this,void 0,void 0,(function*(){return yield this.sendJsonRpc("next_light_client_block",e)}))}accessKeyChanges(e,t){return i(this,void 0,void 0,(function*(){const{finality:r}=t,{blockId:n}=t;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"all_access_key_changes",account_ids:e,block_id:n,finality:r})}))}singleAccessKeyChanges(e,t){return i(this,void 0,void 0,(function*(){const{finality:r}=t,{blockId:n}=t;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"single_access_key_changes",keys:e,block_id:n,finality:r})}))}accountChanges(e,t){return i(this,void 0,void 0,(function*(){const{finality:r}=t,{blockId:n}=t;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"account_changes",account_ids:e,block_id:n,finality:r})}))}contractStateChanges(e,t,r=""){return i(this,void 0,void 0,(function*(){const{finality:n}=t,{blockId:i}=t;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"data_changes",account_ids:e,key_prefix_base64:r,block_id:i,finality:n})}))}contractCodeChanges(e,t){return i(this,void 0,void 0,(function*(){const{finality:r}=t,{blockId:n}=t;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"contract_code_changes",account_ids:e,block_id:n,finality:r})}))}gasPrice(e){return i(this,void 0,void 0,(function*(){return yield this.sendJsonRpc("gas_price",[e])}))}sendJsonRpc(e,t){return i(this,void 0,void 0,(function*(){const r=yield(0,l.exponentialBackoff)(500,12,1.5,(()=>i(this,void 0,void 0,(function*(){try{const r={method:e,params:t,id:y++,jsonrpc:"2.0"},n=yield(0,p.fetchJson)(this.connection,JSON.stringify(r));if(n.error){if("object"==typeof n.error.data){if("string"==typeof n.error.data.error_message&&"string"==typeof n.error.data.error_type)throw new a.TypedError(n.error.data.error_message,n.error.data.error_type);throw(0,s.parseRpcError)(n.error.data)}{const e=`[${n.error.code}] ${n.error.message}: ${n.error.data}`;if("Timeout"===n.error.data||e.includes("Timeout error")||e.includes("query has timed out"))throw new a.TypedError(e,"TimeoutError");throw new a.TypedError(e,(0,s.getErrorTypeFromErrorMessage)(n.error.data,n.error.name))}}return n}catch(r){if("TimeoutError"===r.type)return{ONEKEY_PROXY:void 0,NODE_ENV:"production",TAMAGUI_TARGET:"web"}.NEAR_NO_LOGS||console.warn(`Retrying request to ${e} as it has timed out`,t),null;throw r}})))),{result:n}=r;if(void 0===n)throw new a.TypedError(`Exceeded 12 attempts for request to ${e}.`,"RetriesExceeded");return n}))}}t.JsonRpcProvider=JsonRpcProvider},960560:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Provider=void 0;t.Provider=class Provider{}},56901:e=>{"use strict";function wrapfunction(e,t){if("function"!=typeof e)throw new TypeError("argument fn must be a function");return e}function wrapproperty(e,t,r){if(!e||"object"!=typeof e&&"function"!=typeof e)throw new TypeError("argument obj must be object");var n=Object.getOwnPropertyDescriptor(e,t);if(!n)throw new TypeError("must call property on owner object");if(!n.configurable)throw new TypeError("property must be configurable")}e.exports=function depd(e){if(!e)throw new TypeError("argument namespace is required");function deprecate(e){}return deprecate._file=void 0,deprecate._ignored=!0,deprecate._namespace=e,deprecate._traced=!1,deprecate._warned=Object.create(null),deprecate.function=wrapfunction,deprecate.property=wrapproperty,deprecate}},964011:(e,t,r)=>{"use strict";var n=r(56901)("http-errors"),i=r(339365),o=r(223611),s=r(435615),a=r(783976);function codeClass(e){return Number(String(e).charAt(0)+"00")}function nameFunc(e,t){var r=Object.getOwnPropertyDescriptor(e,"name");r&&r.configurable&&(r.value=t,Object.defineProperty(e,"name",r))}function toClassName(e){return"Error"!==e.substr(-5)?e+"Error":e}e.exports=function createError(){for(var e,t,r=500,i={},s=0;s<arguments.length;s++){var a=arguments[s];if(a instanceof Error)r=(e=a).status||e.statusCode||r;else switch(typeof a){case"string":t=a;break;case"number":r=a,0!==s&&n("non-first-argument status code; replace with createError("+a+", ...)");break;case"object":i=a}}"number"==typeof r&&(r<400||r>=600)&&n("non-error status code; use only 4xx or 5xx status codes");("number"!=typeof r||!o[r]&&(r<400||r>=600))&&(r=500);var c=createError[r]||createError[codeClass(r)];e||(e=c?new c(t):new Error(t||o[r]),Error.captureStackTrace(e,createError));c&&e instanceof c&&e.status===r||(e.expose=r<500,e.status=e.statusCode=r);for(var u in i)"status"!==u&&"statusCode"!==u&&(e[u]=i[u]);return e},e.exports.HttpError=function createHttpErrorConstructor(){function HttpError(){throw new TypeError("cannot construct abstract class")}return s(HttpError,Error),HttpError}(),e.exports.isHttpError=function createIsHttpErrorFunction(e){return function isHttpError(t){return!(!t||"object"!=typeof t)&&(t instanceof e||t instanceof Error&&"boolean"==typeof t.expose&&"number"==typeof t.statusCode&&t.status===t.statusCode)}}(e.exports.HttpError),function populateConstructorExports(e,t,r){t.forEach((function forEachCode(t){var n,c=a(o[t]);switch(codeClass(t)){case 400:n=function createClientErrorConstructor(e,t,r){var n=toClassName(t);function ClientError(e){var t=null!=e?e:o[r],s=new Error(t);return Error.captureStackTrace(s,ClientError),i(s,ClientError.prototype),Object.defineProperty(s,"message",{enumerable:!0,configurable:!0,value:t,writable:!0}),Object.defineProperty(s,"name",{enumerable:!1,configurable:!0,value:n,writable:!0}),s}return s(ClientError,e),nameFunc(ClientError,n),ClientError.prototype.status=r,ClientError.prototype.statusCode=r,ClientError.prototype.expose=!0,ClientError}(r,c,t);break;case 500:n=function createServerErrorConstructor(e,t,r){var n=toClassName(t);function ServerError(e){var t=null!=e?e:o[r],s=new Error(t);return Error.captureStackTrace(s,ServerError),i(s,ServerError.prototype),Object.defineProperty(s,"message",{enumerable:!0,configurable:!0,value:t,writable:!0}),Object.defineProperty(s,"name",{enumerable:!1,configurable:!0,value:n,writable:!0}),s}return s(ServerError,e),nameFunc(ServerError,n),ServerError.prototype.status=r,ServerError.prototype.statusCode=r,ServerError.prototype.expose=!1,ServerError}(r,c,t)}n&&(e[t]=n,e[c]=n)})),e["I'mateapot"]=n.function(e.ImATeapot,'"I\'mateapot"; use "ImATeapot" instead')}(e.exports,o.codes,e.exports.HttpError)},223611:(e,t,r)=>{"use strict";var n=r(427046);function status(e){if("number"==typeof e){if(!status[e])throw new Error("invalid status code: "+e);return e}if("string"!=typeof e)throw new TypeError("code must be a number or string");var t=parseInt(e,10);if(!isNaN(t)){if(!status[t])throw new Error("invalid status code: "+t);return t}if(!(t=status[e.toLowerCase()]))throw new Error('invalid status message: "'+e+'"');return t}e.exports=status,status.STATUS_CODES=n,status.codes=function populateStatusesMap(e,t){var r=[];return Object.keys(t).forEach((function forEachCode(n){var i=t[n],o=Number(n);e[o]=i,e[i]=o,e[i.toLowerCase()]=o,r.push(o)})),r}(status,n),status.redirect={300:!0,301:!0,302:!0,303:!0,305:!0,307:!0,308:!0},status.empty={204:!0,205:!0,304:!0},status.retry={502:!0,503:!0,504:!0}},606744:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n.throw(e))}catch(e){o(e)}}function step(e){e.done?i(e.value):function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.InMemorySigner=void 0;const o=r(368524),s=r(520490),a=i(r(180235)),c=r(541268);class InMemorySigner extends c.Signer{constructor(e){super(),this.keyStore=e}static fromKeyPair(e,t,r){return n(this,void 0,void 0,(function*(){const n=new s.InMemoryKeyStore;return yield n.setKey(e,t,r),new InMemorySigner(n)}))}createKey(e,t){return n(this,void 0,void 0,(function*(){const r=o.KeyPair.fromRandom("ed25519");return yield this.keyStore.setKey(t,e,r),r.getPublicKey()}))}getPublicKey(e,t){return n(this,void 0,void 0,(function*(){const r=yield this.keyStore.getKey(t,e);return null===r?null:r.getPublicKey()}))}signMessage(e,t,r){return n(this,void 0,void 0,(function*(){const n=new Uint8Array(a.default.sha256.array(e));if(!t)throw new Error("InMemorySigner requires provided account id");const i=yield this.keyStore.getKey(r,t);if(null===i)throw new Error(`Key for ${t} not found in ${r}`);return i.sign(n)}))}toString(){return`InMemorySigner(${this.keyStore})`}}t.InMemorySigner=InMemorySigner},86796:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Signer=t.InMemorySigner=void 0;var n=r(606744);Object.defineProperty(t,"InMemorySigner",{enumerable:!0,get:function(){return n.InMemorySigner}});var i=r(541268);Object.defineProperty(t,"Signer",{enumerable:!0,get:function(){return i.Signer}})},541268:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Signer=void 0;t.Signer=class Signer{}},544630:(e,t,r)=>{"use strict";var n=r(901048).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.actionCreators=t.stringifyJsonOrBytes=void 0;const i=r(210303);function stringifyJsonOrBytes(e){return void 0!==e.byteLength&&e.byteLength===e.length?e:n.from(JSON.stringify(e))}t.stringifyJsonOrBytes=stringifyJsonOrBytes,t.actionCreators={addKey:function addKey(e,t){return new i.Action({addKey:new i.AddKey({publicKey:e,accessKey:t})})},createAccount:function createAccount(){return new i.Action({createAccount:new i.CreateAccount({})})},deleteAccount:function deleteAccount(e){return new i.Action({deleteAccount:new i.DeleteAccount({beneficiaryId:e})})},deleteKey:function deleteKey(e){return new i.Action({deleteKey:new i.DeleteKey({publicKey:e})})},deployContract:function deployContract(e){return new i.Action({deployContract:new i.DeployContract({code:e})})},fullAccessKey:function fullAccessKey(){return new i.AccessKey({permission:new i.AccessKeyPermission({fullAccess:new i.FullAccessPermission({})})})},functionCall:function functionCall(e,t,r,n,o=stringifyJsonOrBytes,s=!1){return s?new i.Action({functionCall:new i.FunctionCall({methodName:e,args:t,gas:r,deposit:n})}):new i.Action({functionCall:new i.FunctionCall({methodName:e,args:o(t),gas:r,deposit:n})})},functionCallAccessKey:function functionCallAccessKey(e,t,r){return new i.AccessKey({permission:new i.AccessKeyPermission({functionCall:new i.FunctionCallPermission({receiverId:e,allowance:r,methodNames:t})})})},signedDelegate:function signedDelegate({delegateAction:e,signature:t}){return new i.Action({signedDelegate:new i.SignedDelegate({delegateAction:e,signature:t})})},stake:function stake(e,t){return new i.Action({stake:new i.Stake({stake:e,publicKey:t})})},transfer:function transfer(e){return new i.Action({transfer:new i.Transfer({deposit:e})})}}},210303:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Action=t.SignedDelegate=t.DeleteAccount=t.DeleteKey=t.AddKey=t.Stake=t.Transfer=t.FunctionCall=t.DeployContract=t.CreateAccount=t.IAction=t.AccessKey=t.AccessKeyPermission=t.FullAccessPermission=t.FunctionCallPermission=void 0;const n=r(962922);class Enum{constructor(e){if(1!==Object.keys(e).length)throw new Error("Enum can only take single value");Object.keys(e).map((t=>{this[t]=e[t],this.enum=t}))}}class FunctionCallPermission extends n.Assignable{}t.FunctionCallPermission=FunctionCallPermission;class FullAccessPermission extends n.Assignable{}t.FullAccessPermission=FullAccessPermission;t.AccessKeyPermission=class AccessKeyPermission extends Enum{};class AccessKey extends n.Assignable{}t.AccessKey=AccessKey;class IAction extends n.Assignable{}t.IAction=IAction;t.CreateAccount=class CreateAccount extends IAction{};t.DeployContract=class DeployContract extends IAction{};t.FunctionCall=class FunctionCall extends IAction{};t.Transfer=class Transfer extends IAction{};t.Stake=class Stake extends IAction{};t.AddKey=class AddKey extends IAction{};t.DeleteKey=class DeleteKey extends IAction{};t.DeleteAccount=class DeleteAccount extends IAction{};t.SignedDelegate=class SignedDelegate extends IAction{};t.Action=class Action extends Enum{}},297929:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createTransaction=void 0;const n=r(489205);t.createTransaction=function createTransaction(e,t,r,i,o,s){return new n.Transaction({signerId:e,publicKey:t,nonce:i,receiverId:r,actions:o,blockHash:s})}},798609:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildDelegateAction=t.DelegateAction=void 0;const n=r(962922),i=r(544630),{addKey:o,createAccount:s,deleteAccount:a,deleteKey:c,deployContract:u,functionCall:l,stake:d,transfer:p}=i.actionCreators;class DelegateAction extends n.Assignable{}t.DelegateAction=DelegateAction,t.buildDelegateAction=function buildDelegateAction({actions:e,maxBlockHeight:t,nonce:r,publicKey:n,receiverId:i,senderId:y}){return new DelegateAction({senderId:y,receiverId:i,actions:e.map((e=>{if(!e.type&&!e.params)return e;switch(e.type){case"AddKey":{const{publicKey:t,accessKey:r}=e.params;return o(t,r)}case"CreateAccount":return s(e.params.createAccount);case"DeleteAccount":return a(e.params.deleteAccount);case"DeleteKey":return c(e.params.publicKey);case"DeployContract":return u(e.params.code);case"FunctionCall":{const{methodName:t,args:r,gas:n,deposit:i}=e.params;return l(t,r,n,i)}case"Stake":return d(e.params.stake,e.params.publicKey);case"Transfer":{const{deposit:t}=e.params;return p(t)}}throw new Error("Unrecognized action")})),nonce:r,maxBlockHeight:t,publicKey:n})}},332564:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(544630),t),i(r(210303),t),i(r(297929),t),i(r(798609),t),i(r(489205),t),i(r(825727),t),i(r(840658),t)},428662:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DelegateActionPrefix=void 0;const n=r(962922),i=Math.pow(2,30),o=366;class NEPPrefix extends n.Assignable{}class ActionableMessagePrefix extends NEPPrefix{constructor(e){super({prefix:i+e})}}t.DelegateActionPrefix=class DelegateActionPrefix extends ActionableMessagePrefix{constructor(){super(o)}}},489205:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SCHEMA=t.SignedTransaction=t.Transaction=t.decodeSignedTransaction=t.decodeTransaction=t.encodeTransaction=t.encodeSignedDelegate=t.encodeDelegateAction=void 0;const n=r(368524),i=r(962922),o=r(881818),s=r(210303),a=r(798609),c=r(428662),u=r(840658);function encodeTransaction(e){return(0,o.serialize)(t.SCHEMA,e)}function decodeTransaction(e){return(0,o.deserialize)(t.SCHEMA,Transaction,e)}function decodeSignedTransaction(e){return(0,o.deserialize)(t.SCHEMA,SignedTransaction,e)}t.encodeDelegateAction=function encodeDelegateAction(e){return new Uint8Array([...(0,o.serialize)(t.SCHEMA,new c.DelegateActionPrefix),...(0,o.serialize)(t.SCHEMA,e)])},t.encodeSignedDelegate=function encodeSignedDelegate(e){return(0,o.serialize)(t.SCHEMA,e)},t.encodeTransaction=encodeTransaction,t.decodeTransaction=decodeTransaction,t.decodeSignedTransaction=decodeSignedTransaction;class Transaction extends i.Assignable{encode(){return encodeTransaction(this)}static decode(e){return decodeTransaction(e)}}t.Transaction=Transaction;class SignedTransaction extends i.Assignable{encode(){return encodeTransaction(this)}static decode(e){return decodeSignedTransaction(e)}}t.SignedTransaction=SignedTransaction,t.SCHEMA=new Map([[u.Signature,{kind:"struct",fields:[["keyType","u8"],["data",[64]]]}],[SignedTransaction,{kind:"struct",fields:[["transaction",Transaction],["signature",u.Signature]]}],[Transaction,{kind:"struct",fields:[["signerId","string"],["publicKey",n.PublicKey],["nonce","u64"],["receiverId","string"],["blockHash",[32]],["actions",[s.Action]]]}],[n.PublicKey,{kind:"struct",fields:[["keyType","u8"],["data",[32]]]}],[s.AccessKey,{kind:"struct",fields:[["nonce","u64"],["permission",s.AccessKeyPermission]]}],[s.AccessKeyPermission,{kind:"enum",field:"enum",values:[["functionCall",s.FunctionCallPermission],["fullAccess",s.FullAccessPermission]]}],[s.FunctionCallPermission,{kind:"struct",fields:[["allowance",{kind:"option",type:"u128"}],["receiverId","string"],["methodNames",["string"]]]}],[s.FullAccessPermission,{kind:"struct",fields:[]}],[s.Action,{kind:"enum",field:"enum",values:[["createAccount",s.CreateAccount],["deployContract",s.DeployContract],["functionCall",s.FunctionCall],["transfer",s.Transfer],["stake",s.Stake],["addKey",s.AddKey],["deleteKey",s.DeleteKey],["deleteAccount",s.DeleteAccount],["signedDelegate",s.SignedDelegate]]}],[s.CreateAccount,{kind:"struct",fields:[]}],[s.DeployContract,{kind:"struct",fields:[["code",["u8"]]]}],[s.FunctionCall,{kind:"struct",fields:[["methodName","string"],["args",["u8"]],["gas","u64"],["deposit","u128"]]}],[s.Transfer,{kind:"struct",fields:[["deposit","u128"]]}],[s.Stake,{kind:"struct",fields:[["stake","u128"],["publicKey",n.PublicKey]]}],[s.AddKey,{kind:"struct",fields:[["publicKey",n.PublicKey],["accessKey",s.AccessKey]]}],[s.DeleteKey,{kind:"struct",fields:[["publicKey",n.PublicKey]]}],[s.DeleteAccount,{kind:"struct",fields:[["beneficiaryId","string"]]}],[a.DelegateAction,{kind:"struct",fields:[["senderId","string"],["receiverId","string"],["actions",[s.Action]],["nonce","u64"],["maxBlockHeight","u64"],["publicKey",n.PublicKey]]}],[c.DelegateActionPrefix,{kind:"struct",fields:[["prefix","u32"]]}],[s.SignedDelegate,{kind:"struct",fields:[["delegateAction",a.DelegateAction],["signature",u.Signature]]}]])},825727:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n.throw(e))}catch(e){o(e)}}function step(e){e.done?i(e.value):function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.signDelegateAction=t.signTransaction=void 0;const o=i(r(180235)),s=r(210303),a=r(297929),c=r(489205),u=r(840658);function signTransactionObject(e,t,r,i){return n(this,void 0,void 0,(function*(){const n=(0,c.encodeTransaction)(e),s=new Uint8Array(o.default.sha256.array(n)),a=yield t.signMessage(n,r,i);return[s,new c.SignedTransaction({transaction:e,signature:new u.Signature({keyType:e.publicKey.keyType,data:a.signature})})]}))}t.signTransaction=function signTransaction(...e){return n(this,void 0,void 0,(function*(){if(e[0].constructor===c.Transaction){const[t,r,n,i]=e;return signTransactionObject(t,r,n,i)}{const[t,r,n,i,o,s,c]=e,u=yield o.getPublicKey(s,c);return signTransactionObject((0,a.createTransaction)(s,u,t,r,n,i),o,s,c)}}))},t.signDelegateAction=function signDelegateAction({delegateAction:e,signer:t}){return n(this,void 0,void 0,(function*(){const r=(0,c.encodeDelegateAction)(e),n=yield t.sign(r),i=new s.SignedDelegate({delegateAction:e,signature:new u.Signature({keyType:e.publicKey.keyType,data:n})});return{hash:new Uint8Array(o.default.sha256.array(r)),signedDelegateAction:i}}))}},840658:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Signature=void 0;const n=r(962922);class Signature extends n.Assignable{}t.Signature=Signature},251185:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Assignable=void 0;t.Assignable=class Assignable{constructor(e){Object.keys(e).map((t=>{this[t]=e[t]}))}}},417903:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorContext=t.TypedError=t.ArgumentTypeError=t.PositionalArgsError=void 0;class PositionalArgsError extends Error{constructor(){super("Contract method calls expect named arguments wrapped in object, e.g. { argName1: argValue1, argName2: argValue2 }")}}t.PositionalArgsError=PositionalArgsError;class ArgumentTypeError extends Error{constructor(e,t,r){super(`Expected ${t} for '${e}' argument, but got '${JSON.stringify(r)}'`)}}t.ArgumentTypeError=ArgumentTypeError;class TypedError extends Error{constructor(e,t,r){super(e),this.type=t||"UntypedError",this.context=r}}t.TypedError=TypedError;t.ErrorContext=class ErrorContext{constructor(e){this.transactionHash=e}}},962922:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(251185),t),i(r(417903),t),i(r(315462),t)},315462:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FinalExecutionStatusBasic=t.ExecutionStatusBasic=t.IdType=void 0;var n=r(112106);Object.defineProperty(t,"IdType",{enumerable:!0,get:function(){return n.IdType}});var i=r(433235);Object.defineProperty(t,"ExecutionStatusBasic",{enumerable:!0,get:function(){return i.ExecutionStatusBasic}}),Object.defineProperty(t,"FinalExecutionStatusBasic",{enumerable:!0,get:function(){return i.FinalExecutionStatusBasic}})},112106:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IdType=void 0,function(e){e.Transaction="transaction",e.Receipt="receipt"}(t.IdType||(t.IdType={}))},433235:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FinalExecutionStatusBasic=t.ExecutionStatusBasic=void 0,function(e){e.Unknown="Unknown",e.Pending="Pending",e.Failure="Failure"}(t.ExecutionStatusBasic||(t.ExecutionStatusBasic={})),function(e){e.NotStarted="NotStarted",e.Started="Started",e.Failure="Failure"}(t.FinalExecutionStatusBasic||(t.FinalExecutionStatusBasic={}))},78239:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_FUNCTION_CALL_GAS=void 0;const i=n(r(682823));t.DEFAULT_FUNCTION_CALL_GAS=new i.default("30000000000000")},891501:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logWarning=void 0,t.logWarning=function logWarning(...e){({ONEKEY_PROXY:void 0,NODE_ENV:"production",TAMAGUI_TARGET:"web"}).NEAR_NO_LOGS||console.warn(...e)}},104380:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseRpcError=t.parseResultError=t.getErrorTypeFromErrorMessage=t.formatError=t.ServerError=t.logWarning=void 0;var n=r(891501);Object.defineProperty(t,"logWarning",{enumerable:!0,get:function(){return n.logWarning}});var i=r(272913);Object.defineProperty(t,"ServerError",{enumerable:!0,get:function(){return i.ServerError}}),Object.defineProperty(t,"formatError",{enumerable:!0,get:function(){return i.formatError}}),Object.defineProperty(t,"getErrorTypeFromErrorMessage",{enumerable:!0,get:function(){return i.getErrorTypeFromErrorMessage}}),Object.defineProperty(t,"parseResultError",{enumerable:!0,get:function(){return i.parseResultError}}),Object.defineProperty(t,"parseRpcError",{enumerable:!0,get:function(){return i.parseRpcError}})},272913:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getErrorTypeFromErrorMessage=t.formatError=t.parseResultError=t.parseRpcError=t.ServerError=void 0;const i=r(962922),o=n(r(850764)),s=r(655791),a=n(r(999494)),c=n(r(530785)),u={formatNear:()=>(e,t)=>(0,s.formatNearAmount)(t(e))};class ServerError extends i.TypedError{}t.ServerError=ServerError;class ServerTransactionError extends ServerError{}function parseRpcError(e){const t={},r=walkSubtype(e,c.default.schema,t,""),n=new ServerError(formatError(r,t),r);return Object.assign(n,t),n}function formatError(e,t){return"string"==typeof a.default[e]?o.default.render(a.default[e],Object.assign(Object.assign({},t),u)):JSON.stringify(t)}function walkSubtype(e,t,r,n){let i,o,s;for(const r in t){if(a=e[r],"[object String]"===Object.prototype.toString.call(a))return e[r];if(isObject(e[r]))i=e[r],o=t[r],s=r;else{if(!isObject(e.kind)||!isObject(e.kind[r]))continue;i=e.kind[r],o=t[r],s=r}}var a;if(i&&o){for(const e of Object.keys(o.props))r[e]=i[e];return walkSubtype(i,t,r,s)}return r.kind=e,n}function isObject(e){return"[object Object]"===Object.prototype.toString.call(e)}t.parseRpcError=parseRpcError,t.parseResultError=function parseResultError(e){const t=parseRpcError(e.status.Failure),r=new ServerTransactionError;return Object.assign(r,t),r.type=t.type,r.message=t.message,r.transaction_outcome=e.transaction_outcome,r},t.formatError=formatError,t.getErrorTypeFromErrorMessage=function getErrorTypeFromErrorMessage(e,t){switch(!0){case/^account .*? does not exist while viewing$/.test(e):case/^Account .*? doesn't exist$/.test(e):return"AccountDoesNotExist";case/^access key .*? does not exist while viewing$/.test(e):return"AccessKeyDoesNotExist";case/wasm execution failed with error: FunctionCallError\(CompilationError\(CodeDoesNotExist/.test(e):return"CodeDoesNotExist";case/Transaction nonce \d+ must be larger than nonce of the used access key \d+/.test(e):return"InvalidNonce";default:return t}}},655791:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.parseNearAmount=t.formatNearAmount=t.NEAR_NOMINATION=t.NEAR_NOMINATION_EXP=void 0;const i=n(r(682823));t.NEAR_NOMINATION_EXP=24,t.NEAR_NOMINATION=new i.default("10",10).pow(new i.default(t.NEAR_NOMINATION_EXP,10));const o=[],s=new i.default(10);for(let e=0,r=new i.default(5);e<t.NEAR_NOMINATION_EXP;e++,r=r.mul(s))o[e]=r;t.formatNearAmount=function formatNearAmount(e,r=t.NEAR_NOMINATION_EXP){const n=new i.default(e,10);if(r!==t.NEAR_NOMINATION_EXP){const e=t.NEAR_NOMINATION_EXP-r-1;e>0&&n.iadd(o[e])}const s=(e=n.toString()).substring(0,e.length-t.NEAR_NOMINATION_EXP)||"0",a=e.substring(e.length-t.NEAR_NOMINATION_EXP).padStart(t.NEAR_NOMINATION_EXP,"0").substring(0,r);return function trimTrailingZeroes(e){return e.replace(/\.?0*$/,"")}(`${function formatWithCommas(e){const t=/(-?\d+)(\d{3})/;for(;t.test(e);)e=e.replace(t,"$1,$2");return e}(s)}.${a}`)},t.parseNearAmount=function parseNearAmount(e){if(!e)return null;const r=(e=function cleanupAmount(e){return e.replace(/,/g,"").trim()}(e)).split("."),n=r[0],i=r[1]||"";if(r.length>2||i.length>t.NEAR_NOMINATION_EXP)throw new Error(`Cannot parse '${e}' as NEAR amount`);return function trimLeadingZeroes(e){if(""===(e=e.replace(/^0+/,"")))return"0";return e}(n+i.padEnd(t.NEAR_NOMINATION_EXP,"0"))}},387438:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(78239),t),i(r(104380),t),i(r(655791),t),i(r(547279),t),i(r(540625),t),i(r(601775),t)},547279:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.printTxOutcomeLogs=t.printTxOutcomeLogsAndFailures=void 0;const n=r(104380),i=!!{ONEKEY_PROXY:void 0,NODE_ENV:"production",TAMAGUI_TARGET:"web"}.NEAR_NO_LOGS;function printTxOutcomeLogs({contractId:e,logs:t,prefix:r=""}){if(!i)for(const n of t)console.log(`${r}Log [${e}]: ${n}`)}t.printTxOutcomeLogsAndFailures=function printTxOutcomeLogsAndFailures({contractId:e,outcome:t}){if(i)return;const r=[t.transaction_outcome,...t.receipts_outcome].reduce(((e,t)=>{const r="object"==typeof t.outcome.status&&"object"==typeof t.outcome.status.Failure;return t.outcome.logs.length||r?e.concat({receiptIds:t.outcome.receipt_ids,logs:t.outcome.logs,failure:"object"==typeof t.outcome.status&&void 0!==t.outcome.status.Failure?(0,n.parseRpcError)(t.outcome.status.Failure):null}):e}),[]);for(const t of r)console.log(`Receipt${t.receiptIds.length>1?"s":""}: ${t.receiptIds.join(", ")}`),printTxOutcomeLogs({contractId:e,logs:t.logs,prefix:"\t"}),t.failure&&console.warn(`\tFailure [${e}]: ${t.failure}`)},t.printTxOutcomeLogs=printTxOutcomeLogs},540625:(e,t,r)=>{"use strict";var n=r(901048).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.getTransactionLastResult=void 0,t.getTransactionLastResult=function getTransactionLastResult(e){if("object"==typeof e.status&&"string"==typeof e.status.SuccessValue){const t=n.from(e.status.SuccessValue,"base64").toString();try{return JSON.parse(t)}catch(e){return t}}return null}},601775:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.diffEpochValidators=t.findSeatPrice=void 0;const i=n(r(682823)),o=n(r(757222));t.findSeatPrice=function findSeatPrice(e,t,r,n){if(n&&n<49)return function findSeatPriceForProtocolBefore49(e,t){const r=e.map((e=>new i.default(e.stake,10))).sort(((e,t)=>e.cmp(t))),n=new i.default(t),o=r.reduce(((e,t)=>e.add(t)));if(o.lt(n))throw new Error("Stakes are below seats");let s=new i.default(1),a=o.add(new i.default(1));for(;!s.eq(a.sub(new i.default(1)));){const e=s.add(a).div(new i.default(2));let t=!1,o=new i.default(0);for(let i=0;i<r.length;++i)if(o=o.add(r[i].div(e)),o.gte(n)){s=e,t=!0;break}t||(a=e)}return s}(e,t);if(!r){(0,o.default)("findSeatPrice(validators, maxNumberOfSeats)")("`use `findSeatPrice(validators, maxNumberOfSeats, minimumStakeRatio)` instead"),r=[1,6250]}return function findSeatPriceForProtocolAfter49(e,t,r){if(2!=r.length)throw Error("minimumStakeRatio should have 2 elements");const n=e.map((e=>new i.default(e.stake,10))).sort(((e,t)=>e.cmp(t))),o=n.reduce(((e,t)=>e.add(t)));return e.length<t?o.mul(new i.default(r[0])).div(new i.default(r[1])):n[0].add(new i.default(1))}(e,t,r)},t.diffEpochValidators=function diffEpochValidators(e,t){const r=new Map;e.forEach((e=>r.set(e.account_id,e)));const n=new Set(t.map((e=>e.account_id)));return{newValidators:t.filter((e=>!r.has(e.account_id))),removedValidators:e.filter((e=>!n.has(e.account_id))),changedValidators:t.filter((e=>r.has(e.account_id)&&r.get(e.account_id).stake!=e.stake)).map((e=>({current:r.get(e.account_id),next:e})))}}},742278:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WalletConnection=t.ConnectedWalletAccount=t.Near=void 0;var n=r(949418);Object.defineProperty(t,"Near",{enumerable:!0,get:function(){return n.Near}});var i=r(372493);Object.defineProperty(t,"ConnectedWalletAccount",{enumerable:!0,get:function(){return i.ConnectedWalletAccount}}),Object.defineProperty(t,"WalletConnection",{enumerable:!0,get:function(){return i.WalletConnection}})},949418:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n.throw(e))}catch(e){o(e)}}function step(e){e.done?i(e.value):function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Near=void 0;const o=r(720989),s=i(r(682823));t.Near=class Near{constructor(e){var t;if(this.config=e,this.connection=o.Connection.fromConfig({networkId:e.networkId,provider:{type:"JsonRpcProvider",args:{url:e.nodeUrl,headers:e.headers}},signer:e.signer||{type:"InMemorySigner",keyStore:e.keyStore||(null===(t=e.deps)||void 0===t?void 0:t.keyStore)},jsvmAccountId:e.jsvmAccountId||`jsvm.${e.networkId}`}),e.masterAccount){const t=e.initialBalance?new s.default(e.initialBalance):new s.default("500000000000000000000000000");this.accountCreator=new o.LocalAccountCreator(new o.Account(this.connection,e.masterAccount),t)}else e.helperUrl?this.accountCreator=new o.UrlAccountCreator(this.connection,e.helperUrl):this.accountCreator=null}account(e){return n(this,void 0,void 0,(function*(){return new o.Account(this.connection,e)}))}createAccount(e,t){return n(this,void 0,void 0,(function*(){if(!this.accountCreator)throw new Error("Must specify account creator, either via masterAccount or helperUrl configuration settings.");return yield this.accountCreator.createAccount(e,t),new o.Account(this.connection,e)}))}}},372493:function(e,t,r){"use strict";var n=r(901048).Buffer,i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n.throw(e))}catch(e){o(e)}}function step(e){e.done?i(e.value):function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectedWalletAccount=t.WalletConnection=void 0;const s=r(720989),a=r(368524),c=r(332564),u=o(r(682823)),l=r(881818),d="pending_key";t.WalletConnection=class WalletConnection{constructor(e,t){if("string"!=typeof t)throw new Error("Please define a clear appKeyPrefix for this WalletConnection instance as the second argument to the constructor");if("undefined"==typeof window)return new Proxy(this,{get:(e,t)=>"isSignedIn"===t?()=>!1:"getAccountId"===t?()=>"":e[t]&&"function"==typeof e[t]?()=>{throw new Error("No window found in context, please ensure you are using WalletConnection on the browser")}:e[t]});this._near=e;const r=t+"_wallet_auth_key",n=JSON.parse(window.localStorage.getItem(r));this._networkId=e.config.networkId,this._walletBaseUrl=e.config.walletUrl,t=t||e.config.contractName||"default",this._keyStore=e.connection.signer.keyStore,this._authData=n||{allKeys:[]},this._authDataKey=r,this.isSignedIn()||(this._completeSignInPromise=this._completeSignInWithAccessKey())}isSignedIn(){return!!this._authData.accountId}isSignedInAsync(){return i(this,void 0,void 0,(function*(){return this._completeSignInPromise?(yield this._completeSignInPromise,this.isSignedIn()):this.isSignedIn()}))}getAccountId(){return this._authData.accountId||""}requestSignIn({contractId:e,methodNames:t,successUrl:r,failureUrl:n}){return i(this,void 0,void 0,(function*(){const i=new URL(window.location.href),o=new URL(this._walletBaseUrl+"/login/");if(o.searchParams.set("success_url",r||i.href),o.searchParams.set("failure_url",n||i.href),e){const t=yield this._near.account(e);yield t.state(),o.searchParams.set("contract_id",e);const r=a.KeyPair.fromRandom("ed25519");o.searchParams.set("public_key",r.getPublicKey().toString()),yield this._keyStore.setKey(this._networkId,d+r.getPublicKey(),r)}t&&t.forEach((e=>{o.searchParams.append("methodNames",e)})),window.location.assign(o.toString())}))}requestSignTransactions({transactions:e,meta:t,callbackUrl:r}){return i(this,void 0,void 0,(function*(){const i=new URL(window.location.href),o=new URL("sign",this._walletBaseUrl);o.searchParams.set("transactions",e.map((e=>(0,l.serialize)(c.SCHEMA,e))).map((e=>n.from(e).toString("base64"))).join(",")),o.searchParams.set("callbackUrl",r||i.href),t&&o.searchParams.set("meta",t),window.location.assign(o.toString())}))}_completeSignInWithAccessKey(){return i(this,void 0,void 0,(function*(){const e=new URL(window.location.href),t=e.searchParams.get("public_key")||"",r=(e.searchParams.get("all_keys")||"").split(","),n=e.searchParams.get("account_id")||"";if(n){const e={accountId:n,allKeys:r};window.localStorage.setItem(this._authDataKey,JSON.stringify(e)),t&&(yield this._moveKeyFromTempToPermanent(n,t)),this._authData=e}e.searchParams.delete("public_key"),e.searchParams.delete("all_keys"),e.searchParams.delete("account_id"),e.searchParams.delete("meta"),e.searchParams.delete("transactionHashes"),window.history.replaceState({},document.title,e.toString())}))}_moveKeyFromTempToPermanent(e,t){return i(this,void 0,void 0,(function*(){const r=yield this._keyStore.getKey(this._networkId,d+t);yield this._keyStore.setKey(this._networkId,e,r),yield this._keyStore.removeKey(this._networkId,d+t)}))}signOut(){this._authData={},window.localStorage.removeItem(this._authDataKey)}account(){return this._connectedAccount||(this._connectedAccount=new ConnectedWalletAccount(this,this._near.connection,this._authData.accountId)),this._connectedAccount}};class ConnectedWalletAccount extends s.Account{constructor(e,t,r){super(t,r),this.walletConnection=e}signAndSendTransaction({receiverId:e,actions:t,walletMeta:r,walletCallbackUrl:n=window.location.href}){const o=Object.create(null,{signAndSendTransaction:{get:()=>super.signAndSendTransaction}});return i(this,void 0,void 0,(function*(){const i=yield this.connection.signer.getPublicKey(this.accountId,this.connection.networkId);let s=yield this.accessKeyForTransaction(e,t,i);if(!s)throw new Error(`Cannot find matching key for transaction sent to ${e}`);if(i&&i.toString()===s.public_key)try{return yield o.signAndSendTransaction.call(this,{receiverId:e,actions:t})}catch(r){if("NotEnoughAllowance"!==r.type)throw r;s=yield this.accessKeyForTransaction(e,t)}const d=yield this.connection.provider.block({finality:"final"}),p=(0,l.baseDecode)(d.header.hash),y=a.PublicKey.from(s.public_key),g=s.access_key.nonce.add(new u.default(1)),m=(0,c.createTransaction)(this.accountId,y,e,g,t,p);return yield this.walletConnection.requestSignTransactions({transactions:[m],meta:r,callbackUrl:n}),new Promise(((e,t)=>{setTimeout((()=>{t(new Error("Failed to redirect to sign transaction"))}),1e3)}))}))}accessKeyMatchesTransaction(e,t,r){return i(this,void 0,void 0,(function*(){const{access_key:{permission:n}}=e;if("FullAccess"===n)return!0;if(n.FunctionCall){const{receiver_id:e,method_names:i}=n.FunctionCall;if(e===this.accountId&&i.includes("add_request_and_confirm"))return!0;if(e===t){if(1!==r.length)return!1;const[{functionCall:e}]=r;return e&&(!e.deposit||"0"===e.deposit.toString())&&(0===i.length||i.includes(e.methodName))}}return!1}))}accessKeyForTransaction(e,t,r){return i(this,void 0,void 0,(function*(){const n=yield this.getAccessKeys();if(r){const i=n.find((e=>e.public_key.toString()===r.toString()));if(i&&(yield this.accessKeyMatchesTransaction(i,e,t)))return i}const i=this.walletConnection._authData.allKeys;for(const r of n)if(-1!==i.indexOf(r.public_key)&&(yield this.accessKeyMatchesTransaction(r,e,t)))return r;return null}))}}t.ConnectedWalletAccount=ConnectedWalletAccount},670507:function(e,t,r){"use strict";var n=r(901048).Buffer,i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=i(r(626093)),s=r(622069);let a=[];var c;!function(e){e.STANDARD="standard",e.URI="uri",e.MINIMAL="minimal"}(c||(c={}));const getWord=e=>"ableacidalsoapexaquaarchatomauntawayaxisbackbaldbarnbeltbetabiasbluebodybragbrewbulbbuzzcalmcashcatschefcityclawcodecolacookcostcruxcurlcuspcyandarkdatadaysdelidicedietdoordowndrawdropdrumdulldutyeacheasyechoedgeepicevenexamexiteyesfactfairfernfigsfilmfishfizzflapflewfluxfoxyfreefrogfuelfundgalagamegeargemsgiftgirlglowgoodgraygrimgurugushgyrohalfhanghardhawkheathelphighhillholyhopehornhutsicedideaidleinchinkyintoirisironitemjadejazzjoinjoltjowljudojugsjumpjunkjurykeepkenokeptkeyskickkilnkingkitekiwiknoblamblavalazyleaflegsliarlimplionlistlogoloudloveluaulucklungmainmanymathmazememomenumeowmildmintmissmonknailnavyneednewsnextnoonnotenumbobeyoboeomitonyxopenovalowlspaidpartpeckplaypluspoempoolposepuffpumapurrquadquizraceramprealredorichroadrockroofrubyruinrunsrustsafesagascarsetssilkskewslotsoapsolosongstubsurfswantacotasktaxitenttiedtimetinytoiltombtoystriptunatwinuglyundouniturgeuservastveryvetovialvibeviewvisavoidvowswallwandwarmwaspwavewaxywebswhatwhenwhizwolfworkyankyawnyellyogayurtzapszerozestzinczonezoom".slice(4*e,4*e+4),addCRC=e=>`${e}${s.getCRCHex(n.from(e,"hex"))}`,encodeWithSeparator=(e,t)=>{const r=addCRC(e);return n.from(r,"hex").reduce(((e,t)=>[...e,getWord(t)]),[]).join(t)},encodeMinimal=e=>{const t=addCRC(e);return n.from(t,"hex").reduce(((e,t)=>e+(e=>{const t=getWord(e);return`${t[0]}${t[3]}`})(t)),"")},_decode=(e,t,r)=>{const i=(4==r?e.split(t):s.partition(e,2)).map((e=>((e,t)=>{o.default(e.length===t,"Invalid Bytewords: word.length does not match wordLength provided");const r=26;if(0===a.length){a=[...new Array(676)].map((()=>-1));for(let e=0;e<256;e++){const t=getWord(e);let n=t[0].charCodeAt(0)-"a".charCodeAt(0),i=t[3].charCodeAt(0)-"a".charCodeAt(0);a[i*r+n]=e}}let i=e[0].toLowerCase().charCodeAt(0)-"a".charCodeAt(0),s=e[4==t?3:1].toLowerCase().charCodeAt(0)-"a".charCodeAt(0);o.default(0<=i&&i<r&&0<=s&&s<r,"Invalid Bytewords: invalid word");let c=a[s*r+i];if(o.default(-1!==c,"Invalid Bytewords: value not in lookup table"),4==t){const t=getWord(c);let r=e[1].toLowerCase(),n=e[2].toLowerCase();o.default(r===t[1]&&n===t[2],"Invalid Bytewords: invalid middle letters of word")}return n.from([c]).toString("hex")})(e,r))).join("");o.default(i.length>=5,"Invalid Bytewords: invalid decoded string length");const[c,u]=s.split(n.from(i,"hex"),4),l=s.getCRCHex(c);return o.default(l===u.toString("hex"),"Invalid Checksum"),c.toString("hex")};t.default={decode:(e,t=c.MINIMAL)=>{switch(t){case c.STANDARD:return _decode(e," ",4);case c.URI:return _decode(e,"-",4);case c.MINIMAL:return _decode(e,"",2);default:throw new Error(`Invalid style ${t}`)}},encode:(e,t=c.MINIMAL)=>{switch(t){case c.STANDARD:return encodeWithSeparator(e," ");case c.URI:return encodeWithSeparator(e,"-");case c.MINIMAL:return encodeMinimal(e);default:throw new Error(`Invalid style ${t}`)}},STYLES:c}},559786:(e,t,r)=>{"use strict";var n=r(901048).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.cborDecode=t.cborEncode=void 0;const i=r(387037);t.cborEncode=e=>i.encode(e);t.cborDecode=e=>i.decode(n.isBuffer(e)?e:n.from(e,"hex"))},608397:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InvalidChecksumError=t.InvalidSequenceComponentError=t.InvalidTypeError=t.InvalidPathLengthError=t.InvalidSchemeError=void 0;class InvalidSchemeError extends Error{constructor(){super("Invalid Scheme"),this.name="InvalidSchemeError"}}t.InvalidSchemeError=InvalidSchemeError;class InvalidPathLengthError extends Error{constructor(){super("Invalid Path"),this.name="InvalidPathLengthError"}}t.InvalidPathLengthError=InvalidPathLengthError;class InvalidTypeError extends Error{constructor(){super("Invalid Type"),this.name="InvalidTypeError"}}t.InvalidTypeError=InvalidTypeError;class InvalidSequenceComponentError extends Error{constructor(){super("Invalid Sequence Component"),this.name="InvalidSequenceComponentError"}}t.InvalidSequenceComponentError=InvalidSequenceComponentError;class InvalidChecksumError extends Error{constructor(){super("Invalid Checksum"),this.name="InvalidChecksumError"}}t.InvalidChecksumError=InvalidChecksumError},420944:(e,t,r)=>{"use strict";var n=r(901048).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.FountainDecoderPart=void 0;const i=r(622069),o=r(620677),s=r(608397);class FountainDecoderPart{constructor(e,t){this._indexes=e,this._fragment=t}get indexes(){return this._indexes}get fragment(){return this._fragment}static fromEncoderPart(e){const t=o.chooseFragments(e.seqNum,e.seqLength,e.checksum),r=e.fragment;return new FountainDecoderPart(t,r)}isSimple(){return 1===this.indexes.length}}t.FountainDecoderPart=FountainDecoderPart;class FountainDecoder{constructor(){this.result=void 0,this.expectedMessageLength=0,this.expectedChecksum=0,this.expectedFragmentLength=0,this.processedPartsCount=0,this.expectedPartIndexes=[],this.lastPartIndexes=[],this.queuedParts=[],this.receivedPartIndexes=[],this.mixedParts=[],this.simpleParts=[]}validatePart(e){if(0===this.expectedPartIndexes.length)[...new Array(e.seqLength)].forEach(((e,t)=>this.expectedPartIndexes.push(t))),this.expectedMessageLength=e.messageLength,this.expectedChecksum=e.checksum,this.expectedFragmentLength=e.fragment.length;else{if(this.expectedPartIndexes.length!==e.seqLength)return!1;if(this.expectedMessageLength!==e.messageLength)return!1;if(this.expectedChecksum!==e.checksum)return!1;if(this.expectedFragmentLength!==e.fragment.length)return!1}return!0}reducePartByPart(e,t){if(i.arrayContains(e.indexes,t.indexes)){const r=i.setDifference(e.indexes,t.indexes),n=i.bufferXOR(e.fragment,t.fragment);return new FountainDecoderPart(r,n)}return e}reduceMixedBy(e){const t=[];this.mixedParts.map((({value:t})=>this.reducePartByPart(t,e))).forEach((e=>{e.isSimple()?this.queuedParts.push(e):t.push({key:e.indexes,value:e})})),this.mixedParts=t}processSimplePart(e){const t=e.indexes[0];if(!this.receivedPartIndexes.includes(t))if(this.simpleParts.push({key:e.indexes,value:e}),this.receivedPartIndexes.push(t),i.arraysEqual(this.receivedPartIndexes,this.expectedPartIndexes)){const e=this.simpleParts.map((({value:e})=>e)).sort(((e,t)=>e.indexes[0]-t.indexes[0])),t=FountainDecoder.joinFragments(e.map((e=>e.fragment)),this.expectedMessageLength);i.getCRC(t)===this.expectedChecksum?this.result=t:this.error=new s.InvalidChecksumError}else this.reduceMixedBy(e)}processMixedPart(e){if(this.mixedParts.some((({key:t})=>i.arraysEqual(t,e.indexes))))return;let t=this.simpleParts.reduce(((e,{value:t})=>this.reducePartByPart(e,t)),e);t=this.mixedParts.reduce(((e,{value:t})=>this.reducePartByPart(e,t)),t),t.isSimple()?this.queuedParts.push(t):(this.reduceMixedBy(t),this.mixedParts.push({key:t.indexes,value:t}))}processQueuedItem(){if(0===this.queuedParts.length)return;const e=this.queuedParts.shift();e.isSimple()?this.processSimplePart(e):this.processMixedPart(e)}receivePart(e){if(this.isComplete())return!1;if(!this.validatePart(e))return!1;const t=FountainDecoderPart.fromEncoderPart(e);for(this.lastPartIndexes=t.indexes,this.queuedParts.push(t);!this.isComplete()&&this.queuedParts.length>0;)this.processQueuedItem();return this.processedPartsCount+=1,!0}isComplete(){return Boolean(void 0!==this.result&&this.result.length>0)}isSuccess(){return Boolean(void 0===this.error&&this.isComplete())}resultMessage(){return this.isSuccess()?this.result:n.from([])}isFailure(){return void 0!==this.error}resultError(){return this.error?this.error.message:""}expectedPartCount(){return this.expectedPartIndexes.length}getExpectedPartIndexes(){return[...this.expectedPartIndexes]}getReceivedPartIndexes(){return[...this.receivedPartIndexes]}getLastPartIndexes(){return[...this.lastPartIndexes]}estimatedPercentComplete(){if(this.isComplete())return 1;const e=this.expectedPartCount();return 0===e?0:Math.min(.99,this.processedPartsCount/(1.75*e))}getProgress(){if(this.isComplete())return 1;const e=this.expectedPartCount();return 0===e?0:this.receivedPartIndexes.length/e}}t.default=FountainDecoder,FountainDecoder.joinFragments=(e,t)=>n.concat(e).slice(0,t)},834168:function(e,t,r){"use strict";var n=r(901048).Buffer,i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.FountainEncoderPart=void 0;const o=i(r(626093)),s=r(622069),a=r(620677),c=r(559786);class FountainEncoderPart{constructor(e,t,r,n,i){this._seqNum=e,this._seqLength=t,this._messageLength=r,this._checksum=n,this._fragment=i}get messageLength(){return this._messageLength}get fragment(){return this._fragment}get seqNum(){return this._seqNum}get seqLength(){return this._seqLength}get checksum(){return this._checksum}cbor(){const e=c.cborEncode([this._seqNum,this._seqLength,this._messageLength,this._checksum,this._fragment]);return n.from(e)}description(){return`seqNum:${this._seqNum}, seqLen:${this._seqLength}, messageLen:${this._messageLength}, checksum:${this._checksum}, data:${this._fragment.toString("hex")}`}static fromCBOR(e){const[t,r,i,s,a]=c.cborDecode(e);return o.default("number"==typeof t),o.default("number"==typeof r),o.default("number"==typeof i),o.default("number"==typeof s),o.default(n.isBuffer(a)&&a.length>0),new FountainEncoderPart(t,r,i,s,n.from(a))}}t.FountainEncoderPart=FountainEncoderPart;class FountainEncoder{constructor(e,t=100,r=0,n=10){const i=FountainEncoder.findNominalFragmentLength(e.length,n,t);this._messageLength=e.length,this._fragments=FountainEncoder.partitionMessage(e,i),this.fragmentLength=i,this.seqNum=s.toUint32(r),this.checksum=s.getCRC(e)}get fragmentsLength(){return this._fragments.length}get fragments(){return this._fragments}get messageLength(){return this._messageLength}isComplete(){return this.seqNum>=this._fragments.length}isSinglePart(){return 1===this._fragments.length}seqLength(){return this._fragments.length}mix(e){return e.reduce(((e,t)=>s.bufferXOR(this._fragments[t],e)),n.alloc(this.fragmentLength,0))}nextPart(){this.seqNum=s.toUint32(this.seqNum+1);const e=a.chooseFragments(this.seqNum,this._fragments.length,this.checksum),t=this.mix(e);return new FountainEncoderPart(this.seqNum,this._fragments.length,this._messageLength,this.checksum,t)}static findNominalFragmentLength(e,t,r){o.default(e>0),o.default(t>0),o.default(r>=t);const n=Math.ceil(e/t);let i=0;for(let t=1;t<=n&&(i=Math.ceil(e/t),!(i<=r));t++);return i}static partitionMessage(e,t){let r,i=n.from(e),o=[];for(;i.length>0;)[r,i]=s.split(i,-t),r=n.alloc(t,0).fill(r,0,r.length),o.push(r);return o}}t.default=FountainEncoder},620677:function(e,t,r){"use strict";var n=r(901048).Buffer,i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.chooseFragments=t.shuffle=t.chooseDegree=void 0;const o=r(622069),s=i(r(442446)),a=i(r(45833));t.chooseDegree=(e,t)=>{const r=[...new Array(e)].map(((e,t)=>1/(t+1)));return a.default(r,void 0,t.nextDouble).next()+1};t.shuffle=(e,t)=>{let r=[...e],n=[];for(;r.length>0;){let e=t.nextInt(0,r.length-1),i=r[e];r.splice(e,1),n.push(i)}return n};t.chooseFragments=(e,r,i)=>{if(e<=r)return[e-1];{const a=n.concat([o.intToBytes(e),o.intToBytes(i)]),c=new s.default(a),u=t.chooseDegree(r,c),l=[...new Array(r)].map(((e,t)=>t));return t.shuffle(l,c).slice(0,u)}}},653980:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.URDecoder=t.UREncoder=t.UR=void 0;const i=n(r(800909));t.UR=i.default;const o=n(r(320193));t.UREncoder=o.default;const s=n(r(201805));t.URDecoder=s.default},800909:(e,t,r)=>{"use strict";var n=r(901048).Buffer;Object.defineProperty(t,"__esModule",{value:!0});const i=r(608397),o=r(622069),s=r(559786);class UR{constructor(e,t="bytes"){if(this._cborPayload=e,this._type=t,!o.isURType(this._type))throw new i.InvalidTypeError}static fromBuffer(e){return new UR(s.cborEncode(e))}static from(e,t){return UR.fromBuffer(n.from(e,t))}decodeCBOR(){return s.cborDecode(this._cborPayload)}get type(){return this._type}get cbor(){return this._cborPayload}equals(e){return this.type===e.type&&this.cbor.equals(e.cbor)}}t.default=UR},201805:function(e,t,r){"use strict";var n=r(901048).Buffer,i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=i(r(420944)),s=i(r(670507)),a=i(r(626093)),c=r(622069),u=r(608397),l=i(r(800909)),d=r(834168);class URDecoder{constructor(e=new o.default,t="bytes"){this.fountainDecoder=e,this.type=t,a.default(c.isURType(t),"Invalid UR type"),this.expected_type=""}static decodeBody(e,t){const r=s.default.decode(t,s.default.STYLES.MINIMAL);return new l.default(n.from(r,"hex"),e)}validatePart(e){return this.expected_type?this.expected_type===e:!!c.isURType(e)&&(this.expected_type=e,!0)}static decode(e){const[t,r]=this.parse(e);if(0===r.length)throw new u.InvalidPathLengthError;const n=r[0];return URDecoder.decodeBody(t,n)}static parse(e){const t=e.toLowerCase();if("ur:"!==t.slice(0,3))throw new u.InvalidSchemeError;const r=t.slice(3).split("/"),n=r[0];if(r.length<2)throw new u.InvalidPathLengthError;if(!c.isURType(n))throw new u.InvalidTypeError;return[n,r.slice(1)]}static parseSequenceComponent(e){const t=e.split("-");if(2!==t.length)throw new u.InvalidSequenceComponentError;const r=c.toUint32(Number(t[0])),n=Number(t[1]);if(r<1||n<1)throw new u.InvalidSequenceComponentError;return[r,n]}receivePart(e){if(void 0!==this.result)return!1;const[t,r]=URDecoder.parse(e);if(!this.validatePart(t))return!1;if(1===r.length)return this.result=URDecoder.decodeBody(t,r[0]),!0;if(2!==r.length)throw new u.InvalidPathLengthError;const[n,i]=r,[o,a]=URDecoder.parseSequenceComponent(n),c=s.default.decode(i,s.default.STYLES.MINIMAL),p=d.FountainEncoderPart.fromCBOR(c);return o===p.seqNum&&a===p.seqLength&&(!!this.fountainDecoder.receivePart(p)&&(this.fountainDecoder.isSuccess()?this.result=new l.default(this.fountainDecoder.resultMessage(),t):this.fountainDecoder.isFailure()&&(this.error=new u.InvalidSchemeError),!0))}resultUR(){return this.result?this.result:new l.default(n.from([]))}isComplete(){return this.result&&this.result.cbor.length>0}isSuccess(){return!this.error&&this.isComplete()}isError(){return void 0!==this.error}resultError(){return this.error?this.error.message:""}expectedPartCount(){return this.fountainDecoder.expectedPartCount()}expectedPartIndexes(){return this.fountainDecoder.getExpectedPartIndexes()}receivedPartIndexes(){return this.fountainDecoder.getReceivedPartIndexes()}lastPartIndexes(){return this.fountainDecoder.getLastPartIndexes()}estimatedPercentComplete(){return this.fountainDecoder.estimatedPercentComplete()}getProgress(){return this.fountainDecoder.getProgress()}}t.default=URDecoder},320193:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(834168)),o=n(r(670507));class UREncoder{constructor(e,t,r,n){this.ur=e,this.fountainEncoder=new i.default(e.cbor,t,r,n)}get fragmentsLength(){return this.fountainEncoder.fragmentsLength}get fragments(){return this.fountainEncoder.fragments}get messageLength(){return this.fountainEncoder.messageLength}get cbor(){return this.ur.cbor}encodeWhole(){return[...new Array(this.fragmentsLength)].map((()=>this.nextPart()))}nextPart(){const e=this.fountainEncoder.nextPart();return this.fountainEncoder.isSinglePart()?UREncoder.encodeSinglePart(this.ur):UREncoder.encodePart(this.ur.type,e)}static encodeUri(e,t){return[e,t.join("/")].join(":")}static encodeUR(e){return UREncoder.encodeUri("ur",e)}static encodePart(e,t){const r=`${t.seqNum}-${t.seqLength}`,n=o.default.encode(t.cbor().toString("hex"),o.default.STYLES.MINIMAL);return UREncoder.encodeUR([e,r,n])}static encodeSinglePart(e){const t=o.default.encode(e.cbor.toString("hex"),o.default.STYLES.MINIMAL);return UREncoder.encodeUR([e.type,t])}}t.default=UREncoder},622069:function(e,t,r){"use strict";var n=r(901048).Buffer,i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.bufferXOR=t.setDifference=t.arrayContains=t.arraysEqual=t.hasPrefix=t.isURType=t.intToBytes=t.toUint32=t.getCRCHex=t.getCRC=t.split=t.partition=t.sha256Hash=void 0;const o=i(r(313229)),s=r(868812);t.sha256Hash=e=>o.default("sha256").update(e).digest();t.partition=(e,t)=>e.match(new RegExp(".{1,"+t+"}","g"))||[e];t.split=(e,t)=>[e.slice(0,-t),e.slice(-t)];t.getCRC=e=>s.crc32(e);t.getCRCHex=e=>s.crc32(e).toString(16).padStart(8,"0");t.toUint32=e=>e>>>0;t.intToBytes=e=>{const t=new ArrayBuffer(4);return new DataView(t).setUint32(0,e,!1),n.from(t)};t.isURType=e=>e.split("").every(((t,r)=>{let n=e.charCodeAt(r);return"a".charCodeAt(0)<=n&&n<="z".charCodeAt(0)||("0".charCodeAt(0)<=n&&n<="9".charCodeAt(0)||n==="-".charCodeAt(0))}));t.hasPrefix=(e,t)=>0===e.indexOf(t);t.arraysEqual=(e,t)=>e.length===t.length&&e.every((e=>t.includes(e)));t.arrayContains=(e,t)=>t.every((t=>e.includes(t)));t.setDifference=(e,t)=>e.filter((e=>t.indexOf(e)<0));t.bufferXOR=(e,t)=>{const r=Math.max(e.length,t.length),i=n.allocUnsafe(r);for(let n=0;n<r;++n)i[n]=e[n]^t[n];return i}},442446:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(622069),o=n(r(755553)),s=n(r(21328)),rotl=(e,t)=>s.default.bitwiseXor(s.default.asUintN(64,s.default.leftShift(e,s.default.BigInt(t))),s.default.BigInt(s.default.asUintN(64,s.default.signedRightShift(e,s.default.subtract(s.default.BigInt(64),s.default.BigInt(t))))));t.default=class Xoshiro{constructor(e){this.next=()=>new o.default(this.roll().toString()),this.nextDouble=()=>new o.default(this.roll().toString()).div(0x10000000000000000),this.nextInt=(e,t)=>Math.floor(this.nextDouble().toNumber()*(t-e+1)+e),this.nextByte=()=>this.nextInt(0,255),this.nextData=e=>[...new Array(e)].map((()=>this.nextByte()));const t=i.sha256Hash(e);this.s=[s.default.BigInt(0),s.default.BigInt(0),s.default.BigInt(0),s.default.BigInt(0)],this.setS(t)}setS(e){for(let t=0;t<4;t++){let r=8*t,n=s.default.BigInt(0);for(let t=0;t<8;t++)n=s.default.asUintN(64,s.default.leftShift(n,s.default.BigInt(8))),n=s.default.asUintN(64,s.default.bitwiseOr(n,s.default.BigInt(e[r+t])));this.s[t]=s.default.asUintN(64,n)}}roll(){const e=s.default.asUintN(64,s.default.multiply(rotl(s.default.asUintN(64,s.default.multiply(this.s[1],s.default.BigInt(5))),7),s.default.BigInt(9))),t=s.default.asUintN(64,s.default.leftShift(this.s[1],s.default.BigInt(17)));return this.s[2]=s.default.asUintN(64,s.default.bitwiseXor(this.s[2],s.default.BigInt(this.s[0]))),this.s[3]=s.default.asUintN(64,s.default.bitwiseXor(this.s[3],s.default.BigInt(this.s[1]))),this.s[1]=s.default.asUintN(64,s.default.bitwiseXor(this.s[1],s.default.BigInt(this.s[2]))),this.s[0]=s.default.asUintN(64,s.default.bitwiseXor(this.s[0],s.default.BigInt(this.s[3]))),this.s[2]=s.default.asUintN(64,s.default.bitwiseXor(this.s[2],s.default.BigInt(t))),this.s[3]=s.default.asUintN(64,rotl(this.s[3],45)),e}}},798460:(e,t)=>{"use strict";function number(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function bool(e){if("boolean"!=typeof e)throw new Error(`Expected boolean, not ${e}`)}function bytes(e,...t){if(!function isBytes(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}(e))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function hash(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");number(e.outputLen),number(e.blockLen)}function exists(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function output(e,t){bytes(e);const r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}Object.defineProperty(t,"__esModule",{value:!0}),t.output=t.exists=t.hash=t.bytes=t.bool=t.number=void 0,t.number=number,t.bool=bool,t.bytes=bytes,t.hash=hash,t.exists=exists,t.output=output;const r={number,bool,bytes,hash,exists,output};t.default=r},211546:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SHA2=void 0;const n=r(798460),i=r(849074);class SHA2 extends i.Hash{constructor(e,t,r,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,i.createView)(this.buffer)}update(e){(0,n.exists)(this);const{view:t,buffer:r,blockLen:o}=this,s=(e=(0,i.toBytes)(e)).length;for(let n=0;n<s;){const a=Math.min(o-this.pos,s-n);if(a!==o)r.set(e.subarray(n,n+a),this.pos),this.pos+=a,n+=a,this.pos===o&&(this.process(t,0),this.pos=0);else{const t=(0,i.createView)(e);for(;o<=s-n;n+=o)this.process(t,n)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){(0,n.exists)(this),(0,n.output)(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:o,isLE:s}=this;let{pos:a}=this;t[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>o-a&&(this.process(r,0),a=0);for(let e=a;e<o;e++)t[e]=0;!function setBigUint64(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);const i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),c=n?4:0,u=n?0:4;e.setUint32(t+c,s,n),e.setUint32(t+u,a,n)}(r,o-8,BigInt(8*this.length),s),this.process(r,0);const c=(0,i.createView)(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=u/4,d=this.get();if(l>d.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<l;e++)c.setUint32(4*e,d[e],s)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:n,finished:i,destroyed:o,pos:s}=this;return e.length=n,e.pos=s,e.finished=i,e.destroyed=o,n%t&&e.buffer.set(r),e}}t.SHA2=SHA2},398081:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.add5L=t.add5H=t.add4H=t.add4L=t.add3H=t.add3L=t.add=t.rotlBL=t.rotlBH=t.rotlSL=t.rotlSH=t.rotr32L=t.rotr32H=t.rotrBL=t.rotrBH=t.rotrSL=t.rotrSH=t.shrSL=t.shrSH=t.toBig=t.split=t.fromBig=void 0;const r=BigInt(2**32-1),n=BigInt(32);function fromBig(e,t=!1){return t?{h:Number(e&r),l:Number(e>>n&r)}:{h:0|Number(e>>n&r),l:0|Number(e&r)}}function split(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:o,l:s}=fromBig(e[i],t);[r[i],n[i]]=[o,s]}return[r,n]}t.fromBig=fromBig,t.split=split;const toBig=(e,t)=>BigInt(e>>>0)<<n|BigInt(t>>>0);t.toBig=toBig;const shrSH=(e,t,r)=>e>>>r;t.shrSH=shrSH;const shrSL=(e,t,r)=>e<<32-r|t>>>r;t.shrSL=shrSL;const rotrSH=(e,t,r)=>e>>>r|t<<32-r;t.rotrSH=rotrSH;const rotrSL=(e,t,r)=>e<<32-r|t>>>r;t.rotrSL=rotrSL;const rotrBH=(e,t,r)=>e<<64-r|t>>>r-32;t.rotrBH=rotrBH;const rotrBL=(e,t,r)=>e>>>r-32|t<<64-r;t.rotrBL=rotrBL;const rotr32H=(e,t)=>t;t.rotr32H=rotr32H;const rotr32L=(e,t)=>e;t.rotr32L=rotr32L;const rotlSH=(e,t,r)=>e<<r|t>>>32-r;t.rotlSH=rotlSH;const rotlSL=(e,t,r)=>t<<r|e>>>32-r;t.rotlSL=rotlSL;const rotlBH=(e,t,r)=>t<<r-32|e>>>64-r;t.rotlBH=rotlBH;const rotlBL=(e,t,r)=>e<<r-32|t>>>64-r;function add(e,t,r,n){const i=(t>>>0)+(n>>>0);return{h:e+r+(i/2**32|0)|0,l:0|i}}t.rotlBL=rotlBL,t.add=add;const add3L=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0);t.add3L=add3L;const add3H=(e,t,r,n)=>t+r+n+(e/2**32|0)|0;t.add3H=add3H;const add4L=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0);t.add4L=add4L;const add4H=(e,t,r,n,i)=>t+r+n+i+(e/2**32|0)|0;t.add4H=add4H;const add5L=(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0);t.add5L=add5L;const add5H=(e,t,r,n,i,o)=>t+r+n+i+o+(e/2**32|0)|0;t.add5H=add5H;const i={fromBig,split,toBig,shrSH,shrSL,rotrSH,rotrSL,rotrBH,rotrBL,rotr32H,rotr32L,rotlSH,rotlSL,rotlBH,rotlBL,add,add3L,add3H,add4L,add4H,add5H,add5L};t.default=i},876910:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.crypto=void 0,t.crypto="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0},574500:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hmac=t.HMAC=void 0;const n=r(798460),i=r(849074);class HMAC extends i.Hash{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,(0,n.hash)(e);const r=(0,i.toBytes)(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const o=this.blockLen,s=new Uint8Array(o);s.set(r.length>o?e.create().update(r).digest():r);for(let e=0;e<s.length;e++)s[e]^=54;this.iHash.update(s),this.oHash=e.create();for(let e=0;e<s.length;e++)s[e]^=106;this.oHash.update(s),s.fill(0)}update(e){return(0,n.exists)(this),this.iHash.update(e),this}digestInto(e){(0,n.exists)(this),(0,n.bytes)(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:n,destroyed:i,blockLen:o,outputLen:s}=this;return e.finished=n,e.destroyed=i,e.blockLen=o,e.outputLen=s,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}t.HMAC=HMAC;t.hmac=(e,t,r)=>new HMAC(e,t).update(r).digest(),t.hmac.create=(e,t)=>new HMAC(e,t)},857154:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pbkdf2Async=t.pbkdf2=void 0;const n=r(798460),i=r(574500),o=r(849074);function pbkdf2Init(e,t,r,s){(0,n.hash)(e);const a=(0,o.checkOpts)({dkLen:32,asyncTick:10},s),{c,dkLen:u,asyncTick:l}=a;if((0,n.number)(c),(0,n.number)(u),(0,n.number)(l),c<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const d=(0,o.toBytes)(t),p=(0,o.toBytes)(r),y=new Uint8Array(u),g=i.hmac.create(e,d),m=g._cloneInto().update(p);return{c,dkLen:u,asyncTick:l,DK:y,PRF:g,PRFSalt:m}}function pbkdf2Output(e,t,r,n,i){return e.destroy(),t.destroy(),n&&n.destroy(),i.fill(0),r}t.pbkdf2=function pbkdf2(e,t,r,n){const{c:i,dkLen:s,DK:a,PRF:c,PRFSalt:u}=pbkdf2Init(e,t,r,n);let l;const d=new Uint8Array(4),p=(0,o.createView)(d),y=new Uint8Array(c.outputLen);for(let e=1,t=0;t<s;e++,t+=c.outputLen){const r=a.subarray(t,t+c.outputLen);p.setInt32(0,e,!1),(l=u._cloneInto(l)).update(d).digestInto(y),r.set(y.subarray(0,r.length));for(let e=1;e<i;e++){c._cloneInto(l).update(y).digestInto(y);for(let e=0;e<r.length;e++)r[e]^=y[e]}}return pbkdf2Output(c,u,a,l,y)},t.pbkdf2Async=async function pbkdf2Async(e,t,r,n){const{c:i,dkLen:s,asyncTick:a,DK:c,PRF:u,PRFSalt:l}=pbkdf2Init(e,t,r,n);let d;const p=new Uint8Array(4),y=(0,o.createView)(p),g=new Uint8Array(u.outputLen);for(let e=1,t=0;t<s;e++,t+=u.outputLen){const r=c.subarray(t,t+u.outputLen);y.setInt32(0,e,!1),(d=l._cloneInto(d)).update(p).digestInto(g),r.set(g.subarray(0,r.length)),await(0,o.asyncLoop)(i-1,a,(()=>{u._cloneInto(d).update(g).digestInto(g);for(let e=0;e<r.length;e++)r[e]^=g[e]}))}return pbkdf2Output(u,l,c,d,g)}},810071:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ripemd160=t.RIPEMD160=void 0;const n=r(211546),i=r(849074),o=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),s=Uint8Array.from({length:16},((e,t)=>t));let a=[s],c=[s.map((e=>(9*e+5)%16))];for(let e=0;e<4;e++)for(let t of[a,c])t.push(t[e].map((e=>o[e])));const u=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map((e=>new Uint8Array(e))),l=a.map(((e,t)=>e.map((e=>u[t][e])))),d=c.map(((e,t)=>e.map((e=>u[t][e])))),p=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),y=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),rotl=(e,t)=>e<<t|e>>>32-t;function f(e,t,r,n){return 0===e?t^r^n:1===e?t&r|~t&n:2===e?(t|~r)^n:3===e?t&n|r&~n:t^(r|~n)}const g=new Uint32Array(16);class RIPEMD160 extends n.SHA2{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:e,h1:t,h2:r,h3:n,h4:i}=this;return[e,t,r,n,i]}set(e,t,r,n,i){this.h0=0|e,this.h1=0|t,this.h2=0|r,this.h3=0|n,this.h4=0|i}process(e,t){for(let r=0;r<16;r++,t+=4)g[r]=e.getUint32(t,!0);let r=0|this.h0,n=r,i=0|this.h1,o=i,s=0|this.h2,u=s,m=0|this.h3,b=m,w=0|this.h4,v=w;for(let e=0;e<5;e++){const t=4-e,E=p[e],S=y[e],A=a[e],x=c[e],_=l[e],I=d[e];for(let t=0;t<16;t++){const n=rotl(r+f(e,i,s,m)+g[A[t]]+E,_[t])+w|0;r=w,w=m,m=0|rotl(s,10),s=i,i=n}for(let e=0;e<16;e++){const r=rotl(n+f(t,o,u,b)+g[x[e]]+S,I[e])+v|0;n=v,v=b,b=0|rotl(u,10),u=o,o=r}}this.set(this.h1+s+b|0,this.h2+m+v|0,this.h3+w+n|0,this.h4+r+o|0,this.h0+i+u|0)}roundClean(){g.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}t.RIPEMD160=RIPEMD160,t.ripemd160=(0,i.wrapConstructor)((()=>new RIPEMD160))},90874:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sha1=void 0;const n=r(211546),i=r(849074),rotl=(e,t)=>e<<t|e>>>32-t>>>0,Maj=(e,t,r)=>e&t^e&r^t&r,o=new Uint32Array([1732584193,4023233417,2562383102,271733878,3285377520]),s=new Uint32Array(80);class SHA1 extends n.SHA2{constructor(){super(64,20,8,!1),this.A=0|o[0],this.B=0|o[1],this.C=0|o[2],this.D=0|o[3],this.E=0|o[4]}get(){const{A:e,B:t,C:r,D:n,E:i}=this;return[e,t,r,n,i]}set(e,t,r,n,i){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|i}process(e,t){for(let r=0;r<16;r++,t+=4)s[r]=e.getUint32(t,!1);for(let e=16;e<80;e++)s[e]=rotl(s[e-3]^s[e-8]^s[e-14]^s[e-16],1);let{A:r,B:n,C:i,D:o,E:a}=this;for(let e=0;e<80;e++){let t,u;e<20?(t=(c=n)&i^~c&o,u=1518500249):e<40?(t=n^i^o,u=1859775393):e<60?(t=Maj(n,i,o),u=2400959708):(t=n^i^o,u=3395469782);const l=rotl(r,5)+t+a+u+s[e]|0;a=o,o=i,i=rotl(n,30),n=r,r=l}var c;r=r+this.A|0,n=n+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,this.set(r,n,i,o,a)}roundClean(){s.fill(0)}destroy(){this.set(0,0,0,0,0),this.buffer.fill(0)}}t.sha1=(0,i.wrapConstructor)((()=>new SHA1))},879688:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sha224=t.sha256=void 0;const n=r(211546),i=r(849074),Maj=(e,t,r)=>e&t^e&r^t&r,o=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),s=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),a=new Uint32Array(64);class SHA256 extends n.SHA2{constructor(){super(64,32,8,!1),this.A=0|s[0],this.B=0|s[1],this.C=0|s[2],this.D=0|s[3],this.E=0|s[4],this.F=0|s[5],this.G=0|s[6],this.H=0|s[7]}get(){const{A:e,B:t,C:r,D:n,E:i,F:o,G:s,H:a}=this;return[e,t,r,n,i,o,s,a]}set(e,t,r,n,i,o,s,a){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|o,this.G=0|s,this.H=0|a}process(e,t){for(let r=0;r<16;r++,t+=4)a[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){const t=a[e-15],r=a[e-2],n=(0,i.rotr)(t,7)^(0,i.rotr)(t,18)^t>>>3,o=(0,i.rotr)(r,17)^(0,i.rotr)(r,19)^r>>>10;a[e]=o+a[e-7]+n+a[e-16]|0}let{A:r,B:n,C:s,D:c,E:u,F:l,G:d,H:p}=this;for(let e=0;e<64;e++){const t=p+((0,i.rotr)(u,6)^(0,i.rotr)(u,11)^(0,i.rotr)(u,25))+((y=u)&l^~y&d)+o[e]+a[e]|0,g=((0,i.rotr)(r,2)^(0,i.rotr)(r,13)^(0,i.rotr)(r,22))+Maj(r,n,s)|0;p=d,d=l,l=u,u=c+t|0,c=s,s=n,n=r,r=t+g|0}var y;r=r+this.A|0,n=n+this.B|0,s=s+this.C|0,c=c+this.D|0,u=u+this.E|0,l=l+this.F|0,d=d+this.G|0,p=p+this.H|0,this.set(r,n,s,c,u,l,d,p)}roundClean(){a.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class SHA224 extends SHA256{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}t.sha256=(0,i.wrapConstructor)((()=>new SHA256)),t.sha224=(0,i.wrapConstructor)((()=>new SHA224))},164989:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sha384=t.sha512_256=t.sha512_224=t.sha512=t.SHA512=void 0;const n=r(211546),i=r(398081),o=r(849074),[s,a]=(()=>i.default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((e=>BigInt(e)))))(),c=new Uint32Array(80),u=new Uint32Array(80);class SHA512 extends n.SHA2{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:r,Bl:n,Ch:i,Cl:o,Dh:s,Dl:a,Eh:c,El:u,Fh:l,Fl:d,Gh:p,Gl:y,Hh:g,Hl:m}=this;return[e,t,r,n,i,o,s,a,c,u,l,d,p,y,g,m]}set(e,t,r,n,i,o,s,a,c,u,l,d,p,y,g,m){this.Ah=0|e,this.Al=0|t,this.Bh=0|r,this.Bl=0|n,this.Ch=0|i,this.Cl=0|o,this.Dh=0|s,this.Dl=0|a,this.Eh=0|c,this.El=0|u,this.Fh=0|l,this.Fl=0|d,this.Gh=0|p,this.Gl=0|y,this.Hh=0|g,this.Hl=0|m}process(e,t){for(let r=0;r<16;r++,t+=4)c[r]=e.getUint32(t),u[r]=e.getUint32(t+=4);for(let e=16;e<80;e++){const t=0|c[e-15],r=0|u[e-15],n=i.default.rotrSH(t,r,1)^i.default.rotrSH(t,r,8)^i.default.shrSH(t,r,7),o=i.default.rotrSL(t,r,1)^i.default.rotrSL(t,r,8)^i.default.shrSL(t,r,7),s=0|c[e-2],a=0|u[e-2],l=i.default.rotrSH(s,a,19)^i.default.rotrBH(s,a,61)^i.default.shrSH(s,a,6),d=i.default.rotrSL(s,a,19)^i.default.rotrBL(s,a,61)^i.default.shrSL(s,a,6),p=i.default.add4L(o,d,u[e-7],u[e-16]),y=i.default.add4H(p,n,l,c[e-7],c[e-16]);c[e]=0|y,u[e]=0|p}let{Ah:r,Al:n,Bh:o,Bl:l,Ch:d,Cl:p,Dh:y,Dl:g,Eh:m,El:b,Fh:w,Fl:v,Gh:E,Gl:S,Hh:A,Hl:x}=this;for(let e=0;e<80;e++){const t=i.default.rotrSH(m,b,14)^i.default.rotrSH(m,b,18)^i.default.rotrBH(m,b,41),_=i.default.rotrSL(m,b,14)^i.default.rotrSL(m,b,18)^i.default.rotrBL(m,b,41),I=m&w^~m&E,T=b&v^~b&S,P=i.default.add5L(x,_,T,a[e],u[e]),M=i.default.add5H(P,A,t,I,s[e],c[e]),B=0|P,O=i.default.rotrSH(r,n,28)^i.default.rotrBH(r,n,34)^i.default.rotrBH(r,n,39),k=i.default.rotrSL(r,n,28)^i.default.rotrBL(r,n,34)^i.default.rotrBL(r,n,39),C=r&o^r&d^o&d,N=n&l^n&p^l&p;A=0|E,x=0|S,E=0|w,S=0|v,w=0|m,v=0|b,({h:m,l:b}=i.default.add(0|y,0|g,0|M,0|B)),y=0|d,g=0|p,d=0|o,p=0|l,o=0|r,l=0|n;const j=i.default.add3L(B,k,N);r=i.default.add3H(j,M,O,C),n=0|j}({h:r,l:n}=i.default.add(0|this.Ah,0|this.Al,0|r,0|n)),({h:o,l}=i.default.add(0|this.Bh,0|this.Bl,0|o,0|l)),({h:d,l:p}=i.default.add(0|this.Ch,0|this.Cl,0|d,0|p)),({h:y,l:g}=i.default.add(0|this.Dh,0|this.Dl,0|y,0|g)),({h:m,l:b}=i.default.add(0|this.Eh,0|this.El,0|m,0|b)),({h:w,l:v}=i.default.add(0|this.Fh,0|this.Fl,0|w,0|v)),({h:E,l:S}=i.default.add(0|this.Gh,0|this.Gl,0|E,0|S)),({h:A,l:x}=i.default.add(0|this.Hh,0|this.Hl,0|A,0|x)),this.set(r,n,o,l,d,p,y,g,m,b,w,v,E,S,A,x)}roundClean(){c.fill(0),u.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}t.SHA512=SHA512;class SHA512_224 extends SHA512{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}}class SHA512_256 extends SHA512{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}class SHA384 extends SHA512{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}t.sha512=(0,o.wrapConstructor)((()=>new SHA512)),t.sha512_224=(0,o.wrapConstructor)((()=>new SHA512_224)),t.sha512_256=(0,o.wrapConstructor)((()=>new SHA512_256)),t.sha384=(0,o.wrapConstructor)((()=>new SHA384))},849074:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.randomBytes=t.wrapXOFConstructorWithOpts=t.wrapConstructorWithOpts=t.wrapConstructor=t.checkOpts=t.Hash=t.concatBytes=t.toBytes=t.utf8ToBytes=t.asyncLoop=t.nextTick=t.hexToBytes=t.bytesToHex=t.isLE=t.rotr=t.createView=t.u32=t.u8=void 0;const n=r(876910);t.u8=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength);function isBytes(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}t.u32=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));t.createView=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);if(t.rotr=(e,t)=>e<<32-t|e>>>t,t.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],!t.isLE)throw new Error("Non little-endian hardware is not supported");const i=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));t.bytesToHex=function bytesToHex(e){if(!isBytes(e))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=i[e[r]];return t};const o={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function asciiToBase16(e){return e>=o._0&&e<=o._9?e-o._0:e>=o._A&&e<=o._F?e-(o._A-10):e>=o._a&&e<=o._f?e-(o._a-10):void 0}t.hexToBytes=function hexToBytes(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,r=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(r);for(let t=0,i=0;t<r;t++,i+=2){const r=asciiToBase16(e.charCodeAt(i)),o=asciiToBase16(e.charCodeAt(i+1));if(void 0===r||void 0===o){const t=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+i)}n[t]=16*r+o}return n};function utf8ToBytes(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}function toBytes(e){if("string"==typeof e&&(e=utf8ToBytes(e)),!isBytes(e))throw new Error("expected Uint8Array, got "+typeof e);return e}t.nextTick=async()=>{},t.asyncLoop=async function asyncLoop(e,r,n){let i=Date.now();for(let o=0;o<e;o++){n(o);const e=Date.now()-i;e>=0&&e<r||(await(0,t.nextTick)(),i+=e)}},t.utf8ToBytes=utf8ToBytes,t.toBytes=toBytes,t.concatBytes=function concatBytes(...e){let t=0;for(let r=0;r<e.length;r++){const n=e[r];if(!isBytes(n))throw new Error("Uint8Array expected");t+=n.length}const r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const i=e[t];r.set(i,n),n+=i.length}return r};t.Hash=class Hash{clone(){return this._cloneInto()}};const s={}.toString;t.checkOpts=function checkOpts(e,t){if(void 0!==t&&"[object Object]"!==s.call(t))throw new Error("Options should be object or undefined");return Object.assign(e,t)},t.wrapConstructor=function wrapConstructor(e){const hashC=t=>e().update(toBytes(t)).digest(),t=e();return hashC.outputLen=t.outputLen,hashC.blockLen=t.blockLen,hashC.create=()=>e(),hashC},t.wrapConstructorWithOpts=function wrapConstructorWithOpts(e){const hashC=(t,r)=>e(r).update(toBytes(t)).digest(),t=e({});return hashC.outputLen=t.outputLen,hashC.blockLen=t.blockLen,hashC.create=t=>e(t),hashC},t.wrapXOFConstructorWithOpts=function wrapXOFConstructorWithOpts(e){const hashC=(t,r)=>e(r).update(toBytes(t)).digest(),t=e({});return hashC.outputLen=t.outputLen,hashC.blockLen=t.blockLen,hashC.create=t=>e(t),hashC},t.randomBytes=function randomBytes(e=32){if(n.crypto&&"function"==typeof n.crypto.getRandomValues)return n.crypto.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}},374261:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.utils=t.schnorr=t.verify=t.signSync=t.sign=t.getSharedSecret=t.recoverPublicKey=t.getPublicKey=t.Signature=t.Point=t.CURVE=void 0;const n=r(422028),i=BigInt(0),o=BigInt(1),s=BigInt(2),a=BigInt(3),c=BigInt(8),u=Object.freeze({a:i,b:BigInt(7),P:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:o,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")});t.CURVE=u;const divNearest=(e,t)=>(e+t/s)/t,l={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar(e){const{n:t}=u,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-o*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=r,a=BigInt("0x100000000000000000000000000000000"),c=divNearest(s*e,t),l=divNearest(-n*e,t);let d=mod(e-c*r-l*i,t),p=mod(-c*n-l*s,t);const y=d>a,g=p>a;if(y&&(d=t-d),g&&(p=t-p),d>a||p>a)throw new Error("splitScalarEndo: Endomorphism failed, k="+e);return{k1neg:y,k1:d,k2neg:g,k2:p}}},d=32,p=32,y=d+1,g=2*d+1;function weierstrass(e){const{a:t,b:r}=u,n=mod(e*e),i=mod(n*e);return mod(i+t*e+r)}const m=u.a===i;class ShaError extends Error{constructor(e){super(e)}}function assertJacPoint(e){if(!(e instanceof JacobianPoint))throw new TypeError("JacobianPoint expected")}class JacobianPoint{constructor(e,t,r){this.x=e,this.y=t,this.z=r}static fromAffine(e){if(!(e instanceof Point))throw new TypeError("JacobianPoint#fromAffine: expected Point");return e.equals(Point.ZERO)?JacobianPoint.ZERO:new JacobianPoint(e.x,e.y,o)}static toAffineBatch(e){const t=function invertBatch(e,t=u.P){const r=new Array(e.length),n=invert(e.reduce(((e,n,o)=>n===i?e:(r[o]=e,mod(e*n,t))),o),t);return e.reduceRight(((e,n,o)=>n===i?e:(r[o]=mod(e*r[o],t),mod(e*n,t))),n),r}(e.map((e=>e.z)));return e.map(((e,r)=>e.toAffine(t[r])))}static normalizeZ(e){return JacobianPoint.toAffineBatch(e).map(JacobianPoint.fromAffine)}equals(e){assertJacPoint(e);const{x:t,y:r,z:n}=this,{x:i,y:o,z:s}=e,a=mod(n*n),c=mod(s*s),u=mod(t*c),l=mod(i*a),d=mod(mod(r*s)*c),p=mod(mod(o*n)*a);return u===l&&d===p}negate(){return new JacobianPoint(this.x,mod(-this.y),this.z)}double(){const{x:e,y:t,z:r}=this,n=mod(e*e),i=mod(t*t),o=mod(i*i),u=e+i,l=mod(s*(mod(u*u)-n-o)),d=mod(a*n),p=mod(d*d),y=mod(p-s*l),g=mod(d*(l-y)-c*o),m=mod(s*t*r);return new JacobianPoint(y,g,m)}add(e){assertJacPoint(e);const{x:t,y:r,z:n}=this,{x:o,y:a,z:c}=e;if(o===i||a===i)return this;if(t===i||r===i)return e;const u=mod(n*n),l=mod(c*c),d=mod(t*l),p=mod(o*u),y=mod(mod(r*c)*l),g=mod(mod(a*n)*u),m=mod(p-d),b=mod(g-y);if(m===i)return b===i?this.double():JacobianPoint.ZERO;const w=mod(m*m),v=mod(m*w),E=mod(d*w),S=mod(b*b-v-s*E),A=mod(b*(E-S)-y*v),x=mod(n*c*m);return new JacobianPoint(S,A,x)}subtract(e){return this.add(e.negate())}multiplyUnsafe(e){const t=JacobianPoint.ZERO;if("bigint"==typeof e&&e===i)return t;let r=normalizeScalar(e);if(r===o)return this;if(!m){let e=t,n=this;for(;r>i;)r&o&&(e=e.add(n)),n=n.double(),r>>=o;return e}let{k1neg:n,k1:s,k2neg:a,k2:c}=l.splitScalar(r),u=t,d=t,p=this;for(;s>i||c>i;)s&o&&(u=u.add(p)),c&o&&(d=d.add(p)),p=p.double(),s>>=o,c>>=o;return n&&(u=u.negate()),a&&(d=d.negate()),d=new JacobianPoint(mod(d.x*l.beta),d.y,d.z),u.add(d)}precomputeWindow(e){const t=m?128/e+1:256/e+1,r=[];let n=this,i=n;for(let o=0;o<t;o++){i=n,r.push(i);for(let t=1;t<2**(e-1);t++)i=i.add(n),r.push(i);n=i.double()}return r}wNAF(e,t){!t&&this.equals(JacobianPoint.BASE)&&(t=Point.BASE);const r=t&&t._WINDOW_SIZE||1;if(256%r)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let n=t&&b.get(t);n||(n=this.precomputeWindow(r),t&&1!==r&&(n=JacobianPoint.normalizeZ(n),b.set(t,n)));let i=JacobianPoint.ZERO,s=JacobianPoint.BASE;const a=1+(m?128/r:256/r),c=2**(r-1),u=BigInt(2**r-1),l=2**r,d=BigInt(r);for(let t=0;t<a;t++){const r=t*c;let a=Number(e&u);e>>=d,a>c&&(a-=l,e+=o);const p=r,y=r+Math.abs(a)-1,g=t%2!=0,m=a<0;0===a?s=s.add(constTimeNegate(g,n[p])):i=i.add(constTimeNegate(m,n[y]))}return{p:i,f:s}}multiply(e,t){let r,n,i=normalizeScalar(e);if(m){const{k1neg:e,k1:o,k2neg:s,k2:a}=l.splitScalar(i);let{p:c,f:u}=this.wNAF(o,t),{p:d,f:p}=this.wNAF(a,t);c=constTimeNegate(e,c),d=constTimeNegate(s,d),d=new JacobianPoint(mod(d.x*l.beta),d.y,d.z),r=c.add(d),n=u.add(p)}else{const{p:e,f:o}=this.wNAF(i,t);r=e,n=o}return JacobianPoint.normalizeZ([r,n])[0]}toAffine(e){const{x:t,y:r,z:n}=this,i=this.equals(JacobianPoint.ZERO);null==e&&(e=i?c:invert(n));const s=e,a=mod(s*s),u=mod(a*s),l=mod(t*a),d=mod(r*u),p=mod(n*s);if(i)return Point.ZERO;if(p!==o)throw new Error("invZ was invalid");return new Point(l,d)}}function constTimeNegate(e,t){const r=t.negate();return e?r:t}JacobianPoint.BASE=new JacobianPoint(u.Gx,u.Gy,o),JacobianPoint.ZERO=new JacobianPoint(i,o,i);const b=new WeakMap;class Point{constructor(e,t){this.x=e,this.y=t}_setWindowSize(e){this._WINDOW_SIZE=e,b.delete(this)}hasEvenY(){return this.y%s===i}static fromCompressedHex(e){const t=32===e.length,r=bytesToNumber(t?e:e.subarray(1));if(!isValidFieldElement(r))throw new Error("Point is not on curve");let n=function sqrtMod(e){const{P:t}=u,r=BigInt(6),n=BigInt(11),i=BigInt(22),o=BigInt(23),c=BigInt(44),l=BigInt(88),d=e*e*e%t,p=d*d*e%t,y=pow2(p,a)*p%t,g=pow2(y,a)*p%t,m=pow2(g,s)*d%t,b=pow2(m,n)*m%t,w=pow2(b,i)*b%t,v=pow2(w,c)*w%t,E=pow2(v,l)*v%t,S=pow2(E,c)*w%t,A=pow2(S,a)*p%t,x=pow2(A,o)*b%t,_=pow2(x,r)*d%t,I=pow2(_,s);if(I*I%t!==e)throw new Error("Cannot find square root");return I}(weierstrass(r));const i=(n&o)===o;if(t)i&&(n=mod(-n));else{!(1&~e[0])!==i&&(n=mod(-n))}const c=new Point(r,n);return c.assertValidity(),c}static fromUncompressedHex(e){const t=bytesToNumber(e.subarray(1,d+1)),r=bytesToNumber(e.subarray(d+1,2*d+1)),n=new Point(t,r);return n.assertValidity(),n}static fromHex(e){const t=ensureBytes(e),r=t.length,n=t[0];if(r===d)return this.fromCompressedHex(t);if(r===y&&(2===n||3===n))return this.fromCompressedHex(t);if(r===g&&4===n)return this.fromUncompressedHex(t);throw new Error(`Point.fromHex: received invalid point. Expected 32-${y} compressed bytes or ${g} uncompressed bytes, not ${r}`)}static fromPrivateKey(e){return Point.BASE.multiply(normalizePrivateKey(e))}static fromSignature(e,t,r){const{r:n,s:i}=normalizeSignature(t);if(![0,1,2,3].includes(r))throw new Error("Cannot recover: invalid recovery bit");const o=truncateHash(ensureBytes(e)),{n:s}=u,a=2===r||3===r?n+s:n,c=invert(a,s),l=mod(-o*c,s),d=mod(i*c,s),p=1&r?"03":"02",y=Point.fromHex(p+numTo32bStr(a)),g=Point.BASE.multiplyAndAddUnsafe(y,l,d);if(!g)throw new Error("Cannot recover signature: point at infinify");return g.assertValidity(),g}toRawBytes(e=!1){return hexToBytes(this.toHex(e))}toHex(e=!1){const t=numTo32bStr(this.x);if(e){return`${this.hasEvenY()?"02":"03"}${t}`}return`04${t}${numTo32bStr(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){const e="Point is not on elliptic curve",{x:t,y:r}=this;if(!isValidFieldElement(t)||!isValidFieldElement(r))throw new Error(e);const n=mod(r*r);if(mod(n-weierstrass(t))!==i)throw new Error(e)}equals(e){return this.x===e.x&&this.y===e.y}negate(){return new Point(this.x,mod(-this.y))}double(){return JacobianPoint.fromAffine(this).double().toAffine()}add(e){return JacobianPoint.fromAffine(this).add(JacobianPoint.fromAffine(e)).toAffine()}subtract(e){return this.add(e.negate())}multiply(e){return JacobianPoint.fromAffine(this).multiply(e,this).toAffine()}multiplyAndAddUnsafe(e,t,r){const n=JacobianPoint.fromAffine(this),s=t===i||t===o||this!==Point.BASE?n.multiplyUnsafe(t):n.multiply(t),a=JacobianPoint.fromAffine(e).multiplyUnsafe(r),c=s.add(a);return c.equals(JacobianPoint.ZERO)?void 0:c.toAffine()}}function sliceDER(e){return Number.parseInt(e[0],16)>=8?"00"+e:e}function parseDERInt(e){if(e.length<2||2!==e[0])throw new Error(`Invalid signature integer tag: ${bytesToHex(e)}`);const t=e[1],r=e.subarray(2,t+2);if(!t||r.length!==t)throw new Error("Invalid signature integer: wrong length");if(0===r[0]&&r[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:bytesToNumber(r),left:e.subarray(t+2)}}t.Point=Point,Point.BASE=new Point(u.Gx,u.Gy),Point.ZERO=new Point(i,i);class Signature{constructor(e,t){this.r=e,this.s=t,this.assertValidity()}static fromCompact(e){const t=e instanceof Uint8Array,r="Signature.fromCompact";if("string"!=typeof e&&!t)throw new TypeError(`${r}: Expected string or Uint8Array`);const n=t?bytesToHex(e):e;if(128!==n.length)throw new Error(`${r}: Expected 64-byte hex`);return new Signature(hexToNumber(n.slice(0,64)),hexToNumber(n.slice(64,128)))}static fromDER(e){const t=e instanceof Uint8Array;if("string"!=typeof e&&!t)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");const{r,s:n}=function parseDERSignature(e){if(e.length<2||48!=e[0])throw new Error(`Invalid signature tag: ${bytesToHex(e)}`);if(e[1]!==e.length-2)throw new Error("Invalid signature: incorrect length");const{data:t,left:r}=parseDERInt(e.subarray(2)),{data:n,left:i}=parseDERInt(r);if(i.length)throw new Error(`Invalid signature: left bytes after parsing: ${bytesToHex(i)}`);return{r:t,s:n}}(t?e:hexToBytes(e));return new Signature(r,n)}static fromHex(e){return this.fromDER(e)}assertValidity(){const{r:e,s:t}=this;if(!isWithinCurveOrder(e))throw new Error("Invalid Signature: r must be 0 < r < n");if(!isWithinCurveOrder(t))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){const e=u.n>>o;return this.s>e}normalizeS(){return this.hasHighS()?new Signature(this.r,mod(-this.s,u.n)):this}toDERRawBytes(){return hexToBytes(this.toDERHex())}toDERHex(){const e=sliceDER(numberToHexUnpadded(this.s)),t=sliceDER(numberToHexUnpadded(this.r)),r=e.length/2,n=t.length/2,i=numberToHexUnpadded(r),o=numberToHexUnpadded(n);return`30${numberToHexUnpadded(n+r+4)}02${o}${t}02${i}${e}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return hexToBytes(this.toCompactHex())}toCompactHex(){return numTo32bStr(this.r)+numTo32bStr(this.s)}}function concatBytes(...e){if(!e.every((e=>e instanceof Uint8Array)))throw new Error("Uint8Array list expected");if(1===e.length)return e[0];const t=e.reduce(((e,t)=>e+t.length),0),r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const i=e[t];r.set(i,n),n+=i.length}return r}t.Signature=Signature;const w=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function bytesToHex(e){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");let t="";for(let r=0;r<e.length;r++)t+=w[e[r]];return t}const v=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");function numTo32bStr(e){if("bigint"!=typeof e)throw new Error("Expected bigint");if(!(i<=e&&e<v))throw new Error("Expected number 0 <= n < 2^256");return e.toString(16).padStart(64,"0")}function numTo32b(e){const t=hexToBytes(numTo32bStr(e));if(32!==t.length)throw new Error("Error: expected 32 bytes");return t}function numberToHexUnpadded(e){const t=e.toString(16);return 1&t.length?`0${t}`:t}function hexToNumber(e){if("string"!=typeof e)throw new TypeError("hexToNumber: expected string, got "+typeof e);return BigInt(`0x${e}`)}function hexToBytes(e){if("string"!=typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+e.length);const t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){const n=2*r,i=e.slice(n,n+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[r]=o}return t}function bytesToNumber(e){return hexToNumber(bytesToHex(e))}function ensureBytes(e){return e instanceof Uint8Array?Uint8Array.from(e):hexToBytes(e)}function normalizeScalar(e){if("number"==typeof e&&Number.isSafeInteger(e)&&e>0)return BigInt(e);if("bigint"==typeof e&&isWithinCurveOrder(e))return e;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function mod(e,t=u.P){const r=e%t;return r>=i?r:t+r}function pow2(e,t){const{P:r}=u;let n=e;for(;t-- >i;)n*=n,n%=r;return n}function invert(e,t=u.P){if(e===i||t<=i)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=mod(e,t),n=t,s=i,a=o,c=o,l=i;for(;r!==i;){const e=n/r,t=n%r,i=s-c*e,o=a-l*e;n=r,r=t,s=c,a=l,c=i,l=o}if(n!==o)throw new Error("invert: does not exist");return mod(s,t)}function truncateHash(e,t=!1){const r=function bits2int_2(e){const t=8*e.length-8*p,r=bytesToNumber(e);return t>0?r>>BigInt(t):r}(e);if(t)return r;const{n}=u;return r>=n?r-n:r}let E,S;class HmacDrbg{constructor(e,t){if(this.hashLen=e,this.qByteLen=t,"number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof t||t<2)throw new Error("qByteLen must be a number");this.v=new Uint8Array(e).fill(1),this.k=new Uint8Array(e).fill(0),this.counter=0}hmac(...e){return t.utils.hmacSha256(this.k,...e)}hmacSync(...e){return S(this.k,...e)}checkSync(){if("function"!=typeof S)throw new ShaError("hmacSha256Sync needs to be set")}incr(){if(this.counter>=1e3)throw new Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}async reseed(e=new Uint8Array){this.k=await this.hmac(this.v,Uint8Array.from([0]),e),this.v=await this.hmac(this.v),0!==e.length&&(this.k=await this.hmac(this.v,Uint8Array.from([1]),e),this.v=await this.hmac(this.v))}reseedSync(e=new Uint8Array){this.checkSync(),this.k=this.hmacSync(this.v,Uint8Array.from([0]),e),this.v=this.hmacSync(this.v),0!==e.length&&(this.k=this.hmacSync(this.v,Uint8Array.from([1]),e),this.v=this.hmacSync(this.v))}async generate(){this.incr();let e=0;const t=[];for(;e<this.qByteLen;){this.v=await this.hmac(this.v);const r=this.v.slice();t.push(r),e+=this.v.length}return concatBytes(...t)}generateSync(){this.checkSync(),this.incr();let e=0;const t=[];for(;e<this.qByteLen;){this.v=this.hmacSync(this.v);const r=this.v.slice();t.push(r),e+=this.v.length}return concatBytes(...t)}}function isWithinCurveOrder(e){return i<e&&e<u.n}function isValidFieldElement(e){return i<e&&e<u.P}function kmdToSig(e,t,r,n=!0){const{n:s}=u,a=truncateHash(e,!0);if(!isWithinCurveOrder(a))return;const c=invert(a,s),l=Point.BASE.multiply(a),d=mod(l.x,s);if(d===i)return;const p=mod(c*mod(t+r*d,s),s);if(p===i)return;let y=new Signature(d,p),g=(l.x===y.r?0:2)|Number(l.y&o);return n&&y.hasHighS()&&(y=y.normalizeS(),g^=1),{sig:y,recovery:g}}function normalizePrivateKey(e){let t;if("bigint"==typeof e)t=e;else if("number"==typeof e&&Number.isSafeInteger(e)&&e>0)t=BigInt(e);else if("string"==typeof e){if(e.length!==2*p)throw new Error("Expected 32 bytes of private key");t=hexToNumber(e)}else{if(!(e instanceof Uint8Array))throw new TypeError("Expected valid private key");if(e.length!==p)throw new Error("Expected 32 bytes of private key");t=bytesToNumber(e)}if(!isWithinCurveOrder(t))throw new Error("Expected private key: 0 < key < n");return t}function normalizePublicKey(e){return e instanceof Point?(e.assertValidity(),e):Point.fromHex(e)}function normalizeSignature(e){if(e instanceof Signature)return e.assertValidity(),e;try{return Signature.fromDER(e)}catch(t){return Signature.fromCompact(e)}}function isProbPub(e){const t=e instanceof Uint8Array,r="string"==typeof e,n=(t||r)&&e.length;return t?n===y||n===g:r?n===2*y||n===2*g:e instanceof Point}function bits2int(e){return bytesToNumber(e.length>d?e.slice(0,d):e)}function bits2octets(e){const t=bits2int(e),r=mod(t,u.n);return int2octets(r<i?t:r)}function int2octets(e){return numTo32b(e)}function initSigArgs(e,r,n){if(null==e)throw new Error(`sign: expected valid message hash, not "${e}"`);const i=ensureBytes(e),o=normalizePrivateKey(r),s=[int2octets(o),bits2octets(i)];if(null!=n){!0===n&&(n=t.utils.randomBytes(d));const e=ensureBytes(n);if(e.length!==d)throw new Error(`sign: Expected ${d} bytes of extra data`);s.push(e)}return{seed:concatBytes(...s),m:bits2int(i),d:o}}function finalizeSig(e,t){const{sig:r,recovery:n}=e,{der:i,recovered:o}=Object.assign({canonical:!0,der:!0},t),s=i?r.toDERRawBytes():r.toCompactRawBytes();return o?[s,n]:s}t.getPublicKey=function getPublicKey(e,t=!1){return Point.fromPrivateKey(e).toRawBytes(t)},t.recoverPublicKey=function recoverPublicKey(e,t,r,n=!1){return Point.fromSignature(e,t,r).toRawBytes(n)},t.getSharedSecret=function getSharedSecret(e,t,r=!1){if(isProbPub(e))throw new TypeError("getSharedSecret: first arg must be private key");if(!isProbPub(t))throw new TypeError("getSharedSecret: second arg must be public key");const n=normalizePublicKey(t);return n.assertValidity(),n.multiply(normalizePrivateKey(e)).toRawBytes(r)},t.sign=async function sign(e,t,r={}){const{seed:n,m:i,d:o}=initSigArgs(e,t,r.extraEntropy),s=new HmacDrbg(32,p);let a;for(await s.reseed(n);!(a=kmdToSig(await s.generate(),i,o,r.canonical));)await s.reseed();return finalizeSig(a,r)},t.signSync=function signSync(e,t,r={}){const{seed:n,m:i,d:o}=initSigArgs(e,t,r.extraEntropy),s=new HmacDrbg(32,p);let a;for(s.reseedSync(n);!(a=kmdToSig(s.generateSync(),i,o,r.canonical));)s.reseedSync();return finalizeSig(a,r)};const A={strict:!0};function schnorrChallengeFinalize(e){return mod(bytesToNumber(e),u.n)}t.verify=function verify(e,t,r,n=A){let i;try{i=normalizeSignature(e),t=ensureBytes(t)}catch(e){return!1}const{r:o,s}=i;if(n.strict&&i.hasHighS())return!1;const a=truncateHash(t);let c;try{c=normalizePublicKey(r)}catch(e){return!1}const{n:l}=u,d=invert(s,l),p=mod(a*d,l),y=mod(o*d,l),g=Point.BASE.multiplyAndAddUnsafe(c,p,y);return!!g&&mod(g.x,l)===o};class SchnorrSignature{constructor(e,t){this.r=e,this.s=t,this.assertValidity()}static fromHex(e){const t=ensureBytes(e);if(64!==t.length)throw new TypeError(`SchnorrSignature.fromHex: expected 64 bytes, not ${t.length}`);const r=bytesToNumber(t.subarray(0,32)),n=bytesToNumber(t.subarray(32,64));return new SchnorrSignature(r,n)}assertValidity(){const{r:e,s:t}=this;if(!isValidFieldElement(e)||!isWithinCurveOrder(t))throw new Error("Invalid signature")}toHex(){return numTo32bStr(this.r)+numTo32bStr(this.s)}toRawBytes(){return hexToBytes(this.toHex())}}class InternalSchnorrSignature{constructor(e,r,n=t.utils.randomBytes()){if(null==e)throw new TypeError(`sign: Expected valid message, not "${e}"`);this.m=ensureBytes(e);const{x:i,scalar:o}=this.getScalar(normalizePrivateKey(r));if(this.px=i,this.d=o,this.rand=ensureBytes(n),32!==this.rand.length)throw new TypeError("sign: Expected 32 bytes of aux randomness")}getScalar(e){const t=Point.fromPrivateKey(e),r=t.hasEvenY()?e:u.n-e;return{point:t,scalar:r,x:t.toRawX()}}initNonce(e,t){return numTo32b(e^bytesToNumber(t))}finalizeNonce(e){const t=mod(bytesToNumber(e),u.n);if(t===i)throw new Error("sign: Creation of signature failed. k is zero");const{point:r,x:n,scalar:o}=this.getScalar(t);return{R:r,rx:n,k:o}}finalizeSig(e,t,r,n){return new SchnorrSignature(e.x,mod(t+r*n,u.n)).toRawBytes()}error(){throw new Error("sign: Invalid signature produced")}async calc(){const{m:e,d:r,px:n,rand:i}=this,o=t.utils.taggedHash,s=this.initNonce(r,await o(_.aux,i)),{R:a,rx:c,k:u}=this.finalizeNonce(await o(_.nonce,s,n,e)),l=schnorrChallengeFinalize(await o(_.challenge,c,n,e)),d=this.finalizeSig(a,u,l,r);return await schnorrVerify(d,e,n)||this.error(),d}calcSync(){const{m:e,d:r,px:n,rand:i}=this,o=t.utils.taggedHashSync,s=this.initNonce(r,o(_.aux,i)),{R:a,rx:c,k:u}=this.finalizeNonce(o(_.nonce,s,n,e)),l=schnorrChallengeFinalize(o(_.challenge,c,n,e)),d=this.finalizeSig(a,u,l,r);return schnorrVerifySync(d,e,n)||this.error(),d}}function initSchnorrVerify(e,t,r){const n=e instanceof SchnorrSignature,i=n?e:SchnorrSignature.fromHex(e);return n&&i.assertValidity(),{...i,m:ensureBytes(t),P:normalizePublicKey(r)}}function finalizeSchnorrVerify(e,t,r,n){const i=Point.BASE.multiplyAndAddUnsafe(t,normalizePrivateKey(r),mod(-n,u.n));return!(!i||!i.hasEvenY()||i.x!==e)}async function schnorrVerify(e,r,n){try{const{r:i,s:o,m:s,P:a}=initSchnorrVerify(e,r,n),c=schnorrChallengeFinalize(await t.utils.taggedHash(_.challenge,numTo32b(i),a.toRawX(),s));return finalizeSchnorrVerify(i,a,o,c)}catch(e){return!1}}function schnorrVerifySync(e,r,n){try{const{r:i,s:o,m:s,P:a}=initSchnorrVerify(e,r,n),c=schnorrChallengeFinalize(t.utils.taggedHashSync(_.challenge,numTo32b(i),a.toRawX(),s));return finalizeSchnorrVerify(i,a,o,c)}catch(e){if(e instanceof ShaError)throw e;return!1}}t.schnorr={Signature:SchnorrSignature,getPublicKey:function schnorrGetPublicKey(e){return Point.fromPrivateKey(e).toRawX()},sign:async function schnorrSign(e,t,r){return new InternalSchnorrSignature(e,t,r).calc()},verify:schnorrVerify,signSync:function schnorrSignSync(e,t,r){return new InternalSchnorrSignature(e,t,r).calcSync()},verifySync:schnorrVerifySync},Point.BASE._setWindowSize(8);const x={node:n,web:"object"==typeof self&&"crypto"in self?self.crypto:void 0},_={challenge:"BIP0340/challenge",aux:"BIP0340/aux",nonce:"BIP0340/nonce"},I={};t.utils={bytesToHex,hexToBytes,concatBytes,mod,invert,isValidPrivateKey(e){try{return normalizePrivateKey(e),!0}catch(e){return!1}},_bigintTo32Bytes:numTo32b,_normalizePrivateKey:normalizePrivateKey,hashToPrivateKey:e=>{e=ensureBytes(e);const t=p+8;if(e.length<t||e.length>1024)throw new Error("Expected valid bytes of private key as per FIPS 186");return numTo32b(mod(bytesToNumber(e),u.n-o)+o)},randomBytes:(e=32)=>{if(x.web)return x.web.getRandomValues(new Uint8Array(e));if(x.node){const{randomBytes:t}=x.node;return Uint8Array.from(t(e))}throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>t.utils.hashToPrivateKey(t.utils.randomBytes(p+8)),precompute(e=8,t=Point.BASE){const r=t===Point.BASE?t:new Point(t.x,t.y);return r._setWindowSize(e),r.multiply(a),r},sha256:async(...e)=>{if(x.web){const t=await x.web.subtle.digest("SHA-256",concatBytes(...e));return new Uint8Array(t)}if(x.node){const{createHash:t}=x.node,r=t("sha256");return e.forEach((e=>r.update(e))),Uint8Array.from(r.digest())}throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(e,...t)=>{if(x.web){const r=await x.web.subtle.importKey("raw",e,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),n=concatBytes(...t),i=await x.web.subtle.sign("HMAC",r,n);return new Uint8Array(i)}if(x.node){const{createHmac:r}=x.node,n=r("sha256",e);return t.forEach((e=>n.update(e))),Uint8Array.from(n.digest())}throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:async(e,...r)=>{let n=I[e];if(void 0===n){const r=await t.utils.sha256(Uint8Array.from(e,(e=>e.charCodeAt(0))));n=concatBytes(r,r),I[e]=n}return t.utils.sha256(n,...r)},taggedHashSync:(e,...t)=>{if("function"!=typeof E)throw new ShaError("sha256Sync is undefined, you need to set it");let r=I[e];if(void 0===r){const t=E(Uint8Array.from(e,(e=>e.charCodeAt(0))));r=concatBytes(t,t),I[e]=r}return E(r,...t)},_JacobianPoint:JacobianPoint},Object.defineProperties(t.utils,{sha256Sync:{configurable:!1,get:()=>E,set(e){E||(E=e)}},hmacSha256Sync:{configurable:!1,get:()=>S,set(e){S||(S=e)}}})},394151:function(e,t){"use strict";var r=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n.throw(e))}catch(e){o(e)}}function step(e){e.done?i(e.value):function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};function sleep(e){return new Promise((function(t){return setTimeout(t,e)}))}Object.defineProperty(t,"__esModule",{value:!0}),t.exponentialBackoff=void 0,t.exponentialBackoff=function exponentialBackoff(e,t,n,i){return r(this,void 0,void 0,(function*(){for(var r=e,o=0;o<t;o++){var s=yield i();if(s)return s;yield sleep(r),r*=n}return null}))}},127250:e=>{var t=1e3,r=60*t,n=60*r,i=24*n,o=7*i,s=365.25*i;function plural(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}e.exports=function(e,a){a=a||{};var c=typeof e;if("string"===c&&e.length>0)return function parse(e){if((e=String(e)).length>100)return;var a=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!a)return;var c=parseFloat(a[1]);switch((a[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return c*s;case"weeks":case"week":case"w":return c*o;case"days":case"day":case"d":return c*i;case"hours":case"hour":case"hrs":case"hr":case"h":return c*n;case"minutes":case"minute":case"mins":case"min":case"m":return c*r;case"seconds":case"second":case"secs":case"sec":case"s":return c*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return}}(e);if("number"===c&&isFinite(e))return a.long?function fmtLong(e){var o=Math.abs(e);if(o>=i)return plural(e,o,i,"day");if(o>=n)return plural(e,o,n,"hour");if(o>=r)return plural(e,o,r,"minute");if(o>=t)return plural(e,o,t,"second");return e+" ms"}(e):function fmtShort(e){var o=Math.abs(e);if(o>=i)return Math.round(e/i)+"d";if(o>=n)return Math.round(e/n)+"h";if(o>=r)return Math.round(e/r)+"m";if(o>=t)return Math.round(e/t)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},850764:function(e){e.exports=function(){"use strict";var e=Object.prototype.toString,t=Array.isArray||function isArrayPolyfill(t){return"[object Array]"===e.call(t)};function isFunction(e){return"function"==typeof e}function typeStr(e){return t(e)?"array":typeof e}function escapeRegExp(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function hasProperty(e,t){return null!=e&&"object"==typeof e&&t in e}function primitiveHasOwnProperty(e,t){return null!=e&&"object"!=typeof e&&e.hasOwnProperty&&e.hasOwnProperty(t)}var r=RegExp.prototype.test;function testRegExp(e,t){return r.call(e,t)}var n=/\S/;function isWhitespace(e){return!testRegExp(n,e)}var i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function escapeHtml(e){return String(e).replace(/[&<>"'`=\/]/g,(function fromEntityMap(e){return i[e]}))}var o=/\s*/,s=/\s+/,a=/\s*=/,c=/\s*\}/,u=/#|\^|\/|>|\{|&|=|!/;function parseTemplate(e,r){if(!e)return[];var n,i,d,p=!1,y=[],g=[],m=[],b=!1,w=!1,v="",E=0;function stripSpace(){if(b&&!w)for(;m.length;)delete g[m.pop()];else m=[];b=!1,w=!1}function compileTags(e){if("string"==typeof e&&(e=e.split(s,2)),!t(e)||2!==e.length)throw new Error("Invalid tags: "+e);n=new RegExp(escapeRegExp(e[0])+"\\s*"),i=new RegExp("\\s*"+escapeRegExp(e[1])),d=new RegExp("\\s*"+escapeRegExp("}"+e[1]))}compileTags(r||l.tags);for(var S,A,x,_,I,T,P=new Scanner(e);!P.eos();){if(S=P.pos,x=P.scanUntil(n))for(var M=0,B=x.length;M<B;++M)isWhitespace(_=x.charAt(M))?(m.push(g.length),v+=_):(w=!0,p=!0,v+=" "),g.push(["text",_,S,S+1]),S+=1,"\n"===_&&(stripSpace(),v="",E=0,p=!1);if(!P.scan(n))break;if(b=!0,A=P.scan(u)||"name",P.scan(o),"="===A?(x=P.scanUntil(a),P.scan(a),P.scanUntil(i)):"{"===A?(x=P.scanUntil(d),P.scan(c),P.scanUntil(i),A="&"):x=P.scanUntil(i),!P.scan(i))throw new Error("Unclosed tag at "+P.pos);if(I=">"==A?[A,x,S,P.pos,v,E,p]:[A,x,S,P.pos],E++,g.push(I),"#"===A||"^"===A)y.push(I);else if("/"===A){if(!(T=y.pop()))throw new Error('Unopened section "'+x+'" at '+S);if(T[1]!==x)throw new Error('Unclosed section "'+T[1]+'" at '+S)}else"name"===A||"{"===A||"&"===A?w=!0:"="===A&&compileTags(x)}if(stripSpace(),T=y.pop())throw new Error('Unclosed section "'+T[1]+'" at '+P.pos);return nestTokens(squashTokens(g))}function squashTokens(e){for(var t,r,n=[],i=0,o=e.length;i<o;++i)(t=e[i])&&("text"===t[0]&&r&&"text"===r[0]?(r[1]+=t[1],r[3]=t[3]):(n.push(t),r=t));return n}function nestTokens(e){for(var t,r=[],n=r,i=[],o=0,s=e.length;o<s;++o)switch((t=e[o])[0]){case"#":case"^":n.push(t),i.push(t),n=t[4]=[];break;case"/":i.pop()[5]=t[2],n=i.length>0?i[i.length-1][4]:r;break;default:n.push(t)}return r}function Scanner(e){this.string=e,this.tail=e,this.pos=0}function Context(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function Writer(){this.templateCache={_cache:{},set:function set(e,t){this._cache[e]=t},get:function get(e){return this._cache[e]},clear:function clear(){this._cache={}}}}Scanner.prototype.eos=function eos(){return""===this.tail},Scanner.prototype.scan=function scan(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var r=t[0];return this.tail=this.tail.substring(r.length),this.pos+=r.length,r},Scanner.prototype.scanUntil=function scanUntil(e){var t,r=this.tail.search(e);switch(r){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,r),this.tail=this.tail.substring(r)}return this.pos+=t.length,t},Context.prototype.push=function push(e){return new Context(e,this)},Context.prototype.lookup=function lookup(e){var t,r=this.cache;if(r.hasOwnProperty(e))t=r[e];else{for(var n,i,o,s=this,a=!1;s;){if(e.indexOf(".")>0)for(n=s.view,i=e.split("."),o=0;null!=n&&o<i.length;)o===i.length-1&&(a=hasProperty(n,i[o])||primitiveHasOwnProperty(n,i[o])),n=n[i[o++]];else n=s.view[e],a=hasProperty(s.view,e);if(a){t=n;break}s=s.parent}r[e]=t}return isFunction(t)&&(t=t.call(this.view)),t},Writer.prototype.clearCache=function clearCache(){void 0!==this.templateCache&&this.templateCache.clear()},Writer.prototype.parse=function parse(e,t){var r=this.templateCache,n=e+":"+(t||l.tags).join(":"),i=void 0!==r,o=i?r.get(n):void 0;return null==o&&(o=parseTemplate(e,t),i&&r.set(n,o)),o},Writer.prototype.render=function render(e,t,r,n){var i=this.getConfigTags(n),o=this.parse(e,i),s=t instanceof Context?t:new Context(t,void 0);return this.renderTokens(o,s,r,e,n)},Writer.prototype.renderTokens=function renderTokens(e,t,r,n,i){for(var o,s,a,c="",u=0,l=e.length;u<l;++u)a=void 0,"#"===(s=(o=e[u])[0])?a=this.renderSection(o,t,r,n,i):"^"===s?a=this.renderInverted(o,t,r,n,i):">"===s?a=this.renderPartial(o,t,r,i):"&"===s?a=this.unescapedValue(o,t):"name"===s?a=this.escapedValue(o,t,i):"text"===s&&(a=this.rawValue(o)),void 0!==a&&(c+=a);return c},Writer.prototype.renderSection=function renderSection(e,r,n,i,o){var s=this,a="",c=r.lookup(e[1]);function subRender(e){return s.render(e,r,n,o)}if(c){if(t(c))for(var u=0,l=c.length;u<l;++u)a+=this.renderTokens(e[4],r.push(c[u]),n,i,o);else if("object"==typeof c||"string"==typeof c||"number"==typeof c)a+=this.renderTokens(e[4],r.push(c),n,i,o);else if(isFunction(c)){if("string"!=typeof i)throw new Error("Cannot use higher-order sections without the original template");null!=(c=c.call(r.view,i.slice(e[3],e[5]),subRender))&&(a+=c)}else a+=this.renderTokens(e[4],r,n,i,o);return a}},Writer.prototype.renderInverted=function renderInverted(e,r,n,i,o){var s=r.lookup(e[1]);if(!s||t(s)&&0===s.length)return this.renderTokens(e[4],r,n,i,o)},Writer.prototype.indentPartial=function indentPartial(e,t,r){for(var n=t.replace(/[^ \t]/g,""),i=e.split("\n"),o=0;o<i.length;o++)i[o].length&&(o>0||!r)&&(i[o]=n+i[o]);return i.join("\n")},Writer.prototype.renderPartial=function renderPartial(e,t,r,n){if(r){var i=this.getConfigTags(n),o=isFunction(r)?r(e[1]):r[e[1]];if(null!=o){var s=e[6],a=e[5],c=e[4],u=o;0==a&&c&&(u=this.indentPartial(o,c,s));var l=this.parse(u,i);return this.renderTokens(l,t,r,u,n)}}},Writer.prototype.unescapedValue=function unescapedValue(e,t){var r=t.lookup(e[1]);if(null!=r)return r},Writer.prototype.escapedValue=function escapedValue(e,t,r){var n=this.getConfigEscape(r)||l.escape,i=t.lookup(e[1]);if(null!=i)return"number"==typeof i&&n===l.escape?String(i):n(i)},Writer.prototype.rawValue=function rawValue(e){return e[1]},Writer.prototype.getConfigTags=function getConfigTags(e){return t(e)?e:e&&"object"==typeof e?e.tags:void 0},Writer.prototype.getConfigEscape=function getConfigEscape(e){return e&&"object"==typeof e&&!t(e)?e.escape:void 0};var l={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(e){d.templateCache=e},get templateCache(){return d.templateCache}},d=new Writer;return l.clearCache=function clearCache(){return d.clearCache()},l.parse=function parse(e,t){return d.parse(e,t)},l.render=function render(e,t,r,n){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+typeStr(e)+'" was given as the first argument for mustache#render(template, view, partials)');return d.render(e,t,r,n)},l.escape=escapeHtml,l.Scanner=Scanner,l.Context=Context,l.Writer=Writer,l}()},892145:(e,t)=>{"use strict";t.A=function natsort(e){void 0===e&&(e={});var t=/^0/,r=/\s+/g,n=/^\s+|\s+$/g,i=/[^\x00-\x80]/,o=/^0x[0-9a-f]+$/i,s=/(0x[\da-fA-F]+|(^[\+\-]?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?(?=\D|\s|$))|\d+)/g,a=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,c=String.prototype.toLocaleLowerCase||String.prototype.toLowerCase,u=e.desc?-1:1,l=-u,d=e.insensitive?function(e){return c.call(""+e).replace(n,"")}:function(e){return(""+e).replace(n,"")};function tokenize(e){return e.replace(s,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0")}function parse(e,i){return(!e.match(t)||1===i)&&parseFloat(e)||e.replace(r," ").replace(n,"")||0}return function(e,t){var r=d(e),n=d(t);if(!r&&!n)return 0;if(!r&&n)return l;if(r&&!n)return u;var s=tokenize(r),c=tokenize(n),p=r.match(o),y=n.match(o),g=p&&y?parseInt(p[0],16):1!==s.length&&Date.parse(r),m=p&&y?parseInt(y[0],16):g&&n.match(a)&&Date.parse(n)||null;if(m){if(g===m)return 0;if(g<m)return l;if(g>m)return u}for(var b=s.length,w=c.length,v=0,E=Math.max(b,w);v<E;v+=1){var S=parse(s[v]||"",b),A=parse(c[v]||"",w);if(isNaN(S)!==isNaN(A))return isNaN(S)?u:l;if(i.test(S+A)&&S.localeCompare){var x=S.localeCompare(A);if(x>0)return u;if(x<0)return l;if(v===E-1)return 0}if(S<A)return l;if(S>A)return u;if(""+S<""+A)return l;if(""+S>""+A)return u}return 0}}},664239:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AbiSerializationType=t.AbiFunctionModifier=t.AbiFunctionKind=t.SCHEMA_VERSION=void 0,t.SCHEMA_VERSION="0.3.0",function(e){e.View="view",e.Call="call"}(t.AbiFunctionKind||(t.AbiFunctionKind={})),function(e){e.Init="init",e.Private="private",e.Payable="payable"}(t.AbiFunctionModifier||(t.AbiFunctionModifier={})),function(e){e.Json="json",e.Borsh="borsh"}(t.AbiSerializationType||(t.AbiSerializationType={}))},802548:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Account=void 0;var n=r(720989);Object.defineProperty(t,"Account",{enumerable:!0,get:function(){return n.Account}})},349031:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UrlAccountCreator=t.LocalAccountCreator=t.AccountCreator=void 0;var n=r(720989);Object.defineProperty(t,"AccountCreator",{enumerable:!0,get:function(){return n.AccountCreator}}),Object.defineProperty(t,"LocalAccountCreator",{enumerable:!0,get:function(){return n.LocalAccountCreator}}),Object.defineProperty(t,"UrlAccountCreator",{enumerable:!0,get:function(){return n.UrlAccountCreator}})},914501:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MultisigStateStatus=t.MultisigDeleteRequestRejectionError=t.MULTISIG_CONFIRM_METHODS=t.MULTISIG_CHANGE_METHODS=t.MULTISIG_DEPOSIT=t.MULTISIG_GAS=t.MULTISIG_ALLOWANCE=t.MULTISIG_STORAGE_KEY=t.AccountMultisig=t.Account2FA=void 0;var n=r(720989);Object.defineProperty(t,"Account2FA",{enumerable:!0,get:function(){return n.Account2FA}}),Object.defineProperty(t,"AccountMultisig",{enumerable:!0,get:function(){return n.AccountMultisig}}),Object.defineProperty(t,"MULTISIG_STORAGE_KEY",{enumerable:!0,get:function(){return n.MULTISIG_STORAGE_KEY}}),Object.defineProperty(t,"MULTISIG_ALLOWANCE",{enumerable:!0,get:function(){return n.MULTISIG_ALLOWANCE}}),Object.defineProperty(t,"MULTISIG_GAS",{enumerable:!0,get:function(){return n.MULTISIG_GAS}}),Object.defineProperty(t,"MULTISIG_DEPOSIT",{enumerable:!0,get:function(){return n.MULTISIG_DEPOSIT}}),Object.defineProperty(t,"MULTISIG_CHANGE_METHODS",{enumerable:!0,get:function(){return n.MULTISIG_CHANGE_METHODS}}),Object.defineProperty(t,"MULTISIG_CONFIRM_METHODS",{enumerable:!0,get:function(){return n.MULTISIG_CONFIRM_METHODS}}),Object.defineProperty(t,"MultisigDeleteRequestRejectionError",{enumerable:!0,get:function(){return n.MultisigDeleteRequestRejectionError}}),Object.defineProperty(t,"MultisigStateStatus",{enumerable:!0,get:function(){return n.MultisigStateStatus}})},437832:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n.throw(e))}catch(e){o(e)}}function step(e){e.done?i(e.value):function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.connect=void 0;const i=r(386933);t.connect=function connect(e){return n(this,void 0,void 0,(function*(){return new i.Near(e)}))}},93830:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.keyStores=void 0,t.keyStores=o(r(211191)),s(r(90367),t),s(r(437832),t),r(686072)},90367:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.WalletConnection=t.ConnectedWalletAccount=t.Near=t.KeyPair=t.Signer=t.InMemorySigner=t.Contract=t.Connection=t.Account=t.multisig=t.validators=t.transactions=t.utils=t.providers=t.accountCreator=void 0;const s=o(r(667438));t.providers=s;const a=o(r(879997));t.utils=a;const c=o(r(435079));t.transactions=c;const u=o(r(358780));t.validators=u;const l=r(802548);Object.defineProperty(t,"Account",{enumerable:!0,get:function(){return l.Account}});const d=o(r(914501));t.multisig=d;const p=o(r(349031));t.accountCreator=p;const y=r(805727);Object.defineProperty(t,"Connection",{enumerable:!0,get:function(){return y.Connection}});const g=r(839269);Object.defineProperty(t,"Signer",{enumerable:!0,get:function(){return g.Signer}}),Object.defineProperty(t,"InMemorySigner",{enumerable:!0,get:function(){return g.InMemorySigner}});const m=r(220005);Object.defineProperty(t,"Contract",{enumerable:!0,get:function(){return m.Contract}});const b=r(269265);Object.defineProperty(t,"KeyPair",{enumerable:!0,get:function(){return b.KeyPair}});const w=r(386933);Object.defineProperty(t,"Near",{enumerable:!0,get:function(){return w.Near}});const v=r(97556);Object.defineProperty(t,"ConnectedWalletAccount",{enumerable:!0,get:function(){return v.ConnectedWalletAccount}}),Object.defineProperty(t,"WalletConnection",{enumerable:!0,get:function(){return v.WalletConnection}})},805727:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Connection=void 0;var n=r(720989);Object.defineProperty(t,"Connection",{enumerable:!0,get:function(){return n.Connection}})},220005:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Contract=void 0;var n=r(720989);Object.defineProperty(t,"Contract",{enumerable:!0,get:function(){return n.Contract}})},211191:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MergeKeyStore=t.BrowserLocalStorageKeyStore=t.InMemoryKeyStore=t.KeyStore=void 0;const n=r(514416);Object.defineProperty(t,"KeyStore",{enumerable:!0,get:function(){return n.KeyStore}});const i=r(237303);Object.defineProperty(t,"InMemoryKeyStore",{enumerable:!0,get:function(){return i.InMemoryKeyStore}});const o=r(224842);Object.defineProperty(t,"BrowserLocalStorageKeyStore",{enumerable:!0,get:function(){return o.BrowserLocalStorageKeyStore}});const s=r(304152);Object.defineProperty(t,"MergeKeyStore",{enumerable:!0,get:function(){return s.MergeKeyStore}})},224842:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserLocalStorageKeyStore=void 0;var n=r(928083);Object.defineProperty(t,"BrowserLocalStorageKeyStore",{enumerable:!0,get:function(){return n.BrowserLocalStorageKeyStore}})},237303:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InMemoryKeyStore=void 0;var n=r(520490);Object.defineProperty(t,"InMemoryKeyStore",{enumerable:!0,get:function(){return n.InMemoryKeyStore}})},514416:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KeyStore=void 0;var n=r(520490);Object.defineProperty(t,"KeyStore",{enumerable:!0,get:function(){return n.KeyStore}})},304152:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MergeKeyStore=void 0;var n=r(520490);Object.defineProperty(t,"MergeKeyStore",{enumerable:!0,get:function(){return n.MergeKeyStore}})},386933:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Near=void 0;var n=r(742278);Object.defineProperty(t,"Near",{enumerable:!0,get:function(){return n.Near}})},667438:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorContext=t.TypedError=t.getTransactionLastResult=t.FinalExecutionStatusBasic=t.JsonRpcProvider=t.Provider=void 0;const n=r(81169);Object.defineProperty(t,"Provider",{enumerable:!0,get:function(){return n.Provider}}),Object.defineProperty(t,"getTransactionLastResult",{enumerable:!0,get:function(){return n.getTransactionLastResult}}),Object.defineProperty(t,"FinalExecutionStatusBasic",{enumerable:!0,get:function(){return n.FinalExecutionStatusBasic}});const i=r(430500);Object.defineProperty(t,"JsonRpcProvider",{enumerable:!0,get:function(){return i.JsonRpcProvider}}),Object.defineProperty(t,"TypedError",{enumerable:!0,get:function(){return i.TypedError}}),Object.defineProperty(t,"ErrorContext",{enumerable:!0,get:function(){return i.ErrorContext}})},430500:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JsonRpcProvider=t.TypedError=t.ErrorContext=void 0;var n=r(962922);Object.defineProperty(t,"ErrorContext",{enumerable:!0,get:function(){return n.ErrorContext}}),Object.defineProperty(t,"TypedError",{enumerable:!0,get:function(){return n.TypedError}});var i=r(532885);Object.defineProperty(t,"JsonRpcProvider",{enumerable:!0,get:function(){return i.JsonRpcProvider}})},81169:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FinalExecutionStatusBasic=t.ExecutionStatusBasic=t.IdType=t.Provider=t.getTransactionLastResult=void 0;var n=r(387438);Object.defineProperty(t,"getTransactionLastResult",{enumerable:!0,get:function(){return n.getTransactionLastResult}});var i=r(532885);Object.defineProperty(t,"Provider",{enumerable:!0,get:function(){return i.Provider}});var o=r(962922);Object.defineProperty(t,"IdType",{enumerable:!0,get:function(){return o.IdType}}),Object.defineProperty(t,"ExecutionStatusBasic",{enumerable:!0,get:function(){return o.ExecutionStatusBasic}}),Object.defineProperty(t,"FinalExecutionStatusBasic",{enumerable:!0,get:function(){return o.FinalExecutionStatusBasic}})},839269:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Signer=t.InMemorySigner=void 0;var n=r(86796);Object.defineProperty(t,"InMemorySigner",{enumerable:!0,get:function(){return n.InMemorySigner}}),Object.defineProperty(t,"Signer",{enumerable:!0,get:function(){return n.Signer}})},435079:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.transfer=t.stake=t.functionCallAccessKey=t.functionCall=t.fullAccessKey=t.deployContract=t.deleteKey=t.deleteAccount=t.createAccount=t.addKey=t.encodeDelegateAction=t.encodeSignedDelegate=t.Transaction=t.SignedTransaction=t.Signature=t.signTransaction=t.createTransaction=t.SCHEMA=t.Transfer=t.Stake=t.FunctionCallPermission=t.FunctionCall=t.FullAccessPermission=t.DeployContract=t.DeleteKey=t.DeleteAccount=t.CreateAccount=t.AddKey=t.AccessKeyPermission=t.AccessKey=t.Action=t.stringifyJsonOrBytes=void 0;var n=r(332564);Object.defineProperty(t,"stringifyJsonOrBytes",{enumerable:!0,get:function(){return n.stringifyJsonOrBytes}}),Object.defineProperty(t,"Action",{enumerable:!0,get:function(){return n.Action}}),Object.defineProperty(t,"AccessKey",{enumerable:!0,get:function(){return n.AccessKey}}),Object.defineProperty(t,"AccessKeyPermission",{enumerable:!0,get:function(){return n.AccessKeyPermission}}),Object.defineProperty(t,"AddKey",{enumerable:!0,get:function(){return n.AddKey}}),Object.defineProperty(t,"CreateAccount",{enumerable:!0,get:function(){return n.CreateAccount}}),Object.defineProperty(t,"DeleteAccount",{enumerable:!0,get:function(){return n.DeleteAccount}}),Object.defineProperty(t,"DeleteKey",{enumerable:!0,get:function(){return n.DeleteKey}}),Object.defineProperty(t,"DeployContract",{enumerable:!0,get:function(){return n.DeployContract}}),Object.defineProperty(t,"FullAccessPermission",{enumerable:!0,get:function(){return n.FullAccessPermission}}),Object.defineProperty(t,"FunctionCall",{enumerable:!0,get:function(){return n.FunctionCall}}),Object.defineProperty(t,"FunctionCallPermission",{enumerable:!0,get:function(){return n.FunctionCallPermission}}),Object.defineProperty(t,"Stake",{enumerable:!0,get:function(){return n.Stake}}),Object.defineProperty(t,"Transfer",{enumerable:!0,get:function(){return n.Transfer}}),Object.defineProperty(t,"SCHEMA",{enumerable:!0,get:function(){return n.SCHEMA}}),Object.defineProperty(t,"createTransaction",{enumerable:!0,get:function(){return n.createTransaction}}),Object.defineProperty(t,"signTransaction",{enumerable:!0,get:function(){return n.signTransaction}}),Object.defineProperty(t,"Signature",{enumerable:!0,get:function(){return n.Signature}}),Object.defineProperty(t,"SignedTransaction",{enumerable:!0,get:function(){return n.SignedTransaction}}),Object.defineProperty(t,"Transaction",{enumerable:!0,get:function(){return n.Transaction}}),Object.defineProperty(t,"encodeSignedDelegate",{enumerable:!0,get:function(){return n.encodeSignedDelegate}}),Object.defineProperty(t,"encodeDelegateAction",{enumerable:!0,get:function(){return n.encodeDelegateAction}});const i=r(332564);t.addKey=(e,t)=>i.actionCreators.addKey(e,t);t.createAccount=()=>i.actionCreators.createAccount();t.deleteAccount=e=>i.actionCreators.deleteAccount(e);t.deleteKey=e=>i.actionCreators.deleteKey(e);t.deployContract=e=>i.actionCreators.deployContract(e);t.fullAccessKey=()=>i.actionCreators.fullAccessKey();t.functionCall=(e,t,r,n,o,s)=>i.actionCreators.functionCall(e,t,r,n,o,s);t.functionCallAccessKey=(e,t,r)=>i.actionCreators.functionCallAccessKey(e,t,r);t.stake=(e,t)=>i.actionCreators.stake(e,t);t.transfer=e=>i.actionCreators.transfer(e)},632203:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Enum=t.Assignable=void 0;var n=r(962922);Object.defineProperty(t,"Assignable",{enumerable:!0,get:function(){return n.Assignable}});t.Enum=class Enum{constructor(e){if(1!==Object.keys(e).length)throw new Error("Enum can only take single value");Object.keys(e).map((t=>{this[t]=e[t],this.enum=t}))}}},483666:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logWarning=t.TypedError=t.PositionalArgsError=t.ErrorContext=t.ArgumentTypeError=t.UnsupportedSerializationError=t.UnknownArgumentError=t.ConflictingOptions=t.ArgumentSchemaError=void 0;var n=r(720989);Object.defineProperty(t,"ArgumentSchemaError",{enumerable:!0,get:function(){return n.ArgumentSchemaError}}),Object.defineProperty(t,"ConflictingOptions",{enumerable:!0,get:function(){return n.ConflictingOptions}}),Object.defineProperty(t,"UnknownArgumentError",{enumerable:!0,get:function(){return n.UnknownArgumentError}}),Object.defineProperty(t,"UnsupportedSerializationError",{enumerable:!0,get:function(){return n.UnsupportedSerializationError}});var i=r(962922);Object.defineProperty(t,"ArgumentTypeError",{enumerable:!0,get:function(){return i.ArgumentTypeError}}),Object.defineProperty(t,"ErrorContext",{enumerable:!0,get:function(){return i.ErrorContext}}),Object.defineProperty(t,"PositionalArgsError",{enumerable:!0,get:function(){return i.PositionalArgsError}}),Object.defineProperty(t,"TypedError",{enumerable:!0,get:function(){return i.TypedError}});var o=r(387438);Object.defineProperty(t,"logWarning",{enumerable:!0,get:function(){return o.logWarning}})},134550:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseNearAmount=t.formatNearAmount=t.NEAR_NOMINATION_EXP=t.NEAR_NOMINATION=void 0;var n=r(387438);Object.defineProperty(t,"NEAR_NOMINATION",{enumerable:!0,get:function(){return n.NEAR_NOMINATION}}),Object.defineProperty(t,"NEAR_NOMINATION_EXP",{enumerable:!0,get:function(){return n.NEAR_NOMINATION_EXP}}),Object.defineProperty(t,"formatNearAmount",{enumerable:!0,get:function(){return n.formatNearAmount}}),Object.defineProperty(t,"parseNearAmount",{enumerable:!0,get:function(){return n.parseNearAmount}})},879997:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.logWarning=t.rpc_errors=t.KeyPairEd25519=t.KeyPair=t.PublicKey=t.format=t.enums=t.web=t.serialize=t.key_pair=void 0;const s=o(r(269265));t.key_pair=s;const a=o(r(914587));t.serialize=a;const c=o(r(950423));t.web=c;const u=o(r(632203));t.enums=u;const l=o(r(134550));t.format=l;const d=o(r(736770));t.rpc_errors=d;const p=r(269265);Object.defineProperty(t,"PublicKey",{enumerable:!0,get:function(){return p.PublicKey}}),Object.defineProperty(t,"KeyPair",{enumerable:!0,get:function(){return p.KeyPair}}),Object.defineProperty(t,"KeyPairEd25519",{enumerable:!0,get:function(){return p.KeyPairEd25519}});const y=r(483666);Object.defineProperty(t,"logWarning",{enumerable:!0,get:function(){return y.logWarning}})},269265:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PublicKey=t.KeyType=t.KeyPairEd25519=t.KeyPair=void 0;var n=r(368524);Object.defineProperty(t,"KeyPair",{enumerable:!0,get:function(){return n.KeyPair}}),Object.defineProperty(t,"KeyPairEd25519",{enumerable:!0,get:function(){return n.KeyPairEd25519}}),Object.defineProperty(t,"KeyType",{enumerable:!0,get:function(){return n.KeyType}}),Object.defineProperty(t,"PublicKey",{enumerable:!0,get:function(){return n.PublicKey}})},736770:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ServerError=t.getErrorTypeFromErrorMessage=t.formatError=t.parseResultError=t.parseRpcError=void 0;var n=r(387438);Object.defineProperty(t,"parseRpcError",{enumerable:!0,get:function(){return n.parseRpcError}}),Object.defineProperty(t,"parseResultError",{enumerable:!0,get:function(){return n.parseResultError}}),Object.defineProperty(t,"formatError",{enumerable:!0,get:function(){return n.formatError}}),Object.defineProperty(t,"getErrorTypeFromErrorMessage",{enumerable:!0,get:function(){return n.getErrorTypeFromErrorMessage}}),Object.defineProperty(t,"ServerError",{enumerable:!0,get:function(){return n.ServerError}})},914587:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BinaryReader=t.BinaryWriter=t.BorshError=t.deserialize=t.serialize=t.base_decode=t.base_encode=void 0;var n=r(881818);Object.defineProperty(t,"base_encode",{enumerable:!0,get:function(){return n.baseEncode}}),Object.defineProperty(t,"base_decode",{enumerable:!0,get:function(){return n.baseDecode}}),Object.defineProperty(t,"serialize",{enumerable:!0,get:function(){return n.serialize}}),Object.defineProperty(t,"deserialize",{enumerable:!0,get:function(){return n.deserialize}}),Object.defineProperty(t,"BorshError",{enumerable:!0,get:function(){return n.BorshError}}),Object.defineProperty(t,"BinaryWriter",{enumerable:!0,get:function(){return n.BinaryWriter}}),Object.defineProperty(t,"BinaryReader",{enumerable:!0,get:function(){return n.BinaryReader}})},950423:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetchJson=void 0;var n=r(532885);Object.defineProperty(t,"fetchJson",{enumerable:!0,get:function(){return n.fetchJson}})},358780:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findSeatPrice=t.diffEpochValidators=void 0;var n=r(387438);Object.defineProperty(t,"diffEpochValidators",{enumerable:!0,get:function(){return n.diffEpochValidators}}),Object.defineProperty(t,"findSeatPrice",{enumerable:!0,get:function(){return n.findSeatPrice}})},97556:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WalletConnection=t.ConnectedWalletAccount=void 0;var n=r(742278);Object.defineProperty(t,"ConnectedWalletAccount",{enumerable:!0,get:function(){return n.ConnectedWalletAccount}}),Object.defineProperty(t,"WalletConnection",{enumerable:!0,get:function(){return n.WalletConnection}})},596763:e=>{"use strict";var ensureCallable=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e},byObserver=function(e){var t,r,n=document.createTextNode(""),i=0;return new e((function(){var e;if(t)r&&(t=r.concat(t));else{if(!r)return;t=r}if(r=t,t=null,"function"==typeof r)return e=r,r=null,void e();for(n.data=i=++i%2;r;)e=r.shift(),r.length||(r=null),e()})).observe(n,{characterData:!0}),function(e){ensureCallable(e),t?"function"==typeof t?t=[t,e]:t.push(e):(t=e,n.data=i=++i%2)}};e.exports=function(){if("function"==typeof{env:{ONEKEY_PROXY:void 0,NODE_ENV:"production",TAMAGUI_TARGET:"web"}}.nextTick)return{env:{ONEKEY_PROXY:void 0,NODE_ENV:"production",TAMAGUI_TARGET:"web"}}.nextTick;if("function"==typeof queueMicrotask)return function(e){queueMicrotask(ensureCallable(e))};if("object"==typeof document&&document){if("function"==typeof MutationObserver)return byObserver(MutationObserver);if("function"==typeof WebKitMutationObserver)return byObserver(WebKitMutationObserver)}return"function"==typeof setImmediate?function(e){setImmediate(ensureCallable(e))}:"function"==typeof setTimeout||"object"==typeof setTimeout?function(e){setTimeout(ensureCallable(e),0)}:null}()},698203:(e,t,r)=>{"use strict";var n=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==r.g)return r.g;throw new Error("unable to locate global object")}();e.exports=t=n.fetch,n.fetch&&(t.default=n.fetch.bind(n)),t.Headers=n.Headers,t.Request=n.Request,t.Response=n.Response},436033:e=>{function normalizeColor(e){var t;return"number"==typeof e?e>>>0===e&&e>=0&&e<=4294967295?e:null:(t=n.hex6.exec(e))?parseInt(t[1]+"ff",16)>>>0:i.hasOwnProperty(e)?i[e]:(t=n.rgb.exec(e))?(parse255(t[1])<<24|parse255(t[2])<<16|parse255(t[3])<<8|255)>>>0:(t=n.rgba.exec(e))?(parse255(t[1])<<24|parse255(t[2])<<16|parse255(t[3])<<8|parse1(t[4]))>>>0:(t=n.hex3.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+"ff",16)>>>0:(t=n.hex8.exec(e))?parseInt(t[1],16)>>>0:(t=n.hex4.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+t[4]+t[4],16)>>>0:(t=n.hsl.exec(e))?(255|hslToRgb(parse360(t[1]),parsePercentage(t[2]),parsePercentage(t[3])))>>>0:(t=n.hsla.exec(e))?(hslToRgb(parse360(t[1]),parsePercentage(t[2]),parsePercentage(t[3]))|parse1(t[4]))>>>0:null}function hue2rgb(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function hslToRgb(e,t,r){var n=r<.5?r*(1+t):r+t-r*t,i=2*r-n,o=hue2rgb(i,n,e+1/3),s=hue2rgb(i,n,e),a=hue2rgb(i,n,e-1/3);return Math.round(255*o)<<24|Math.round(255*s)<<16|Math.round(255*a)<<8}var t="[-+]?\\d*\\.?\\d+",r=t+"%";function call(){return"\\(\\s*("+function toArray(e){return Array.prototype.slice.call(e,0)}(arguments).join(")\\s*,\\s*(")+")\\s*\\)"}var n={rgb:new RegExp("rgb"+call(t,t,t)),rgba:new RegExp("rgba"+call(t,t,t,t)),hsl:new RegExp("hsl"+call(t,r,r)),hsla:new RegExp("hsla"+call(t,r,r,t)),hex3:/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex4:/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#([0-9a-fA-F]{6})$/,hex8:/^#([0-9a-fA-F]{8})$/};function parse255(e){var t=parseInt(e,10);return t<0?0:t>255?255:t}function parse360(e){return(parseFloat(e)%360+360)%360/360}function parse1(e){var t=parseFloat(e);return t<0?0:t>1?255:Math.round(255*t)}function parsePercentage(e){var t=parseFloat(e,10);return t<0?0:t>100?1:t/100}var i={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199};normalizeColor.rgba=function rgba(e){return{r:Math.round((4278190080&e)>>>24),g:Math.round((16711680&e)>>>16),b:Math.round((65280&e)>>>8),a:((255&e)>>>0)/255}},e.exports=normalizeColor},540047:function(e,t,r){!function(e,t){"use strict";function assert(e,t){if(!e)throw new Error(t||"Assertion failed")}function inherits(e,t){e.super_=t;var TempCtor=function(){};TempCtor.prototype=t.prototype,e.prototype=new TempCtor,e.prototype.constructor=e}function BN(e,t,r){if(BN.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(r=t,t=10),this._init(e||0,t||10,r||"be"))}var n;"object"==typeof e?e.exports=BN:t.BN=BN,BN.BN=BN,BN.wordSize=26;try{n=r(901048).Buffer}catch(e){}function parseHex(e,t,r){for(var n=0,i=Math.min(e.length,r),o=t;o<i;o++){var s=e.charCodeAt(o)-48;n<<=4,n|=s>=49&&s<=54?s-49+10:s>=17&&s<=22?s-17+10:15&s}return n}function parseBase(e,t,r,n){for(var i=0,o=Math.min(e.length,r),s=t;s<o;s++){var a=e.charCodeAt(s)-48;i*=n,i+=a>=49?a-49+10:a>=17?a-17+10:a}return i}BN.isBN=function isBN(e){return e instanceof BN||null!==e&&"object"==typeof e&&e.constructor.wordSize===BN.wordSize&&Array.isArray(e.words)},BN.max=function max(e,t){return e.cmp(t)>0?e:t},BN.min=function min(e,t){return e.cmp(t)<0?e:t},BN.prototype._init=function init(e,t,r){if("number"==typeof e)return this._initNumber(e,t,r);if("object"==typeof e)return this._initArray(e,t,r);"hex"===t&&(t=16),assert(t===(0|t)&&t>=2&&t<=36);var n=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&n++,16===t?this._parseHex(e,n):this._parseBase(e,t,n),"-"===e[0]&&(this.negative=1),this.strip(),"le"===r&&this._initArray(this.toArray(),t,r)},BN.prototype._initNumber=function _initNumber(e,t,r){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(assert(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),t,r)},BN.prototype._initArray=function _initArray(e,t,r){if(assert("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,o,s=0;if("be"===r)for(n=e.length-1,i=0;n>=0;n-=3)o=e[n]|e[n-1]<<8|e[n-2]<<16,this.words[i]|=o<<s&67108863,this.words[i+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,i++);else if("le"===r)for(n=0,i=0;n<e.length;n+=3)o=e[n]|e[n+1]<<8|e[n+2]<<16,this.words[i]|=o<<s&67108863,this.words[i+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,i++);return this.strip()},BN.prototype._parseHex=function _parseHex(e,t){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var n,i,o=0;for(r=e.length-6,n=0;r>=t;r-=6)i=parseHex(e,r,r+6),this.words[n]|=i<<o&67108863,this.words[n+1]|=i>>>26-o&4194303,(o+=24)>=26&&(o-=26,n++);r+6!==t&&(i=parseHex(e,t,r+6),this.words[n]|=i<<o&67108863,this.words[n+1]|=i>>>26-o&4194303),this.strip()},BN.prototype._parseBase=function _parseBase(e,t,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=t)n++;n--,i=i/t|0;for(var o=e.length-r,s=o%n,a=Math.min(o,o-s)+r,c=0,u=r;u<a;u+=n)c=parseBase(e,u,u+n,t),this.imuln(i),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==s){var l=1;for(c=parseBase(e,u,e.length,t),u=0;u<s;u++)l*=t;this.imuln(l),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}},BN.prototype.copy=function copy(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},BN.prototype.clone=function clone(){var e=new BN(null);return this.copy(e),e},BN.prototype._expand=function _expand(e){for(;this.length<e;)this.words[this.length++]=0;return this},BN.prototype.strip=function strip(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},BN.prototype._normSign=function _normSign(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},BN.prototype.inspect=function inspect(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var i=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],o=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],s=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function smallMulTo(e,t,r){r.negative=t.negative^e.negative;var n=e.length+t.length|0;r.length=n,n=n-1|0;var i=0|e.words[0],o=0|t.words[0],s=i*o,a=67108863&s,c=s/67108864|0;r.words[0]=a;for(var u=1;u<n;u++){for(var l=c>>>26,d=67108863&c,p=Math.min(u,t.length-1),y=Math.max(0,u-e.length+1);y<=p;y++){var g=u-y|0;l+=(s=(i=0|e.words[g])*(o=0|t.words[y])+d)/67108864|0,d=67108863&s}r.words[u]=0|d,c=0|l}return 0!==c?r.words[u]=0|c:r.length--,r.strip()}BN.prototype.toString=function toString(e,t){var r;if(t=0|t||1,16===(e=e||10)||"hex"===e){r="";for(var n=0,a=0,c=0;c<this.length;c++){var u=this.words[c],l=(16777215&(u<<n|a)).toString(16);r=0!==(a=u>>>24-n&16777215)||c!==this.length-1?i[6-l.length]+l+r:l+r,(n+=2)>=26&&(n-=26,c--)}for(0!==a&&(r=a.toString(16)+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(e===(0|e)&&e>=2&&e<=36){var d=o[e],p=s[e];r="";var y=this.clone();for(y.negative=0;!y.isZero();){var g=y.modn(p).toString(e);r=(y=y.idivn(p)).isZero()?g+r:i[d-g.length]+g+r}for(this.isZero()&&(r="0"+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}assert(!1,"Base should be between 2 and 36")},BN.prototype.toNumber=function toNumber(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&assert(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},BN.prototype.toJSON=function toJSON(){return this.toString(16)},BN.prototype.toBuffer=function toBuffer(e,t){return assert(void 0!==n),this.toArrayLike(n,e,t)},BN.prototype.toArray=function toArray(e,t){return this.toArrayLike(Array,e,t)},BN.prototype.toArrayLike=function toArrayLike(e,t,r){var n=this.byteLength(),i=r||Math.max(1,n);assert(n<=i,"byte array longer than desired length"),assert(i>0,"Requested array length <= 0"),this.strip();var o,s,a="le"===t,c=new e(i),u=this.clone();if(a){for(s=0;!u.isZero();s++)o=u.andln(255),u.iushrn(8),c[s]=o;for(;s<i;s++)c[s]=0}else{for(s=0;s<i-n;s++)c[s]=0;for(s=0;!u.isZero();s++)o=u.andln(255),u.iushrn(8),c[i-s-1]=o}return c},Math.clz32?BN.prototype._countBits=function _countBits(e){return 32-Math.clz32(e)}:BN.prototype._countBits=function _countBits(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},BN.prototype._zeroBits=function _zeroBits(e){if(0===e)return 26;var t=e,r=0;return 8191&t||(r+=13,t>>>=13),127&t||(r+=7,t>>>=7),15&t||(r+=4,t>>>=4),3&t||(r+=2,t>>>=2),1&t||r++,r},BN.prototype.bitLength=function bitLength(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},BN.prototype.zeroBits=function zeroBits(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},BN.prototype.byteLength=function byteLength(){return Math.ceil(this.bitLength()/8)},BN.prototype.toTwos=function toTwos(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},BN.prototype.fromTwos=function fromTwos(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},BN.prototype.isNeg=function isNeg(){return 0!==this.negative},BN.prototype.neg=function neg(){return this.clone().ineg()},BN.prototype.ineg=function ineg(){return this.isZero()||(this.negative^=1),this},BN.prototype.iuor=function iuor(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},BN.prototype.ior=function ior(e){return assert(!(this.negative|e.negative)),this.iuor(e)},BN.prototype.or=function or(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},BN.prototype.uor=function uor(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},BN.prototype.iuand=function iuand(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this.strip()},BN.prototype.iand=function iand(e){return assert(!(this.negative|e.negative)),this.iuand(e)},BN.prototype.and=function and(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},BN.prototype.uand=function uand(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},BN.prototype.iuxor=function iuxor(e){var t,r;this.length>e.length?(t=this,r=e):(t=e,r=this);for(var n=0;n<r.length;n++)this.words[n]=t.words[n]^r.words[n];if(this!==t)for(;n<t.length;n++)this.words[n]=t.words[n];return this.length=t.length,this.strip()},BN.prototype.ixor=function ixor(e){return assert(!(this.negative|e.negative)),this.iuxor(e)},BN.prototype.xor=function xor(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},BN.prototype.uxor=function uxor(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},BN.prototype.inotn=function inotn(e){assert("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),r=e%26;this._expand(t),r>0&&t--;for(var n=0;n<t;n++)this.words[n]=67108863&~this.words[n];return r>0&&(this.words[n]=~this.words[n]&67108863>>26-r),this.strip()},BN.prototype.notn=function notn(e){return this.clone().inotn(e)},BN.prototype.setn=function setn(e,t){assert("number"==typeof e&&e>=0);var r=e/26|0,n=e%26;return this._expand(r+1),this.words[r]=t?this.words[r]|1<<n:this.words[r]&~(1<<n),this.strip()},BN.prototype.iadd=function iadd(e){var t,r,n;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,n=e):(r=e,n=this);for(var i=0,o=0;o<n.length;o++)t=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&t,i=t>>>26;for(;0!==i&&o<r.length;o++)t=(0|r.words[o])+i,this.words[o]=67108863&t,i=t>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},BN.prototype.add=function add(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},BN.prototype.isub=function isub(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var r,n,i=this.cmp(e);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=e):(r=e,n=this);for(var o=0,s=0;s<n.length;s++)o=(t=(0|r.words[s])-(0|n.words[s])+o)>>26,this.words[s]=67108863&t;for(;0!==o&&s<r.length;s++)o=(t=(0|r.words[s])+o)>>26,this.words[s]=67108863&t;if(0===o&&s<r.length&&r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this.length=Math.max(this.length,s),r!==this&&(this.negative=1),this.strip()},BN.prototype.sub=function sub(e){return this.clone().isub(e)};var a=function comb10MulTo(e,t,r){var n,i,o,s=e.words,a=t.words,c=r.words,u=0,l=0|s[0],d=8191&l,p=l>>>13,y=0|s[1],g=8191&y,m=y>>>13,b=0|s[2],w=8191&b,v=b>>>13,E=0|s[3],S=8191&E,A=E>>>13,x=0|s[4],_=8191&x,I=x>>>13,T=0|s[5],P=8191&T,M=T>>>13,B=0|s[6],O=8191&B,k=B>>>13,C=0|s[7],N=8191&C,j=C>>>13,R=0|s[8],U=8191&R,D=R>>>13,L=0|s[9],K=8191&L,H=L>>>13,F=0|a[0],q=8191&F,z=F>>>13,V=0|a[1],$=8191&V,G=V>>>13,W=0|a[2],J=8191&W,Z=W>>>13,X=0|a[3],Y=8191&X,Q=X>>>13,ee=0|a[4],te=8191&ee,re=ee>>>13,ne=0|a[5],ie=8191&ne,oe=ne>>>13,se=0|a[6],ae=8191&se,ce=se>>>13,ue=0|a[7],le=8191&ue,de=ue>>>13,he=0|a[8],pe=8191&he,ye=he>>>13,me=0|a[9],be=8191&me,we=me>>>13;r.negative=e.negative^t.negative,r.length=19;var ve=(u+(n=Math.imul(d,q))|0)+((8191&(i=(i=Math.imul(d,z))+Math.imul(p,q)|0))<<13)|0;u=((o=Math.imul(p,z))+(i>>>13)|0)+(ve>>>26)|0,ve&=67108863,n=Math.imul(g,q),i=(i=Math.imul(g,z))+Math.imul(m,q)|0,o=Math.imul(m,z);var Ee=(u+(n=n+Math.imul(d,$)|0)|0)+((8191&(i=(i=i+Math.imul(d,G)|0)+Math.imul(p,$)|0))<<13)|0;u=((o=o+Math.imul(p,G)|0)+(i>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,n=Math.imul(w,q),i=(i=Math.imul(w,z))+Math.imul(v,q)|0,o=Math.imul(v,z),n=n+Math.imul(g,$)|0,i=(i=i+Math.imul(g,G)|0)+Math.imul(m,$)|0,o=o+Math.imul(m,G)|0;var Se=(u+(n=n+Math.imul(d,J)|0)|0)+((8191&(i=(i=i+Math.imul(d,Z)|0)+Math.imul(p,J)|0))<<13)|0;u=((o=o+Math.imul(p,Z)|0)+(i>>>13)|0)+(Se>>>26)|0,Se&=67108863,n=Math.imul(S,q),i=(i=Math.imul(S,z))+Math.imul(A,q)|0,o=Math.imul(A,z),n=n+Math.imul(w,$)|0,i=(i=i+Math.imul(w,G)|0)+Math.imul(v,$)|0,o=o+Math.imul(v,G)|0,n=n+Math.imul(g,J)|0,i=(i=i+Math.imul(g,Z)|0)+Math.imul(m,J)|0,o=o+Math.imul(m,Z)|0;var Ae=(u+(n=n+Math.imul(d,Y)|0)|0)+((8191&(i=(i=i+Math.imul(d,Q)|0)+Math.imul(p,Y)|0))<<13)|0;u=((o=o+Math.imul(p,Q)|0)+(i>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,n=Math.imul(_,q),i=(i=Math.imul(_,z))+Math.imul(I,q)|0,o=Math.imul(I,z),n=n+Math.imul(S,$)|0,i=(i=i+Math.imul(S,G)|0)+Math.imul(A,$)|0,o=o+Math.imul(A,G)|0,n=n+Math.imul(w,J)|0,i=(i=i+Math.imul(w,Z)|0)+Math.imul(v,J)|0,o=o+Math.imul(v,Z)|0,n=n+Math.imul(g,Y)|0,i=(i=i+Math.imul(g,Q)|0)+Math.imul(m,Y)|0,o=o+Math.imul(m,Q)|0;var xe=(u+(n=n+Math.imul(d,te)|0)|0)+((8191&(i=(i=i+Math.imul(d,re)|0)+Math.imul(p,te)|0))<<13)|0;u=((o=o+Math.imul(p,re)|0)+(i>>>13)|0)+(xe>>>26)|0,xe&=67108863,n=Math.imul(P,q),i=(i=Math.imul(P,z))+Math.imul(M,q)|0,o=Math.imul(M,z),n=n+Math.imul(_,$)|0,i=(i=i+Math.imul(_,G)|0)+Math.imul(I,$)|0,o=o+Math.imul(I,G)|0,n=n+Math.imul(S,J)|0,i=(i=i+Math.imul(S,Z)|0)+Math.imul(A,J)|0,o=o+Math.imul(A,Z)|0,n=n+Math.imul(w,Y)|0,i=(i=i+Math.imul(w,Q)|0)+Math.imul(v,Y)|0,o=o+Math.imul(v,Q)|0,n=n+Math.imul(g,te)|0,i=(i=i+Math.imul(g,re)|0)+Math.imul(m,te)|0,o=o+Math.imul(m,re)|0;var _e=(u+(n=n+Math.imul(d,ie)|0)|0)+((8191&(i=(i=i+Math.imul(d,oe)|0)+Math.imul(p,ie)|0))<<13)|0;u=((o=o+Math.imul(p,oe)|0)+(i>>>13)|0)+(_e>>>26)|0,_e&=67108863,n=Math.imul(O,q),i=(i=Math.imul(O,z))+Math.imul(k,q)|0,o=Math.imul(k,z),n=n+Math.imul(P,$)|0,i=(i=i+Math.imul(P,G)|0)+Math.imul(M,$)|0,o=o+Math.imul(M,G)|0,n=n+Math.imul(_,J)|0,i=(i=i+Math.imul(_,Z)|0)+Math.imul(I,J)|0,o=o+Math.imul(I,Z)|0,n=n+Math.imul(S,Y)|0,i=(i=i+Math.imul(S,Q)|0)+Math.imul(A,Y)|0,o=o+Math.imul(A,Q)|0,n=n+Math.imul(w,te)|0,i=(i=i+Math.imul(w,re)|0)+Math.imul(v,te)|0,o=o+Math.imul(v,re)|0,n=n+Math.imul(g,ie)|0,i=(i=i+Math.imul(g,oe)|0)+Math.imul(m,ie)|0,o=o+Math.imul(m,oe)|0;var Ie=(u+(n=n+Math.imul(d,ae)|0)|0)+((8191&(i=(i=i+Math.imul(d,ce)|0)+Math.imul(p,ae)|0))<<13)|0;u=((o=o+Math.imul(p,ce)|0)+(i>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,n=Math.imul(N,q),i=(i=Math.imul(N,z))+Math.imul(j,q)|0,o=Math.imul(j,z),n=n+Math.imul(O,$)|0,i=(i=i+Math.imul(O,G)|0)+Math.imul(k,$)|0,o=o+Math.imul(k,G)|0,n=n+Math.imul(P,J)|0,i=(i=i+Math.imul(P,Z)|0)+Math.imul(M,J)|0,o=o+Math.imul(M,Z)|0,n=n+Math.imul(_,Y)|0,i=(i=i+Math.imul(_,Q)|0)+Math.imul(I,Y)|0,o=o+Math.imul(I,Q)|0,n=n+Math.imul(S,te)|0,i=(i=i+Math.imul(S,re)|0)+Math.imul(A,te)|0,o=o+Math.imul(A,re)|0,n=n+Math.imul(w,ie)|0,i=(i=i+Math.imul(w,oe)|0)+Math.imul(v,ie)|0,o=o+Math.imul(v,oe)|0,n=n+Math.imul(g,ae)|0,i=(i=i+Math.imul(g,ce)|0)+Math.imul(m,ae)|0,o=o+Math.imul(m,ce)|0;var Te=(u+(n=n+Math.imul(d,le)|0)|0)+((8191&(i=(i=i+Math.imul(d,de)|0)+Math.imul(p,le)|0))<<13)|0;u=((o=o+Math.imul(p,de)|0)+(i>>>13)|0)+(Te>>>26)|0,Te&=67108863,n=Math.imul(U,q),i=(i=Math.imul(U,z))+Math.imul(D,q)|0,o=Math.imul(D,z),n=n+Math.imul(N,$)|0,i=(i=i+Math.imul(N,G)|0)+Math.imul(j,$)|0,o=o+Math.imul(j,G)|0,n=n+Math.imul(O,J)|0,i=(i=i+Math.imul(O,Z)|0)+Math.imul(k,J)|0,o=o+Math.imul(k,Z)|0,n=n+Math.imul(P,Y)|0,i=(i=i+Math.imul(P,Q)|0)+Math.imul(M,Y)|0,o=o+Math.imul(M,Q)|0,n=n+Math.imul(_,te)|0,i=(i=i+Math.imul(_,re)|0)+Math.imul(I,te)|0,o=o+Math.imul(I,re)|0,n=n+Math.imul(S,ie)|0,i=(i=i+Math.imul(S,oe)|0)+Math.imul(A,ie)|0,o=o+Math.imul(A,oe)|0,n=n+Math.imul(w,ae)|0,i=(i=i+Math.imul(w,ce)|0)+Math.imul(v,ae)|0,o=o+Math.imul(v,ce)|0,n=n+Math.imul(g,le)|0,i=(i=i+Math.imul(g,de)|0)+Math.imul(m,le)|0,o=o+Math.imul(m,de)|0;var Pe=(u+(n=n+Math.imul(d,pe)|0)|0)+((8191&(i=(i=i+Math.imul(d,ye)|0)+Math.imul(p,pe)|0))<<13)|0;u=((o=o+Math.imul(p,ye)|0)+(i>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,n=Math.imul(K,q),i=(i=Math.imul(K,z))+Math.imul(H,q)|0,o=Math.imul(H,z),n=n+Math.imul(U,$)|0,i=(i=i+Math.imul(U,G)|0)+Math.imul(D,$)|0,o=o+Math.imul(D,G)|0,n=n+Math.imul(N,J)|0,i=(i=i+Math.imul(N,Z)|0)+Math.imul(j,J)|0,o=o+Math.imul(j,Z)|0,n=n+Math.imul(O,Y)|0,i=(i=i+Math.imul(O,Q)|0)+Math.imul(k,Y)|0,o=o+Math.imul(k,Q)|0,n=n+Math.imul(P,te)|0,i=(i=i+Math.imul(P,re)|0)+Math.imul(M,te)|0,o=o+Math.imul(M,re)|0,n=n+Math.imul(_,ie)|0,i=(i=i+Math.imul(_,oe)|0)+Math.imul(I,ie)|0,o=o+Math.imul(I,oe)|0,n=n+Math.imul(S,ae)|0,i=(i=i+Math.imul(S,ce)|0)+Math.imul(A,ae)|0,o=o+Math.imul(A,ce)|0,n=n+Math.imul(w,le)|0,i=(i=i+Math.imul(w,de)|0)+Math.imul(v,le)|0,o=o+Math.imul(v,de)|0,n=n+Math.imul(g,pe)|0,i=(i=i+Math.imul(g,ye)|0)+Math.imul(m,pe)|0,o=o+Math.imul(m,ye)|0;var Me=(u+(n=n+Math.imul(d,be)|0)|0)+((8191&(i=(i=i+Math.imul(d,we)|0)+Math.imul(p,be)|0))<<13)|0;u=((o=o+Math.imul(p,we)|0)+(i>>>13)|0)+(Me>>>26)|0,Me&=67108863,n=Math.imul(K,$),i=(i=Math.imul(K,G))+Math.imul(H,$)|0,o=Math.imul(H,G),n=n+Math.imul(U,J)|0,i=(i=i+Math.imul(U,Z)|0)+Math.imul(D,J)|0,o=o+Math.imul(D,Z)|0,n=n+Math.imul(N,Y)|0,i=(i=i+Math.imul(N,Q)|0)+Math.imul(j,Y)|0,o=o+Math.imul(j,Q)|0,n=n+Math.imul(O,te)|0,i=(i=i+Math.imul(O,re)|0)+Math.imul(k,te)|0,o=o+Math.imul(k,re)|0,n=n+Math.imul(P,ie)|0,i=(i=i+Math.imul(P,oe)|0)+Math.imul(M,ie)|0,o=o+Math.imul(M,oe)|0,n=n+Math.imul(_,ae)|0,i=(i=i+Math.imul(_,ce)|0)+Math.imul(I,ae)|0,o=o+Math.imul(I,ce)|0,n=n+Math.imul(S,le)|0,i=(i=i+Math.imul(S,de)|0)+Math.imul(A,le)|0,o=o+Math.imul(A,de)|0,n=n+Math.imul(w,pe)|0,i=(i=i+Math.imul(w,ye)|0)+Math.imul(v,pe)|0,o=o+Math.imul(v,ye)|0;var Be=(u+(n=n+Math.imul(g,be)|0)|0)+((8191&(i=(i=i+Math.imul(g,we)|0)+Math.imul(m,be)|0))<<13)|0;u=((o=o+Math.imul(m,we)|0)+(i>>>13)|0)+(Be>>>26)|0,Be&=67108863,n=Math.imul(K,J),i=(i=Math.imul(K,Z))+Math.imul(H,J)|0,o=Math.imul(H,Z),n=n+Math.imul(U,Y)|0,i=(i=i+Math.imul(U,Q)|0)+Math.imul(D,Y)|0,o=o+Math.imul(D,Q)|0,n=n+Math.imul(N,te)|0,i=(i=i+Math.imul(N,re)|0)+Math.imul(j,te)|0,o=o+Math.imul(j,re)|0,n=n+Math.imul(O,ie)|0,i=(i=i+Math.imul(O,oe)|0)+Math.imul(k,ie)|0,o=o+Math.imul(k,oe)|0,n=n+Math.imul(P,ae)|0,i=(i=i+Math.imul(P,ce)|0)+Math.imul(M,ae)|0,o=o+Math.imul(M,ce)|0,n=n+Math.imul(_,le)|0,i=(i=i+Math.imul(_,de)|0)+Math.imul(I,le)|0,o=o+Math.imul(I,de)|0,n=n+Math.imul(S,pe)|0,i=(i=i+Math.imul(S,ye)|0)+Math.imul(A,pe)|0,o=o+Math.imul(A,ye)|0;var Oe=(u+(n=n+Math.imul(w,be)|0)|0)+((8191&(i=(i=i+Math.imul(w,we)|0)+Math.imul(v,be)|0))<<13)|0;u=((o=o+Math.imul(v,we)|0)+(i>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,n=Math.imul(K,Y),i=(i=Math.imul(K,Q))+Math.imul(H,Y)|0,o=Math.imul(H,Q),n=n+Math.imul(U,te)|0,i=(i=i+Math.imul(U,re)|0)+Math.imul(D,te)|0,o=o+Math.imul(D,re)|0,n=n+Math.imul(N,ie)|0,i=(i=i+Math.imul(N,oe)|0)+Math.imul(j,ie)|0,o=o+Math.imul(j,oe)|0,n=n+Math.imul(O,ae)|0,i=(i=i+Math.imul(O,ce)|0)+Math.imul(k,ae)|0,o=o+Math.imul(k,ce)|0,n=n+Math.imul(P,le)|0,i=(i=i+Math.imul(P,de)|0)+Math.imul(M,le)|0,o=o+Math.imul(M,de)|0,n=n+Math.imul(_,pe)|0,i=(i=i+Math.imul(_,ye)|0)+Math.imul(I,pe)|0,o=o+Math.imul(I,ye)|0;var ke=(u+(n=n+Math.imul(S,be)|0)|0)+((8191&(i=(i=i+Math.imul(S,we)|0)+Math.imul(A,be)|0))<<13)|0;u=((o=o+Math.imul(A,we)|0)+(i>>>13)|0)+(ke>>>26)|0,ke&=67108863,n=Math.imul(K,te),i=(i=Math.imul(K,re))+Math.imul(H,te)|0,o=Math.imul(H,re),n=n+Math.imul(U,ie)|0,i=(i=i+Math.imul(U,oe)|0)+Math.imul(D,ie)|0,o=o+Math.imul(D,oe)|0,n=n+Math.imul(N,ae)|0,i=(i=i+Math.imul(N,ce)|0)+Math.imul(j,ae)|0,o=o+Math.imul(j,ce)|0,n=n+Math.imul(O,le)|0,i=(i=i+Math.imul(O,de)|0)+Math.imul(k,le)|0,o=o+Math.imul(k,de)|0,n=n+Math.imul(P,pe)|0,i=(i=i+Math.imul(P,ye)|0)+Math.imul(M,pe)|0,o=o+Math.imul(M,ye)|0;var Ce=(u+(n=n+Math.imul(_,be)|0)|0)+((8191&(i=(i=i+Math.imul(_,we)|0)+Math.imul(I,be)|0))<<13)|0;u=((o=o+Math.imul(I,we)|0)+(i>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,n=Math.imul(K,ie),i=(i=Math.imul(K,oe))+Math.imul(H,ie)|0,o=Math.imul(H,oe),n=n+Math.imul(U,ae)|0,i=(i=i+Math.imul(U,ce)|0)+Math.imul(D,ae)|0,o=o+Math.imul(D,ce)|0,n=n+Math.imul(N,le)|0,i=(i=i+Math.imul(N,de)|0)+Math.imul(j,le)|0,o=o+Math.imul(j,de)|0,n=n+Math.imul(O,pe)|0,i=(i=i+Math.imul(O,ye)|0)+Math.imul(k,pe)|0,o=o+Math.imul(k,ye)|0;var Ne=(u+(n=n+Math.imul(P,be)|0)|0)+((8191&(i=(i=i+Math.imul(P,we)|0)+Math.imul(M,be)|0))<<13)|0;u=((o=o+Math.imul(M,we)|0)+(i>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,n=Math.imul(K,ae),i=(i=Math.imul(K,ce))+Math.imul(H,ae)|0,o=Math.imul(H,ce),n=n+Math.imul(U,le)|0,i=(i=i+Math.imul(U,de)|0)+Math.imul(D,le)|0,o=o+Math.imul(D,de)|0,n=n+Math.imul(N,pe)|0,i=(i=i+Math.imul(N,ye)|0)+Math.imul(j,pe)|0,o=o+Math.imul(j,ye)|0;var je=(u+(n=n+Math.imul(O,be)|0)|0)+((8191&(i=(i=i+Math.imul(O,we)|0)+Math.imul(k,be)|0))<<13)|0;u=((o=o+Math.imul(k,we)|0)+(i>>>13)|0)+(je>>>26)|0,je&=67108863,n=Math.imul(K,le),i=(i=Math.imul(K,de))+Math.imul(H,le)|0,o=Math.imul(H,de),n=n+Math.imul(U,pe)|0,i=(i=i+Math.imul(U,ye)|0)+Math.imul(D,pe)|0,o=o+Math.imul(D,ye)|0;var Re=(u+(n=n+Math.imul(N,be)|0)|0)+((8191&(i=(i=i+Math.imul(N,we)|0)+Math.imul(j,be)|0))<<13)|0;u=((o=o+Math.imul(j,we)|0)+(i>>>13)|0)+(Re>>>26)|0,Re&=67108863,n=Math.imul(K,pe),i=(i=Math.imul(K,ye))+Math.imul(H,pe)|0,o=Math.imul(H,ye);var Ue=(u+(n=n+Math.imul(U,be)|0)|0)+((8191&(i=(i=i+Math.imul(U,we)|0)+Math.imul(D,be)|0))<<13)|0;u=((o=o+Math.imul(D,we)|0)+(i>>>13)|0)+(Ue>>>26)|0,Ue&=67108863;var De=(u+(n=Math.imul(K,be))|0)+((8191&(i=(i=Math.imul(K,we))+Math.imul(H,be)|0))<<13)|0;return u=((o=Math.imul(H,we))+(i>>>13)|0)+(De>>>26)|0,De&=67108863,c[0]=ve,c[1]=Ee,c[2]=Se,c[3]=Ae,c[4]=xe,c[5]=_e,c[6]=Ie,c[7]=Te,c[8]=Pe,c[9]=Me,c[10]=Be,c[11]=Oe,c[12]=ke,c[13]=Ce,c[14]=Ne,c[15]=je,c[16]=Re,c[17]=Ue,c[18]=De,0!==u&&(c[19]=u,r.length++),r};function jumboMulTo(e,t,r){return(new FFTM).mulp(e,t,r)}function FFTM(e,t){this.x=e,this.y=t}Math.imul||(a=smallMulTo),BN.prototype.mulTo=function mulTo(e,t){var r,n=this.length+e.length;return r=10===this.length&&10===e.length?a(this,e,t):n<63?smallMulTo(this,e,t):n<1024?function bigMulTo(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var s=i;i=0;for(var a=67108863&n,c=Math.min(o,t.length-1),u=Math.max(0,o-e.length+1);u<=c;u++){var l=o-u,d=(0|e.words[l])*(0|t.words[u]),p=67108863&d;a=67108863&(p=p+a|0),i+=(s=(s=s+(d/67108864|0)|0)+(p>>>26)|0)>>>26,s&=67108863}r.words[o]=a,n=s,s=i}return 0!==n?r.words[o]=n:r.length--,r.strip()}(this,e,t):jumboMulTo(this,e,t),r},FFTM.prototype.makeRBT=function makeRBT(e){for(var t=new Array(e),r=BN.prototype._countBits(e)-1,n=0;n<e;n++)t[n]=this.revBin(n,r,e);return t},FFTM.prototype.revBin=function revBin(e,t,r){if(0===e||e===r-1)return e;for(var n=0,i=0;i<t;i++)n|=(1&e)<<t-i-1,e>>=1;return n},FFTM.prototype.permute=function permute(e,t,r,n,i,o){for(var s=0;s<o;s++)n[s]=t[e[s]],i[s]=r[e[s]]},FFTM.prototype.transform=function transform(e,t,r,n,i,o){this.permute(o,e,t,r,n,i);for(var s=1;s<i;s<<=1)for(var a=s<<1,c=Math.cos(2*Math.PI/a),u=Math.sin(2*Math.PI/a),l=0;l<i;l+=a)for(var d=c,p=u,y=0;y<s;y++){var g=r[l+y],m=n[l+y],b=r[l+y+s],w=n[l+y+s],v=d*b-p*w;w=d*w+p*b,b=v,r[l+y]=g+b,n[l+y]=m+w,r[l+y+s]=g-b,n[l+y+s]=m-w,y!==a&&(v=c*d-u*p,p=c*p+u*d,d=v)}},FFTM.prototype.guessLen13b=function guessLen13b(e,t){var r=1|Math.max(t,e),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},FFTM.prototype.conjugate=function conjugate(e,t,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=e[n];e[n]=e[r-n-1],e[r-n-1]=i,i=t[n],t[n]=-t[r-n-1],t[r-n-1]=-i}},FFTM.prototype.normalize13b=function normalize13b(e,t){for(var r=0,n=0;n<t/2;n++){var i=8192*Math.round(e[2*n+1]/t)+Math.round(e[2*n]/t)+r;e[n]=67108863&i,r=i<67108864?0:i/67108864|0}return e},FFTM.prototype.convert13b=function convert13b(e,t,r,n){for(var i=0,o=0;o<t;o++)i+=0|e[o],r[2*o]=8191&i,i>>>=13,r[2*o+1]=8191&i,i>>>=13;for(o=2*t;o<n;++o)r[o]=0;assert(0===i),assert(!(-8192&i))},FFTM.prototype.stub=function stub(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=0;return t},FFTM.prototype.mulp=function mulp(e,t,r){var n=2*this.guessLen13b(e.length,t.length),i=this.makeRBT(n),o=this.stub(n),s=new Array(n),a=new Array(n),c=new Array(n),u=new Array(n),l=new Array(n),d=new Array(n),p=r.words;p.length=n,this.convert13b(e.words,e.length,s,n),this.convert13b(t.words,t.length,u,n),this.transform(s,o,a,c,n,i),this.transform(u,o,l,d,n,i);for(var y=0;y<n;y++){var g=a[y]*l[y]-c[y]*d[y];c[y]=a[y]*d[y]+c[y]*l[y],a[y]=g}return this.conjugate(a,c,n),this.transform(a,c,p,o,n,i),this.conjugate(p,o,n),this.normalize13b(p,n),r.negative=e.negative^t.negative,r.length=e.length+t.length,r.strip()},BN.prototype.mul=function mul(e){var t=new BN(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},BN.prototype.mulf=function mulf(e){var t=new BN(null);return t.words=new Array(this.length+e.length),jumboMulTo(this,e,t)},BN.prototype.imul=function imul(e){return this.clone().mulTo(e,this)},BN.prototype.imuln=function imuln(e){assert("number"==typeof e),assert(e<67108864);for(var t=0,r=0;r<this.length;r++){var n=(0|this.words[r])*e,i=(67108863&n)+(67108863&t);t>>=26,t+=n/67108864|0,t+=i>>>26,this.words[r]=67108863&i}return 0!==t&&(this.words[r]=t,this.length++),this},BN.prototype.muln=function muln(e){return this.clone().imuln(e)},BN.prototype.sqr=function sqr(){return this.mul(this)},BN.prototype.isqr=function isqr(){return this.imul(this.clone())},BN.prototype.pow=function pow(e){var t=function toBitArray(e){for(var t=new Array(e.bitLength()),r=0;r<t.length;r++){var n=r/26|0,i=r%26;t[r]=(e.words[n]&1<<i)>>>i}return t}(e);if(0===t.length)return new BN(1);for(var r=this,n=0;n<t.length&&0===t[n];n++,r=r.sqr());if(++n<t.length)for(var i=r.sqr();n<t.length;n++,i=i.sqr())0!==t[n]&&(r=r.mul(i));return r},BN.prototype.iushln=function iushln(e){assert("number"==typeof e&&e>=0);var t,r=e%26,n=(e-r)/26,i=67108863>>>26-r<<26-r;if(0!==r){var o=0;for(t=0;t<this.length;t++){var s=this.words[t]&i,a=(0|this.words[t])-s<<r;this.words[t]=a|o,o=s>>>26-r}o&&(this.words[t]=o,this.length++)}if(0!==n){for(t=this.length-1;t>=0;t--)this.words[t+n]=this.words[t];for(t=0;t<n;t++)this.words[t]=0;this.length+=n}return this.strip()},BN.prototype.ishln=function ishln(e){return assert(0===this.negative),this.iushln(e)},BN.prototype.iushrn=function iushrn(e,t,r){var n;assert("number"==typeof e&&e>=0),n=t?(t-t%26)/26:0;var i=e%26,o=Math.min((e-i)/26,this.length),s=67108863^67108863>>>i<<i,a=r;if(n-=o,n=Math.max(0,n),a){for(var c=0;c<o;c++)a.words[c]=this.words[c];a.length=o}if(0===o);else if(this.length>o)for(this.length-=o,c=0;c<this.length;c++)this.words[c]=this.words[c+o];else this.words[0]=0,this.length=1;var u=0;for(c=this.length-1;c>=0&&(0!==u||c>=n);c--){var l=0|this.words[c];this.words[c]=u<<26-i|l>>>i,u=l&s}return a&&0!==u&&(a.words[a.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},BN.prototype.ishrn=function ishrn(e,t,r){return assert(0===this.negative),this.iushrn(e,t,r)},BN.prototype.shln=function shln(e){return this.clone().ishln(e)},BN.prototype.ushln=function ushln(e){return this.clone().iushln(e)},BN.prototype.shrn=function shrn(e){return this.clone().ishrn(e)},BN.prototype.ushrn=function ushrn(e){return this.clone().iushrn(e)},BN.prototype.testn=function testn(e){assert("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26,n=1<<t;return!(this.length<=r)&&!!(this.words[r]&n)},BN.prototype.imaskn=function imaskn(e){assert("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26;if(assert(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==t&&r++,this.length=Math.min(r,this.length),0!==t){var n=67108863^67108863>>>t<<t;this.words[this.length-1]&=n}return this.strip()},BN.prototype.maskn=function maskn(e){return this.clone().imaskn(e)},BN.prototype.iaddn=function iaddn(e){return assert("number"==typeof e),assert(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},BN.prototype._iaddn=function _iaddn(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},BN.prototype.isubn=function isubn(e){if(assert("number"==typeof e),assert(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},BN.prototype.addn=function addn(e){return this.clone().iaddn(e)},BN.prototype.subn=function subn(e){return this.clone().isubn(e)},BN.prototype.iabs=function iabs(){return this.negative=0,this},BN.prototype.abs=function abs(){return this.clone().iabs()},BN.prototype._ishlnsubmul=function _ishlnsubmul(e,t,r){var n,i,o=e.length+r;this._expand(o);var s=0;for(n=0;n<e.length;n++){i=(0|this.words[n+r])+s;var a=(0|e.words[n])*t;s=((i-=67108863&a)>>26)-(a/67108864|0),this.words[n+r]=67108863&i}for(;n<this.length-r;n++)s=(i=(0|this.words[n+r])+s)>>26,this.words[n+r]=67108863&i;if(0===s)return this.strip();for(assert(-1===s),s=0,n=0;n<this.length;n++)s=(i=-(0|this.words[n])+s)>>26,this.words[n]=67108863&i;return this.negative=1,this.strip()},BN.prototype._wordDiv=function _wordDiv(e,t){var r=(this.length,e.length),n=this.clone(),i=e,o=0|i.words[i.length-1];0!==(r=26-this._countBits(o))&&(i=i.ushln(r),n.iushln(r),o=0|i.words[i.length-1]);var s,a=n.length-i.length;if("mod"!==t){(s=new BN(null)).length=a+1,s.words=new Array(s.length);for(var c=0;c<s.length;c++)s.words[c]=0}var u=n.clone()._ishlnsubmul(i,1,a);0===u.negative&&(n=u,s&&(s.words[a]=1));for(var l=a-1;l>=0;l--){var d=67108864*(0|n.words[i.length+l])+(0|n.words[i.length+l-1]);for(d=Math.min(d/o|0,67108863),n._ishlnsubmul(i,d,l);0!==n.negative;)d--,n.negative=0,n._ishlnsubmul(i,1,l),n.isZero()||(n.negative^=1);s&&(s.words[l]=d)}return s&&s.strip(),n.strip(),"div"!==t&&0!==r&&n.iushrn(r),{div:s||null,mod:n}},BN.prototype.divmod=function divmod(e,t,r){return assert(!e.isZero()),this.isZero()?{div:new BN(0),mod:new BN(0)}:0!==this.negative&&0===e.negative?(o=this.neg().divmod(e,t),"mod"!==t&&(n=o.div.neg()),"div"!==t&&(i=o.mod.neg(),r&&0!==i.negative&&i.iadd(e)),{div:n,mod:i}):0===this.negative&&0!==e.negative?(o=this.divmod(e.neg(),t),"mod"!==t&&(n=o.div.neg()),{div:n,mod:o.mod}):this.negative&e.negative?(o=this.neg().divmod(e.neg(),t),"div"!==t&&(i=o.mod.neg(),r&&0!==i.negative&&i.isub(e)),{div:o.div,mod:i}):e.length>this.length||this.cmp(e)<0?{div:new BN(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new BN(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new BN(this.modn(e.words[0]))}:this._wordDiv(e,t);var n,i,o},BN.prototype.div=function div(e){return this.divmod(e,"div",!1).div},BN.prototype.mod=function mod(e){return this.divmod(e,"mod",!1).mod},BN.prototype.umod=function umod(e){return this.divmod(e,"mod",!0).mod},BN.prototype.divRound=function divRound(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,n=e.ushrn(1),i=e.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},BN.prototype.modn=function modn(e){assert(e<=67108863);for(var t=(1<<26)%e,r=0,n=this.length-1;n>=0;n--)r=(t*r+(0|this.words[n]))%e;return r},BN.prototype.idivn=function idivn(e){assert(e<=67108863);for(var t=0,r=this.length-1;r>=0;r--){var n=(0|this.words[r])+67108864*t;this.words[r]=n/e|0,t=n%e}return this.strip()},BN.prototype.divn=function divn(e){return this.clone().idivn(e)},BN.prototype.egcd=function egcd(e){assert(0===e.negative),assert(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var n=new BN(1),i=new BN(0),o=new BN(0),s=new BN(1),a=0;t.isEven()&&r.isEven();)t.iushrn(1),r.iushrn(1),++a;for(var c=r.clone(),u=t.clone();!t.isZero();){for(var l=0,d=1;!(t.words[0]&d)&&l<26;++l,d<<=1);if(l>0)for(t.iushrn(l);l-- >0;)(n.isOdd()||i.isOdd())&&(n.iadd(c),i.isub(u)),n.iushrn(1),i.iushrn(1);for(var p=0,y=1;!(r.words[0]&y)&&p<26;++p,y<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(o.isOdd()||s.isOdd())&&(o.iadd(c),s.isub(u)),o.iushrn(1),s.iushrn(1);t.cmp(r)>=0?(t.isub(r),n.isub(o),i.isub(s)):(r.isub(t),o.isub(n),s.isub(i))}return{a:o,b:s,gcd:r.iushln(a)}},BN.prototype._invmp=function _invmp(e){assert(0===e.negative),assert(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var n,i=new BN(1),o=new BN(0),s=r.clone();t.cmpn(1)>0&&r.cmpn(1)>0;){for(var a=0,c=1;!(t.words[0]&c)&&a<26;++a,c<<=1);if(a>0)for(t.iushrn(a);a-- >0;)i.isOdd()&&i.iadd(s),i.iushrn(1);for(var u=0,l=1;!(r.words[0]&l)&&u<26;++u,l<<=1);if(u>0)for(r.iushrn(u);u-- >0;)o.isOdd()&&o.iadd(s),o.iushrn(1);t.cmp(r)>=0?(t.isub(r),i.isub(o)):(r.isub(t),o.isub(i))}return(n=0===t.cmpn(1)?i:o).cmpn(0)<0&&n.iadd(e),n},BN.prototype.gcd=function gcd(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var n=0;t.isEven()&&r.isEven();n++)t.iushrn(1),r.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=t.cmp(r);if(i<0){var o=t;t=r,r=o}else if(0===i||0===r.cmpn(1))break;t.isub(r)}return r.iushln(n)},BN.prototype.invm=function invm(e){return this.egcd(e).a.umod(e)},BN.prototype.isEven=function isEven(){return!(1&this.words[0])},BN.prototype.isOdd=function isOdd(){return!(1&~this.words[0])},BN.prototype.andln=function andln(e){return this.words[0]&e},BN.prototype.bincn=function bincn(e){assert("number"==typeof e);var t=e%26,r=(e-t)/26,n=1<<t;if(this.length<=r)return this._expand(r+1),this.words[r]|=n,this;for(var i=n,o=r;0!==i&&o<this.length;o++){var s=0|this.words[o];i=(s+=i)>>>26,s&=67108863,this.words[o]=s}return 0!==i&&(this.words[o]=i,this.length++),this},BN.prototype.isZero=function isZero(){return 1===this.length&&0===this.words[0]},BN.prototype.cmpn=function cmpn(e){var t,r=e<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)t=1;else{r&&(e=-e),assert(e<=67108863,"Number is too big");var n=0|this.words[0];t=n===e?0:n<e?-1:1}return 0!==this.negative?0|-t:t},BN.prototype.cmp=function cmp(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},BN.prototype.ucmp=function ucmp(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|e.words[r];if(n!==i){n<i?t=-1:n>i&&(t=1);break}}return t},BN.prototype.gtn=function gtn(e){return 1===this.cmpn(e)},BN.prototype.gt=function gt(e){return 1===this.cmp(e)},BN.prototype.gten=function gten(e){return this.cmpn(e)>=0},BN.prototype.gte=function gte(e){return this.cmp(e)>=0},BN.prototype.ltn=function ltn(e){return-1===this.cmpn(e)},BN.prototype.lt=function lt(e){return-1===this.cmp(e)},BN.prototype.lten=function lten(e){return this.cmpn(e)<=0},BN.prototype.lte=function lte(e){return this.cmp(e)<=0},BN.prototype.eqn=function eqn(e){return 0===this.cmpn(e)},BN.prototype.eq=function eq(e){return 0===this.cmp(e)},BN.red=function red(e){return new Red(e)},BN.prototype.toRed=function toRed(e){return assert(!this.red,"Already a number in reduction context"),assert(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},BN.prototype.fromRed=function fromRed(){return assert(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},BN.prototype._forceRed=function _forceRed(e){return this.red=e,this},BN.prototype.forceRed=function forceRed(e){return assert(!this.red,"Already a number in reduction context"),this._forceRed(e)},BN.prototype.redAdd=function redAdd(e){return assert(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},BN.prototype.redIAdd=function redIAdd(e){return assert(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},BN.prototype.redSub=function redSub(e){return assert(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},BN.prototype.redISub=function redISub(e){return assert(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},BN.prototype.redShl=function redShl(e){return assert(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},BN.prototype.redMul=function redMul(e){return assert(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},BN.prototype.redIMul=function redIMul(e){return assert(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},BN.prototype.redSqr=function redSqr(){return assert(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},BN.prototype.redISqr=function redISqr(){return assert(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},BN.prototype.redSqrt=function redSqrt(){return assert(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},BN.prototype.redInvm=function redInvm(){return assert(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},BN.prototype.redNeg=function redNeg(){return assert(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},BN.prototype.redPow=function redPow(e){return assert(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var c={k256:null,p224:null,p192:null,p25519:null};function MPrime(e,t){this.name=e,this.p=new BN(t,16),this.n=this.p.bitLength(),this.k=new BN(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function K256(){MPrime.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function P224(){MPrime.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function P192(){MPrime.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function P25519(){MPrime.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function Red(e){if("string"==typeof e){var t=BN._prime(e);this.m=t.p,this.prime=t}else assert(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function Mont(e){Red.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new BN(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}MPrime.prototype._tmp=function _tmp(){var e=new BN(null);return e.words=new Array(Math.ceil(this.n/13)),e},MPrime.prototype.ireduce=function ireduce(e){var t,r=e;do{this.split(r,this.tmp),t=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(t>this.n);var n=t<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):r.strip(),r},MPrime.prototype.split=function split(e,t){e.iushrn(this.n,0,t)},MPrime.prototype.imulK=function imulK(e){return e.imul(this.k)},inherits(K256,MPrime),K256.prototype.split=function split(e,t){for(var r=4194303,n=Math.min(e.length,9),i=0;i<n;i++)t.words[i]=e.words[i];if(t.length=n,e.length<=9)return e.words[0]=0,void(e.length=1);var o=e.words[9];for(t.words[t.length++]=o&r,i=10;i<e.length;i++){var s=0|e.words[i];e.words[i-10]=(s&r)<<4|o>>>22,o=s}o>>>=22,e.words[i-10]=o,0===o&&e.length>10?e.length-=10:e.length-=9},K256.prototype.imulK=function imulK(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var n=0|e.words[r];t+=977*n,e.words[r]=67108863&t,t=64*n+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},inherits(P224,MPrime),inherits(P192,MPrime),inherits(P25519,MPrime),P25519.prototype.imulK=function imulK(e){for(var t=0,r=0;r<e.length;r++){var n=19*(0|e.words[r])+t,i=67108863&n;n>>>=26,e.words[r]=i,t=n}return 0!==t&&(e.words[e.length++]=t),e},BN._prime=function prime(e){if(c[e])return c[e];var prime;if("k256"===e)prime=new K256;else if("p224"===e)prime=new P224;else if("p192"===e)prime=new P192;else{if("p25519"!==e)throw new Error("Unknown prime "+e);prime=new P25519}return c[e]=prime,prime},Red.prototype._verify1=function _verify1(e){assert(0===e.negative,"red works only with positives"),assert(e.red,"red works only with red numbers")},Red.prototype._verify2=function _verify2(e,t){assert(!(e.negative|t.negative),"red works only with positives"),assert(e.red&&e.red===t.red,"red works only with red numbers")},Red.prototype.imod=function imod(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},Red.prototype.neg=function neg(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},Red.prototype.add=function add(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},Red.prototype.iadd=function iadd(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},Red.prototype.sub=function sub(e,t){this._verify2(e,t);var r=e.sub(t);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},Red.prototype.isub=function isub(e,t){this._verify2(e,t);var r=e.isub(t);return r.cmpn(0)<0&&r.iadd(this.m),r},Red.prototype.shl=function shl(e,t){return this._verify1(e),this.imod(e.ushln(t))},Red.prototype.imul=function imul(e,t){return this._verify2(e,t),this.imod(e.imul(t))},Red.prototype.mul=function mul(e,t){return this._verify2(e,t),this.imod(e.mul(t))},Red.prototype.isqr=function isqr(e){return this.imul(e,e.clone())},Red.prototype.sqr=function sqr(e){return this.mul(e,e)},Red.prototype.sqrt=function sqrt(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(assert(t%2==1),3===t){var r=this.m.add(new BN(1)).iushrn(2);return this.pow(e,r)}for(var n=this.m.subn(1),i=0;!n.isZero()&&0===n.andln(1);)i++,n.iushrn(1);assert(!n.isZero());var o=new BN(1).toRed(this),s=o.redNeg(),a=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new BN(2*c*c).toRed(this);0!==this.pow(c,a).cmp(s);)c.redIAdd(s);for(var u=this.pow(c,n),l=this.pow(e,n.addn(1).iushrn(1)),d=this.pow(e,n),p=i;0!==d.cmp(o);){for(var y=d,g=0;0!==y.cmp(o);g++)y=y.redSqr();assert(g<p);var m=this.pow(u,new BN(1).iushln(p-g-1));l=l.redMul(m),u=m.redSqr(),d=d.redMul(u),p=g}return l},Red.prototype.invm=function invm(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},Red.prototype.pow=function pow(e,t){if(t.isZero())return new BN(1);if(0===t.cmpn(1))return e.clone();var r=new Array(16);r[0]=new BN(1).toRed(this),r[1]=e;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],e);var i=r[0],o=0,s=0,a=t.bitLength()%26;for(0===a&&(a=26),n=t.length-1;n>=0;n--){for(var c=t.words[n],u=a-1;u>=0;u--){var l=c>>u&1;i!==r[0]&&(i=this.sqr(i)),0!==l||0!==o?(o<<=1,o|=l,(4===++s||0===n&&0===u)&&(i=this.mul(i,r[o]),s=0,o=0)):s=0}a=26}return i},Red.prototype.convertTo=function convertTo(e){var t=e.umod(this.m);return t===e?t.clone():t},Red.prototype.convertFrom=function convertFrom(e){var t=e.clone();return t.red=null,t},BN.mont=function mont(e){return new Mont(e)},inherits(Mont,Red),Mont.prototype.convertTo=function convertTo(e){return this.imod(e.ushln(this.shift))},Mont.prototype.convertFrom=function convertFrom(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},Mont.prototype.imul=function imul(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},Mont.prototype.mul=function mul(e,t){if(e.isZero()||t.isZero())return new BN(0)._forceRed(this);var r=e.mul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},Mont.prototype.invm=function invm(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e=r.nmd(e),this)},465547:(e,t,r)=>{var n=r(540047),i=r(695342);e.exports=function numberToBN(e){if("string"==typeof e||"number"==typeof e){var t=new n(1),r=String(e).toLowerCase().trim(),o="0x"===r.substr(0,2)||"-0x"===r.substr(0,3),s=i(r);if("-"===s.substr(0,1)&&(s=i(s.slice(1)),t=new n(-1,10)),!(s=""===s?"0":s).match(/^-?[0-9]+$/)&&s.match(/^[0-9A-Fa-f]+$/)||s.match(/^[a-fA-F]+$/)||!0===o&&s.match(/^[0-9A-Fa-f]+$/))return new n(s,16).mul(t);if((s.match(/^-?[0-9]+$/)||""===s)&&!1===o)return new n(s,10).mul(t)}else if("object"==typeof e&&e.toString&&!e.pop&&!e.push&&e.toString(10).match(/^-?[0-9]+$/)&&(e.mul||e.dividedToIntegerBy))return new n(e.toString(10),10);throw new Error("[number-to-bn] while converting number "+JSON.stringify(e)+" to BN.js instance, error: invalid number value. Value must be an integer, hex string, BN or BigNumber instance. Note, decimals are not supported.")}},984408:(e,t,r)=>{"use strict";r.d(t,{ko:()=>K,bI:()=>R});var n={};function number(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function bytes(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function _assert_hash(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");number(e.outputLen),number(e.blockLen)}function exists(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function output(e,t){bytes(e);const r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}r.r(n),r.d(n,{OG:()=>bitMask,My:()=>utils_bytesToHex,bytesToNumberBE:()=>utils_bytesToNumberBE,lX:()=>utils_bytesToNumberLE,Id:()=>utils_concatBytes,fg:()=>createHmacDrbg,qj:()=>utils_ensureBytes,hexToBytes:()=>utils_hexToBytes,lq:()=>numberToBytesBE,z:()=>numberToBytesLE,Q5:()=>validateObject});const i="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,u8a=e=>e instanceof Uint8Array,createView=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),rotr=(e,t)=>e<<32-t|e>>>t;if(!(68===new Uint8Array(new Uint32Array([287454020]).buffer)[0]))throw new Error("Non little-endian hardware is not supported");function toBytes(e){if("string"==typeof e&&(e=function utf8ToBytes(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e)),!u8a(e))throw new Error("expected Uint8Array, got "+typeof e);return e}class Hash{clone(){return this._cloneInto()}}function utils_wrapConstructor(e){const hashC=t=>e().update(toBytes(t)).digest(),t=e();return hashC.outputLen=t.outputLen,hashC.blockLen=t.blockLen,hashC.create=()=>e(),hashC}function randomBytes(e=32){if(i&&"function"==typeof i.getRandomValues)return i.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}class SHA2 extends Hash{constructor(e,t,r,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=createView(this.buffer)}update(e){exists(this);const{view:t,buffer:r,blockLen:n}=this,i=(e=toBytes(e)).length;for(let o=0;o<i;){const s=Math.min(n-this.pos,i-o);if(s!==n)r.set(e.subarray(o,o+s),this.pos),this.pos+=s,o+=s,this.pos===n&&(this.process(t,0),this.pos=0);else{const t=createView(e);for(;n<=i-o;o+=n)this.process(t,o)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){exists(this),output(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:n,isLE:i}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>n-o&&(this.process(r,0),o=0);for(let e=o;e<n;e++)t[e]=0;!function setBigUint64(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);const i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),c=n?4:0,u=n?0:4;e.setUint32(t+c,s,n),e.setUint32(t+u,a,n)}(r,n-8,BigInt(8*this.length),i),this.process(r,0);const s=createView(e),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=a/4,u=this.get();if(c>u.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<c;e++)s.setUint32(4*e,u[e],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:n,finished:i,destroyed:o,pos:s}=this;return e.length=n,e.pos=s,e.finished=i,e.destroyed=o,n%t&&e.buffer.set(r),e}}const Maj=(e,t,r)=>e&t^e&r^t&r,o=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),s=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),a=new Uint32Array(64);class SHA256 extends SHA2{constructor(){super(64,32,8,!1),this.A=0|s[0],this.B=0|s[1],this.C=0|s[2],this.D=0|s[3],this.E=0|s[4],this.F=0|s[5],this.G=0|s[6],this.H=0|s[7]}get(){const{A:e,B:t,C:r,D:n,E:i,F:o,G:s,H:a}=this;return[e,t,r,n,i,o,s,a]}set(e,t,r,n,i,o,s,a){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|o,this.G=0|s,this.H=0|a}process(e,t){for(let r=0;r<16;r++,t+=4)a[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){const t=a[e-15],r=a[e-2],n=rotr(t,7)^rotr(t,18)^t>>>3,i=rotr(r,17)^rotr(r,19)^r>>>10;a[e]=i+a[e-7]+n+a[e-16]|0}let{A:r,B:n,C:i,D:s,E:c,F:u,G:l,H:d}=this;for(let e=0;e<64;e++){const t=d+(rotr(c,6)^rotr(c,11)^rotr(c,25))+((p=c)&u^~p&l)+o[e]+a[e]|0,y=(rotr(r,2)^rotr(r,13)^rotr(r,22))+Maj(r,n,i)|0;d=l,l=u,u=c,c=s+t|0,s=i,i=n,n=r,r=t+y|0}var p;r=r+this.A|0,n=n+this.B|0,i=i+this.C|0,s=s+this.D|0,c=c+this.E|0,u=u+this.F|0,l=l+this.G|0,d=d+this.H|0,this.set(r,n,i,s,c,u,l,d)}roundClean(){a.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const c=utils_wrapConstructor((()=>new SHA256)),u=(BigInt(0),BigInt(1)),l=BigInt(2),utils_u8a=e=>e instanceof Uint8Array,d=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function utils_bytesToHex(e){if(!utils_u8a(e))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=d[e[r]];return t}function hexToNumber(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":`0x${e}`)}function utils_hexToBytes(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(t/2);for(let t=0;t<r.length;t++){const n=2*t,i=e.slice(n,n+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");r[t]=o}return r}function utils_bytesToNumberBE(e){return hexToNumber(utils_bytesToHex(e))}function utils_bytesToNumberLE(e){if(!utils_u8a(e))throw new Error("Uint8Array expected");return hexToNumber(utils_bytesToHex(Uint8Array.from(e).reverse()))}function numberToBytesBE(e,t){return utils_hexToBytes(e.toString(16).padStart(2*t,"0"))}function numberToBytesLE(e,t){return numberToBytesBE(e,t).reverse()}function utils_ensureBytes(e,t,r){let n;if("string"==typeof t)try{n=utils_hexToBytes(t)}catch(r){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${r}`)}else{if(!utils_u8a(t))throw new Error(`${e} must be hex string or Uint8Array`);n=Uint8Array.from(t)}const i=n.length;if("number"==typeof r&&i!==r)throw new Error(`${e} expected ${r} bytes, got ${i}`);return n}function utils_concatBytes(...e){const t=new Uint8Array(e.reduce(((e,t)=>e+t.length),0));let r=0;return e.forEach((e=>{if(!utils_u8a(e))throw new Error("Uint8Array expected");t.set(e,r),r+=e.length})),t}const bitMask=e=>(l<<BigInt(e-1))-u,u8n=e=>new Uint8Array(e),u8fr=e=>Uint8Array.from(e);function createHmacDrbg(e,t,r){if("number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!=typeof r)throw new Error("hmacFn must be a function");let n=u8n(e),i=u8n(e),o=0;const reset=()=>{n.fill(1),i.fill(0),o=0},h=(...e)=>r(i,n,...e),reseed=(e=u8n())=>{i=h(u8fr([0]),e),n=h(),0!==e.length&&(i=h(u8fr([1]),e),n=h())},gen=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const r=[];for(;e<t;){n=h();const t=n.slice();r.push(t),e+=n.length}return utils_concatBytes(...r)};return(e,t)=>{let r;for(reset(),reseed(e);!(r=t(gen()));)reseed();return reset(),r}}const p={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||e instanceof Uint8Array,isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function validateObject(e,t,r={}){const checkField=(t,r,n)=>{const i=p[r];if("function"!=typeof i)throw new Error(`Invalid validator "${r}", expected function`);const o=e[t];if(!(n&&void 0===o||i(o,e)))throw new Error(`Invalid param ${String(t)}=${o} (${typeof o}), expected ${r}`)};for(const[e,r]of Object.entries(t))checkField(e,r,!1);for(const[e,t]of Object.entries(r))checkField(e,t,!0);return e}const y=BigInt(0),g=BigInt(1),m=BigInt(2),b=BigInt(3),w=BigInt(4),v=BigInt(5),E=BigInt(8);BigInt(9),BigInt(16);function modular_mod(e,t){const r=e%t;return r>=y?r:t+r}function pow(e,t,r){if(r<=y||t<y)throw new Error("Expected power/modulo > 0");if(r===g)return y;let n=g;for(;t>y;)t&g&&(n=n*e%r),e=e*e%r,t>>=g;return n}function pow2(e,t,r){let n=e;for(;t-- >y;)n*=n,n%=r;return n}function invert(e,t){if(e===y||t<=y)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=modular_mod(e,t),n=t,i=y,o=g,s=g,a=y;for(;r!==y;){const e=n/r,t=n%r,c=i-s*e,u=o-a*e;n=r,r=t,i=s,o=a,s=c,a=u}if(n!==g)throw new Error("invert: does not exist");return modular_mod(i,t)}function FpSqrt(e){if(e%w===b){const t=(e+g)/w;return function sqrt3mod4(e,r){const n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw new Error("Cannot find square root");return n}}if(e%E===v){const t=(e-v)/E;return function sqrt5mod8(e,r){const n=e.mul(r,m),i=e.pow(n,t),o=e.mul(r,i),s=e.mul(e.mul(o,m),i),a=e.mul(o,e.sub(s,e.ONE));if(!e.eql(e.sqr(a),r))throw new Error("Cannot find square root");return a}}return function tonelliShanks(e){const t=(e-g)/m;let r,n,i;for(r=e-g,n=0;r%m===y;r/=m,n++);for(i=m;i<e&&pow(i,t,e)!==e-g;i++);if(1===n){const t=(e+g)/w;return function tonelliFast(e,r){const n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw new Error("Cannot find square root");return n}}const o=(r+g)/m;return function tonelliSlow(e,s){if(e.pow(s,t)===e.neg(e.ONE))throw new Error("Cannot find square root");let a=n,c=e.pow(e.mul(e.ONE,i),r),u=e.pow(s,o),l=e.pow(s,r);for(;!e.eql(l,e.ONE);){if(e.eql(l,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(l);t<a&&!e.eql(r,e.ONE);t++)r=e.sqr(r);const r=e.pow(c,g<<BigInt(a-t-1));c=e.sqr(r),u=e.mul(u,r),l=e.mul(l,c),a=t}return u}}(e)}const S=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function nLength(e,t){const r=void 0!==t?t:e.toString(2).length;return{nBitLength:r,nByteLength:Math.ceil(r/8)}}function getFieldBytesLength(e){if("bigint"!=typeof e)throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function getMinHashLength(e){const t=getFieldBytesLength(e);return t+Math.ceil(t/2)}class HMAC extends Hash{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,_assert_hash(e);const r=toBytes(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const n=this.blockLen,i=new Uint8Array(n);i.set(r.length>n?e.create().update(r).digest():r);for(let e=0;e<i.length;e++)i[e]^=54;this.iHash.update(i),this.oHash=e.create();for(let e=0;e<i.length;e++)i[e]^=106;this.oHash.update(i),i.fill(0)}update(e){return exists(this),this.iHash.update(e),this}digestInto(e){exists(this),bytes(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:n,destroyed:i,blockLen:o,outputLen:s}=this;return e.finished=n,e.destroyed=i,e.blockLen=o,e.outputLen=s,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const hmac=(e,t,r)=>new HMAC(e,t).update(r).digest();hmac.create=(e,t)=>new HMAC(e,t);const A=BigInt(0),x=BigInt(1);function validateBasic(e){return function validateField(e){return validateObject(e,S.reduce(((e,t)=>(e[t]="function",e)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"}))}(e.Fp),validateObject(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...nLength(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}const{bytesToNumberBE:_,hexToBytes:I}=n,T={Err:class DERErr extends Error{constructor(e=""){super(e)}},_parseInt(e){const{Err:t}=T;if(e.length<2||2!==e[0])throw new t("Invalid signature integer tag");const r=e[1],n=e.subarray(2,r+2);if(!r||n.length!==r)throw new t("Invalid signature integer: wrong length");if(128&n[0])throw new t("Invalid signature integer: negative");if(0===n[0]&&!(128&n[1]))throw new t("Invalid signature integer: unnecessary leading zero");return{d:_(n),l:e.subarray(r+2)}},toSig(e){const{Err:t}=T,r="string"==typeof e?I(e):e;if(!(r instanceof Uint8Array))throw new Error("ui8a expected");let n=r.length;if(n<2||48!=r[0])throw new t("Invalid signature tag");if(r[1]!==n-2)throw new t("Invalid signature: incorrect length");const{d:i,l:o}=T._parseInt(r.subarray(2)),{d:s,l:a}=T._parseInt(o);if(a.length)throw new t("Invalid signature: left bytes after parsing");return{r:i,s}},hexFromSig(e){const slice=e=>8&Number.parseInt(e[0],16)?"00"+e:e,h=e=>{const t=e.toString(16);return 1&t.length?`0${t}`:t},t=slice(h(e.s)),r=slice(h(e.r)),n=t.length/2,i=r.length/2,o=h(n),s=h(i);return`30${h(i+n+4)}02${s}${r}02${o}${t}`}},P=BigInt(0),M=BigInt(1),B=(BigInt(2),BigInt(3));BigInt(4);function weierstrassPoints(e){const t=function validatePointOpts(e){const t=validateBasic(e);validateObject(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:n,a:i}=t;if(r){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof r||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:r}=t,n=t.toBytes||((e,t,n)=>{const i=t.toAffine();return utils_concatBytes(Uint8Array.from([4]),r.toBytes(i.x),r.toBytes(i.y))}),i=t.fromBytes||(e=>{const t=e.subarray(1);return{x:r.fromBytes(t.subarray(0,r.BYTES)),y:r.fromBytes(t.subarray(r.BYTES,2*r.BYTES))}});function weierstrassEquation(e){const{a:n,b:i}=t,o=r.sqr(e),s=r.mul(o,e);return r.add(r.add(s,r.mul(e,n)),i)}if(!r.eql(r.sqr(t.Gy),weierstrassEquation(t.Gx)))throw new Error("bad generator point: equation left != right");function isWithinCurveOrder(e){return"bigint"==typeof e&&P<e&&e<t.n}function assertGE(e){if(!isWithinCurveOrder(e))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function normPrivateKeyToScalar(e){const{allowedPrivateKeyLengths:r,nByteLength:n,wrapPrivateKey:i,n:o}=t;if(r&&"bigint"!=typeof e){if(e instanceof Uint8Array&&(e=utils_bytesToHex(e)),"string"!=typeof e||!r.includes(e.length))throw new Error("Invalid key");e=e.padStart(2*n,"0")}let s;try{s="bigint"==typeof e?e:utils_bytesToNumberBE(utils_ensureBytes("private key",e,n))}catch(t){throw new Error(`private key must be ${n} bytes, hex or bigint, not ${typeof e}`)}return i&&(s=modular_mod(s,o)),assertGE(s),s}const o=new Map;function assertPrjPoint(e){if(!(e instanceof Point))throw new Error("ProjectivePoint expected")}class Point{constructor(e,t,n){if(this.px=e,this.py=t,this.pz=n,null==e||!r.isValid(e))throw new Error("x required");if(null==t||!r.isValid(t))throw new Error("y required");if(null==n||!r.isValid(n))throw new Error("z required")}static fromAffine(e){const{x:t,y:n}=e||{};if(!e||!r.isValid(t)||!r.isValid(n))throw new Error("invalid affine point");if(e instanceof Point)throw new Error("projective point not allowed");const is0=e=>r.eql(e,r.ZERO);return is0(t)&&is0(n)?Point.ZERO:new Point(t,n,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){const t=r.invertBatch(e.map((e=>e.pz)));return e.map(((e,r)=>e.toAffine(t[r]))).map(Point.fromAffine)}static fromHex(e){const t=Point.fromAffine(i(utils_ensureBytes("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return Point.BASE.multiply(normPrivateKeyToScalar(e))}_setWindowSize(e){this._WINDOW_SIZE=e,o.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!r.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:e,y:n}=this.toAffine();if(!r.isValid(e)||!r.isValid(n))throw new Error("bad point: x or y not FE");const i=r.sqr(n),o=weierstrassEquation(e);if(!r.eql(i,o))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:e}=this.toAffine();if(r.isOdd)return!r.isOdd(e);throw new Error("Field doesn't support isOdd")}equals(e){assertPrjPoint(e);const{px:t,py:n,pz:i}=this,{px:o,py:s,pz:a}=e,c=r.eql(r.mul(t,a),r.mul(o,i)),u=r.eql(r.mul(n,a),r.mul(s,i));return c&&u}negate(){return new Point(this.px,r.neg(this.py),this.pz)}double(){const{a:e,b:n}=t,i=r.mul(n,B),{px:o,py:s,pz:a}=this;let c=r.ZERO,u=r.ZERO,l=r.ZERO,d=r.mul(o,o),p=r.mul(s,s),y=r.mul(a,a),g=r.mul(o,s);return g=r.add(g,g),l=r.mul(o,a),l=r.add(l,l),c=r.mul(e,l),u=r.mul(i,y),u=r.add(c,u),c=r.sub(p,u),u=r.add(p,u),u=r.mul(c,u),c=r.mul(g,c),l=r.mul(i,l),y=r.mul(e,y),g=r.sub(d,y),g=r.mul(e,g),g=r.add(g,l),l=r.add(d,d),d=r.add(l,d),d=r.add(d,y),d=r.mul(d,g),u=r.add(u,d),y=r.mul(s,a),y=r.add(y,y),d=r.mul(y,g),c=r.sub(c,d),l=r.mul(y,p),l=r.add(l,l),l=r.add(l,l),new Point(c,u,l)}add(e){assertPrjPoint(e);const{px:n,py:i,pz:o}=this,{px:s,py:a,pz:c}=e;let u=r.ZERO,l=r.ZERO,d=r.ZERO;const p=t.a,y=r.mul(t.b,B);let g=r.mul(n,s),m=r.mul(i,a),b=r.mul(o,c),w=r.add(n,i),v=r.add(s,a);w=r.mul(w,v),v=r.add(g,m),w=r.sub(w,v),v=r.add(n,o);let E=r.add(s,c);return v=r.mul(v,E),E=r.add(g,b),v=r.sub(v,E),E=r.add(i,o),u=r.add(a,c),E=r.mul(E,u),u=r.add(m,b),E=r.sub(E,u),d=r.mul(p,v),u=r.mul(y,b),d=r.add(u,d),u=r.sub(m,d),d=r.add(m,d),l=r.mul(u,d),m=r.add(g,g),m=r.add(m,g),b=r.mul(p,b),v=r.mul(y,v),m=r.add(m,b),b=r.sub(g,b),b=r.mul(p,b),v=r.add(v,b),g=r.mul(m,v),l=r.add(l,g),g=r.mul(E,v),u=r.mul(w,u),u=r.sub(u,g),g=r.mul(w,m),d=r.mul(E,d),d=r.add(d,g),new Point(u,l,d)}subtract(e){return this.add(e.negate())}is0(){return this.equals(Point.ZERO)}wNAF(e){return a.wNAFCached(this,o,e,(e=>{const t=r.invertBatch(e.map((e=>e.pz)));return e.map(((e,r)=>e.toAffine(t[r]))).map(Point.fromAffine)}))}multiplyUnsafe(e){const n=Point.ZERO;if(e===P)return n;if(assertGE(e),e===M)return this;const{endo:i}=t;if(!i)return a.unsafeLadder(this,e);let{k1neg:o,k1:s,k2neg:c,k2:u}=i.splitScalar(e),l=n,d=n,p=this;for(;s>P||u>P;)s&M&&(l=l.add(p)),u&M&&(d=d.add(p)),p=p.double(),s>>=M,u>>=M;return o&&(l=l.negate()),c&&(d=d.negate()),d=new Point(r.mul(d.px,i.beta),d.py,d.pz),l.add(d)}multiply(e){assertGE(e);let n,i,o=e;const{endo:s}=t;if(s){const{k1neg:e,k1:t,k2neg:c,k2:u}=s.splitScalar(o);let{p:l,f:d}=this.wNAF(t),{p,f:y}=this.wNAF(u);l=a.constTimeNegate(e,l),p=a.constTimeNegate(c,p),p=new Point(r.mul(p.px,s.beta),p.py,p.pz),n=l.add(p),i=d.add(y)}else{const{p:e,f:t}=this.wNAF(o);n=e,i=t}return Point.normalizeZ([n,i])[0]}multiplyAndAddUnsafe(e,t,r){const n=Point.BASE,mul=(e,t)=>t!==P&&t!==M&&e.equals(n)?e.multiply(t):e.multiplyUnsafe(t),i=mul(this,t).add(mul(e,r));return i.is0()?void 0:i}toAffine(e){const{px:t,py:n,pz:i}=this,o=this.is0();null==e&&(e=o?r.ONE:r.inv(i));const s=r.mul(t,e),a=r.mul(n,e),c=r.mul(i,e);if(o)return{x:r.ZERO,y:r.ZERO};if(!r.eql(c,r.ONE))throw new Error("invZ was invalid");return{x:s,y:a}}isTorsionFree(){const{h:e,isTorsionFree:r}=t;if(e===M)return!0;if(r)return r(Point,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:e,clearCofactor:r}=t;return e===M?this:r?r(Point,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return this.assertValidity(),n(Point,this,e)}toHex(e=!0){return utils_bytesToHex(this.toRawBytes(e))}}Point.BASE=new Point(t.Gx,t.Gy,r.ONE),Point.ZERO=new Point(r.ZERO,r.ONE,r.ZERO);const s=t.nBitLength,a=function wNAF(e,t){const constTimeNegate=(e,t)=>{const r=t.negate();return e?r:t},opts=e=>({windows:Math.ceil(t/e)+1,windowSize:2**(e-1)});return{constTimeNegate,unsafeLadder(t,r){let n=e.ZERO,i=t;for(;r>A;)r&x&&(n=n.add(i)),i=i.double(),r>>=x;return n},precomputeWindow(e,t){const{windows:r,windowSize:n}=opts(t),i=[];let o=e,s=o;for(let e=0;e<r;e++){s=o,i.push(s);for(let e=1;e<n;e++)s=s.add(o),i.push(s);o=s.double()}return i},wNAF(t,r,n){const{windows:i,windowSize:o}=opts(t);let s=e.ZERO,a=e.BASE;const c=BigInt(2**t-1),u=2**t,l=BigInt(t);for(let e=0;e<i;e++){const t=e*o;let i=Number(n&c);n>>=l,i>o&&(i-=u,n+=x);const d=t,p=t+Math.abs(i)-1,y=e%2!=0,g=i<0;0===i?a=a.add(constTimeNegate(y,r[d])):s=s.add(constTimeNegate(g,r[p]))}return{p:s,f:a}},wNAFCached(e,t,r,n){const i=e._WINDOW_SIZE||1;let o=t.get(e);return o||(o=this.precomputeWindow(e,i),1!==i&&t.set(e,n(o))),this.wNAF(i,o,r)}}}(Point,t.endo?Math.ceil(s/2):s);return{CURVE:t,ProjectivePoint:Point,normPrivateKeyToScalar,weierstrassEquation,isWithinCurveOrder}}function weierstrass(e){const t=function validateOpts(e){const t=validateBasic(e);return validateObject(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:r,n}=t,i=r.BYTES+1,o=2*r.BYTES+1;function modN(e){return modular_mod(e,n)}function invN(e){return invert(e,n)}const{ProjectivePoint:s,normPrivateKeyToScalar:a,weierstrassEquation:c,isWithinCurveOrder:u}=weierstrassPoints({...t,toBytes(e,t,n){const i=t.toAffine(),o=r.toBytes(i.x),s=utils_concatBytes;return n?s(Uint8Array.from([t.hasEvenY()?2:3]),o):s(Uint8Array.from([4]),o,r.toBytes(i.y))},fromBytes(e){const t=e.length,n=e[0],s=e.subarray(1);if(t!==i||2!==n&&3!==n){if(t===o&&4===n){return{x:r.fromBytes(s.subarray(0,r.BYTES)),y:r.fromBytes(s.subarray(r.BYTES,2*r.BYTES))}}throw new Error(`Point of length ${t} was invalid. Expected ${i} compressed bytes or ${o} uncompressed bytes`)}{const e=utils_bytesToNumberBE(s);if(!function isValidFieldElement(e){return P<e&&e<r.ORDER}(e))throw new Error("Point is not on curve");const t=c(e);let i=r.sqrt(t);return!(1&~n)!==((i&M)===M)&&(i=r.neg(i)),{x:e,y:i}}}}),numToNByteStr=e=>utils_bytesToHex(numberToBytesBE(e,t.nByteLength));function isBiggerThanHalfOrder(e){return e>n>>M}const slcNum=(e,t,r)=>utils_bytesToNumberBE(e.slice(t,r));class Signature{constructor(e,t,r){this.r=e,this.s=t,this.recovery=r,this.assertValidity()}static fromCompact(e){const r=t.nByteLength;return e=utils_ensureBytes("compactSignature",e,2*r),new Signature(slcNum(e,0,r),slcNum(e,r,2*r))}static fromDER(e){const{r:t,s:r}=T.toSig(utils_ensureBytes("DER",e));return new Signature(t,r)}assertValidity(){if(!u(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!u(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(e){return new Signature(this.r,this.s,e)}recoverPublicKey(e){const{r:n,s:i,recovery:o}=this,a=p(utils_ensureBytes("msgHash",e));if(null==o||![0,1,2,3].includes(o))throw new Error("recovery id invalid");const c=2===o||3===o?n+t.n:n;if(c>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");const u=1&o?"03":"02",l=s.fromHex(u+numToNByteStr(c)),d=invN(c),y=modN(-a*d),g=modN(i*d),m=s.BASE.multiplyAndAddUnsafe(l,y,g);if(!m)throw new Error("point at infinify");return m.assertValidity(),m}hasHighS(){return isBiggerThanHalfOrder(this.s)}normalizeS(){return this.hasHighS()?new Signature(this.r,modN(-this.s),this.recovery):this}toDERRawBytes(){return utils_hexToBytes(this.toDERHex())}toDERHex(){return T.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return utils_hexToBytes(this.toCompactHex())}toCompactHex(){return numToNByteStr(this.r)+numToNByteStr(this.s)}}const l={isValidPrivateKey(e){try{return a(e),!0}catch(e){return!1}},normPrivateKeyToScalar:a,randomPrivateKey:()=>{const e=getMinHashLength(t.n);return function mapHashToField(e,t,r=!1){const n=e.length,i=getFieldBytesLength(t),o=getMinHashLength(t);if(n<16||n<o||n>1024)throw new Error(`expected ${o}-1024 bytes of input, got ${n}`);const s=modular_mod(r?utils_bytesToNumberBE(e):utils_bytesToNumberLE(e),t-g)+g;return r?numberToBytesLE(s,i):numberToBytesBE(s,i)}(t.randomBytes(e),t.n)},precompute:(e=8,t=s.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)};function isProbPub(e){const t=e instanceof Uint8Array,r="string"==typeof e,n=(t||r)&&e.length;return t?n===i||n===o:r?n===2*i||n===2*o:e instanceof s}const d=t.bits2int||function(e){const r=utils_bytesToNumberBE(e),n=8*e.length-t.nBitLength;return n>0?r>>BigInt(n):r},p=t.bits2int_modN||function(e){return modN(d(e))},y=bitMask(t.nBitLength);function int2octets(e){if("bigint"!=typeof e)throw new Error("bigint expected");if(!(P<=e&&e<y))throw new Error(`bigint expected < 2^${t.nBitLength}`);return numberToBytesBE(e,t.nByteLength)}function prepSig(e,n,i=m){if(["recovered","canonical"].some((e=>e in i)))throw new Error("sign() legacy options not supported");const{hash:o,randomBytes:c}=t;let{lowS:l,prehash:y,extraEntropy:g}=i;null==l&&(l=!0),e=utils_ensureBytes("msgHash",e),y&&(e=utils_ensureBytes("prehashed msgHash",o(e)));const b=p(e),w=a(n),v=[int2octets(w),int2octets(b)];if(null!=g){const e=!0===g?c(r.BYTES):g;v.push(utils_ensureBytes("extraEntropy",e))}const E=utils_concatBytes(...v),S=b;return{seed:E,k2sig:function k2sig(e){const t=d(e);if(!u(t))return;const r=invN(t),n=s.BASE.multiply(t).toAffine(),i=modN(n.x);if(i===P)return;const o=modN(r*modN(S+i*w));if(o===P)return;let a=(n.x===i?0:2)|Number(n.y&M),c=o;return l&&isBiggerThanHalfOrder(o)&&(c=function normalizeS(e){return isBiggerThanHalfOrder(e)?modN(-e):e}(o),a^=1),new Signature(i,c,a)}}}const m={lowS:t.lowS,prehash:!1},b={lowS:t.lowS,prehash:!1};return s.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function getPublicKey(e,t=!0){return s.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function getSharedSecret(e,t,r=!0){if(isProbPub(e))throw new Error("first arg must be private key");if(!isProbPub(t))throw new Error("second arg must be public key");return s.fromHex(t).multiply(a(e)).toRawBytes(r)},sign:function sign(e,r,n=m){const{seed:i,k2sig:o}=prepSig(e,r,n),s=t;return createHmacDrbg(s.hash.outputLen,s.nByteLength,s.hmac)(i,o)},verify:function verify(e,r,n,i=b){const o=e;if(r=utils_ensureBytes("msgHash",r),n=utils_ensureBytes("publicKey",n),"strict"in i)throw new Error("options.strict was renamed to lowS");const{lowS:a,prehash:c}=i;let u,l;try{if("string"==typeof o||o instanceof Uint8Array)try{u=Signature.fromDER(o)}catch(e){if(!(e instanceof T.Err))throw e;u=Signature.fromCompact(o)}else{if("object"!=typeof o||"bigint"!=typeof o.r||"bigint"!=typeof o.s)throw new Error("PARSE");{const{r:e,s:t}=o;u=new Signature(e,t)}}l=s.fromHex(n)}catch(e){if("PARSE"===e.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(a&&u.hasHighS())return!1;c&&(r=t.hash(r));const{r:d,s:y}=u,g=p(r),m=invN(y),w=modN(g*m),v=modN(d*m),E=s.BASE.multiplyAndAddUnsafe(l,w,v)?.toAffine();return!!E&&modN(E.x)===d},ProjectivePoint:s,Signature,utils:l}}function getHash(e){return{hash:e,hmac:(t,...r)=>hmac(e,t,function concatBytes(...e){const t=new Uint8Array(e.reduce(((e,t)=>e+t.length),0));let r=0;return e.forEach((e=>{if(!u8a(e))throw new Error("Uint8Array expected");t.set(e,r),r+=e.length})),t}(...r)),randomBytes}}const O=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),k=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),C=BigInt(1),N=BigInt(2),divNearest=(e,t)=>(e+t/N)/t;function sqrtMod(e){const t=O,r=BigInt(3),n=BigInt(6),i=BigInt(11),o=BigInt(22),s=BigInt(23),a=BigInt(44),c=BigInt(88),u=e*e*e%t,l=u*u*e%t,d=pow2(l,r,t)*l%t,p=pow2(d,r,t)*l%t,y=pow2(p,N,t)*u%t,g=pow2(y,i,t)*y%t,m=pow2(g,o,t)*g%t,b=pow2(m,a,t)*m%t,w=pow2(b,c,t)*b%t,v=pow2(w,a,t)*m%t,E=pow2(v,r,t)*l%t,S=pow2(E,s,t)*g%t,A=pow2(S,n,t)*u%t,x=pow2(A,N,t);if(!j.eql(j.sqr(x),e))throw new Error("Cannot find square root");return x}const j=function Field(e,t,r=!1,n={}){if(e<=y)throw new Error(`Expected Field ORDER > 0, got ${e}`);const{nBitLength:i,nByteLength:o}=nLength(e,t);if(o>2048)throw new Error("Field lengths over 2048 bytes are not supported");const s=FpSqrt(e),a=Object.freeze({ORDER:e,BITS:i,BYTES:o,MASK:bitMask(i),ZERO:y,ONE:g,create:t=>modular_mod(t,e),isValid:t=>{if("bigint"!=typeof t)throw new Error("Invalid field element: expected bigint, got "+typeof t);return y<=t&&t<e},is0:e=>e===y,isOdd:e=>(e&g)===g,neg:t=>modular_mod(-t,e),eql:(e,t)=>e===t,sqr:t=>modular_mod(t*t,e),add:(t,r)=>modular_mod(t+r,e),sub:(t,r)=>modular_mod(t-r,e),mul:(t,r)=>modular_mod(t*r,e),pow:(e,t)=>function FpPow(e,t,r){if(r<y)throw new Error("Expected power > 0");if(r===y)return e.ONE;if(r===g)return t;let n=e.ONE,i=t;for(;r>y;)r&g&&(n=e.mul(n,i)),i=e.sqr(i),r>>=g;return n}(a,e,t),div:(t,r)=>modular_mod(t*invert(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>invert(t,e),sqrt:n.sqrt||(e=>s(a,e)),invertBatch:e=>function FpInvertBatch(e,t){const r=new Array(t.length),n=t.reduce(((t,n,i)=>e.is0(n)?t:(r[i]=t,e.mul(t,n))),e.ONE),i=e.inv(n);return t.reduceRight(((t,n,i)=>e.is0(n)?t:(r[i]=e.mul(t,r[i]),e.mul(t,n))),i),r}(a,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>r?numberToBytesLE(e,o):numberToBytesBE(e,o),fromBytes:e=>{if(e.length!==o)throw new Error(`Fp.fromBytes: expected ${o}, got ${e.length}`);return r?utils_bytesToNumberLE(e):utils_bytesToNumberBE(e)}});return Object.freeze(a)}(O,void 0,void 0,{sqrt:sqrtMod}),R=function createCurve(e,t){const create=t=>weierstrass({...e,...getHash(t)});return Object.freeze({...create(t),create})}({a:BigInt(0),b:BigInt(7),Fp:j,n:k,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=k,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-C*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=r,s=BigInt("0x100000000000000000000000000000000"),a=divNearest(o*e,t),c=divNearest(-n*e,t);let u=modular_mod(e-a*r-c*i,t),l=modular_mod(-a*n-c*o,t);const d=u>s,p=l>s;if(d&&(u=t-u),p&&(l=t-l),u>s||l>s)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:d,k1:u,k2neg:p,k2:l}}}},c),U=BigInt(0),fe=e=>"bigint"==typeof e&&U<e&&e<O,ge=e=>"bigint"==typeof e&&U<e&&e<k,D={};function taggedHash(e,...t){let r=D[e];if(void 0===r){const t=c(Uint8Array.from(e,(e=>e.charCodeAt(0))));r=utils_concatBytes(t,t),D[e]=r}return c(utils_concatBytes(r,...t))}const pointToBytes=e=>e.toRawBytes(!0).slice(1),numTo32b=e=>numberToBytesBE(e,32),modP=e=>modular_mod(e,O),modN=e=>modular_mod(e,k),L=R.ProjectivePoint,GmulAdd=(e,t,r)=>L.BASE.multiplyAndAddUnsafe(e,t,r);function schnorrGetExtPubKey(e){let t=R.utils.normPrivateKeyToScalar(e),r=L.fromPrivateKey(t);return{scalar:r.hasEvenY()?t:modN(-t),bytes:pointToBytes(r)}}function lift_x(e){if(!fe(e))throw new Error("bad x: need 0 < x < p");const t=modP(e*e);let r=sqrtMod(modP(t*e+BigInt(7)));r%N!==U&&(r=modP(-r));const n=new L(e,r,C);return n.assertValidity(),n}function challenge(...e){return modN(utils_bytesToNumberBE(taggedHash("BIP0340/challenge",...e)))}function schnorrGetPublicKey(e){return schnorrGetExtPubKey(e).bytes}function schnorrSign(e,t,r=randomBytes(32)){const n=utils_ensureBytes("message",e),{bytes:i,scalar:o}=schnorrGetExtPubKey(t),s=utils_ensureBytes("auxRand",r,32),a=numTo32b(o^utils_bytesToNumberBE(taggedHash("BIP0340/aux",s))),c=taggedHash("BIP0340/nonce",a,i,n),u=modN(utils_bytesToNumberBE(c));if(u===U)throw new Error("sign failed: k is zero");const{bytes:l,scalar:d}=schnorrGetExtPubKey(u),p=challenge(l,i,n),y=new Uint8Array(64);if(y.set(l,0),y.set(numTo32b(modN(d+p*o)),32),!schnorrVerify(y,n,i))throw new Error("sign: Invalid signature produced");return y}function schnorrVerify(e,t,r){const n=utils_ensureBytes("signature",e,64),i=utils_ensureBytes("message",t),o=utils_ensureBytes("publicKey",r,32);try{const e=lift_x(utils_bytesToNumberBE(o)),t=utils_bytesToNumberBE(n.subarray(0,32));if(!fe(t))return!1;const r=utils_bytesToNumberBE(n.subarray(32,64));if(!ge(r))return!1;const s=challenge(numTo32b(t),pointToBytes(e),i),a=GmulAdd(e,r,modN(-s));return!(!a||!a.hasEvenY()||a.toAffine().x!==t)}catch(e){return!1}}const K=(()=>({getPublicKey:schnorrGetPublicKey,sign:schnorrSign,verify:schnorrVerify,utils:{randomPrivateKey:R.utils.randomPrivateKey,lift_x,pointToBytes,numberToBytesBE,bytesToNumberBE:utils_bytesToNumberBE,taggedHash,mod:modular_mod}}))()},226879:(e,t,r)=>{"use strict";function number(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function bytes(e,...t){if(!function isBytes(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}(e))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function hash(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");number(e.outputLen),number(e.blockLen)}function exists(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function output(e,t){bytes(e);const r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}r.d(t,{CG:()=>output,ai:()=>number,ee:()=>bytes,t2:()=>exists,tW:()=>hash})},831193:(e,t,r)=>{"use strict";r.d(t,{D:()=>SHA2});var n=r(226879),i=r(830036);class SHA2 extends i.Vw{constructor(e,t,r,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,i.O8)(this.buffer)}update(e){(0,n.t2)(this);const{view:t,buffer:r,blockLen:o}=this,s=(e=(0,i.ZJ)(e)).length;for(let n=0;n<s;){const a=Math.min(o-this.pos,s-n);if(a!==o)r.set(e.subarray(n,n+a),this.pos),this.pos+=a,n+=a,this.pos===o&&(this.process(t,0),this.pos=0);else{const t=(0,i.O8)(e);for(;o<=s-n;n+=o)this.process(t,n)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){(0,n.t2)(this),(0,n.CG)(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:o,isLE:s}=this;let{pos:a}=this;t[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>o-a&&(this.process(r,0),a=0);for(let e=a;e<o;e++)t[e]=0;!function setBigUint64(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);const i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),c=n?4:0,u=n?0:4;e.setUint32(t+c,s,n),e.setUint32(t+u,a,n)}(r,o-8,BigInt(8*this.length),s),this.process(r,0);const c=(0,i.O8)(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=u/4,d=this.get();if(l>d.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<l;e++)c.setUint32(4*e,d[e],s)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:n,finished:i,destroyed:o,pos:s}=this;return e.length=n,e.pos=s,e.finished=i,e.destroyed=o,n%t&&e.buffer.set(r),e}}},249964:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>o,B4:()=>rotlSL,P5:()=>rotlSH,WM:()=>rotlBH,im:()=>rotlBL,lD:()=>split});const n=BigInt(2**32-1),i=BigInt(32);function fromBig(e,t=!1){return t?{h:Number(e&n),l:Number(e>>i&n)}:{h:0|Number(e>>i&n),l:0|Number(e&n)}}function split(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:o,l:s}=fromBig(e[i],t);[r[i],n[i]]=[o,s]}return[r,n]}const rotlSH=(e,t,r)=>e<<r|t>>>32-r,rotlSL=(e,t,r)=>t<<r|e>>>32-r,rotlBH=(e,t,r)=>t<<r-32|e>>>64-r,rotlBL=(e,t,r)=>e<<r-32|t>>>64-r;const o={fromBig,split,toBig:(e,t)=>BigInt(e>>>0)<<i|BigInt(t>>>0),shrSH:(e,t,r)=>e>>>r,shrSL:(e,t,r)=>e<<32-r|t>>>r,rotrSH:(e,t,r)=>e>>>r|t<<32-r,rotrSL:(e,t,r)=>e<<32-r|t>>>r,rotrBH:(e,t,r)=>e<<64-r|t>>>r-32,rotrBL:(e,t,r)=>e>>>r-32|t<<64-r,rotr32H:(e,t)=>t,rotr32L:(e,t)=>e,rotlSH,rotlSL,rotlBH,rotlBL,add:function add(e,t,r,n){const i=(t>>>0)+(n>>>0);return{h:e+r+(i/2**32|0)|0,l:0|i}},add3L:(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),add3H:(e,t,r,n)=>t+r+n+(e/2**32|0)|0,add4L:(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),add4H:(e,t,r,n,i)=>t+r+n+i+(e/2**32|0)|0,add5H:(e,t,r,n,i,o)=>t+r+n+i+o+(e/2**32|0)|0,add5L:(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0)}},614555:(e,t,r)=>{"use strict";r.d(t,{S:()=>u});var n=r(226879),i=r(830036);const o=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3]);class BLAKE2 extends i.Vw{constructor(e,t,r={},o,s,a){if(super(),this.blockLen=e,this.outputLen=t,this.length=0,this.pos=0,this.finished=!1,this.destroyed=!1,(0,n.ai)(e),(0,n.ai)(t),(0,n.ai)(o),t<0||t>o)throw new Error("outputLen bigger than keyLen");if(void 0!==r.key&&(r.key.length<1||r.key.length>o))throw new Error(`key must be up 1..${o} byte long or undefined`);if(void 0!==r.salt&&r.salt.length!==s)throw new Error(`salt must be ${s} byte long or undefined`);if(void 0!==r.personalization&&r.personalization.length!==a)throw new Error(`personalization must be ${a} byte long or undefined`);this.buffer32=(0,i.DH)(this.buffer=new Uint8Array(e))}update(e){(0,n.t2)(this);const{blockLen:t,buffer:r,buffer32:o}=this,s=(e=(0,i.ZJ)(e)).length,a=e.byteOffset,c=e.buffer;for(let n=0;n<s;){this.pos===t&&(this.compress(o,0,!1),this.pos=0);const i=Math.min(t-this.pos,s-n),u=a+n;if(i!==t||u%4||!(n+i<s))r.set(e.subarray(n,n+i),this.pos),this.pos+=i,this.length+=i,n+=i;else{const e=new Uint32Array(c,u,Math.floor((s-n)/4));for(let r=0;n+t<s;r+=o.length,n+=t)this.length+=t,this.compress(e,r,!1)}}return this}digestInto(e){(0,n.t2)(this),(0,n.CG)(e,this);const{pos:t,buffer32:r}=this;this.finished=!0,this.buffer.subarray(t).fill(0),this.compress(r,0,!0);const o=(0,i.DH)(e);this.get().forEach(((e,t)=>o[t]=e))}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){const{buffer:t,length:r,finished:n,destroyed:i,outputLen:o,pos:s}=this;return e||(e=new this.constructor({dkLen:o})),e.set(...this.get()),e.length=r,e.finished=n,e.destroyed=i,e.outputLen=o,e.buffer.set(t),e.pos=s,e}}var s=r(249964);const a=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),c=new Uint32Array(32);function G1(e,t,r,n,i,o){const a=i[o],u=i[o+1];let l=c[2*e],d=c[2*e+1],p=c[2*t],y=c[2*t+1],g=c[2*r],m=c[2*r+1],b=c[2*n],w=c[2*n+1],v=s.Ay.add3L(l,p,a);d=s.Ay.add3H(v,d,y,u),l=0|v,({Dh:w,Dl:b}={Dh:w^d,Dl:b^l}),({Dh:w,Dl:b}={Dh:s.Ay.rotr32H(w,b),Dl:s.Ay.rotr32L(w,b)}),({h:m,l:g}=s.Ay.add(m,g,w,b)),({Bh:y,Bl:p}={Bh:y^m,Bl:p^g}),({Bh:y,Bl:p}={Bh:s.Ay.rotrSH(y,p,24),Bl:s.Ay.rotrSL(y,p,24)}),c[2*e]=l,c[2*e+1]=d,c[2*t]=p,c[2*t+1]=y,c[2*r]=g,c[2*r+1]=m,c[2*n]=b,c[2*n+1]=w}function G2(e,t,r,n,i,o){const a=i[o],u=i[o+1];let l=c[2*e],d=c[2*e+1],p=c[2*t],y=c[2*t+1],g=c[2*r],m=c[2*r+1],b=c[2*n],w=c[2*n+1],v=s.Ay.add3L(l,p,a);d=s.Ay.add3H(v,d,y,u),l=0|v,({Dh:w,Dl:b}={Dh:w^d,Dl:b^l}),({Dh:w,Dl:b}={Dh:s.Ay.rotrSH(w,b,16),Dl:s.Ay.rotrSL(w,b,16)}),({h:m,l:g}=s.Ay.add(m,g,w,b)),({Bh:y,Bl:p}={Bh:y^m,Bl:p^g}),({Bh:y,Bl:p}={Bh:s.Ay.rotrBH(y,p,63),Bl:s.Ay.rotrBL(y,p,63)}),c[2*e]=l,c[2*e+1]=d,c[2*t]=p,c[2*t+1]=y,c[2*r]=g,c[2*r+1]=m,c[2*n]=b,c[2*n+1]=w}class BLAKE2b extends BLAKE2{constructor(e={}){super(128,void 0===e.dkLen?64:e.dkLen,e,64,16,16),this.v0l=0|a[0],this.v0h=0|a[1],this.v1l=0|a[2],this.v1h=0|a[3],this.v2l=0|a[4],this.v2h=0|a[5],this.v3l=0|a[6],this.v3h=0|a[7],this.v4l=0|a[8],this.v4h=0|a[9],this.v5l=0|a[10],this.v5h=0|a[11],this.v6l=0|a[12],this.v6h=0|a[13],this.v7l=0|a[14],this.v7h=0|a[15];const t=e.key?e.key.length:0;if(this.v0l^=this.outputLen|t<<8|65536|1<<24,e.salt){const t=(0,i.DH)((0,i.ZJ)(e.salt));this.v4l^=t[0],this.v4h^=t[1],this.v5l^=t[2],this.v5h^=t[3]}if(e.personalization){const t=(0,i.DH)((0,i.ZJ)(e.personalization));this.v6l^=t[0],this.v6h^=t[1],this.v7l^=t[2],this.v7h^=t[3]}if(e.key){const t=new Uint8Array(this.blockLen);t.set((0,i.ZJ)(e.key)),this.update(t)}}get(){let{v0l:e,v0h:t,v1l:r,v1h:n,v2l:i,v2h:o,v3l:s,v3h:a,v4l:c,v4h:u,v5l:l,v5h:d,v6l:p,v6h:y,v7l:g,v7h:m}=this;return[e,t,r,n,i,o,s,a,c,u,l,d,p,y,g,m]}set(e,t,r,n,i,o,s,a,c,u,l,d,p,y,g,m){this.v0l=0|e,this.v0h=0|t,this.v1l=0|r,this.v1h=0|n,this.v2l=0|i,this.v2h=0|o,this.v3l=0|s,this.v3h=0|a,this.v4l=0|c,this.v4h=0|u,this.v5l=0|l,this.v5h=0|d,this.v6l=0|p,this.v6h=0|y,this.v7l=0|g,this.v7h=0|m}compress(e,t,r){this.get().forEach(((e,t)=>c[t]=e)),c.set(a,16);let{h:n,l:i}=s.Ay.fromBig(BigInt(this.length));c[24]=a[8]^i,c[25]=a[9]^n,r&&(c[28]=~c[28],c[29]=~c[29]);let u=0;const l=o;for(let r=0;r<12;r++)G1(0,4,8,12,e,t+2*l[u++]),G2(0,4,8,12,e,t+2*l[u++]),G1(1,5,9,13,e,t+2*l[u++]),G2(1,5,9,13,e,t+2*l[u++]),G1(2,6,10,14,e,t+2*l[u++]),G2(2,6,10,14,e,t+2*l[u++]),G1(3,7,11,15,e,t+2*l[u++]),G2(3,7,11,15,e,t+2*l[u++]),G1(0,5,10,15,e,t+2*l[u++]),G2(0,5,10,15,e,t+2*l[u++]),G1(1,6,11,12,e,t+2*l[u++]),G2(1,6,11,12,e,t+2*l[u++]),G1(2,7,8,13,e,t+2*l[u++]),G2(2,7,8,13,e,t+2*l[u++]),G1(3,4,9,14,e,t+2*l[u++]),G2(3,4,9,14,e,t+2*l[u++]);this.v0l^=c[0]^c[16],this.v0h^=c[1]^c[17],this.v1l^=c[2]^c[18],this.v1h^=c[3]^c[19],this.v2l^=c[4]^c[20],this.v2h^=c[5]^c[21],this.v3l^=c[6]^c[22],this.v3h^=c[7]^c[23],this.v4l^=c[8]^c[24],this.v4h^=c[9]^c[25],this.v5l^=c[10]^c[26],this.v5h^=c[11]^c[27],this.v6l^=c[12]^c[28],this.v6h^=c[13]^c[29],this.v7l^=c[14]^c[30],this.v7h^=c[15]^c[31],c.fill(0)}destroy(){this.destroyed=!0,this.buffer32.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const u=(0,i.t6)((e=>new BLAKE2b(e)))},97713:(e,t,r)=>{"use strict";r.d(t,{w:()=>hmac});var n=r(226879),i=r(830036);class HMAC extends i.Vw{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,(0,n.tW)(e);const r=(0,i.ZJ)(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const o=this.blockLen,s=new Uint8Array(o);s.set(r.length>o?e.create().update(r).digest():r);for(let e=0;e<s.length;e++)s[e]^=54;this.iHash.update(s),this.oHash=e.create();for(let e=0;e<s.length;e++)s[e]^=106;this.oHash.update(s),s.fill(0)}update(e){return(0,n.t2)(this),this.iHash.update(e),this}digestInto(e){(0,n.t2)(this),(0,n.ee)(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:n,destroyed:i,blockLen:o,outputLen:s}=this;return e.finished=n,e.destroyed=i,e.blockLen=o,e.outputLen=s,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const hmac=(e,t,r)=>new HMAC(e,t).update(r).digest();hmac.create=(e,t)=>new HMAC(e,t)},887971:(e,t,r)=>{"use strict";r.d(t,{A:()=>pbkdf2});var n=r(226879),i=r(97713),o=r(830036);function pbkdf2Init(e,t,r,s){(0,n.tW)(e);const a=(0,o.tY)({dkLen:32,asyncTick:10},s),{c,dkLen:u,asyncTick:l}=a;if((0,n.ai)(c),(0,n.ai)(u),(0,n.ai)(l),c<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const d=(0,o.ZJ)(t),p=(0,o.ZJ)(r),y=new Uint8Array(u),g=i.w.create(e,d),m=g._cloneInto().update(p);return{c,dkLen:u,asyncTick:l,DK:y,PRF:g,PRFSalt:m}}function pbkdf2Output(e,t,r,n,i){return e.destroy(),t.destroy(),n&&n.destroy(),i.fill(0),r}function pbkdf2(e,t,r,n){const{c:i,dkLen:s,DK:a,PRF:c,PRFSalt:u}=pbkdf2Init(e,t,r,n);let l;const d=new Uint8Array(4),p=(0,o.O8)(d),y=new Uint8Array(c.outputLen);for(let e=1,t=0;t<s;e++,t+=c.outputLen){const r=a.subarray(t,t+c.outputLen);p.setInt32(0,e,!1),(l=u._cloneInto(l)).update(d).digestInto(y),r.set(y.subarray(0,r.length));for(let e=1;e<i;e++){c._cloneInto(l).update(y).digestInto(y);for(let e=0;e<r.length;e++)r[e]^=y[e]}}return pbkdf2Output(c,u,a,l,y)}},406440:(e,t,r)=>{"use strict";r.d(t,{H:()=>m});var n=r(831193),i=r(830036);const o=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),s=Uint8Array.from({length:16},((e,t)=>t));let a=[s],c=[s.map((e=>(9*e+5)%16))];for(let e=0;e<4;e++)for(let t of[a,c])t.push(t[e].map((e=>o[e])));const u=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map((e=>new Uint8Array(e))),l=a.map(((e,t)=>e.map((e=>u[t][e])))),d=c.map(((e,t)=>e.map((e=>u[t][e])))),p=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),y=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),rotl=(e,t)=>e<<t|e>>>32-t;function f(e,t,r,n){return 0===e?t^r^n:1===e?t&r|~t&n:2===e?(t|~r)^n:3===e?t&n|r&~n:t^(r|~n)}const g=new Uint32Array(16);class RIPEMD160 extends n.D{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:e,h1:t,h2:r,h3:n,h4:i}=this;return[e,t,r,n,i]}set(e,t,r,n,i){this.h0=0|e,this.h1=0|t,this.h2=0|r,this.h3=0|n,this.h4=0|i}process(e,t){for(let r=0;r<16;r++,t+=4)g[r]=e.getUint32(t,!0);let r=0|this.h0,n=r,i=0|this.h1,o=i,s=0|this.h2,u=s,m=0|this.h3,b=m,w=0|this.h4,v=w;for(let e=0;e<5;e++){const t=4-e,E=p[e],S=y[e],A=a[e],x=c[e],_=l[e],I=d[e];for(let t=0;t<16;t++){const n=rotl(r+f(e,i,s,m)+g[A[t]]+E,_[t])+w|0;r=w,w=m,m=0|rotl(s,10),s=i,i=n}for(let e=0;e<16;e++){const r=rotl(n+f(t,o,u,b)+g[x[e]]+S,I[e])+v|0;n=v,v=b,b=0|rotl(u,10),u=o,o=r}}this.set(this.h1+s+b|0,this.h2+m+v|0,this.h3+w+n|0,this.h4+r+o|0,this.h0+i+u|0)}roundClean(){g.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}const m=(0,i.ld)((()=>new RIPEMD160))},552001:(e,t,r)=>{"use strict";r.d(t,{s:()=>c});var n=r(831193),i=r(830036);const Maj=(e,t,r)=>e&t^e&r^t&r,o=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),s=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),a=new Uint32Array(64);class SHA256 extends n.D{constructor(){super(64,32,8,!1),this.A=0|s[0],this.B=0|s[1],this.C=0|s[2],this.D=0|s[3],this.E=0|s[4],this.F=0|s[5],this.G=0|s[6],this.H=0|s[7]}get(){const{A:e,B:t,C:r,D:n,E:i,F:o,G:s,H:a}=this;return[e,t,r,n,i,o,s,a]}set(e,t,r,n,i,o,s,a){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|o,this.G=0|s,this.H=0|a}process(e,t){for(let r=0;r<16;r++,t+=4)a[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){const t=a[e-15],r=a[e-2],n=(0,i.Ow)(t,7)^(0,i.Ow)(t,18)^t>>>3,o=(0,i.Ow)(r,17)^(0,i.Ow)(r,19)^r>>>10;a[e]=o+a[e-7]+n+a[e-16]|0}let{A:r,B:n,C:s,D:c,E:u,F:l,G:d,H:p}=this;for(let e=0;e<64;e++){const t=p+((0,i.Ow)(u,6)^(0,i.Ow)(u,11)^(0,i.Ow)(u,25))+((y=u)&l^~y&d)+o[e]+a[e]|0,g=((0,i.Ow)(r,2)^(0,i.Ow)(r,13)^(0,i.Ow)(r,22))+Maj(r,n,s)|0;p=d,d=l,l=u,u=c+t|0,c=s,s=n,n=r,r=t+g|0}var y;r=r+this.A|0,n=n+this.B|0,s=s+this.C|0,c=c+this.D|0,u=u+this.E|0,l=l+this.F|0,d=d+this.G|0,p=p+this.H|0,this.set(r,n,s,c,u,l,d,p)}roundClean(){a.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const c=(0,i.ld)((()=>new SHA256))},52494:(e,t,r)=>{"use strict";r.d(t,{C2:()=>w,a0:()=>E,lY:()=>v});var n=r(226879),i=r(249964),o=r(830036);const[s,a,c]=[[],[],[]],u=BigInt(0),l=BigInt(1),d=BigInt(2),p=BigInt(7),y=BigInt(256),g=BigInt(113);for(let e=0,t=l,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],s.push(2*(5*n+r)),a.push((e+1)*(e+2)/2%64);let i=u;for(let e=0;e<7;e++)t=(t<<l^(t>>p)*g)%y,t&d&&(i^=l<<(l<<BigInt(e))-l);c.push(i)}const[m,b]=(0,i.lD)(c,!0),rotlH=(e,t,r)=>r>32?(0,i.WM)(e,t,r):(0,i.P5)(e,t,r),rotlL=(e,t,r)=>r>32?(0,i.im)(e,t,r):(0,i.B4)(e,t,r);class Keccak extends o.Vw{constructor(e,t,r,i=!1,s=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,n.ai)(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,o.DH)(this.state)}keccak(){!function keccakP(e,t=24){const r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){const n=(t+8)%10,i=(t+2)%10,o=r[i],s=r[i+1],a=rotlH(o,s,1)^r[n],c=rotlL(o,s,1)^r[n+1];for(let r=0;r<50;r+=10)e[t+r]^=a,e[t+r+1]^=c}let t=e[2],i=e[3];for(let r=0;r<24;r++){const n=a[r],o=rotlH(t,i,n),c=rotlL(t,i,n),u=s[r];t=e[u],i=e[u+1],e[u]=o,e[u+1]=c}for(let t=0;t<50;t+=10){for(let n=0;n<10;n++)r[n]=e[t+n];for(let n=0;n<10;n++)e[t+n]^=~r[(n+2)%10]&r[(n+4)%10]}e[0]^=m[n],e[1]^=b[n]}r.fill(0)}(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){(0,n.t2)(this);const{blockLen:t,state:r}=this,i=(e=(0,o.ZJ)(e)).length;for(let n=0;n<i;){const o=Math.min(t-this.pos,i-n);for(let t=0;t<o;t++)r[this.pos++]^=e[n++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:n}=this;e[r]^=t,128&t&&r===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){(0,n.t2)(this,!1),(0,n.ee)(e),this.finish();const t=this.state,{blockLen:r}=this;for(let n=0,i=e.length;n<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-n);e.set(t.subarray(this.posOut,this.posOut+o),n),this.posOut+=o,n+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return(0,n.ai)(e),this.xofInto(new Uint8Array(e))}digestInto(e){if((0,n.CG)(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:n,rounds:i,enableXOF:o}=this;return e||(e=new Keccak(t,r,n,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=n,e.enableXOF=o,e.destroyed=this.destroyed,e}}const gen=(e,t,r)=>(0,o.ld)((()=>new Keccak(t,e,r))),w=gen(6,136,32),v=gen(1,136,32),E=gen(1,72,64)},715460:(e,t,r)=>{"use strict";r.d(t,{Zf:()=>l});var n=r(831193),i=r(249964),o=r(830036);const[s,a]=(()=>i.Ay.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((e=>BigInt(e)))))(),c=new Uint32Array(80),u=new Uint32Array(80);class SHA512 extends n.D{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:r,Bl:n,Ch:i,Cl:o,Dh:s,Dl:a,Eh:c,El:u,Fh:l,Fl:d,Gh:p,Gl:y,Hh:g,Hl:m}=this;return[e,t,r,n,i,o,s,a,c,u,l,d,p,y,g,m]}set(e,t,r,n,i,o,s,a,c,u,l,d,p,y,g,m){this.Ah=0|e,this.Al=0|t,this.Bh=0|r,this.Bl=0|n,this.Ch=0|i,this.Cl=0|o,this.Dh=0|s,this.Dl=0|a,this.Eh=0|c,this.El=0|u,this.Fh=0|l,this.Fl=0|d,this.Gh=0|p,this.Gl=0|y,this.Hh=0|g,this.Hl=0|m}process(e,t){for(let r=0;r<16;r++,t+=4)c[r]=e.getUint32(t),u[r]=e.getUint32(t+=4);for(let e=16;e<80;e++){const t=0|c[e-15],r=0|u[e-15],n=i.Ay.rotrSH(t,r,1)^i.Ay.rotrSH(t,r,8)^i.Ay.shrSH(t,r,7),o=i.Ay.rotrSL(t,r,1)^i.Ay.rotrSL(t,r,8)^i.Ay.shrSL(t,r,7),s=0|c[e-2],a=0|u[e-2],l=i.Ay.rotrSH(s,a,19)^i.Ay.rotrBH(s,a,61)^i.Ay.shrSH(s,a,6),d=i.Ay.rotrSL(s,a,19)^i.Ay.rotrBL(s,a,61)^i.Ay.shrSL(s,a,6),p=i.Ay.add4L(o,d,u[e-7],u[e-16]),y=i.Ay.add4H(p,n,l,c[e-7],c[e-16]);c[e]=0|y,u[e]=0|p}let{Ah:r,Al:n,Bh:o,Bl:l,Ch:d,Cl:p,Dh:y,Dl:g,Eh:m,El:b,Fh:w,Fl:v,Gh:E,Gl:S,Hh:A,Hl:x}=this;for(let e=0;e<80;e++){const t=i.Ay.rotrSH(m,b,14)^i.Ay.rotrSH(m,b,18)^i.Ay.rotrBH(m,b,41),_=i.Ay.rotrSL(m,b,14)^i.Ay.rotrSL(m,b,18)^i.Ay.rotrBL(m,b,41),I=m&w^~m&E,T=b&v^~b&S,P=i.Ay.add5L(x,_,T,a[e],u[e]),M=i.Ay.add5H(P,A,t,I,s[e],c[e]),B=0|P,O=i.Ay.rotrSH(r,n,28)^i.Ay.rotrBH(r,n,34)^i.Ay.rotrBH(r,n,39),k=i.Ay.rotrSL(r,n,28)^i.Ay.rotrBL(r,n,34)^i.Ay.rotrBL(r,n,39),C=r&o^r&d^o&d,N=n&l^n&p^l&p;A=0|E,x=0|S,E=0|w,S=0|v,w=0|m,v=0|b,({h:m,l:b}=i.Ay.add(0|y,0|g,0|M,0|B)),y=0|d,g=0|p,d=0|o,p=0|l,o=0|r,l=0|n;const j=i.Ay.add3L(B,k,N);r=i.Ay.add3H(j,M,O,C),n=0|j}({h:r,l:n}=i.Ay.add(0|this.Ah,0|this.Al,0|r,0|n)),({h:o,l}=i.Ay.add(0|this.Bh,0|this.Bl,0|o,0|l)),({h:d,l:p}=i.Ay.add(0|this.Ch,0|this.Cl,0|d,0|p)),({h:y,l:g}=i.Ay.add(0|this.Dh,0|this.Dl,0|y,0|g)),({h:m,l:b}=i.Ay.add(0|this.Eh,0|this.El,0|m,0|b)),({h:w,l:v}=i.Ay.add(0|this.Fh,0|this.Fl,0|w,0|v)),({h:E,l:S}=i.Ay.add(0|this.Gh,0|this.Gl,0|E,0|S)),({h:A,l:x}=i.Ay.add(0|this.Hh,0|this.Hl,0|A,0|x)),this.set(r,n,o,l,d,p,y,g,m,b,w,v,E,S,A,x)}roundClean(){c.fill(0),u.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const l=(0,o.ld)((()=>new SHA512))},830036:(e,t,r)=>{"use strict";r.d(t,{Vw:()=>Hash,My:()=>bytesToHex,tY:()=>checkOpts,Id:()=>concatBytes,O8:()=>createView,aT:()=>hexToBytes,po:()=>randomBytes,Ow:()=>rotr,ZJ:()=>toBytes,DH:()=>u32,AI:()=>utf8ToBytes,ld:()=>wrapConstructor,t6:()=>wrapConstructorWithOpts});const n="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,u32=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));function isBytes(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}const createView=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),rotr=(e,t)=>e<<32-t|e>>>t;if(!(68===new Uint8Array(new Uint32Array([287454020]).buffer)[0]))throw new Error("Non little-endian hardware is not supported");const i=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function bytesToHex(e){if(!isBytes(e))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=i[e[r]];return t}const o={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function asciiToBase16(e){return e>=o._0&&e<=o._9?e-o._0:e>=o._A&&e<=o._F?e-(o._A-10):e>=o._a&&e<=o._f?e-(o._a-10):void 0}function hexToBytes(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,r=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(r);for(let t=0,i=0;t<r;t++,i+=2){const r=asciiToBase16(e.charCodeAt(i)),o=asciiToBase16(e.charCodeAt(i+1));if(void 0===r||void 0===o){const t=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+i)}n[t]=16*r+o}return n}function utf8ToBytes(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}function toBytes(e){if("string"==typeof e&&(e=utf8ToBytes(e)),!isBytes(e))throw new Error("expected Uint8Array, got "+typeof e);return e}function concatBytes(...e){let t=0;for(let r=0;r<e.length;r++){const n=e[r];if(!isBytes(n))throw new Error("Uint8Array expected");t+=n.length}const r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const i=e[t];r.set(i,n),n+=i.length}return r}class Hash{clone(){return this._cloneInto()}}const s={}.toString;function checkOpts(e,t){if(void 0!==t&&"[object Object]"!==s.call(t))throw new Error("Options should be object or undefined");return Object.assign(e,t)}function wrapConstructor(e){const hashC=t=>e().update(toBytes(t)).digest(),t=e();return hashC.outputLen=t.outputLen,hashC.blockLen=t.blockLen,hashC.create=()=>e(),hashC}function wrapConstructorWithOpts(e){const hashC=(t,r)=>e(r).update(toBytes(t)).digest(),t=e({});return hashC.outputLen=t.outputLen,hashC.blockLen=t.blockLen,hashC.create=t=>e(t),hashC}function randomBytes(e=32){if(n&&"function"==typeof n.getRandomValues)return n.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}},332084:(e,t,r)=>{"use strict";var n;r.d(t,{CH:()=>getSharedSecret,HU:()=>signSync,MX:()=>verify,Wp:()=>B,_S:()=>sign,aY:()=>l,bR:()=>Point,ko:()=>I,lG:()=>getPublicKey});var i=r(104976);const o=BigInt(0),s=BigInt(1),a=BigInt(2),c=BigInt(3),u=BigInt(8),l=Object.freeze({a:o,b:BigInt(7),P:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:s,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")}),divNearest=(e,t)=>(e+t/a)/t,d={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar(e){const{n:t}=l,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-s*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=r,a=BigInt("0x100000000000000000000000000000000"),c=divNearest(o*e,t),u=divNearest(-n*e,t);let d=mod(e-c*r-u*i,t),p=mod(-c*n-u*o,t);const y=d>a,g=p>a;if(y&&(d=t-d),g&&(p=t-p),d>a||p>a)throw new Error("splitScalarEndo: Endomorphism failed, k="+e);return{k1neg:y,k1:d,k2neg:g,k2:p}}},p=32,y=32,g=32,m=p+1,b=2*p+1;function weierstrass(e){const{a:t,b:r}=l,n=mod(e*e),i=mod(n*e);return mod(i+t*e+r)}const w=l.a===o;class ShaError extends Error{constructor(e){super(e)}}function assertJacPoint(e){if(!(e instanceof JacobianPoint))throw new TypeError("JacobianPoint expected")}class JacobianPoint{constructor(e,t,r){this.x=e,this.y=t,this.z=r}static fromAffine(e){if(!(e instanceof Point))throw new TypeError("JacobianPoint#fromAffine: expected Point");return e.equals(Point.ZERO)?JacobianPoint.ZERO:new JacobianPoint(e.x,e.y,s)}static toAffineBatch(e){const t=function invertBatch(e,t=l.P){const r=new Array(e.length),n=invert(e.reduce(((e,n,i)=>n===o?e:(r[i]=e,mod(e*n,t))),s),t);return e.reduceRight(((e,n,i)=>n===o?e:(r[i]=mod(e*r[i],t),mod(e*n,t))),n),r}(e.map((e=>e.z)));return e.map(((e,r)=>e.toAffine(t[r])))}static normalizeZ(e){return JacobianPoint.toAffineBatch(e).map(JacobianPoint.fromAffine)}equals(e){assertJacPoint(e);const{x:t,y:r,z:n}=this,{x:i,y:o,z:s}=e,a=mod(n*n),c=mod(s*s),u=mod(t*c),l=mod(i*a),d=mod(mod(r*s)*c),p=mod(mod(o*n)*a);return u===l&&d===p}negate(){return new JacobianPoint(this.x,mod(-this.y),this.z)}double(){const{x:e,y:t,z:r}=this,n=mod(e*e),i=mod(t*t),o=mod(i*i),s=e+i,l=mod(a*(mod(s*s)-n-o)),d=mod(c*n),p=mod(d*d),y=mod(p-a*l),g=mod(d*(l-y)-u*o),m=mod(a*t*r);return new JacobianPoint(y,g,m)}add(e){assertJacPoint(e);const{x:t,y:r,z:n}=this,{x:i,y:s,z:c}=e;if(i===o||s===o)return this;if(t===o||r===o)return e;const u=mod(n*n),l=mod(c*c),d=mod(t*l),p=mod(i*u),y=mod(mod(r*c)*l),g=mod(mod(s*n)*u),m=mod(p-d),b=mod(g-y);if(m===o)return b===o?this.double():JacobianPoint.ZERO;const w=mod(m*m),v=mod(m*w),E=mod(d*w),S=mod(b*b-v-a*E),A=mod(b*(E-S)-y*v),x=mod(n*c*m);return new JacobianPoint(S,A,x)}subtract(e){return this.add(e.negate())}multiplyUnsafe(e){const t=JacobianPoint.ZERO;if("bigint"==typeof e&&e===o)return t;let r=normalizeScalar(e);if(r===s)return this;if(!w){let e=t,n=this;for(;r>o;)r&s&&(e=e.add(n)),n=n.double(),r>>=s;return e}let{k1neg:n,k1:i,k2neg:a,k2:c}=d.splitScalar(r),u=t,l=t,p=this;for(;i>o||c>o;)i&s&&(u=u.add(p)),c&s&&(l=l.add(p)),p=p.double(),i>>=s,c>>=s;return n&&(u=u.negate()),a&&(l=l.negate()),l=new JacobianPoint(mod(l.x*d.beta),l.y,l.z),u.add(l)}precomputeWindow(e){const t=w?128/e+1:256/e+1,r=[];let n=this,i=n;for(let o=0;o<t;o++){i=n,r.push(i);for(let t=1;t<2**(e-1);t++)i=i.add(n),r.push(i);n=i.double()}return r}wNAF(e,t){!t&&this.equals(JacobianPoint.BASE)&&(t=Point.BASE);const r=t&&t._WINDOW_SIZE||1;if(256%r)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let n=t&&v.get(t);n||(n=this.precomputeWindow(r),t&&1!==r&&(n=JacobianPoint.normalizeZ(n),v.set(t,n)));let i=JacobianPoint.ZERO,o=JacobianPoint.BASE;const a=1+(w?128/r:256/r),c=2**(r-1),u=BigInt(2**r-1),l=2**r,d=BigInt(r);for(let t=0;t<a;t++){const r=t*c;let a=Number(e&u);e>>=d,a>c&&(a-=l,e+=s);const p=r,y=r+Math.abs(a)-1,g=t%2!=0,m=a<0;0===a?o=o.add(constTimeNegate(g,n[p])):i=i.add(constTimeNegate(m,n[y]))}return{p:i,f:o}}multiply(e,t){let r,n,i=normalizeScalar(e);if(w){const{k1neg:e,k1:o,k2neg:s,k2:a}=d.splitScalar(i);let{p:c,f:u}=this.wNAF(o,t),{p:l,f:p}=this.wNAF(a,t);c=constTimeNegate(e,c),l=constTimeNegate(s,l),l=new JacobianPoint(mod(l.x*d.beta),l.y,l.z),r=c.add(l),n=u.add(p)}else{const{p:e,f:o}=this.wNAF(i,t);r=e,n=o}return JacobianPoint.normalizeZ([r,n])[0]}toAffine(e){const{x:t,y:r,z:n}=this,i=this.equals(JacobianPoint.ZERO);null==e&&(e=i?u:invert(n));const o=e,a=mod(o*o),c=mod(a*o),l=mod(t*a),d=mod(r*c),p=mod(n*o);if(i)return Point.ZERO;if(p!==s)throw new Error("invZ was invalid");return new Point(l,d)}}function constTimeNegate(e,t){const r=t.negate();return e?r:t}JacobianPoint.BASE=new JacobianPoint(l.Gx,l.Gy,s),JacobianPoint.ZERO=new JacobianPoint(o,s,o);const v=new WeakMap;class Point{constructor(e,t){this.x=e,this.y=t}_setWindowSize(e){this._WINDOW_SIZE=e,v.delete(this)}hasEvenY(){return this.y%a===o}static fromCompressedHex(e){const t=32===e.length,r=bytesToNumber(t?e:e.subarray(1));if(!isValidFieldElement(r))throw new Error("Point is not on curve");let n=function sqrtMod(e){const{P:t}=l,r=BigInt(6),n=BigInt(11),i=BigInt(22),o=BigInt(23),s=BigInt(44),u=BigInt(88),d=e*e*e%t,p=d*d*e%t,y=pow2(p,c)*p%t,g=pow2(y,c)*p%t,m=pow2(g,a)*d%t,b=pow2(m,n)*m%t,w=pow2(b,i)*b%t,v=pow2(w,s)*w%t,E=pow2(v,u)*v%t,S=pow2(E,s)*w%t,A=pow2(S,c)*p%t,x=pow2(A,o)*b%t,_=pow2(x,r)*d%t,I=pow2(_,a);if(I*I%t!==e)throw new Error("Cannot find square root");return I}(weierstrass(r));const i=(n&s)===s;if(t)i&&(n=mod(-n));else{!(1&~e[0])!==i&&(n=mod(-n))}const o=new Point(r,n);return o.assertValidity(),o}static fromUncompressedHex(e){const t=bytesToNumber(e.subarray(1,p+1)),r=bytesToNumber(e.subarray(p+1,2*p+1)),n=new Point(t,r);return n.assertValidity(),n}static fromHex(e){const t=ensureBytes(e),r=t.length,n=t[0];if(r===p)return this.fromCompressedHex(t);if(r===m&&(2===n||3===n))return this.fromCompressedHex(t);if(r===b&&4===n)return this.fromUncompressedHex(t);throw new Error(`Point.fromHex: received invalid point. Expected 32-${m} compressed bytes or ${b} uncompressed bytes, not ${r}`)}static fromPrivateKey(e){return Point.BASE.multiply(normalizePrivateKey(e))}static fromSignature(e,t,r){const{r:n,s:i}=normalizeSignature(t);if(![0,1,2,3].includes(r))throw new Error("Cannot recover: invalid recovery bit");const o=truncateHash(ensureBytes(e)),{n:s}=l,a=2===r||3===r?n+s:n,c=invert(a,s),u=mod(-o*c,s),d=mod(i*c,s),p=1&r?"03":"02",y=Point.fromHex(p+numTo32bStr(a)),g=Point.BASE.multiplyAndAddUnsafe(y,u,d);if(!g)throw new Error("Cannot recover signature: point at infinify");return g.assertValidity(),g}toRawBytes(e=!1){return hexToBytes(this.toHex(e))}toHex(e=!1){const t=numTo32bStr(this.x);if(e){return`${this.hasEvenY()?"02":"03"}${t}`}return`04${t}${numTo32bStr(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){const e="Point is not on elliptic curve",{x:t,y:r}=this;if(!isValidFieldElement(t)||!isValidFieldElement(r))throw new Error(e);const n=mod(r*r);if(mod(n-weierstrass(t))!==o)throw new Error(e)}equals(e){return this.x===e.x&&this.y===e.y}negate(){return new Point(this.x,mod(-this.y))}double(){return JacobianPoint.fromAffine(this).double().toAffine()}add(e){return JacobianPoint.fromAffine(this).add(JacobianPoint.fromAffine(e)).toAffine()}subtract(e){return this.add(e.negate())}multiply(e){return JacobianPoint.fromAffine(this).multiply(e,this).toAffine()}multiplyAndAddUnsafe(e,t,r){const n=JacobianPoint.fromAffine(this),i=t===o||t===s||this!==Point.BASE?n.multiplyUnsafe(t):n.multiply(t),a=JacobianPoint.fromAffine(e).multiplyUnsafe(r),c=i.add(a);return c.equals(JacobianPoint.ZERO)?void 0:c.toAffine()}}function sliceDER(e){return Number.parseInt(e[0],16)>=8?"00"+e:e}function parseDERInt(e){if(e.length<2||2!==e[0])throw new Error(`Invalid signature integer tag: ${bytesToHex(e)}`);const t=e[1],r=e.subarray(2,t+2);if(!t||r.length!==t)throw new Error("Invalid signature integer: wrong length");if(0===r[0]&&r[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:bytesToNumber(r),left:e.subarray(t+2)}}Point.BASE=new Point(l.Gx,l.Gy),Point.ZERO=new Point(o,o);class Signature{constructor(e,t){this.r=e,this.s=t,this.assertValidity()}static fromCompact(e){const t=e instanceof Uint8Array,r="Signature.fromCompact";if("string"!=typeof e&&!t)throw new TypeError(`${r}: Expected string or Uint8Array`);const n=t?bytesToHex(e):e;if(128!==n.length)throw new Error(`${r}: Expected 64-byte hex`);return new Signature(hexToNumber(n.slice(0,64)),hexToNumber(n.slice(64,128)))}static fromDER(e){const t=e instanceof Uint8Array;if("string"!=typeof e&&!t)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");const{r,s:n}=function parseDERSignature(e){if(e.length<2||48!=e[0])throw new Error(`Invalid signature tag: ${bytesToHex(e)}`);if(e[1]!==e.length-2)throw new Error("Invalid signature: incorrect length");const{data:t,left:r}=parseDERInt(e.subarray(2)),{data:n,left:i}=parseDERInt(r);if(i.length)throw new Error(`Invalid signature: left bytes after parsing: ${bytesToHex(i)}`);return{r:t,s:n}}(t?e:hexToBytes(e));return new Signature(r,n)}static fromHex(e){return this.fromDER(e)}assertValidity(){const{r:e,s:t}=this;if(!isWithinCurveOrder(e))throw new Error("Invalid Signature: r must be 0 < r < n");if(!isWithinCurveOrder(t))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){const e=l.n>>s;return this.s>e}normalizeS(){return this.hasHighS()?new Signature(this.r,mod(-this.s,l.n)):this}toDERRawBytes(){return hexToBytes(this.toDERHex())}toDERHex(){const e=sliceDER(numberToHexUnpadded(this.s)),t=sliceDER(numberToHexUnpadded(this.r)),r=e.length/2,n=t.length/2,i=numberToHexUnpadded(r),o=numberToHexUnpadded(n);return`30${numberToHexUnpadded(n+r+4)}02${o}${t}02${i}${e}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return hexToBytes(this.toCompactHex())}toCompactHex(){return numTo32bStr(this.r)+numTo32bStr(this.s)}}function concatBytes(...e){if(!e.every((e=>e instanceof Uint8Array)))throw new Error("Uint8Array list expected");if(1===e.length)return e[0];const t=e.reduce(((e,t)=>e+t.length),0),r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const i=e[t];r.set(i,n),n+=i.length}return r}const E=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function bytesToHex(e){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");let t="";for(let r=0;r<e.length;r++)t+=E[e[r]];return t}const S=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");function numTo32bStr(e){if("bigint"!=typeof e)throw new Error("Expected bigint");if(!(o<=e&&e<S))throw new Error("Expected number 0 <= n < 2^256");return e.toString(16).padStart(64,"0")}function numTo32b(e){const t=hexToBytes(numTo32bStr(e));if(32!==t.length)throw new Error("Error: expected 32 bytes");return t}function numberToHexUnpadded(e){const t=e.toString(16);return 1&t.length?`0${t}`:t}function hexToNumber(e){if("string"!=typeof e)throw new TypeError("hexToNumber: expected string, got "+typeof e);return BigInt(`0x${e}`)}function hexToBytes(e){if("string"!=typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+e.length);const t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){const n=2*r,i=e.slice(n,n+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[r]=o}return t}function bytesToNumber(e){return hexToNumber(bytesToHex(e))}function ensureBytes(e){return e instanceof Uint8Array?Uint8Array.from(e):hexToBytes(e)}function normalizeScalar(e){if("number"==typeof e&&Number.isSafeInteger(e)&&e>0)return BigInt(e);if("bigint"==typeof e&&isWithinCurveOrder(e))return e;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function mod(e,t=l.P){const r=e%t;return r>=o?r:t+r}function pow2(e,t){const{P:r}=l;let n=e;for(;t-- >o;)n*=n,n%=r;return n}function invert(e,t=l.P){if(e===o||t<=o)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=mod(e,t),n=t,i=o,a=s,c=s,u=o;for(;r!==o;){const e=n/r,t=n%r,o=i-c*e,s=a-u*e;n=r,r=t,i=c,a=u,c=o,u=s}if(n!==s)throw new Error("invert: does not exist");return mod(i,t)}function truncateHash(e,t=!1){const r=function bits2int_2(e){const t=8*e.length-8*y,r=bytesToNumber(e);return t>0?r>>BigInt(t):r}(e);if(t)return r;const{n}=l;return r>=n?r-n:r}let A,x;class HmacDrbg{constructor(e,t){if(this.hashLen=e,this.qByteLen=t,"number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof t||t<2)throw new Error("qByteLen must be a number");this.v=new Uint8Array(e).fill(1),this.k=new Uint8Array(e).fill(0),this.counter=0}hmac(...e){return B.hmacSha256(this.k,...e)}hmacSync(...e){return x(this.k,...e)}checkSync(){if("function"!=typeof x)throw new ShaError("hmacSha256Sync needs to be set")}incr(){if(this.counter>=1e3)throw new Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}async reseed(e=new Uint8Array){this.k=await this.hmac(this.v,Uint8Array.from([0]),e),this.v=await this.hmac(this.v),0!==e.length&&(this.k=await this.hmac(this.v,Uint8Array.from([1]),e),this.v=await this.hmac(this.v))}reseedSync(e=new Uint8Array){this.checkSync(),this.k=this.hmacSync(this.v,Uint8Array.from([0]),e),this.v=this.hmacSync(this.v),0!==e.length&&(this.k=this.hmacSync(this.v,Uint8Array.from([1]),e),this.v=this.hmacSync(this.v))}async generate(){this.incr();let e=0;const t=[];for(;e<this.qByteLen;){this.v=await this.hmac(this.v);const r=this.v.slice();t.push(r),e+=this.v.length}return concatBytes(...t)}generateSync(){this.checkSync(),this.incr();let e=0;const t=[];for(;e<this.qByteLen;){this.v=this.hmacSync(this.v);const r=this.v.slice();t.push(r),e+=this.v.length}return concatBytes(...t)}}function isWithinCurveOrder(e){return o<e&&e<l.n}function isValidFieldElement(e){return o<e&&e<l.P}function kmdToSig(e,t,r,n=!0){const{n:i}=l,a=truncateHash(e,!0);if(!isWithinCurveOrder(a))return;const c=invert(a,i),u=Point.BASE.multiply(a),d=mod(u.x,i);if(d===o)return;const p=mod(c*mod(t+r*d,i),i);if(p===o)return;let y=new Signature(d,p),g=(u.x===y.r?0:2)|Number(u.y&s);return n&&y.hasHighS()&&(y=y.normalizeS(),g^=1),{sig:y,recovery:g}}function normalizePrivateKey(e){let t;if("bigint"==typeof e)t=e;else if("number"==typeof e&&Number.isSafeInteger(e)&&e>0)t=BigInt(e);else if("string"==typeof e){if(e.length!==2*y)throw new Error("Expected 32 bytes of private key");t=hexToNumber(e)}else{if(!(e instanceof Uint8Array))throw new TypeError("Expected valid private key");if(e.length!==y)throw new Error("Expected 32 bytes of private key");t=bytesToNumber(e)}if(!isWithinCurveOrder(t))throw new Error("Expected private key: 0 < key < n");return t}function normalizePublicKey(e){return e instanceof Point?(e.assertValidity(),e):Point.fromHex(e)}function normalizeSignature(e){if(e instanceof Signature)return e.assertValidity(),e;try{return Signature.fromDER(e)}catch(t){return Signature.fromCompact(e)}}function getPublicKey(e,t=!1){return Point.fromPrivateKey(e).toRawBytes(t)}function isProbPub(e){const t=e instanceof Uint8Array,r="string"==typeof e,n=(t||r)&&e.length;return t?n===m||n===b:r?n===2*m||n===2*b:e instanceof Point}function getSharedSecret(e,t,r=!1){if(isProbPub(e))throw new TypeError("getSharedSecret: first arg must be private key");if(!isProbPub(t))throw new TypeError("getSharedSecret: second arg must be public key");const n=normalizePublicKey(t);return n.assertValidity(),n.multiply(normalizePrivateKey(e)).toRawBytes(r)}function bits2int(e){return bytesToNumber(e.length>p?e.slice(0,p):e)}function bits2octets(e){const t=bits2int(e),r=mod(t,l.n);return int2octets(r<o?t:r)}function int2octets(e){return numTo32b(e)}function initSigArgs(e,t,r){if(null==e)throw new Error(`sign: expected valid message hash, not "${e}"`);const n=ensureBytes(e),i=normalizePrivateKey(t),o=[int2octets(i),bits2octets(n)];if(null!=r){!0===r&&(r=B.randomBytes(p));const e=ensureBytes(r);if(e.length!==p)throw new Error(`sign: Expected ${p} bytes of extra data`);o.push(e)}return{seed:concatBytes(...o),m:bits2int(n),d:i}}function finalizeSig(e,t){const{sig:r,recovery:n}=e,{der:i,recovered:o}=Object.assign({canonical:!0,der:!0},t),s=i?r.toDERRawBytes():r.toCompactRawBytes();return o?[s,n]:s}async function sign(e,t,r={}){const{seed:n,m:i,d:o}=initSigArgs(e,t,r.extraEntropy),s=new HmacDrbg(g,y);let a;for(await s.reseed(n);!(a=kmdToSig(await s.generate(),i,o,r.canonical));)await s.reseed();return finalizeSig(a,r)}function signSync(e,t,r={}){const{seed:n,m:i,d:o}=initSigArgs(e,t,r.extraEntropy),s=new HmacDrbg(g,y);let a;for(s.reseedSync(n);!(a=kmdToSig(s.generateSync(),i,o,r.canonical));)s.reseedSync();return finalizeSig(a,r)}const _={strict:!0};function verify(e,t,r,n=_){let i;try{i=normalizeSignature(e),t=ensureBytes(t)}catch(e){return!1}const{r:o,s}=i;if(n.strict&&i.hasHighS())return!1;const a=truncateHash(t);let c;try{c=normalizePublicKey(r)}catch(e){return!1}const{n:u}=l,d=invert(s,u),p=mod(a*d,u),y=mod(o*d,u),g=Point.BASE.multiplyAndAddUnsafe(c,p,y);if(!g)return!1;return mod(g.x,u)===o}function schnorrChallengeFinalize(e){return mod(bytesToNumber(e),l.n)}class SchnorrSignature{constructor(e,t){this.r=e,this.s=t,this.assertValidity()}static fromHex(e){const t=ensureBytes(e);if(64!==t.length)throw new TypeError(`SchnorrSignature.fromHex: expected 64 bytes, not ${t.length}`);const r=bytesToNumber(t.subarray(0,32)),n=bytesToNumber(t.subarray(32,64));return new SchnorrSignature(r,n)}assertValidity(){const{r:e,s:t}=this;if(!isValidFieldElement(e)||!isWithinCurveOrder(t))throw new Error("Invalid signature")}toHex(){return numTo32bStr(this.r)+numTo32bStr(this.s)}toRawBytes(){return hexToBytes(this.toHex())}}class InternalSchnorrSignature{constructor(e,t,r=B.randomBytes()){if(null==e)throw new TypeError(`sign: Expected valid message, not "${e}"`);this.m=ensureBytes(e);const{x:n,scalar:i}=this.getScalar(normalizePrivateKey(t));if(this.px=n,this.d=i,this.rand=ensureBytes(r),32!==this.rand.length)throw new TypeError("sign: Expected 32 bytes of aux randomness")}getScalar(e){const t=Point.fromPrivateKey(e),r=t.hasEvenY()?e:l.n-e;return{point:t,scalar:r,x:t.toRawX()}}initNonce(e,t){return numTo32b(e^bytesToNumber(t))}finalizeNonce(e){const t=mod(bytesToNumber(e),l.n);if(t===o)throw new Error("sign: Creation of signature failed. k is zero");const{point:r,x:n,scalar:i}=this.getScalar(t);return{R:r,rx:n,k:i}}finalizeSig(e,t,r,n){return new SchnorrSignature(e.x,mod(t+r*n,l.n)).toRawBytes()}error(){throw new Error("sign: Invalid signature produced")}async calc(){const{m:e,d:t,px:r,rand:n}=this,i=B.taggedHash,o=this.initNonce(t,await i(P.aux,n)),{R:s,rx:a,k:c}=this.finalizeNonce(await i(P.nonce,o,r,e)),u=schnorrChallengeFinalize(await i(P.challenge,a,r,e)),l=this.finalizeSig(s,c,u,t);return await schnorrVerify(l,e,r)||this.error(),l}calcSync(){const{m:e,d:t,px:r,rand:n}=this,i=B.taggedHashSync,o=this.initNonce(t,i(P.aux,n)),{R:s,rx:a,k:c}=this.finalizeNonce(i(P.nonce,o,r,e)),u=schnorrChallengeFinalize(i(P.challenge,a,r,e)),l=this.finalizeSig(s,c,u,t);return schnorrVerifySync(l,e,r)||this.error(),l}}function initSchnorrVerify(e,t,r){const n=e instanceof SchnorrSignature,i=n?e:SchnorrSignature.fromHex(e);return n&&i.assertValidity(),{...i,m:ensureBytes(t),P:normalizePublicKey(r)}}function finalizeSchnorrVerify(e,t,r,n){const i=Point.BASE.multiplyAndAddUnsafe(t,normalizePrivateKey(r),mod(-n,l.n));return!(!i||!i.hasEvenY()||i.x!==e)}async function schnorrVerify(e,t,r){try{const{r:n,s:i,m:o,P:s}=initSchnorrVerify(e,t,r),a=schnorrChallengeFinalize(await B.taggedHash(P.challenge,numTo32b(n),s.toRawX(),o));return finalizeSchnorrVerify(n,s,i,a)}catch(e){return!1}}function schnorrVerifySync(e,t,r){try{const{r:n,s:i,m:o,P:s}=initSchnorrVerify(e,t,r),a=schnorrChallengeFinalize(B.taggedHashSync(P.challenge,numTo32b(n),s.toRawX(),o));return finalizeSchnorrVerify(n,s,i,a)}catch(e){if(e instanceof ShaError)throw e;return!1}}const I={Signature:SchnorrSignature,getPublicKey:function schnorrGetPublicKey(e){return Point.fromPrivateKey(e).toRawX()},sign:async function schnorrSign(e,t,r){return new InternalSchnorrSignature(e,t,r).calc()},verify:schnorrVerify,signSync:function schnorrSignSync(e,t,r){return new InternalSchnorrSignature(e,t,r).calcSync()},verifySync:schnorrVerifySync};Point.BASE._setWindowSize(8);const T={node:n||(n=r.t(i,2)),web:"object"==typeof self&&"crypto"in self?self.crypto:void 0},P={challenge:"BIP0340/challenge",aux:"BIP0340/aux",nonce:"BIP0340/nonce"},M={},B={bytesToHex,hexToBytes,concatBytes,mod,invert,isValidPrivateKey(e){try{return normalizePrivateKey(e),!0}catch(e){return!1}},_bigintTo32Bytes:numTo32b,_normalizePrivateKey:normalizePrivateKey,hashToPrivateKey:e=>{e=ensureBytes(e);const t=y+8;if(e.length<t||e.length>1024)throw new Error("Expected valid bytes of private key as per FIPS 186");return numTo32b(mod(bytesToNumber(e),l.n-s)+s)},randomBytes:(e=32)=>{if(T.web)return T.web.getRandomValues(new Uint8Array(e));if(T.node){const{randomBytes:t}=T.node;return Uint8Array.from(t(e))}throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>B.hashToPrivateKey(B.randomBytes(y+8)),precompute(e=8,t=Point.BASE){const r=t===Point.BASE?t:new Point(t.x,t.y);return r._setWindowSize(e),r.multiply(c),r},sha256:async(...e)=>{if(T.web){const t=await T.web.subtle.digest("SHA-256",concatBytes(...e));return new Uint8Array(t)}if(T.node){const{createHash:t}=T.node,r=t("sha256");return e.forEach((e=>r.update(e))),Uint8Array.from(r.digest())}throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(e,...t)=>{if(T.web){const r=await T.web.subtle.importKey("raw",e,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),n=concatBytes(...t),i=await T.web.subtle.sign("HMAC",r,n);return new Uint8Array(i)}if(T.node){const{createHmac:r}=T.node,n=r("sha256",e);return t.forEach((e=>n.update(e))),Uint8Array.from(n.digest())}throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:async(e,...t)=>{let r=M[e];if(void 0===r){const t=await B.sha256(Uint8Array.from(e,(e=>e.charCodeAt(0))));r=concatBytes(t,t),M[e]=r}return B.sha256(r,...t)},taggedHashSync:(e,...t)=>{if("function"!=typeof A)throw new ShaError("sha256Sync is undefined, you need to set it");let r=M[e];if(void 0===r){const t=A(Uint8Array.from(e,(e=>e.charCodeAt(0))));r=concatBytes(t,t),M[e]=r}return A(r,...t)},_JacobianPoint:JacobianPoint};Object.defineProperties(B,{sha256Sync:{configurable:!1,get:()=>A,set(e){A||(A=e)}},hmacSha256Sync:{configurable:!1,get:()=>x,set(e){x||(x=e)}}})},984141:(e,t,r)=>{"use strict";r.d(t,{_Q:()=>baseX,HT:()=>from,yE:()=>rfc4648});const n=function base(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var o=e.charAt(i),s=o.charCodeAt(0);if(255!==r[s])throw new TypeError(o+" is ambiguous");r[s]=i}var a=e.length,c=e.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function decodeUnsafe(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,i=0;e[t]===c;)n++,t++;for(var o=(e.length-t)*u+1>>>0,s=new Uint8Array(o);e[t];){var l=r[e.charCodeAt(t)];if(255===l)return;for(var d=0,p=o-1;(0!==l||d<i)&&-1!==p;p--,d++)l+=a*s[p]>>>0,s[p]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");i=d,t++}if(" "!==e[t]){for(var y=o-i;y!==o&&0===s[y];)y++;for(var g=new Uint8Array(n+(o-y)),m=n;y!==o;)g[m++]=s[y++];return g}}}return{encode:function encode(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,i=0,o=t.length;i!==o&&0===t[i];)i++,r++;for(var s=(o-i)*l+1>>>0,u=new Uint8Array(s);i!==o;){for(var d=t[i],p=0,y=s-1;(0!==d||p<n)&&-1!==y;y--,p++)d+=256*u[y]>>>0,u[y]=d%a>>>0,d=d/a>>>0;if(0!==d)throw new Error("Non-zero carry");n=p,i++}for(var g=s-n;g!==s&&0===u[g];)g++;for(var m=c.repeat(r);g<s;++g)m+=e.charAt(u[g]);return m},decodeUnsafe,decode:function decode(e){var r=decodeUnsafe(e);if(r)return r;throw new Error(`Non-${t} character`)}}};var i=r(977614);class Encoder{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Decoder{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return or(this,e)}}class ComposedDecoder{constructor(e){this.decoders=e}or(e){return or(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const or=(e,t)=>new ComposedDecoder({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class Codec{constructor(e,t,r,n){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=n,this.encoder=new Encoder(e,t,r),this.decoder=new Decoder(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const from=({name:e,prefix:t,encode:r,decode:n})=>new Codec(e,t,r,n),baseX=({prefix:e,name:t,alphabet:r})=>{const{encode:o,decode:s}=n(r,t);return from({prefix:e,name:t,encode:o,decode:e=>(0,i.au)(s(e))})},rfc4648=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>from({prefix:t,name:e,encode:e=>((e,t,r)=>{const n="="===t[t.length-1],i=(1<<r)-1;let o="",s=0,a=0;for(let n=0;n<e.length;++n)for(a=a<<8|e[n],s+=8;s>r;)s-=r,o+=t[i&a>>s];if(s&&(o+=t[i&a<<r-s]),n)for(;o.length*r&7;)o+="=";return o})(e,n,r),decode:t=>((e,t,r,n)=>{const i={};for(let e=0;e<t.length;++e)i[t[e]]=e;let o=e.length;for(;"="===e[o-1];)--o;const s=new Uint8Array(o*r/8|0);let a=0,c=0,u=0;for(let t=0;t<o;++t){const o=i[e[t]];if(void 0===o)throw new SyntaxError(`Non-${n} character`);c=c<<r|o,a+=r,a>=8&&(a-=8,s[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return s})(t,n,r,e)})},474530:(e,t,r)=>{"use strict";r.r(t),r.d(t,{base32:()=>i,base32hex:()=>c,base32hexpad:()=>l,base32hexpadupper:()=>d,base32hexupper:()=>u,base32pad:()=>s,base32padupper:()=>a,base32upper:()=>o,base32z:()=>p});var n=r(984141);const i=(0,n.yE)({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),o=(0,n.yE)({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),s=(0,n.yE)({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),a=(0,n.yE)({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),c=(0,n.yE)({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),u=(0,n.yE)({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),l=(0,n.yE)({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),d=(0,n.yE)({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),p=(0,n.yE)({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})},727158:(e,t,r)=>{"use strict";r.r(t),r.d(t,{base58btc:()=>i,base58flickr:()=>o});var n=r(984141);const i=(0,n._Q)({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),o=(0,n._Q)({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})},510980:(e,t,r)=>{"use strict";r.d(t,{Fo:()=>W});var n={};r.r(n),r.d(n,{identity:()=>w});var i={};r.r(i),r.d(i,{base2:()=>v});var o={};r.r(o),r.d(o,{base8:()=>E});var s={};r.r(s),r.d(s,{base10:()=>S});var a={};r.r(a),r.d(a,{base16:()=>A,base16upper:()=>x});var c={};r.r(c),r.d(c,{base36:()=>I,base36upper:()=>T});var u={};r.r(u),r.d(u,{base64:()=>M,base64pad:()=>B,base64url:()=>O,base64urlpad:()=>k});var l={};r.r(l),r.d(l,{base256emoji:()=>R});var d={};r.r(d),r.d(d,{sha256:()=>D,sha512:()=>L});var p={};r.r(p),r.d(p,{identity:()=>H});var y={};r.r(y),r.d(y,{code:()=>q,decode:()=>raw_decode,encode:()=>raw_encode,name:()=>F});var g={};r.r(g),r.d(g,{code:()=>G,decode:()=>json_decode,encode:()=>json_encode,name:()=>$});var m=r(984141),b=r(977614);const w=(0,m.HT)({prefix:"\0",name:"identity",encode:e=>(0,b.dI)(e),decode:e=>(0,b.sH)(e)}),v=(0,m.yE)({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),E=(0,m.yE)({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),S=(0,m._Q)({prefix:"9",name:"base10",alphabet:"0123456789"}),A=(0,m.yE)({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),x=(0,m.yE)({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var _=r(474530);const I=(0,m._Q)({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),T=(0,m._Q)({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var P=r(727158);const M=(0,m.yE)({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),B=(0,m.yE)({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),O=(0,m.yE)({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),k=(0,m.yE)({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),C=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),N=C.reduce(((e,t,r)=>(e[r]=t,e)),[]),j=C.reduce(((e,t,r)=>(e[t.codePointAt(0)]=r,e)),[]);const R=(0,m.HT)({prefix:"🚀",name:"base256emoji",encode:function encode(e){return e.reduce(((e,t)=>e+=N[t]),"")},decode:function decode(e){const t=[];for(const r of e){const e=j[r.codePointAt(0)];if(void 0===e)throw new Error(`Non-base256emoji character: ${r}`);t.push(e)}return new Uint8Array(t)}});var U=r(163756);const from=({name:e,code:t,encode:r})=>new Hasher(e,t,r);class Hasher{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?U.create(this.code,t):t.then((e=>U.create(this.code,e)))}throw Error("Unknown type, must be binary type")}}const sha=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),D=from({name:"sha2-256",code:18,encode:sha("SHA-256")}),L=from({name:"sha2-512",code:19,encode:sha("SHA-512")}),K=b.au,H={code:0,name:"identity",encode:K,digest:e=>U.create(0,K(e))},F="raw",q=85,raw_encode=e=>(0,b.au)(e),raw_decode=e=>(0,b.au)(e),z=new TextEncoder,V=new TextDecoder,$="json",G=512,json_encode=e=>z.encode(JSON.stringify(e)),json_decode=e=>JSON.parse(V.decode(e));r(883197),r(406535);const W={...n,...i,...o,...s,...a,..._,...c,...P,...u,...l}},977614:(e,t,r)=>{"use strict";r.d(t,{aI:()=>equals,au:()=>coerce,dI:()=>toString,sH:()=>fromString});new Uint8Array(0);const equals=(e,t)=>{if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0},coerce=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},fromString=e=>(new TextEncoder).encode(e),toString=e=>(new TextDecoder).decode(e)},883197:(e,t,r)=>{"use strict";r.r(t),r.d(t,{CID:()=>CID});var n=r(406535),i=r(163756),o=r(727158),s=r(474530),a=r(977614);class CID{constructor(e,t,r,n){this.code=t,this.version=e,this.multihash=r,this.bytes=n,this.byteOffset=n.byteOffset,this.byteLength=n.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:p,byteLength:p,code:d,version:d,multihash:d,bytes:d,_baseCache:p,asCID:p})}toV0(){if(0===this.version)return this;{const{code:e,multihash:t}=this;if(e!==c)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==u)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return CID.createV0(t)}}toV1(){switch(this.version){case 0:{const{code:e,digest:t}=this.multihash,r=i.create(e,t);return CID.createV1(this.code,r)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&i.equals(this.multihash,e.multihash)}toString(e){const{bytes:t,version:r,_baseCache:n}=this;return 0===r?toStringV0(t,n,e||o.base58btc.encoder):toStringV1(t,n,e||s.base32.encoder)}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return deprecate(/^0\.0/,y),!(!e||!e[l]&&e.asCID!==e)}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof CID)return e;if(null!=e&&e.asCID===e){const{version:t,code:r,multihash:n,bytes:i}=e;return new CID(t,r,n,i||encodeCID(t,r,n.bytes))}if(null!=e&&!0===e[l]){const{version:t,multihash:r,code:n}=e,o=i.decode(r);return CID.create(t,n,o)}return null}static create(e,t,r){if("number"!=typeof t)throw new Error("String codecs are no longer supported");switch(e){case 0:if(t!==c)throw new Error(`Version 0 CID must use dag-pb (code: ${c}) block encoding`);return new CID(e,t,r,r.bytes);case 1:{const n=encodeCID(e,t,r.bytes);return new CID(e,t,r,n)}default:throw new Error("Invalid version")}}static createV0(e){return CID.create(0,c,e)}static createV1(e,t){return CID.create(1,e,t)}static decode(e){const[t,r]=CID.decodeFirst(e);if(r.length)throw new Error("Incorrect length");return t}static decodeFirst(e){const t=CID.inspectBytes(e),r=t.size-t.multihashSize,n=(0,a.au)(e.subarray(r,r+t.multihashSize));if(n.byteLength!==t.multihashSize)throw new Error("Incorrect length");const o=n.subarray(t.multihashSize-t.digestSize),s=new i.Digest(t.multihashCode,t.digestSize,o,n);return[0===t.version?CID.createV0(s):CID.createV1(t.codec,s),e.subarray(t.size)]}static inspectBytes(e){let t=0;const next=()=>{const[r,i]=n.D4(e.subarray(t));return t+=i,r};let r=next(),i=c;if(18===r?(r=0,t=0):1===r&&(i=next()),0!==r&&1!==r)throw new RangeError(`Invalid CID version ${r}`);const o=t,s=next(),a=next(),u=t+a;return{version:r,codec:i,multihashCode:s,digestSize:a,multihashSize:u-o,size:u}}static parse(e,t){const[r,n]=parseCIDtoBytes(e,t),i=CID.decode(n);return i._baseCache.set(r,e),i}}const parseCIDtoBytes=(e,t)=>{switch(e[0]){case"Q":{const r=t||o.base58btc;return[o.base58btc.prefix,r.decode(`${o.base58btc.prefix}${e}`)]}case o.base58btc.prefix:{const r=t||o.base58btc;return[o.base58btc.prefix,r.decode(e)]}case s.base32.prefix:{const r=t||s.base32;return[s.base32.prefix,r.decode(e)]}default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},toStringV0=(e,t,r)=>{const{prefix:n}=r;if(n!==o.base58btc.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);const i=t.get(n);if(null==i){const i=r.encode(e).slice(1);return t.set(n,i),i}return i},toStringV1=(e,t,r)=>{const{prefix:n}=r,i=t.get(n);if(null==i){const i=r.encode(e);return t.set(n,i),i}return i},c=112,u=18,encodeCID=(e,t,r)=>{const i=n.OY(e),o=i+n.OY(t),s=new Uint8Array(o+r.byteLength);return n.s_(e,s,0),n.s_(t,s,i),s.set(r,o),s},l=Symbol.for("@ipld/js-cid/CID"),d={writable:!1,configurable:!1,enumerable:!0},p={writable:!1,enumerable:!1,configurable:!1},deprecate=(e,t)=>{if(!e.test("0.0.0-dev"))throw new Error(t);console.warn(t)},y="CID.isCID(v) is deprecated and will be removed in the next major release.\nFollowing code pattern:\n\nif (CID.isCID(value)) {\n  doSomethingWithCID(value)\n}\n\nIs replaced with:\n\nconst cid = CID.asCID(value)\nif (cid) {\n  // Make sure to use cid instead of value\n  doSomethingWithCID(cid)\n}\n"},163756:(e,t,r)=>{"use strict";r.r(t),r.d(t,{Digest:()=>Digest,create:()=>create,decode:()=>decode,equals:()=>equals});var n=r(977614),i=r(406535);const create=(e,t)=>{const r=t.byteLength,n=i.OY(e),o=n+i.OY(r),s=new Uint8Array(o+r);return i.s_(e,s,0),i.s_(r,s,n),s.set(t,o),new Digest(e,r,t,s)},decode=e=>{const t=(0,n.au)(e),[r,o]=i.D4(t),[s,a]=i.D4(t.subarray(o)),c=t.subarray(o+a);if(c.byteLength!==s)throw new Error("Incorrect length");return new Digest(r,s,c,t)},equals=(e,t)=>e===t||e.code===t.code&&e.size===t.size&&(0,n.aI)(e.bytes,t.bytes);class Digest{constructor(e,t,r,n){this.code=e,this.size=t,this.digest=r,this.bytes=n}}},406535:(e,t,r)=>{"use strict";r.d(t,{D4:()=>varint_decode,s_:()=>encodeTo,OY:()=>encodingLength});var n=function encode(e,t,r){t=t||[];var n=r=r||0;for(;e>=s;)t[r++]=255&e|i,e/=128;for(;e&o;)t[r++]=255&e|i,e>>>=7;return t[r]=0|e,encode.bytes=r-n+1,t},i=128,o=-128,s=Math.pow(2,31);var a=function read(e,t){var r,n=0,i=0,o=t=t||0,s=e.length;do{if(o>=s)throw read.bytes=0,new RangeError("Could not decode varint");r=e[o++],n+=i<28?(r&u)<<i:(r&u)*Math.pow(2,i),i+=7}while(r>=c);return read.bytes=o-t,n},c=128,u=127;var l=Math.pow(2,7),d=Math.pow(2,14),p=Math.pow(2,21),y=Math.pow(2,28),g=Math.pow(2,35),m=Math.pow(2,42),b=Math.pow(2,49),w=Math.pow(2,56),v=Math.pow(2,63);const E={encode:n,decode:a,encodingLength:function(e){return e<l?1:e<d?2:e<p?3:e<y?4:e<g?5:e<m?6:e<b?7:e<w?8:e<v?9:10}},varint_decode=(e,t=0)=>[E.decode(e,t),E.decode.bytes],encodeTo=(e,t,r=0)=>(E.encode(e,t,r),t),encodingLength=e=>E.encodingLength(e)},400590:(e,t,r)=>{"use strict";r.d(t,{A:()=>nanoid});let nanoid=(e=21)=>{let t="",r=e;for(;r--;)t+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[64*Math.random()|0];return t}},427046:e=>{"use strict";e.exports=JSON.parse('{"100":"Continue","101":"Switching Protocols","102":"Processing","103":"Early Hints","200":"OK","201":"Created","202":"Accepted","203":"Non-Authoritative Information","204":"No Content","205":"Reset Content","206":"Partial Content","207":"Multi-Status","208":"Already Reported","226":"IM Used","300":"Multiple Choices","301":"Moved Permanently","302":"Found","303":"See Other","304":"Not Modified","305":"Use Proxy","306":"(Unused)","307":"Temporary Redirect","308":"Permanent Redirect","400":"Bad Request","401":"Unauthorized","402":"Payment Required","403":"Forbidden","404":"Not Found","405":"Method Not Allowed","406":"Not Acceptable","407":"Proxy Authentication Required","408":"Request Timeout","409":"Conflict","410":"Gone","411":"Length Required","412":"Precondition Failed","413":"Payload Too Large","414":"URI Too Long","415":"Unsupported Media Type","416":"Range Not Satisfiable","417":"Expectation Failed","418":"I\'m a teapot","421":"Misdirected Request","422":"Unprocessable Entity","423":"Locked","424":"Failed Dependency","425":"Unordered Collection","426":"Upgrade Required","428":"Precondition Required","429":"Too Many Requests","431":"Request Header Fields Too Large","451":"Unavailable For Legal Reasons","500":"Internal Server Error","501":"Not Implemented","502":"Bad Gateway","503":"Service Unavailable","504":"Gateway Timeout","505":"HTTP Version Not Supported","506":"Variant Also Negotiates","507":"Insufficient Storage","508":"Loop Detected","509":"Bandwidth Limit Exceeded","510":"Not Extended","511":"Network Authentication Required"}')},999494:e=>{"use strict";e.exports=JSON.parse('{"GasLimitExceeded":"Exceeded the maximum amount of gas allowed to burn per contract","MethodEmptyName":"Method name is empty","WasmerCompileError":"Wasmer compilation error: {{msg}}","GuestPanic":"Smart contract panicked: {{panic_msg}}","Memory":"Error creating Wasm memory","GasExceeded":"Exceeded the prepaid gas","MethodUTF8Error":"Method name is not valid UTF8 string","BadUTF16":"String encoding is bad UTF-16 sequence","WasmTrap":"WebAssembly trap: {{msg}}","GasInstrumentation":"Gas instrumentation failed or contract has denied instructions.","InvalidPromiseIndex":"{{promise_idx}} does not correspond to existing promises","InvalidPromiseResultIndex":"Accessed invalid promise result index: {{result_idx}}","Deserialization":"Error happened while deserializing the module","MethodNotFound":"Contract method is not found","InvalidRegisterId":"Accessed invalid register id: {{register_id}}","InvalidReceiptIndex":"VM Logic returned an invalid receipt index: {{receipt_index}}","EmptyMethodName":"Method name is empty in contract call","CannotReturnJointPromise":"Returning joint promise is currently prohibited","StackHeightInstrumentation":"Stack instrumentation failed","CodeDoesNotExist":"Cannot find contract code for account {{account_id}}","MethodInvalidSignature":"Invalid method signature","IntegerOverflow":"Integer overflow happened during contract execution","MemoryAccessViolation":"MemoryAccessViolation","InvalidIteratorIndex":"Iterator index {{iterator_index}} does not exist","IteratorWasInvalidated":"Iterator {{iterator_index}} was invalidated after its creation by performing a mutable operation on trie","InvalidAccountId":"VM Logic returned an invalid account id","Serialization":"Error happened while serializing the module","CannotAppendActionToJointPromise":"Actions can only be appended to non-joint promise.","InternalMemoryDeclared":"Internal memory declaration has been found in the module","Instantiate":"Error happened during instantiation","ProhibitedInView":"{{method_name}} is not allowed in view calls","InvalidMethodName":"VM Logic returned an invalid method name","BadUTF8":"String encoding is bad UTF-8 sequence","BalanceExceeded":"Exceeded the account balance","LinkError":"Wasm contract link error: {{msg}}","InvalidPublicKey":"VM Logic provided an invalid public key","ActorNoPermission":"Actor {{actor_id}} doesn\'t have permission to account {{account_id}} to complete the action","LackBalanceForState":"The account {{account_id}} wouldn\'t have enough balance to cover storage, required to have {{amount}} yoctoNEAR more","ReceiverMismatch":"Wrong AccessKey used for transaction: transaction is sent to receiver_id={{tx_receiver}}, but is signed with function call access key that restricted to only use with receiver_id={{ak_receiver}}. Either change receiver_id in your transaction or switch to use a FullAccessKey.","CostOverflow":"Transaction gas or balance cost is too high","InvalidSignature":"Transaction is not signed with the given public key","AccessKeyNotFound":"Signer \\"{{account_id}}\\" doesn\'t have access key with the given public_key {{public_key}}","NotEnoughBalance":"Sender {{signer_id}} does not have enough balance {{#formatNear}}{{balance}}{{/formatNear}} for operation costing {{#formatNear}}{{cost}}{{/formatNear}}","NotEnoughAllowance":"Access Key {account_id}:{public_key} does not have enough balance {{#formatNear}}{{allowance}}{{/formatNear}} for transaction costing {{#formatNear}}{{cost}}{{/formatNear}}","Expired":"Transaction has expired","DeleteAccountStaking":"Account {{account_id}} is staking and can not be deleted","SignerDoesNotExist":"Signer {{signer_id}} does not exist","TriesToStake":"Account {{account_id}} tried to stake {{#formatNear}}{{stake}}{{/formatNear}}, but has staked {{#formatNear}}{{locked}}{{/formatNear}} and only has {{#formatNear}}{{balance}}{{/formatNear}}","AddKeyAlreadyExists":"The public key {{public_key}} is already used for an existing access key","InvalidSigner":"Invalid signer account ID {{signer_id}} according to requirements","CreateAccountNotAllowed":"The new account_id {{account_id}} can\'t be created by {{predecessor_id}}","RequiresFullAccess":"The transaction contains more then one action, but it was signed with an access key which allows transaction to apply only one specific action. To apply more then one actions TX must be signed with a full access key","TriesToUnstake":"Account {{account_id}} is not yet staked, but tried to unstake","InvalidNonce":"Transaction nonce {{tx_nonce}} must be larger than nonce of the used access key {{ak_nonce}}","AccountAlreadyExists":"Can\'t create a new account {{account_id}}, because it already exists","InvalidChain":"Transaction parent block hash doesn\'t belong to the current chain","AccountDoesNotExist":"Can\'t complete the action because account {{account_id}} doesn\'t exist","MethodNameMismatch":"Transaction method name {{method_name}} isn\'t allowed by the access key","DeleteAccountHasRent":"Account {{account_id}} can\'t be deleted. It has {{#formatNear}}{{balance}}{{/formatNear}}, which is enough to cover the rent","DeleteAccountHasEnoughBalance":"Account {{account_id}} can\'t be deleted. It has {{#formatNear}}{{balance}}{{/formatNear}}, which is enough to cover it\'s storage","InvalidReceiver":"Invalid receiver account ID {{receiver_id}} according to requirements","DeleteKeyDoesNotExist":"Account {{account_id}} tries to remove an access key that doesn\'t exist","Timeout":"Timeout exceeded","Closed":"Connection closed"}')},530785:e=>{"use strict";e.exports=JSON.parse('{"schema":{"BadUTF16":{"name":"BadUTF16","subtypes":[],"props":{}},"BadUTF8":{"name":"BadUTF8","subtypes":[],"props":{}},"BalanceExceeded":{"name":"BalanceExceeded","subtypes":[],"props":{}},"BreakpointTrap":{"name":"BreakpointTrap","subtypes":[],"props":{}},"CacheError":{"name":"CacheError","subtypes":["ReadError","WriteError","DeserializationError","SerializationError"],"props":{}},"CallIndirectOOB":{"name":"CallIndirectOOB","subtypes":[],"props":{}},"CannotAppendActionToJointPromise":{"name":"CannotAppendActionToJointPromise","subtypes":[],"props":{}},"CannotReturnJointPromise":{"name":"CannotReturnJointPromise","subtypes":[],"props":{}},"CodeDoesNotExist":{"name":"CodeDoesNotExist","subtypes":[],"props":{"account_id":""}},"CompilationError":{"name":"CompilationError","subtypes":["CodeDoesNotExist","PrepareError","WasmerCompileError"],"props":{}},"ContractSizeExceeded":{"name":"ContractSizeExceeded","subtypes":[],"props":{"limit":"","size":""}},"Deprecated":{"name":"Deprecated","subtypes":[],"props":{"method_name":""}},"Deserialization":{"name":"Deserialization","subtypes":[],"props":{}},"DeserializationError":{"name":"DeserializationError","subtypes":[],"props":{}},"EmptyMethodName":{"name":"EmptyMethodName","subtypes":[],"props":{}},"FunctionCallError":{"name":"FunctionCallError","subtypes":["CompilationError","LinkError","MethodResolveError","WasmTrap","WasmUnknownError","HostError","EvmError"],"props":{}},"GasExceeded":{"name":"GasExceeded","subtypes":[],"props":{}},"GasInstrumentation":{"name":"GasInstrumentation","subtypes":[],"props":{}},"GasLimitExceeded":{"name":"GasLimitExceeded","subtypes":[],"props":{}},"GenericTrap":{"name":"GenericTrap","subtypes":[],"props":{}},"GuestPanic":{"name":"GuestPanic","subtypes":[],"props":{"panic_msg":""}},"HostError":{"name":"HostError","subtypes":["BadUTF16","BadUTF8","GasExceeded","GasLimitExceeded","BalanceExceeded","EmptyMethodName","GuestPanic","IntegerOverflow","InvalidPromiseIndex","CannotAppendActionToJointPromise","CannotReturnJointPromise","InvalidPromiseResultIndex","InvalidRegisterId","IteratorWasInvalidated","MemoryAccessViolation","InvalidReceiptIndex","InvalidIteratorIndex","InvalidAccountId","InvalidMethodName","InvalidPublicKey","ProhibitedInView","NumberOfLogsExceeded","KeyLengthExceeded","ValueLengthExceeded","TotalLogLengthExceeded","NumberPromisesExceeded","NumberInputDataDependenciesExceeded","ReturnedValueLengthExceeded","ContractSizeExceeded","Deprecated"],"props":{}},"IllegalArithmetic":{"name":"IllegalArithmetic","subtypes":[],"props":{}},"IncorrectCallIndirectSignature":{"name":"IncorrectCallIndirectSignature","subtypes":[],"props":{}},"Instantiate":{"name":"Instantiate","subtypes":[],"props":{}},"IntegerOverflow":{"name":"IntegerOverflow","subtypes":[],"props":{}},"InternalMemoryDeclared":{"name":"InternalMemoryDeclared","subtypes":[],"props":{}},"InvalidAccountId":{"name":"InvalidAccountId","subtypes":[],"props":{"account_id":""}},"InvalidIteratorIndex":{"name":"InvalidIteratorIndex","subtypes":[],"props":{"iterator_index":""}},"InvalidMethodName":{"name":"InvalidMethodName","subtypes":[],"props":{}},"InvalidPromiseIndex":{"name":"InvalidPromiseIndex","subtypes":[],"props":{"promise_idx":""}},"InvalidPromiseResultIndex":{"name":"InvalidPromiseResultIndex","subtypes":[],"props":{"result_idx":""}},"InvalidPublicKey":{"name":"InvalidPublicKey","subtypes":[],"props":{}},"InvalidReceiptIndex":{"name":"InvalidReceiptIndex","subtypes":[],"props":{"receipt_index":""}},"InvalidRegisterId":{"name":"InvalidRegisterId","subtypes":[],"props":{"register_id":""}},"IteratorWasInvalidated":{"name":"IteratorWasInvalidated","subtypes":[],"props":{"iterator_index":""}},"KeyLengthExceeded":{"name":"KeyLengthExceeded","subtypes":[],"props":{"length":"","limit":""}},"LinkError":{"name":"LinkError","subtypes":[],"props":{"msg":""}},"Memory":{"name":"Memory","subtypes":[],"props":{}},"MemoryAccessViolation":{"name":"MemoryAccessViolation","subtypes":[],"props":{}},"MemoryOutOfBounds":{"name":"MemoryOutOfBounds","subtypes":[],"props":{}},"MethodEmptyName":{"name":"MethodEmptyName","subtypes":[],"props":{}},"MethodInvalidSignature":{"name":"MethodInvalidSignature","subtypes":[],"props":{}},"MethodNotFound":{"name":"MethodNotFound","subtypes":[],"props":{}},"MethodResolveError":{"name":"MethodResolveError","subtypes":["MethodEmptyName","MethodUTF8Error","MethodNotFound","MethodInvalidSignature"],"props":{}},"MethodUTF8Error":{"name":"MethodUTF8Error","subtypes":[],"props":{}},"MisalignedAtomicAccess":{"name":"MisalignedAtomicAccess","subtypes":[],"props":{}},"NumberInputDataDependenciesExceeded":{"name":"NumberInputDataDependenciesExceeded","subtypes":[],"props":{"limit":"","number_of_input_data_dependencies":""}},"NumberOfLogsExceeded":{"name":"NumberOfLogsExceeded","subtypes":[],"props":{"limit":""}},"NumberPromisesExceeded":{"name":"NumberPromisesExceeded","subtypes":[],"props":{"limit":"","number_of_promises":""}},"PrepareError":{"name":"PrepareError","subtypes":["Serialization","Deserialization","InternalMemoryDeclared","GasInstrumentation","StackHeightInstrumentation","Instantiate","Memory"],"props":{}},"ProhibitedInView":{"name":"ProhibitedInView","subtypes":[],"props":{"method_name":""}},"ReadError":{"name":"ReadError","subtypes":[],"props":{}},"ReturnedValueLengthExceeded":{"name":"ReturnedValueLengthExceeded","subtypes":[],"props":{"length":"","limit":""}},"Serialization":{"name":"Serialization","subtypes":[],"props":{}},"SerializationError":{"name":"SerializationError","subtypes":[],"props":{"hash":""}},"StackHeightInstrumentation":{"name":"StackHeightInstrumentation","subtypes":[],"props":{}},"StackOverflow":{"name":"StackOverflow","subtypes":[],"props":{}},"TotalLogLengthExceeded":{"name":"TotalLogLengthExceeded","subtypes":[],"props":{"length":"","limit":""}},"Unreachable":{"name":"Unreachable","subtypes":[],"props":{}},"ValueLengthExceeded":{"name":"ValueLengthExceeded","subtypes":[],"props":{"length":"","limit":""}},"WasmTrap":{"name":"WasmTrap","subtypes":["Unreachable","IncorrectCallIndirectSignature","MemoryOutOfBounds","CallIndirectOOB","IllegalArithmetic","MisalignedAtomicAccess","BreakpointTrap","StackOverflow","GenericTrap"],"props":{}},"WasmUnknownError":{"name":"WasmUnknownError","subtypes":[],"props":{}},"WasmerCompileError":{"name":"WasmerCompileError","subtypes":[],"props":{"msg":""}},"WriteError":{"name":"WriteError","subtypes":[],"props":{}},"AccessKeyNotFound":{"name":"AccessKeyNotFound","subtypes":[],"props":{"account_id":"","public_key":""}},"AccountAlreadyExists":{"name":"AccountAlreadyExists","subtypes":[],"props":{"account_id":""}},"AccountDoesNotExist":{"name":"AccountDoesNotExist","subtypes":[],"props":{"account_id":""}},"ActionError":{"name":"ActionError","subtypes":["AccountAlreadyExists","AccountDoesNotExist","CreateAccountOnlyByRegistrar","CreateAccountNotAllowed","ActorNoPermission","DeleteKeyDoesNotExist","AddKeyAlreadyExists","DeleteAccountStaking","LackBalanceForState","TriesToUnstake","TriesToStake","InsufficientStake","FunctionCallError","NewReceiptValidationError","OnlyImplicitAccountCreationAllowed"],"props":{"index":""}},"ActionsValidationError":{"name":"ActionsValidationError","subtypes":["DeleteActionMustBeFinal","TotalPrepaidGasExceeded","TotalNumberOfActionsExceeded","AddKeyMethodNamesNumberOfBytesExceeded","AddKeyMethodNameLengthExceeded","IntegerOverflow","InvalidAccountId","ContractSizeExceeded","FunctionCallMethodNameLengthExceeded","FunctionCallArgumentsLengthExceeded","UnsuitableStakingKey","FunctionCallZeroAttachedGas"],"props":{}},"ActorNoPermission":{"name":"ActorNoPermission","subtypes":[],"props":{"account_id":"","actor_id":""}},"AddKeyAlreadyExists":{"name":"AddKeyAlreadyExists","subtypes":[],"props":{"account_id":"","public_key":""}},"AddKeyMethodNameLengthExceeded":{"name":"AddKeyMethodNameLengthExceeded","subtypes":[],"props":{"length":"","limit":""}},"AddKeyMethodNamesNumberOfBytesExceeded":{"name":"AddKeyMethodNamesNumberOfBytesExceeded","subtypes":[],"props":{"limit":"","total_number_of_bytes":""}},"BalanceMismatchError":{"name":"BalanceMismatchError","subtypes":[],"props":{"final_accounts_balance":"","final_postponed_receipts_balance":"","incoming_receipts_balance":"","incoming_validator_rewards":"","initial_accounts_balance":"","initial_postponed_receipts_balance":"","new_delayed_receipts_balance":"","other_burnt_amount":"","outgoing_receipts_balance":"","processed_delayed_receipts_balance":"","slashed_burnt_amount":"","tx_burnt_amount":""}},"CostOverflow":{"name":"CostOverflow","subtypes":[],"props":{}},"CreateAccountNotAllowed":{"name":"CreateAccountNotAllowed","subtypes":[],"props":{"account_id":"","predecessor_id":""}},"CreateAccountOnlyByRegistrar":{"name":"CreateAccountOnlyByRegistrar","subtypes":[],"props":{"account_id":"","predecessor_id":"","registrar_account_id":""}},"DeleteAccountStaking":{"name":"DeleteAccountStaking","subtypes":[],"props":{"account_id":""}},"DeleteActionMustBeFinal":{"name":"DeleteActionMustBeFinal","subtypes":[],"props":{}},"DeleteKeyDoesNotExist":{"name":"DeleteKeyDoesNotExist","subtypes":[],"props":{"account_id":"","public_key":""}},"DepositWithFunctionCall":{"name":"DepositWithFunctionCall","subtypes":[],"props":{}},"Expired":{"name":"Expired","subtypes":[],"props":{}},"FunctionCallArgumentsLengthExceeded":{"name":"FunctionCallArgumentsLengthExceeded","subtypes":[],"props":{"length":"","limit":""}},"FunctionCallMethodNameLengthExceeded":{"name":"FunctionCallMethodNameLengthExceeded","subtypes":[],"props":{"length":"","limit":""}},"FunctionCallZeroAttachedGas":{"name":"FunctionCallZeroAttachedGas","subtypes":[],"props":{}},"InsufficientStake":{"name":"InsufficientStake","subtypes":[],"props":{"account_id":"","minimum_stake":"","stake":""}},"InvalidAccessKeyError":{"name":"InvalidAccessKeyError","subtypes":["AccessKeyNotFound","ReceiverMismatch","MethodNameMismatch","RequiresFullAccess","NotEnoughAllowance","DepositWithFunctionCall"],"props":{}},"InvalidChain":{"name":"InvalidChain","subtypes":[],"props":{}},"InvalidDataReceiverId":{"name":"InvalidDataReceiverId","subtypes":[],"props":{"account_id":""}},"InvalidNonce":{"name":"InvalidNonce","subtypes":[],"props":{"ak_nonce":"","tx_nonce":""}},"InvalidPredecessorId":{"name":"InvalidPredecessorId","subtypes":[],"props":{"account_id":""}},"InvalidReceiverId":{"name":"InvalidReceiverId","subtypes":[],"props":{"account_id":""}},"InvalidSignature":{"name":"InvalidSignature","subtypes":[],"props":{}},"InvalidSignerId":{"name":"InvalidSignerId","subtypes":[],"props":{"account_id":""}},"InvalidTxError":{"name":"InvalidTxError","subtypes":["InvalidAccessKeyError","InvalidSignerId","SignerDoesNotExist","InvalidNonce","InvalidReceiverId","InvalidSignature","NotEnoughBalance","LackBalanceForState","CostOverflow","InvalidChain","Expired","ActionsValidation"],"props":{}},"LackBalanceForState":{"name":"LackBalanceForState","subtypes":[],"props":{"account_id":"","amount":""}},"MethodNameMismatch":{"name":"MethodNameMismatch","subtypes":[],"props":{"method_name":""}},"NotEnoughAllowance":{"name":"NotEnoughAllowance","subtypes":[],"props":{"account_id":"","allowance":"","cost":"","public_key":""}},"NotEnoughBalance":{"name":"NotEnoughBalance","subtypes":[],"props":{"balance":"","cost":"","signer_id":""}},"OnlyImplicitAccountCreationAllowed":{"name":"OnlyImplicitAccountCreationAllowed","subtypes":[],"props":{"account_id":""}},"ReceiptValidationError":{"name":"ReceiptValidationError","subtypes":["InvalidPredecessorId","InvalidReceiverId","InvalidSignerId","InvalidDataReceiverId","ReturnedValueLengthExceeded","NumberInputDataDependenciesExceeded","ActionsValidation"],"props":{}},"ReceiverMismatch":{"name":"ReceiverMismatch","subtypes":[],"props":{"ak_receiver":"","tx_receiver":""}},"RequiresFullAccess":{"name":"RequiresFullAccess","subtypes":[],"props":{}},"SignerDoesNotExist":{"name":"SignerDoesNotExist","subtypes":[],"props":{"signer_id":""}},"TotalNumberOfActionsExceeded":{"name":"TotalNumberOfActionsExceeded","subtypes":[],"props":{"limit":"","total_number_of_actions":""}},"TotalPrepaidGasExceeded":{"name":"TotalPrepaidGasExceeded","subtypes":[],"props":{"limit":"","total_prepaid_gas":""}},"TriesToStake":{"name":"TriesToStake","subtypes":[],"props":{"account_id":"","balance":"","locked":"","stake":""}},"TriesToUnstake":{"name":"TriesToUnstake","subtypes":[],"props":{"account_id":""}},"TxExecutionError":{"name":"TxExecutionError","subtypes":["ActionError","InvalidTxError"],"props":{}},"UnsuitableStakingKey":{"name":"UnsuitableStakingKey","subtypes":[],"props":{"public_key":""}},"Closed":{"name":"Closed","subtypes":[],"props":{}},"InternalError":{"name":"InternalError","subtypes":[],"props":{}},"ServerError":{"name":"ServerError","subtypes":["TxExecutionError","Timeout","Closed","InternalError"],"props":{}},"Timeout":{"name":"Timeout","subtypes":[],"props":{}}}}')}}]);