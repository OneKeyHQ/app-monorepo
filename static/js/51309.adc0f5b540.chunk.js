"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[51309],{186069:(e,t,n)=>{n.d(t,{Y:()=>useCopyAccountAddress});var r=n(586330),o=n(514041),s=n(490343),a=n(392097),c=n(491180),i=n(610421),u=n(498356),useCopyAccountAddress=function(){var e,t=(0,u.A)(),{copyText:n}=(0,s.useClipboard)();return(0,o.useCallback)((e=(0,r.A)((function*({accountId:e,networkId:r}){if(c.A.isHwAccount({accountId:e})||c.A.isQrAccount({accountId:e})){var o=c.A.getWalletIdFromAccountId({accountId:e});t.pushModal(a.ry.ReceiveModal,{screen:a.MD.ReceiveToken,params:{networkId:r,accountId:e,walletId:o}})}else{var s=yield i.A.serviceAccount.getAccount({accountId:e,networkId:r});n(s.address)}})),function(t){return e.apply(this,arguments)}),[t,n])}},723110:(e,t,n)=>{n.d(t,{j:()=>useFuseSearch});var r=n(324586),o=n(514041),s=n(22937);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var a=["evm","dot","cosmos"],useFuseSearch=function(e){var t=(0,o.useMemo)((function(){return{fuse:(0,s.pl)(e,{keys:["name","impl","symbol","shortname"]}),symbolSet:new Set(e.map((function(e){return e.symbol.toLowerCase()}))),shortnameSet:new Set(e.map((function(e){return e.shortname.toLowerCase()})))}}),[e]);return(0,o.useCallback)((function(e){var n=e.toLowerCase(),{fuse:r,symbolSet:o,shortnameSet:s}=t,c={$or:[{name:`^${e}`},{name:`'${e}`}]};return a.includes(n)&&c.$or?.push({impl:`=${n}`}),o.has(n)&&c.$or?.push({symbol:`=${n}`}),s.has(n)&&c.$or?.push({shortname:`=${n}`}),r.search(c).map((function(e){return _objectSpread(_objectSpread({},e.item),{},{titleMatch:e.matches?.find((function(e){return"name"===e.key}))})}))}),[t])}},51309:(e,t,n)=>{n.r(t),n.d(t,{default:()=>WalletAddressPage});var r=n(586330),o=n(514041),s=n(908867),a=n(490343),c=n(610421),i=n(325809),u=n(353203),d=n(791088),l=n(880590),m=n(498356),f=n(186069),p=n(911998),I=n(723110),w=n(625931),k=n(334439),A=n(392097),y=n(491180),h=n(553083),v=n(714191),b=n(359395),x=n(831085),g=(0,o.createContext)({networkAccountMap:{},networkDeriveTypeMap:{},accountId:"",indexedAccountId:"",refreshLocalData:function(){}}),WalletAddressDeriveTypeItem=function({item:e}){var t=(0,m.A)(),n=(0,s.A)(),{indexedAccountId:r}=(0,o.useContext)(g),{result:i,run:u}=(0,p.yk)((function(){return c.A.serviceAccount.getNetworkAccountsInSameIndexedAccountIdWithDeriveTypes({networkId:e.id,indexedAccountId:r})}),[e.id,r]),f=(0,o.useCallback)((function(){t.push(A.Wj.DeriveTypesAddress,{networkId:e.id,indexedAccountId:r,onUnmounted:u,actionType:b.rI.Copy})}),[t,r,e.id,u]),I=(0,o.useMemo)((function(){var e=n.formatMessage({id:k.ETranslations.copy_address_modal_item_create_address_instruction}),t=i?i.networkAccounts.filter((function(e){return e.account})).length:0;return t>0&&(e=n.formatMessage({id:k.ETranslations.global_count_addresses},{count:t})),e}),[n,i]);return(0,x.jsx)(d.c,{title:e.name,subtitle:I,onPress:f,renderAvatar:(0,x.jsx)(l.vD,{logoURI:e.logoURI,isCustomNetwork:e.isCustomNetwork,networkName:e.name,size:"$10"}),children:(0,x.jsx)(a.Icon,{name:"ChevronRightOutline",color:"$iconSubdued"})})},WalletAddressListItemIcon=function({account:e}){var t;return e?e&&e.address&&(t="Copy3Outline"):t="PlusLargeOutline",t?(0,x.jsx)(a.Icon,{name:e?"Copy3Outline":"PlusLargeOutline",color:"$iconSubdued"}):null},WalletAddressListItem=function({item:e}){var t=(0,s.A)(),[n,c]=(0,o.useState)(!1),i=(0,f.Y)(),p=(0,m.A)(),{networkAccountMap:I,networkDeriveTypeMap:v,indexedAccountId:b,refreshLocalData:j}=(0,o.useContext)(g),{createAddress:S}=(0,u.m)(),C=v[e.id]||"default",_=I[e.id],M=_?y.A.shortenAddress({address:_.address}):t.formatMessage({id:k.ETranslations.copy_address_modal_item_create_address_instruction}),O=(0,o.useCallback)((0,r.A)((function*(){if(_)h.Ay.isLightningNetworkByNetworkId(e.id)?p.pushModal(A.ry.ReceiveModal,{screen:A.MD.CreateInvoice,params:{networkId:e.id,accountId:_.id}}):_&&_.address&&(yield i({accountId:_.id,networkId:e.id}));else try{c(!0);var{walletId:n}=y.A.parseIndexedAccountId({indexedAccountId:b});(yield S({account:{walletId:n,networkId:e.id,indexedAccountId:b,deriveType:C},selectAfterCreate:!1,num:0}))&&(a.Toast.success({title:t.formatMessage({id:k.ETranslations.swap_page_toast_address_generated})}),j())}finally{c(!1)}})),[_,e.id,b,C,t,j,p,i,S]);return e.id===(0,w.V)().btc?(0,x.jsx)(WalletAddressDeriveTypeItem,{item:e}):(0,x.jsx)(d.c,{title:e.name,subtitle:M,renderAvatar:(0,x.jsx)(l.vD,{logoURI:e.logoURI,isCustomNetwork:e.isCustomNetwork,networkName:e.name,size:"$10"}),onPress:O,disabled:n,children:n?(0,x.jsx)(a.Stack,{p:"$0.5",children:(0,x.jsx)(a.Spinner,{})}):(0,x.jsx)(WalletAddressListItemIcon,{account:_})})},WalletAddressContent=function({mainnetItems:e,testnetItems:t,frequentlyUsedNetworks:n}){var r=(0,s.A)(),[c,i]=(0,o.useState)(""),{bottom:u}=(0,a.useSafeAreaInsets)(),d=(0,o.useMemo)((function(){return[...e,...t]}),[e,t]),l=(0,I.j)(d),m=(0,o.useMemo)((function(){var o=c.trim();if(o){var s=l(o);return 0===s.length?[]:[{data:s}]}var a=new Set(n.map((function(e){return e.id}))),filterFrequentlyUsedNetworks=function(e){return e.filter((function(e){return!a.has(e.id)}))},i=filterFrequentlyUsedNetworks(e).reduce((function(e,t){var n=t.name[0].toUpperCase();return e[n]||(e[n]=[]),e[n].push(t),e}),{}),u=Object.entries(i).map((function([e,t]){return{title:e,data:t}})).sort((function(e,t){return e.title.charCodeAt(0)-t.title.charCodeAt(0)})),d=[{data:n},...u];return t.length>0&&d.push({title:r.formatMessage({id:k.ETranslations.global_testnet}),data:filterFrequentlyUsedNetworks(t)}),d}),[e,n,c,t,r,l]),f=(0,o.useCallback)((function(e){return e?.section?.title?(0,x.jsx)(a.SectionList.SectionHeader,{title:e?.section?.title}):(0,x.jsx)(a.Stack,{h:"$3"})}),[]),p=(0,o.useCallback)((function({item:e}){return(0,x.jsx)(WalletAddressListItem,{item:e})}),[]);return(0,x.jsxs)(a.Stack,{flex:1,children:[(0,x.jsx)(a.Stack,{px:"$5",children:(0,x.jsx)(a.SearchBar,{placeholder:r.formatMessage({id:k.ETranslations.form_search_network_placeholder}),value:c,onChangeText:function(e){return i(e)}})}),(0,x.jsx)(a.SectionList,{estimatedItemSize:60,stickySectionHeadersEnabled:!0,sections:m,renderSectionHeader:f,renderItem:p,ListEmptyComponent:(0,x.jsx)(a.Empty,{icon:"SearchOutline",title:r.formatMessage({id:k.ETranslations.global_no_results})}),ListFooterComponent:(0,x.jsx)(a.Stack,{h:u||"$3"})})]})},WalletAddress=function({mainnetItems:e,testnetItems:t,frequentlyUsedNetworks:n}){var r=(0,s.A)();return(0,x.jsxs)(a.Page,{safeAreaEnabled:!1,children:[(0,x.jsx)(a.Page.Header,{title:r.formatMessage({id:k.ETranslations.copy_address_modal_title})}),(0,x.jsx)(a.Page.Body,{children:(0,x.jsx)(WalletAddressContent,{testnetItems:t,mainnetItems:e,frequentlyUsedNetworks:n})})]})};function WalletAddressPage({route:e}){var{accountId:t,walletId:n,indexedAccountId:s}=e.params,{result:a,run:u}=(0,p.yk)((0,r.A)((function*(){var e=yield c.A.serviceNetwork.getChainSelectorNetworksCompatibleWithAccountId({accountId:t,walletId:n}),r=Array.from(new Set([...e.mainnetItems,...e.testnetItems,...e.frequentlyUsedItems].map((function(e){return e.id}))));return{networksAccount:yield c.A.serviceAccount.getNetworkAccountsInSameIndexedAccountId({networkIds:r,indexedAccountId:s}),networks:e}})),[t,s,n],{initResult:{networksAccount:[],networks:{mainnetItems:[],testnetItems:[],unavailableItems:[],frequentlyUsedItems:[]}}}),d=(0,o.useMemo)((function(){for(var e={},n={},r=0;r<a.networksAccount.length;r+=1){var o=a.networksAccount[r],{network:c,account:i,accountDeriveType:d}=o;i&&(e[c.id]=i),n[c.id]=d}return{networkAccountMap:e,networkDeriveTypeMap:n,accountId:t,indexedAccountId:s,refreshLocalData:u}}),[a.networksAccount,s,t,u]);return(0,x.jsx)(i.b8,{config:{sceneName:v.Zs.home,sceneUrl:""},enabledNum:[0],children:(0,x.jsx)(g.Provider,{value:d,children:(0,x.jsx)(WalletAddress,{testnetItems:a.networks.testnetItems,mainnetItems:a.networks.mainnetItems,frequentlyUsedNetworks:a.networks.frequentlyUsedItems})})})}}}]);