"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[70229],{98807:(e,t,r)=>{r.d(t,{Bc:()=>u,N:()=>BatchCreateAccountFormBase});var n=r(514041),o=r(241440),a=r(908867),i=r(490343),s=r(334439),c=r(553083),l=r(831085),u=15,d=100,f=2**31,g=f+1-15;function AdvancedSettingsFormField({form:e,isAllNetwork:t,alwaysShowAdvancedSettings:r}){var c=(0,a.A)(),u=(0,i.useMedia)(),[d,f]=(0,n.useState)(!r),m=(0,n.useCallback)((function(){f((function(e){return!e}))}),[]),b=e.watch("from"),p=e.watch("count"),h=e.formState.errors.from,v=(0,n.useMemo)((function(){if(!b||!p)return"";var e=parseInt(b,10),t=e+parseInt(p,10)-1;return`${c.formatMessage({id:s.ETranslations.global_serial_number_start_desc},{from:e,to:t})}`}),[p,b,c]);return(0,l.jsxs)(i.Stack,{children:[r?null:(0,l.jsxs)(i.XStack,{gap:"$3",py:"$2",ai:"center",onPress:m,children:[(0,l.jsx)(i.Stack,{children:(0,l.jsx)(i.SizableText,{size:"$bodyMdMedium",color:"$textSubdued",children:c.formatMessage({id:s.ETranslations.global_advantage_settings})})}),(0,l.jsx)(i.IconButton,{icon:d?"ChevronDownSmallOutline":"ChevronTopSmallOutline",variant:"tertiary",onPress:m})]}),(0,l.jsx)(i.Stack,{width:d?0:void 0,height:d?0:void 0,opacity:d?0:void 0,overflow:d?"hidden":void 0,children:(0,l.jsx)(i.Stack,{mt:r?void 0:"$4",children:(0,l.jsxs)(i.Form.Field,{label:c.formatMessage({id:s.ETranslations.global_serial_number_start}),name:"from",rules:{required:!0,validate:function(e){var t=new o.A(e);return!e||t.isNaN()?c.formatMessage({id:s.ETranslations.global_bulk_accounts_page_number_error}):!t.isLessThan(1)||"The minimum number of accounts is 1"},onChange:function(t){var r=(t?.target?.value||"").replace(/\D/g,""),n=new o.A(parseInt(r,10));r&&!n.isNaN()?n.isLessThan(1)?e.setValue("from","1"):n.isGreaterThanOrEqualTo(g)?e.setValue("from",g.toString()):e.setValue("from",n.toFixed()):e.setValue("from","")}},children:[(0,l.jsx)(i.Input,{secureTextEntry:!1,placeholder:c.formatMessage({id:s.ETranslations.global_serial_number_start}),size:u.gtMd?"medium":"large"}),h?null:(0,l.jsx)(i.Form.FieldDescription,{children:v})]})})})]})}function BatchCreateAccountFormBase({alwaysShowAdvancedSettings:e,networkReadyOnly:t,defaultCount:r,defaultDeriveType:g,defaultFrom:m,defaultNetworkId:b,onNetworkChanged:p,formRef:h}){var v=(0,a.A)(),w=(0,i.useMedia)(),y=(0,i.useForm)({values:{networkId:b,deriveType:g,from:m,count:r},mode:"onChange",reValidateMode:"onChange"});h&&(h.current=y);var x=y.watch("networkId"),j=(0,n.useMemo)((function(){return c.Ay.isAllNetwork({networkId:x})}),[x]);return(0,n.useEffect)((function(){p?.({networkId:x,isAllNetwork:j})}),[j,x,p]),(0,l.jsxs)(i.Form,{form:y,children:[(0,l.jsx)(i.Form.Field,{label:v.formatMessage({id:s.ETranslations.global_generate_amount}),name:"count",rules:{required:!0,validate:function(e,t){var r=new o.A(e);if(!e||r.isNaN())return v.formatMessage({id:s.ETranslations.global_bulk_accounts_page_number_error});var n=j?u:d;if(t.from){var a=new o.A(t.from);if(!a.isNaN()){var i=f+1-a.toNumber();n=Math.min(n,i)}}return r.isGreaterThan(n)?v.formatMessage({id:s.ETranslations.global_generate_amount_information},{max:n}):!r.isLessThan(1)||"The minimum number of accounts is 1"},onChange:function(e){var t=(e?.target?.value||"").replace(/\D/g,""),r=new o.A(parseInt(t,10));t&&!r.isNaN()?r.isLessThan(1)?y.setValue("count","1"):y.setValue("count",r.toFixed()):y.setValue("count","")}},children:(0,l.jsx)(i.Input,{secureTextEntry:!1,testID:"account-generate-amount-input",placeholder:v.formatMessage({id:s.ETranslations.global_generate_amount}),size:w.gtMd?"medium":"large"})}),(0,l.jsx)(AdvancedSettingsFormField,{form:y,alwaysShowAdvancedSettings:e,isAllNetwork:j})]})}},670229:(e,t,r)=>{r.r(t),r.d(t,{default:()=>BatchCreateAccountPreview});var n=r(324586),o=r(503668),a=r.n(o),i=r(586330),s=r(514041),c=r(908867),l=r(578104),u=r(490343),d=r(610421),f=r(325809),g=r(575995),m=r(498356),b=r(911998),p=r(162616),h=r(625931),v=r(334439),w=r(948675),y=(r(663522),r(491180)),x=r(825145),j=r(553083),C=r(584186),S=r(714191),A=r(98807),I=r(839850),P=r(849726),k=r(831085),O=["networkId","defaultDeriveType","defaultFrom","defaultCount","onSubmit"];function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function DialogContentView({defaultDeriveType:e,defaultFrom:t,defaultCount:r,networkId:n,onSubmit:o}){var a,c=(0,s.useRef)(void 0);return(0,k.jsxs)(u.Stack,{children:[(0,k.jsx)(A.N,{networkReadyOnly:!0,alwaysShowAdvancedSettings:!0,defaultNetworkId:n,defaultDeriveType:e,defaultFrom:t,defaultCount:r||String(A.Bc),formRef:c}),(0,k.jsx)(u.Dialog.Footer,{showCancelButton:!1,onConfirm:(a=(0,i.A)((function*({preventClose:e,close:t}){var r;e(),Object.keys(c?.current?.formState?.errors||{}).length>0||(yield c?.current?.handleSubmit((r=(0,i.A)((function*(e){yield o?.(e),yield t()})),function(e){return r.apply(this,arguments)}))())})),function(e){return a.apply(this,arguments)})})]})}function showBatchCreateAccountPreviewAdvancedDialog(e){var{networkId:t,defaultDeriveType:r,defaultFrom:o,defaultCount:a,onSubmit:i}=e,s=(0,I.A)(e,O);u.Dialog.show(function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({title:P.a.intl.formatMessage({id:v.ETranslations.global_advanced}),renderContent:(0,k.jsx)(DialogContentView,{defaultDeriveType:r,defaultFrom:o,defaultCount:a,networkId:t,onSubmit:i})},s))}var T=["page","onSubmit"];function PreviewPageNumberDialog_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function DialogInput({testID:e,value:t,onChange:r,placeholder:n}){return(0,k.jsx)(u.Input,{size:"large",testID:e,$gtMd:{size:"medium"},autoFocus:!0,selectTextOnFocus:!0,value:t,placeholder:n,onChangeText:r})}function showBatchCreateAccountPreviewPageNumberDialog(e){var t,{page:r,onSubmit:o}=e,a=(0,I.A)(e,T);u.Dialog.show(function PreviewPageNumberDialog_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?PreviewPageNumberDialog_ownKeys(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PreviewPageNumberDialog_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({title:P.a.intl.formatMessage({id:v.ETranslations.global_bulk_accounts_page_number}),renderContent:(0,k.jsx)(u.Dialog.Form,{formProps:{values:{page:r}},children:(0,k.jsx)(u.Dialog.FormField,{name:"page",rules:{required:!0},children:(0,k.jsx)(DialogInput,{testID:"batch-create-account-preview-page-number-input",placeholder:String(r)})})}),onConfirm:(t=(0,i.A)((function*({getForm:e,close:t}){var r=e();yield o(r?.getValues()),yield t()})),function onConfirm(e){return t.apply(this,arguments)})},a))}var D=r(107442);function BatchCreateAccountPreview_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function BatchCreateAccountPreview_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?BatchCreateAccountPreview_ownKeys(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BatchCreateAccountPreview_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function DeriveTypeTrigger({onPress:e}){return(0,k.jsx)(u.XStack,{role:"button",userSelect:"none",alignItems:"center",px:"$2",py:"$2",borderRadius:"$full",hoverStyle:{bg:"$bgHover"},pressStyle:{bg:"$bgActive"},onPress:e,children:(0,k.jsx)(u.Icon,{name:"BranchesOutline",color:"$iconSubdued",size:"$6"})})}var _=(0,s.memo)(DeriveTypeTrigger);function BatchCreateAccountPreviewPage({walletId:e,defaultNetworkId:t,defaultFrom:r,defaultCount:n,defaultIsAdvancedMode:o}){var[,S]=(0,p.UZ)(),{result:I}=(0,b.yk)((0,i.A)((function*(){var{networkIdsCompatible:t}=yield d.A.serviceNetwork.getNetworkIdsCompatibleWithWalletId({walletId:e});return t})),[e],{initResult:void 0}),[P,O]=(0,s.useState)(t),[T,$]=(0,s.useState)(null!=o&&o),[B,M]=(0,s.useState)(null!=r?r:"1"),[E,F]=(0,s.useState)(null!=n?n:String(A.Bc)),N=(0,s.useMemo)((function(){return T?parseInt(B,10):1}),[B,T]),z=(0,s.useMemo)((function(){return T?parseInt(E,10):2**31}),[E,T]),[R,L]=(0,s.useState)({}),[V,K]=(0,s.useState)({}),G=(0,s.useMemo)((function(){return Object.values(V).filter(Boolean).length}),[V]),[W,H]=(0,s.useState)(1),U=(0,s.useMemo)((function(){return Math.ceil(z/10)}),[z]),[q,X]=(0,s.useState)(),[Y,Z]=(0,s.useState)(),Q=(0,s.useMemo)((function(){return!j.Ay.getDefaultDeriveTypeVisibleNetworks().includes(P)}),[P]),J=(0,s.useMemo)((function(){if(Y)return Y.find((function(e){return e.value===q}))}),[q,Y]),ee=(0,c.A)(),te=(0,u.useMedia)(),re=(0,m.A)(),ne=(0,s.useCallback)((function(e){if(e=parseInt(String(e),10),Number.isInteger(e))return H(e<1?1:e>U?U:e);u.Toast.error({title:ee.formatMessage({id:v.ETranslations.global_bulk_accounts_page_number_error})})}),[ee,U]),oe=(0,s.useCallback)((function(e){H(1),L({}),K({}),M(e.from),F(e.count),X(e.deriveType),$(!0)}),[]),ae=N-1,ie=ae+z-1,se=(0,s.useRef)(0),{result:ce}=(0,b.yk)((function(){return d.A.serviceNetwork.getNetwork({networkId:P})}),[P]),[le,ue]=(0,s.useState)({}),de=(0,s.useRef)(le);de.current=le;var{result:fe=[],isLoading:ge,setResult:me}=(0,b.yk)((0,i.A)((function*(){try{if(w.U.account.accountCreatePerf.createAddressRunStart(),!q)return[];se.current+=1;var t=N-1+10*(W-1),r=Math.min(ie,t+10-1),n=yield d.A.serviceBatchCreateAccount.buildIndexesByFromAndTo({fromIndex:t,toIndex:r}),{accountsForCreate:o}=yield d.A.serviceBatchCreateAccount.batchBuildAccounts({walletId:e,networkId:P,deriveType:q,indexes:n,saveToDb:!1});return o}catch(e){throw se.current,e}finally{w.U.account.accountCreatePerf.createAddressRunFinished()}})),[q,ie,N,P,W,e],{watchLoading:!0,debounced:300});(0,s.useEffect)((function(){P&&(X(void 0),me([]))}),[P,me]);var be=(0,s.useCallback)((function({account:e}){return`${P}--${e.displayAddress||e.address}--${e.xpub}`}),[P]),pe=(0,l.YQ)((0,i.A)((function*(){var e,t=[];for(var r of fe){var n=be({account:r});a()(de.current[n])&&t.push(r)}if(t.length){var o={};yield Promise.all(t.map((e=(0,i.A)((function*(e){try{var t=yield d.A.serviceAccountProfile.fetchAccountNativeBalance({account:e,networkId:P});o[be({account:e})]=t.balanceParsed}catch(e){}})),function(t){return e.apply(this,arguments)}))),Object.keys(o).length&&ue((function(e){return BatchCreateAccountPreview_objectSpread(BatchCreateAccountPreview_objectSpread({},e),o)}))}})),600);(0,s.useEffect)((function(){fe&&be&&P&&pe()}),[fe,be,P,pe]);var he=(0,s.useCallback)((function({val:e,accountsToSelect:t}){T?(!0===e&&L((function(e){for(var r of t){var n;if(!r.existsInDb)delete e[null!=(n=r.pathIndex)?n:-1]}return BatchCreateAccountPreview_objectSpread({},e)})),!1===e&&L((function(e){var r=BatchCreateAccountPreview_objectSpread({},e);for(var n of t){var o;if(!n.existsInDb)r[null!=(o=n.pathIndex)?o:-1]=!0}return r}))):K((function(r){var n=BatchCreateAccountPreview_objectSpread({},r);for(var o of t){var a;if(!o.existsInDb)n[null!=(a=o.pathIndex)?a:-1]=!!e}return n}))}),[T]),ve=(0,s.useCallback)((function(){return(0,k.jsxs)(u.Stack,{flexDirection:"row",alignItems:"center",children:[Q&&J&&Y&&Y?.length>1?(0,k.jsx)(u.Popover,{title:ee.formatMessage({id:v.ETranslations.derivation_path}),renderContent:(0,k.jsxs)(u.Stack,{px:"$4",py:"$5",pt:0,$gtMd:{pt:"$5"},children:[(0,k.jsx)(u.SizableText,{size:"$bodyLg",mb:"$5",children:ee.formatMessage({id:v.ETranslations.global_generate_amount_select_path})}),(0,k.jsx)(u.Divider,{}),(0,k.jsx)(u.Stack,{mt:"$5",children:(0,k.jsx)(u.Select.Item,{label:J.label,description:J.description})})]}),renderTrigger:(0,k.jsx)(_,{})}):null,(0,k.jsx)(g.l$,{visibleOnNetworks:j.Ay.getDefaultDeriveTypeVisibleNetworks(),hideIfItemsLTEOne:!0,value:q,onItemsChange:Z,onChange:function(e){q!==e&&X(e)},networkId:P||"",defaultTriggerInputProps:{size:te.gtMd?"medium":"large"},renderTrigger:DeriveTypeTrigger}),(0,k.jsx)(f.YS,{value:P,networkIds:I,onChange:O,excludeAllNetworkItem:!0,miniMode:!0,borderWidth:0,hitSlop:{left:8,top:8,right:8,bottom:8},mr:"$-2",px:"$2",py:"$2",borderRadius:"$full",hoverStyle:{bg:"$bgHover"},pressStyle:{bg:"$bgActive"},$gtMd:{borderRadius:"$full",py:"$2"}})]})}),[J,q,Y,ee,te.gtMd,P,Q,I]),we=(0,s.useMemo)((function(){return T?z-Object.values(R).filter(Boolean).length:G}),[R,z,T,G]),ye=(0,s.useMemo)((function(){return we>0?` (${we})`:""}),[we]),xe=(0,s.useCallback)((function(e){return P===(0,h.V)().dnx?"":e.relPath?`/${e.relPath.replace(/^\/+/,"")}`:""}),[P]),je=(0,s.useCallback)((function(e){var t,r,n=null!=(t=e.pathIndex)?t:-1,o=!1;T?(o=!0,!0===R?.[n]&&(o=!1)):o=null!=(r=V[n])&&r;return e.existsInDb&&(o="indeterminate"),o}),[R,T,V]),Ce=(0,s.useMemo)((function(){return[{title:ee.formatMessage({id:v.ETranslations.global_generate_amount_number}),titleProps:{size:"$bodyMd",color:"$textDisabled"},columnProps:{flexGrow:2,flexBasis:0},dataIndex:"checkBox",columnWidth:22,render:function(e,t){var r,n=je(t);return(0,k.jsx)(u.Checkbox,{testID:`batch-create-account-checkbox-${t.pathIndex||""}`,containerProps:{flex:1},disabled:t.existsInDb,value:n,onChange:function(e){he({val:e,accountsToSelect:[t]})},label:String((null!=(r=t.pathIndex)?r:0)+1),labelProps:{size:"$bodyMd",numberOfLines:10}})}},{title:ee.formatMessage({id:v.ETranslations.global_generate_amount_address}),titleProps:{size:"$bodyMd",color:"$textDisabled"},align:"left",dataIndex:"address",columnProps:{flexGrow:6,flexBasis:0},render:function(e,t){return(0,k.jsxs)(u.YStack,{py:"$1",children:[(0,k.jsx)(u.SizableText,{size:"$bodyMd",children:y.A.shortenAddress({address:t.displayAddress||t.address})}),(0,k.jsxs)(u.SizableText,{size:"$bodyMd",color:"$textSubdued",children:[t.path,xe(t)]})]})}},{title:ee.formatMessage({id:v.ETranslations.global_generate_amount_balance}),titleProps:{size:"$bodyMd",color:"$textDisabled"},align:"right",dataIndex:"balance",columnProps:{flexGrow:2,flexBasis:0},render:function(e,t){var r;return(0,k.jsx)(u.NumberSizeableText,{size:"$bodyMd",formatter:"balance",style:{textAlign:"right",wordBreak:"break-all"},formatterOptions:{tokenSymbol:ce?.symbol},children:null!=(r=le[be({account:t})])?r:"-"})}}]}),[le,be,xe,je,ee,ce?.symbol,he]),Se=(0,s.useCallback)((function(e){return{onPress:function(){var t=je(e);"indeterminate"!==t&&he({val:!t,accountsToSelect:[e]})}}}),[je,he]),Ae=(0,s.useMemo)((function(){return[G,le]}),[G,le]);return(0,k.jsxs)(u.Page,{scrollEnabled:!0,safeAreaEnabled:!0,children:[(0,k.jsx)(u.Page.Header,{title:ee.formatMessage({id:v.ETranslations.send_preview_button}),dismissOnOverlayPress:!1,headerRight:ve}),(0,k.jsx)(u.Page.Body,{children:(0,k.jsx)(u.Table,{onRow:Se,rowProps:{gap:"$4",px:"$3",mx:"$2",minHeight:"$12"},estimatedItemSize:"$12",headerRowProps:{py:"$2",minHeight:36},dataSource:ge?[]:fe,columns:Ce,TableEmptyComponent:(0,k.jsx)(u.Stack,{testID:"batch-create-account-preview-loading-icon",py:"$20",flexDirection:"column",justifyContent:"center",alignItems:"center",children:(0,k.jsx)(u.Spinner,{size:"large"})}),extraData:Ae})}),(0,k.jsx)(u.Page.Footer,{children:(0,k.jsx)(u.Page.FooterActions,{onConfirmText:`${ee.formatMessage({id:v.ETranslations.global_confirm})}${ye}`,confirmButtonProps:{disabled:!!ge||we<=0},onConfirm:(0,i.A)((function*(){if(q){var t,r;if(T?t={walletId:e,networkId:P,deriveType:q,fromIndex:ae,toIndex:ie,excludedIndexes:R,saveToDb:!0,hideCheckingDeviceLoading:!0,showUIProgress:!0}:r={walletId:e,networkId:P,deriveType:q,indexes:Object.entries(V).filter((function([,e]){return e})).map((function([e]){return parseInt(e,10)})),saveToDb:!0,hideCheckingDeviceLoading:!0,showUIProgress:!0},!r&&!t)throw new Error("startBatchCreateAccountsFlow params is undefined");(0,D.g)({navigation:re}),yield C.A.wait(600);var n=yield d.A.serviceBatchCreateAccount.startBatchCreateAccountsFlow(T?{mode:"advanced",params:(0,x.wT)(t)}:{mode:"normal",params:(0,x.wT)(r)});n?.accountsForCreate&&S(!1)}})),children:(0,k.jsxs)(u.Stack,{$gtMd:{mr:"$3",flex:1},$md:{mb:"$3"},flexDirection:"row",alignItems:"center",children:[(0,k.jsx)(u.Stack,{children:(0,k.jsx)(u.Checkbox,{onChange:function(e){he({val:e,accountsToSelect:fe})},label:ee.formatMessage({id:v.ETranslations.global_generate_amount_select}),value:function(){var e=fe.filter((function(e){return!e.existsInDb}));if(0===e.length)return"indeterminate";if(T){var t=e.filter((function(e){var t;return!0===R?.[null!=(t=e.pathIndex)?t:-1]}));return 0===t.length||t.length!==e.length&&"indeterminate"}var r=e.filter((function(e){var t;return!0===V[null!=(t=e.pathIndex)?t:-1]}));return 0!==r.length&&(r.length===e.length||"indeterminate")}()})}),(0,k.jsx)(u.Stack,{flex:1}),(0,k.jsx)(u.IconButton,{icon:"SliderThreeOutline",mr:"$3",borderRadius:"$2",onPress:(0,i.A)((function*(){showBatchCreateAccountPreviewAdvancedDialog({networkId:P,defaultFrom:B,defaultCount:E,defaultDeriveType:q,onSubmit:e=>(0,i.A)((function*(){e&&oe(e)}))()})}))}),(0,k.jsxs)(u.ButtonGroup,{disabled:ge,children:[(0,k.jsx)(u.ButtonGroup.Item,{testID:"batch-create-account-preview-page-prev",opacity:1,onPress:function(){ne(Math.max(1,W-1))},maxWidth:42,disabled:W<2,children:(0,k.jsx)(u.Icon,{name:"ChevronLeftSmallOutline",ml:"$1",size:"$5",style:{transform:"scale(1.4)"},opacity:W<2||ge?.5:void 0})}),(0,k.jsx)(u.ButtonGroup.Item,{testID:"batch-create-account-preview-page-number",opacity:1,onPress:function(){var e;showBatchCreateAccountPreviewPageNumberDialog({page:W,confirmButtonProps:{testID:"batch-create-account-preview-page-number-confirm-button"},onSubmit:(e=(0,i.A)((function*(e){a()(e?.page)||ne(e.page)})),function onSubmit(t){return e.apply(this,arguments)})})},children:(0,k.jsx)(u.Stack,{height:38,justifyContent:"center",children:(0,k.jsx)(u.SizableText,{lineHeight:38,opacity:ge?.5:void 0,size:"$bodyLgMedium",children:W})})}),(0,k.jsx)(u.ButtonGroup.Item,{testID:"batch-create-account-preview-page-next",opacity:1,onPress:function(){ne(W+1)},maxWidth:42,children:(0,k.jsx)(u.Icon,{style:{transform:"scale(1.4)"},name:"ChevronRightSmallOutline",mr:"$1",opacity:ge?.5:void 0})})]})]})})})]})}function BatchCreateAccountPreview({route:e}){var{walletId:t,networkId:r,from:n,count:o}=e.params;return(0,k.jsx)(f.b8,{enabledNum:[0],config:{sceneName:S.Zs.home,sceneUrl:""},children:(0,k.jsx)(BatchCreateAccountPreviewPage,{walletId:t,defaultNetworkId:r,defaultCount:o,defaultFrom:n})})}},107442:(e,t,r)=>{r.d(t,{g:()=>showBatchCreateAccountProcessingDialog});var n=r(324586),o=r(839850),a=r(586330),i=r(514041),s=r(908867),c=r(490343),l=r(610421),u=r(318822),d=r(334439),f=(r(663522),r(831085)),g=["navigation","allNetworkInfo"];function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ProcessingDialogContent({navigation:e,allNetworkInfo:t}){var r,n,o,g,m=(0,s.A)(),[b,p]=(0,i.useState)(void 0),h=(0,i.useMemo)((function(){return Boolean(b&&b?.progressCurrent===b?.progressTotal)}),[b]),v=(0,i.useMemo)((function(){return Boolean(b&&!!b?.error)}),[b]),[w,y]=(0,i.useState)(!1);(0,i.useEffect)((function(){var cb=function(e){p(e)};return u.iL.on(u.Tu.BatchCreateAccount,cb),function(){u.iL.off(u.Tu.BatchCreateAccount,cb)}}),[]);var x,j=h||w||v;return(0,f.jsxs)(c.Stack,{children:[(0,f.jsx)(c.Stack,{py:"$2.5",px:"$5",gap:"$5",flex:1,alignItems:"center",justifyContent:"center",children:(0,f.jsxs)(c.Stack,{flex:1,alignItems:"center",justifyContent:"center",alignSelf:"center",w:"100%",maxWidth:"$80",children:[h?(0,f.jsx)(c.Icon,{name:"CheckRadioSolid",size:"$12",color:"$iconSuccess"}):null,!w&&!v||h?null:(0,f.jsx)(c.Icon,{name:"XCircleSolid",size:"$12",color:"$iconCritical"}),j?null:(0,f.jsx)(c.Progress,{mt:"$4",w:"100%",size:"medium",value:Math.ceil((null!=(r=b?.progressCurrent)?r:0)/(null!=(n=b?.progressTotal)?n:1)*100)}),(0,f.jsx)(c.SizableText,{mt:"$5",size:"$bodyLg",textAlign:"center",children:m.formatMessage({id:d.ETranslations.global_bulk_accounts_loading},{amount:null!=(o=b?.progressCurrent)?o:0})}),t?(0,f.jsx)(c.SizableText,{size:"$bodyLg",textAlign:"center",children:m.formatMessage({id:d.ETranslations.global_bulk_accounts_loading_subtitle},{amount:null!=(g=t.count)?g:0})}):null,null]})}),(0,f.jsx)(c.Dialog.Footer,{showCancelButton:!1,showConfirmButton:!0,confirmButtonProps:{variant:j?"primary":"secondary",testID:"process-dialog-confirm-button"},onConfirmText:j?m.formatMessage({id:d.ETranslations.global_done}):m.formatMessage({id:d.ETranslations.global_cancel}),onConfirm:j?(0,a.A)((function*(){w||e?.popStack(),yield l.A.serviceBatchCreateAccount.cancelBatchCreateAccountsFlow()})):(x=(0,a.A)((function*({preventClose:e}){e(),y(!0),yield l.A.serviceBatchCreateAccount.cancelBatchCreateAccountsFlow()})),function(e){return x.apply(this,arguments)})})]})}function showBatchCreateAccountProcessingDialog(e){var{navigation:t,allNetworkInfo:r}=e,a=(0,o.A)(e,g);c.Dialog.show(function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({showExitButton:!1,dismissOnOverlayPress:!1,onCancel(){l.A.serviceBatchCreateAccount.cancelBatchCreateAccountsFlow()},onClose(){l.A.serviceBatchCreateAccount.cancelBatchCreateAccountsFlow()},renderContent:(0,f.jsx)(ProcessingDialogContent,{allNetworkInfo:r,navigation:t})},a))}}}]);