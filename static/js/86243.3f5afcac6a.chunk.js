"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[86243],{686243:(e,t,r)=>{r.r(t),r.d(t,{default:()=>TokenSelectorModal});var o=r(324586),n=r(586330),c=r(514041),a=r(654266),i=r(908867),s=r(578104),l=r(490343),d=r(610421),u=r(106049),p=r(498356),k=r(384013),f=r(227428),b=r(334439),w=r(491180),y=r(714191),j=r(325809),v=r(353203),O=r(298254),I=r(918120),h=r(831085);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,o.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var g=0;function TokenSelector(){var e,t,r=(0,i.A)(),{updateTokenSelectorSearchKey:o,updateTokenSelectorSearchTokenState:y,refreshTokenSelectorSearchTokenList:j,updateCreateAccountState:I}=(0,k.WE)().current,g=(0,a.lq)(),A=(0,p.A)(),{createAddress:S}=(0,v.m)(),{title:m,networkId:P,accountId:T,closeAfterSelect:_=!0,onSelect:x,searchAll:N,isAllNetworks:D,searchPlaceholder:E,footerTipText:C}=g.params,{network:H,account:K}=(0,O.b)({networkId:P,accountId:T}),[L]=(0,k._N)(),M=(0,c.useCallback)((e=(0,n.A)((function*(e){if(H?.isAllNetworks){var t;e.networkId&&(t=yield d.A.serviceNetwork.getVaultSettings({networkId:e.networkId}));var r=[];try{if((e.accountId||K?.id)&&(e.networkId||H?.id)){var o,n,c,a,i,s=e.accountId?{accountId:null!=(o=e.accountId)?o:"",networkId:null!=(n=e.networkId)?n:""}:{accountId:null!=(c=K?.id)?c:"",networkId:null!=(a=H?.id)?a:""};if(e.accountId&&e.networkId){var l,u,p=yield d.A.serviceAccount.getAccount({accountId:null!=(l=e.accountId)?l:"",networkId:null!=(u=e.networkId)?u:""});i=(yield d.A.serviceNetwork.getDeriveTypeByTemplate({networkId:e.networkId,template:p.template})).deriveType}var{accountsInfo:k}=yield d.A.serviceAllNetwork.getAllNetworkAccounts(_objectSpread(_objectSpread({},s),{},{includingNonExistingAccount:!0,deriveType:i}));r=k}}catch{}var f=r.find((function(t){return e.accountId?t.accountId===e.accountId:t.networkId===e.networkId}));if(t?.mergeDeriveAssetsEnabled||f?.accountId)x?.(f?.accountId?_objectSpread(_objectSpread({},e),{},{accountId:f.accountId}):e);else if(K){I({isCreating:!0,token:e});var b=w.A.getWalletIdFromAccountId({accountId:K.id});try{var y=yield S({num:0,account:{walletId:b,networkId:e.networkId,indexedAccountId:K.indexedAccountId,deriveType:"default"}});I({isCreatingAccount:!1,token:null}),y&&x?.(_objectSpread(_objectSpread({},e),{},{accountId:y.accounts[0]?.id}))}catch(e){I({isCreatingAccount:!1,token:null})}}}else x?.(e);_&&A.pop()})),function(t){return e.apply(this,arguments)}),[K,_,S,A,H?.id,H?.isAllNetworks,x,I]),W=(0,s.YQ)(o,N?1e3:200),B=(0,c.useMemo)((function(){return{placeholder:null!=E?E:r.formatMessage({id:b.ETranslations.send_token_selector_search_placeholder}),onChangeText:function({nativeEvent:e}){W(e.text)}}}),[W,r,E]),U=(0,c.useCallback)((t=(0,n.A)((function*(e){y({isSearching:!0}),yield d.A.serviceToken.abortSearchTokens();try{var t=yield d.A.serviceToken.searchTokens({accountId:T,networkId:P,keywords:e});j({tokens:t})}catch(e){}y({isSearching:!1})})),function(e){return t.apply(this,arguments)}),[T,P,j,y]);return(0,c.useEffect)((function(){N&&L&&L.length>=f.NZ?U(L):(y({isSearching:!1}),j({tokens:[]}),d.A.serviceToken.abortSearchTokens())}),[j,N,L,U,y]),(0,h.jsxs)(l.Page,{safeAreaEnabled:!1,onClose:function(){return o("")},onUnmounted:function(){return o("")},children:[(0,h.jsx)(l.Page.Header,{title:null!=m?m:r.formatMessage({id:b.ETranslations.global_select_crypto}),headerSearchBarOptions:B}),(0,h.jsx)(l.Page.Body,{children:(0,h.jsx)(u.x,{withPresetVerticalPadding:!1,onPressToken:M,isAllNetworks:null!=D?D:H?.isAllNetworks,withNetwork:null!=D?D:H?.isAllNetworks,searchAll:N,isTokenSelector:!0,footerTipText:C})})]})}function TokenSelectorModal(){var e=(0,a.lq)(),{accountId:t}=e.params;return(0,h.jsx)(j.b8,{config:{sceneName:y.Zs.home},enabledNum:[g],children:(0,h.jsx)(I.m,{accountId:t,children:(0,h.jsx)(TokenSelector,{})})})}},918120:(e,t,r)=>{r.d(t,{m:()=>HomeTokenListProviderMirrorWrapper});var o=r(324586),n=r(839850),c=r(491180),a=r(208257),i=r(514041),s=r(641106),l=r(727476),d=r(831085);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,o.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var u=(0,i.memo)((function(e){var t=(0,l.y)();return(0,d.jsx)(s.m,_objectSpread(_objectSpread({},e),{},{data:t}))}));u.displayName="UrlAccountHomeTokenListProviderMirror";var p=["accountId"];function HomeTokenListProvider_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function HomeTokenListProvider_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?HomeTokenListProvider_ownKeys(Object(r),!0).forEach((function(t){(0,o.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HomeTokenListProvider_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function HomeTokenListProviderMirrorWrapper(e){var{accountId:t}=e,r=(0,n.A)(e,p);return c.A.isUrlAccountFn({accountId:t})?(0,d.jsx)(u,HomeTokenListProvider_objectSpread({},r)):(0,d.jsx)(a.p,HomeTokenListProvider_objectSpread({},r))}}}]);