"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[93597],{802172:(e,t,r)=>{r.d(t,{m:()=>l});var n=r(324586),a=r(514041),o=r(2577),i=r(597102),s=r(310944),c=r(907481),u=r(831085);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var l=(0,a.memo)((function(e){var{children:t,storeName:r}=e,n=(0,c.z)(r),a=o.A.getOrCreateStore(n);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(i.H,_objectSpread({},n)),(0,u.jsx)(s.Hn,{store:a,children:t})]})}));l.displayName="MarketWatchListProviderMirror"},172120:(e,t,r)=>{r.d(t,{J:()=>f});var n=r(324586),a=r(839850),o=r(514041),i=r(908867),s=r(490343),c=r(153763),u=r(318822),l=r(334439),d=r(948675),p=r(450255),h=r(831085),m=["coingeckoId","size","tabIndex","from"];function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var f=(0,o.memo)((function BasicMarketStar(e){var{coingeckoId:t,size:r,tabIndex:f,from:b}=e,k=(0,a.A)(e,m),j=(0,i.A)(),y=(0,p.B)(),[g,S]=(0,o.useState)((function(){return y.isInWatchList(t)})),x=(0,c.E)(),{gtMd:v}=(0,s.useMedia)(),O=(0,o.useCallback)((function({tabIndex:e}){e===f&&S(y.isInWatchList(t))}),[y,t,f]);(0,o.useEffect)((function(){if(v&&f)return u.iL.on(u.Tu.SwitchMarketHomeTab,O),function(){u.iL.off(u.Tu.SwitchMarketHomeTab,O)}}),[v,O,f]),(0,o.useEffect)((function(){x&&S(y.isInWatchList(t))}),[y,t,x]);var w=(0,o.useCallback)((function(){g?(y.removeFormWatchList(t),d.U.market.token.removeFromWatchlist({tokenSymbol:t,removeWatchlistFrom:b})):(y.addIntoWatchList(t),d.U.market.token.addToWatchList({tokenSymbol:t,addWatchlistFrom:b})),S(!g)}),[g,y,t,b]);return(0,h.jsx)(s.IconButton,function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({title:j.formatMessage({id:g?l.ETranslations.market_remove_from_watchlist:l.ETranslations.market_add_to_watchlist}),icon:g?"StarSolid":"StarOutline",variant:"tertiary",size:r,iconSize:r?void 0:"$5",iconProps:{color:g?"$iconActive":"$iconDisabled"},onPress:w},k))}))},202338:(e,t,r)=>{r.d(t,{t:()=>i});var n=r(514041),a=r(490343),o=r(831085);var i=(0,n.memo)((function BasicMarketTokenIcon({uri:e,size:t}){return e?(0,o.jsxs)(a.Image,{size:t,circular:!0,children:[(0,o.jsx)(a.Image.Source,{source:{uri:decodeURIComponent(e)}}),(0,o.jsx)(a.Image.Fallback,{children:(0,o.jsx)(a.Stack,{bg:"$bgStrong",ai:"center",jc:"center",width:"100%",height:"100%",children:(0,o.jsx)(a.Icon,{name:"CoinOutline",size:"$6",color:"$iconSubdued"})})}),(0,o.jsx)(a.Image.Loading,{children:(0,o.jsx)(a.Skeleton,{width:"100%",height:"100%",radius:"round"})})]}):(0,o.jsx)(a.Skeleton,{width:t,height:t})}))},378302:(e,t,r)=>{r.d(t,{D:()=>MarketTokenPrice,u:()=>useTokenPrice});var n=r(324586),a=r(839850),o=r(230414),i=r(514041),s=r(490343),c=r(259227),u=r(831085),l=["price","tokenName","tokenSymbol","lastUpdated","size"];function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var d=new(function(){function MarketTokenPriceEvent(){this.tokenPriceMap=new Map,this.priceChangedListenerMap=new Map}var e=MarketTokenPriceEvent.prototype;return e.buildKey=function buildKey(e,t){return`${e}-${t}`},e.updateTokenPrice=function updateTokenPrice({name:e,symbol:t,price:r,lastUpdated:n}){var a=this.buildKey(e,t),{lastUpdated:o=0}=this.tokenPriceMap.get(e)||{};n>o&&(this.tokenPriceMap.set(a,{price:r,lastUpdated:n}),(this.priceChangedListenerMap.get(a)||[]).forEach((function(e){return e()})))},e.getTokenPrice=function getTokenPrice(e,t){var r=this.buildKey(e,t);return this.tokenPriceMap.get(r)?.price||"-"},e.onPriceChange=function onPriceChange(e,t,r){var n=this,a=this.buildKey(e,t),o=this.priceChangedListenerMap.get(a)||[];return o.push(r),this.priceChangedListenerMap.set(a,o),function(){var e=n.priceChangedListenerMap.get(a)||[];n.priceChangedListenerMap.set(a,e.filter((function(e){return e!==r})))}},(0,o.A)(MarketTokenPriceEvent)}()),useTokenPrice=function({name:e,symbol:t,price:r,lastUpdated:n}){var[a,o]=(0,i.useState)(0);return(0,i.useMemo)((function(){d.updateTokenPrice({name:e,symbol:t,price:r,lastUpdated:n})}),[n,e,r,t]),(0,i.useLayoutEffect)((function(){return d.onPriceChange(e,t,(function(){o((function(e){return e+1}))}))}),[n,e,r,t]),(0,i.useMemo)((function(){return d.getTokenPrice(e,t)}),[e,t,a])};function MarketTokenPrice(e){var{price:t,tokenName:r,tokenSymbol:n,lastUpdated:o,size:d}=e,p=(0,a.A)(e,l),[h]=(0,c.useSettingsPersistAtom)(),m=h.currencyInfo.symbol,f=(0,i.useMemo)((function(){return o?new Date(o).getTime():Date.now()}),[o]),b=useTokenPrice({name:r,price:t,symbol:n,lastUpdated:f});return(0,u.jsx)(s.NumberSizeableText,_objectSpread(_objectSpread({userSelect:"none",formatter:"price",size:d,formatterOptions:{currency:m}},p),{},{children:b}))}},450255:(e,t,r)=>{r.d(t,{B:()=>useWatchListAction});var n=r(514041),a=r(908867),o=r(490343),i=r(334439),s=r(310944),useWatchListAction=function(){var e=(0,a.A)(),t=(0,s.qr)(),r=(0,n.useCallback)((function(e){var r={coingeckoId:e};t.current.removeFormWatchList(r)}),[t]),c=(0,n.useCallback)((function(r){var n=Array.isArray(r)?r:[r];t.current.addIntoWatchList(n.map((function(e){return{coingeckoId:e}}))),o.Toast.success({title:e.formatMessage({id:i.ETranslations.market_added_to_watchlist})})}),[t,e]),u=(0,n.useCallback)((function(e){var r={coingeckoId:e};t.current.moveToTop(r)}),[t]),l=(0,n.useCallback)((function(e){return t.current.isInWatchList(e)}),[t]);return(0,n.useMemo)((function(){return{removeFormWatchList:r,addIntoWatchList:c,MoveToTop:u,isInWatchList:l}}),[u,c,l,r])}},493597:(e,t,r)=>{r.r(t),r.d(t,{UniversalSearch:()=>UniversalSearch,default:()=>pages_UniversalSearch});var n=r(586330),a=r(514041),o=r(908867),i=r(578104),s=r(490343),c=r(958227),u=r(259227),l=r(334439),d=r(948675),p=r(351453),h=r(392097),m=r(491180),f=r(714191),b=r(506851),k=r(610421),j=r(325809),y=r(791088),g=r(880590),S=r(498356),x=r(162616),v=r(826339),O=r(172120),w=r(202338),T=r(378302),P=r(802172),M=r(831085);function SearchTextItem({item:e,onPress:t}){var r=(0,a.useCallback)((function(){t(e)}),[e,t]);return(0,M.jsx)(s.Stack,{ai:"center",jc:"center",borderRadius:"$2",gap:"$3",bg:"$bgStrong",mt:"$3",cursor:"pointer",onPress:r,children:(0,M.jsx)(s.SizableText,{px:"$2.5",py:"$1",size:"$bodyMdMedium",children:e.text})})}function RecentSearched({searchType:e}){var t,r=(0,o.A)(),[{recentSearch:i}]=(0,c.O6)(),u=(0,c.GW)(),p=(0,S.A)(),m=(0,a.useCallback)((t=(0,n.A)((function*(e){e.type===b.j.MarketToken&&(p.pop(),setTimeout((function(){p.push(h.FE.MarketDetail,{token:e.id}),d.U.market.token.searchToken({tokenSymbol:e.id,from:"recentSearch"})}),80))})),function(e){return t.apply(this,arguments)}),[p]),f=(0,a.useCallback)((function(){u.current.clearAllRecentSearch()}),[u]);return i.length&&e===b.j.MarketToken?(0,M.jsxs)(s.YStack,{px:"$5",pb:"$5",children:[(0,M.jsxs)(s.XStack,{jc:"space-between",pt:"$5",children:[(0,M.jsx)(s.SizableText,{size:"$headingSm",color:"$textSubdued",children:r.formatMessage({id:l.ETranslations.global_recent_searched})}),(0,M.jsx)(s.IconButton,{variant:"tertiary",icon:"DeleteOutline",color:"$textSubdued",iconSize:"$5",onPress:f})]}),(0,M.jsx)(s.XStack,{flexWrap:"wrap",gap:"$3",children:i.map((function(e){return(0,M.jsx)(SearchTextItem,{onPress:m,item:e},e.text)}))})]}):(0,M.jsx)(s.XStack,{pt:"$5"})}var $=r(324586),A=r(2577),I=r(597102),C=r(526039);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,$.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var L=(0,a.memo)((function(e){var{children:t,storeName:r}=e,n=(0,C.f)(r),a=A.A.getOrCreateStore(n);return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(I.H,_objectSpread({},n)),(0,M.jsx)(c.TG,{store:a,children:t})]})}));L.displayName="UniversalSearchProviderMirror";var E=function(e){return e.init="init",e.loading="loading",e.done="done",e}(E||{}),SkeletonItem=function(){return(0,M.jsxs)(s.XStack,{py:"$2",alignItems:"center",children:[(0,M.jsx)(s.Skeleton,{w:"$10",h:"$10",radius:"round"}),(0,M.jsxs)(s.YStack,{ml:"$3",children:[(0,M.jsx)(s.Stack,{py:"$1.5",children:(0,M.jsx)(s.Skeleton,{h:"$3",w:"$32"})}),(0,M.jsx)(s.Stack,{py:"$1.5",children:(0,M.jsx)(s.Skeleton,{h:"$3",w:"$24"})})]})]})};function ListEmptyComponent({searchType:e}){var t=(0,o.A)();return e===b.j.MarketToken?(0,M.jsxs)(s.YStack,{px:"$5",children:[(0,M.jsx)(s.SizableText,{numberOfLines:1,size:"$headingSm",color:"$textSubdued",children:t.formatMessage({id:l.ETranslations.market_trending})}),(0,M.jsx)(SkeletonItem,{}),(0,M.jsx)(SkeletonItem,{}),(0,M.jsx)(SkeletonItem,{})]}):null}function UniversalSearch({searchType:e}){var t=(0,o.A)(),r=(0,S.A)(),{activeAccount:u}=(0,x.LH)({num:0}),f=(0,c.GW)(),[j,P]=(0,a.useState)([]),[$,A]=(0,a.useState)(E.init),[I,C]=(0,a.useState)([]),L=(0,a.useMemo)((function(){return t.formatMessage({id:e===b.j.MarketToken?l.ETranslations.global_search_tokens:l.ETranslations.global_search})}),[t,e]),_=(0,a.useCallback)((0,n.A)((function*(){var r=[],n=yield k.A.serviceUniversalSearch.universalSearchRecommend({searchTypes:e?[e]:[]});n?.[b.j.MarketToken]?.items&&r.push({title:t.formatMessage({id:l.ETranslations.market_trending}),data:n?.[b.j.MarketToken]?.items}),C(r)})),[t,e]);(0,a.useEffect)((function(){_()}),[_]);var z,U=(0,i.YQ)((z=(0,n.A)((function*(t){var r=t?.trim?.()||"";if(r){var n=yield k.A.serviceUniversalSearch.universalSearch({input:r,networkId:u?.network?.id,searchTypes:[e||b.j.Address]}),a=[];n?.[b.j.Address]?.items?.length&&a.push({title:"Wallet",data:n?.[b.j.Address]?.items}),n?.[b.j.MarketToken]?.items?.length&&a.push({title:"Market Token",data:n?.[b.j.MarketToken]?.items}),P(a),A(E.done)}else A(E.init)})),function(e){return z.apply(this,arguments)}),1200),D=(0,a.useCallback)((function(){A(E.loading)}),[]),W=(0,a.useCallback)((function({section:t}){return e===b.j.MarketToken?(0,M.jsx)(s.SizableText,{px:"$5",pb:0,size:"$headingSm",color:"$textSubdued",children:t.title}):(0,M.jsx)(s.SizableText,{px:"$5",pb:0,size:"$headingSm",children:t.title})}),[e]),K=(0,a.useCallback)((function({item:e}){switch(e.type){case b.j.Address:var t=e;return(0,M.jsx)(y.c,{onPress:function(){r.pop(),setTimeout((0,n.A)((function*(){var{network:e,addressInfo:n}=t.payload;yield v.Jh.pushUrlAccountPage(r,{address:n.displayAddress,networkId:e.id,contextNetworkId:u?.network?.id})})),80)},renderAvatar:(0,M.jsx)(g.um,{networkId:t.payload.network.id,size:"$10"}),title:t.payload.network.shortname,subtitle:m.A.shortenAddress({address:t.payload.addressInfo.displayAddress})});case b.j.MarketToken:var{image:a,coingeckoId:o,price:i,symbol:c,name:l,lastUpdated:k}=e.payload;return(0,M.jsx)(y.c,{jc:"space-between",onPress:(0,n.A)((function*(){r.pop(),setTimeout((0,n.A)((function*(){r.push(h.FE.MarketDetail,{token:o}),d.U.market.token.searchToken({tokenSymbol:o,from:$===E.init?"trendingList":"searchList"}),setTimeout((function(){f.current.addIntoRecentSearchList({id:o,text:c.toUpperCase(),type:e.type,timestamp:Date.now()})}),10)})),80)})),renderAvatar:(0,M.jsx)(w.t,{uri:a,size:"$10"}),title:c.toUpperCase(),subtitle:l,subtitleProps:{numberOfLines:1},children:(0,M.jsxs)(s.XStack,{children:[(0,M.jsx)(T.D,{price:String(i),size:"$bodyLgMedium",lastUpdated:k,tokenName:l,tokenSymbol:c}),(0,M.jsx)(O.J,{coingeckoId:o,ml:"$3",from:p.N.search})]})});default:return null}}),[r,u?.network?.id,$,f]),N=(0,a.useCallback)((function(){switch($){case E.init:return(0,M.jsx)(s.SectionList,{renderSectionHeader:W,sections:I,renderItem:K,ListHeaderComponent:(0,M.jsx)(RecentSearched,{searchType:e}),ListEmptyComponent:(0,M.jsx)(ListEmptyComponent,{searchType:e}),estimatedItemSize:"$16"});case E.loading:return(0,M.jsxs)(s.YStack,{px:"$5",pt:"$5",children:[(0,M.jsx)(SkeletonItem,{}),(0,M.jsx)(SkeletonItem,{}),(0,M.jsx)(SkeletonItem,{})]});case E.done:return(0,M.jsx)(s.SectionList,{mt:"$5",sections:j,ListEmptyComponent:(0,M.jsx)(s.Empty,{icon:"SearchOutline",title:t.formatMessage({id:l.ETranslations.global_no_results}),description:t.formatMessage({id:l.ETranslations.global_search_no_results_desc})}),renderItem:K,estimatedItemSize:"$16"})}}),[t,I,K,W,$,e,j]);return(0,M.jsxs)(s.Page,{children:[(0,M.jsx)(s.Page.Header,{title:t.formatMessage({id:l.ETranslations.global_search})}),(0,M.jsxs)(s.Page.Body,{children:[(0,M.jsx)(s.View,{px:"$5",children:(0,M.jsx)(s.SearchBar,{autoFocus:!0,placeholder:L,onSearchTextChange:U,onChangeText:D})}),N()]})]})}const pages_UniversalSearch=function({route:e}){return(0,M.jsx)(j.b8,{config:{sceneName:f.Zs.home,sceneUrl:""},enabledNum:[0],children:(0,M.jsx)(P.m,{storeName:u.EJotaiContextStoreNames.marketWatchList,children:(0,M.jsx)(L,{storeName:u.EJotaiContextStoreNames.universalSearch,children:(0,M.jsx)(UniversalSearch,{searchType:e?.params?.filterType||b.j.Address})})})})}}}]);