"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[13493],{940916:(e,t,r)=>{r.d(t,{G:()=>b});var n=r(482451),i=r.n(n),a=r(324586),o=r(586330),s=r(230414),c=r(507140),u=r(606777),p=r(401349),l=r(404727),f=r(180556),d=r(929296),y=r(195309),h=r(972715),v=r(901048).Buffer;function _createSuper(e){var t=_isNativeReflectConstruct();return function _createSuperInternal(){var r,n=(0,h.A)(e);if(t){var i=(0,h.A)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,y.A)(this,r)}}function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_isNativeReflectConstruct=function(){return!!e})()}var g=function(e){(0,d.A)(ChainSigner,e);var t=_createSuper(ChainSigner);function ChainSigner(e,r,n){var i,a=(0,p.N)(n,{key:e,chainCode:v.alloc(32)},r).key.toString("hex");return(i=t.call(this,a,n)).encryptedPrivateKey=e,i.password=r,i.curve=n,i}var r,n=ChainSigner.prototype;return n.getPrvkey=function getPrvkey(){return Promise.resolve((0,p.Yc)(this.password,this.encryptedPrivateKey))},n.getPrvkeyHex=(r=(0,o.A)((function*(){return u.A.bytesToHex(yield this.getPrvkey())})),function getPrvkeyHex(){return r.apply(this,arguments)}),n.sign=function sign(e){var t=(0,p._S)(this.curve,this.encryptedPrivateKey,e,this.password);return"secp256k1"===this.curve?Promise.resolve([t.slice(0,-1),t[t.length-1]]):Promise.resolve([t,0])},(0,s.A)(ChainSigner)}(function(){function Verifier(e,t){this.curve=t,this.compressedPublicKey=v.from(e,"hex"),this.uncompressedPublicKey=(0,p.sA)(t,this.compressedPublicKey)}var e,t=Verifier.prototype;return t.getPubkey=function getPubkey(e){return Promise.resolve(e?this.compressedPublicKey:this.uncompressedPublicKey)},t.getPubkeyHex=(e=(0,o.A)((function*(e){return u.A.bytesToHex(yield this.getPubkey(e))})),function getPubkeyHex(t){return e.apply(this,arguments)}),t.verify=function verify(){return Promise.resolve(v.from([]))},t.verifySignature=function verifySignature({publicKey:e,digest:t,signature:r}){var n=u.A.toBuffer(e),i=u.A.toBuffer(t),a=u.A.toBuffer(r),{curve:o}=this,s=(0,p.MX)(o,n,i,a);return Promise.resolve(s)},(0,s.A)(Verifier)}());function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,a.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var b=function(){function CoreChainApiBase(){}var e,t,r,n,a,d,y,h,v=CoreChainApiBase.prototype;return v.baseGetCurve=function baseGetCurve(e){switch(e){case"ed25519":return p.ev;case"secp256k1":return p.bI;case"nistp256":return p.OX;default:throw new c.He("Unsupported curve")}},v.baseCreateSigner=(e=(0,o.A)((function*({curve:e,privateKey:t,password:r}){if(void 0===r)throw new c.He("Software signing requires a password.");var n=u.A.toBuffer(t);return Promise.resolve(new g(n,r,e))})),function baseCreateSigner(t){return e.apply(this,arguments)}),v.baseGetSingleSigner=(t=(0,o.A)((function*({payload:e,curve:t}){var r=yield this.getPrivateKeys(e),n=e.account.path,i=r[n],a=e?.relPaths?.[0];if(!i&&a&&(i=r[[n,a].join("/")]),!i)throw new Error(`No private key found: ${n}`);return this.baseCreateSigner({curve:t,privateKey:i,password:e.password})})),function baseGetSingleSigner(e){return t.apply(this,arguments)}),v.baseGetPrivateKeys=(r=(0,o.A)((function*({payload:e,curve:t}){var{credentials:r,account:n,password:i,relPaths:a}=e,o={};if(r.hd&&r.imported)throw new c.He("getPrivateKeys ERROR: hd and imported credentials can NOT both set.");if(r.hd&&(o=yield this.baseGetPrivateKeysHd({curve:t,account:n,hdCredential:r.hd,password:i,relPaths:a})),r.imported){var{privateKey:s}=(0,p.VV)({password:i,credential:r.imported}),l=u.A.bytesToHex((0,p.w)(i,s));o[n.path]=l,o[""]=l}if(!Object.keys(o).length)throw new Error("No private keys found");return o})),function baseGetPrivateKeys(e){return r.apply(this,arguments)}),v.baseGetPrivateKeysHd=(n=(0,o.A)((function*({curve:e,password:t,account:r,relPaths:n,hdCredential:i}){var{path:a}=r,o=a.split("/"),s=n||[o.pop()],l=o.join("/");if(0===s.length)throw new c.He("getPrivateKeysHd ERROR: relPaths is empty.");return(0,p.Wu)(e,i,t,l,s).reduce((function(e,t){return _objectSpread(_objectSpread({},e),{},{[t.path]:u.A.bytesToHex(t.extendedKey.key)})}),{})})),function baseGetPrivateKeysHd(e){return n.apply(this,arguments)}),v.baseGetAddressesFromHd=(a=(0,o.A)((function*(e,t){var r=this,{curve:n,generateFrom:a}=t,{template:s,hdCredential:l,password:d,indexes:y}=e,{pathPrefix:h,pathSuffix:v}=(0,f.Ah)(s),g=y.map((function(e){return v.replace("{index}",e.toString())})),b="privateKey"===a,w=[],P=[];b?P=(0,p.Wu)(n,l,d,h,g):w=yield(0,p.MJ)({curveName:n,hdCredential:l,password:d,prefix:h,relPaths:g});var A=b?P:w;if(A.length!==y.length)throw new c.He("Unable to get publick key.");var m,S=yield Promise.all(A.map((m=(0,o.A)((function*(t){var n,a,{path:o,extendedKey:{key:s}}=t;if(b){var c=u.A.bytesToHex((0,p.Yc)(d,s));a=yield r.getAddressFromPrivate({networkInfo:e.networkInfo,privateKeyRaw:c,privateKeyInfo:t})}else n=s.toString("hex"),a=yield r.getAddressFromPublic({networkInfo:e.networkInfo,publicKey:n,publicKeyInfo:t});return i()({publicKey:n,path:o},a)})),function(e){return m.apply(this,arguments)})));return{addresses:S}})),function baseGetAddressesFromHd(e,t){return a.apply(this,arguments)}),v.baseGetCredentialsType=function baseGetCredentialsType({credentials:e}){if(e.hd&&e.imported)throw new c.He("getCredentialsType ERROR: hd and imported credentials can NOT both set.");if(e.hd)return l.ECoreCredentialType.hd;if(e.imported)return l.ECoreCredentialType.imported;throw new c.He("getCredentialsType ERROR: no credentials found")},v.baseGetDefaultPrivateKey=(d=(0,o.A)((function*(e){var t=yield this.getPrivateKeys(e),[r]=Object.values(t);return{privateKeyRaw:r}})),function baseGetDefaultPrivateKey(e){return d.apply(this,arguments)}),v.validateXpub=(y=(0,o.A)((function*(e){throw new c.MS})),function validateXpub(e){return y.apply(this,arguments)}),v.validateXprvt=(h=(0,o.A)((function*(e){throw new c.MS})),function validateXprvt(e){return h.apply(this,arguments)}),(0,s.A)(CoreChainApiBase)}()},513493:(e,t,r)=>{r.r(t),r.d(t,{default:()=>s});var n=r(230414),i=r(929296),a=r(195309),o=r(972715);function _createSuper(e){var t=_isNativeReflectConstruct();return function _createSuperInternal(){var r,n=(0,o.A)(e);if(t){var i=(0,o.A)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,a.A)(this,r)}}function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_isNativeReflectConstruct=function(){return!!e})()}var s=function(e){(0,i.A)(CoreChainImported,e);var t=_createSuper(CoreChainImported);function CoreChainImported(){return t.apply(this,arguments)}return(0,n.A)(CoreChainImported)}(r(774300).A)},774300:(e,t,r)=>{r.d(t,{A:()=>C});var n=r(482451),i=r.n(n),a=r(324586),o=r(586330),s=r(230414),c=r(929296),u=r(195309),p=r(972715),l=r(311099),f=r(218160),d=r(240483),y=r(303303),h=r(507140),v=r(606777),g=r(424754),b=r(940916),w=r(401349),P=r(404727),A=r(180556),m=r(387845),S=r(510220),x=r(901048).Buffer;function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,a.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _createSuper(e){var t=_isNativeReflectConstruct();return function _createSuperInternal(){var r,n=(0,p.A)(e);if(t){var i=(0,p.A)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,u.A)(this,r)}}function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_isNativeReflectConstruct=function(){return!!e})()}var O="ed25519",derivationHdLedger=function(e,t){try{return(0,d.i)(e,t)}catch(e){var{message:r}=e;if("Expected a mnemonic with 24 words (or 25 including a password)"===r)throw new h.B$;throw e}},C=function(e){(0,c.A)(CoreChainSoftware,e);var t=_createSuper(CoreChainSoftware);function CoreChainSoftware(){return t.apply(this,arguments)}var r,n,a,u,p,d,b,C,K=CoreChainSoftware.prototype;return K.getExportedSecretKey=(r=(0,o.A)((function*(e){var{password:t,keyType:r,credentials:n}=e,{privateKeyRaw:i}=yield this.baseGetDefaultPrivateKey(e);if(!i)throw new Error("privateKeyRaw is required");if(r===P.ECoreApiExportedSecretKeyType.privateKey)return`0x${(0,w.Yc)(t,i).toString("hex")}`;throw new Error(`SecretKey type not support: ${r}`)})),function getExportedSecretKey(e){return r.apply(this,arguments)}),K.baseGetPrivateKeys=(n=(0,o.A)((function*({payload:e}){var{credentials:t,account:r,password:n,relPaths:i}=e,a={};if(t.hd){var o=r.path.split("/"),s=i||[o.pop()],c=o.join("/"),u=(0,w.s8)(t.hd,n);a=s.map((function(e){var t=`${c}/${e}`,r=derivationHdLedger(u,t);return{path:t,key:(0,w.w)(n,x.from(r.secretKey.slice(0,32)))}})).reduce((function(e,t){return _objectSpread(_objectSpread({},e),{},{[t.path]:v.A.bytesToHex(t.key)})}),{})}if(t.imported){var{privateKey:p}=(0,w.VV)({password:n,credential:t.imported}),l=v.A.bytesToHex((0,w.w)(n,p));a[r.path]=l,a[""]=l}if(!Object.keys(a).length)throw new Error("No private keys found");return a})),function baseGetPrivateKeys(e){return n.apply(this,arguments)}),K.getPrivateKeys=(a=(0,o.A)((function*(e){return this.baseGetPrivateKeys({payload:e})})),function getPrivateKeys(e){return a.apply(this,arguments)}),K.signTransaction=(u=(0,o.A)((function*(e){var{unsignedTx:t}=e,r=yield this.baseGetSingleSigner({payload:e,curve:O});if(!t.rawTxUnsigned)throw new Error("rawTxUnsigned is undefined");var[n]=yield r.sign(v.A.toBuffer(v.A.hexToBytes(t.rawTxUnsigned))),i=(0,l.z)(S.I.ed25519,(0,f.e)(n)),a=v.A.bytesToHex(i),o=yield(0,m.rQ)(t.encodedTx,a);return{encodedTx:t.encodedTx,txid:"",rawTx:o,signature:g.A.addHexPrefix(a)}})),function signTransaction(e){return u.apply(this,arguments)}),K.signMessage=(p=(0,o.A)((function*(e){var{message:t}=e.unsignedMsg,r=yield this.baseGetSingleSigner({payload:e,curve:O}),n=yield(0,m.Ex)(t),[i]=yield r.sign(n),a=(0,l.z)(S.I.ed25519,(0,f.e)(i));return g.A.addHexPrefix(v.A.bytesToHex(a))})),function signMessage(e){return p.apply(this,arguments)}),K.getAddressFromPrivate=(d=(0,o.A)((function*(e){var{privateKeyRaw:t}=e,r=v.A.toBuffer(t),n=this.baseGetCurve(O).publicFromPrivate(r);return this.getAddressFromPublic({publicKey:v.A.bytesToHex(n),networkInfo:e.networkInfo})})),function getAddressFromPrivate(e){return d.apply(this,arguments)}),K.getAddressFromPublic=(b=(0,o.A)((function*(e){var t,{publicKey:r,networkInfo:n}=e,i=v.A.hexToBytes(g.A.stripHexPrefix(r));return Promise.resolve({address:"",addresses:{[n.networkId]:(0,y.j)(i,+(null!=(t=n.addressPrefix)?t:0))},publicKey:r})})),function getAddressFromPublic(e){return b.apply(this,arguments)}),K.getAddressesFromHd=(C=(0,o.A)((function*(e){var t=this,{template:r,hdCredential:n,password:a,indexes:s}=e,{pathPrefix:c,pathSuffix:u}=(0,A.Ah)(r),p=s.map((function(e){return u.replace("{index}",e.toString())})),l=(0,w.s8)(n,a),f=p.map((function(e){var t=`${c}/${e}`;return{path:t,pubkey:derivationHdLedger(l,t).publicKey}}));if(f.length!==s.length)throw new h.He("Unable to get public key.");var d,y=yield Promise.all(f.map((d=(0,o.A)((function*(r){var{path:n,pubkey:a}=r,o=v.A.bytesToHex(a),s=yield t.getAddressFromPublic({publicKey:o,networkInfo:e.networkInfo});return i()({publicKey:o,path:n},s)})),function(e){return d.apply(this,arguments)})));return{addresses:y}})),function getAddressesFromHd(e){return C.apply(this,arguments)}),(0,s.A)(CoreChainSoftware)}(b.G)},387845:(e,t,r)=>{r.d(t,{Ex:()=>serializeMessage,QG:()=>serializeUnsignedTransaction,rQ:()=>serializeSignedTransaction});var n=r(324586),i=r(586330),a=r(869631),o=r(816959),s=r(244912),c=r(236662),u=r(424754),p=r(403144),l=r(901048).Buffer;function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function serializeMessage(e){return _serializeMessage.apply(this,arguments)}function _serializeMessage(){return(_serializeMessage=(0,i.A)((function*(e){var t=(0,o.C1)(e);return l.from((0,s.e)(t))}))).apply(this,arguments)}function serializeUnsignedTransaction(e){return _serializeUnsignedTransaction.apply(this,arguments)}function _serializeUnsignedTransaction(){return(_serializeUnsignedTransaction=(0,i.A)((function*(e){var t,r,{metadataRpc:n}=e,i=(0,c.getRegistry)({metadataRpc:n,specName:null!=(t=e.specName)?t:"",specVersion:+p.Ay.hexToDecimal(e.specVersion).toString(),chainName:null!=(r=e.chainName)?r:""});i.setMetadata((0,c.createMetadata)(i,n));var o=c.construct.signingPayload(e,{registry:i}),u=i.createType("ExtrinsicPayload",o,{version:a.EXTRINSIC_VERSION}).toU8a({method:!0}),l=u.length>256?i.hash(u):u;return{rawTx:u,hash:(0,s.e)(l)}}))).apply(this,arguments)}function serializeSignedTransaction(e,t){return _serializeSignedTransaction.apply(this,arguments)}function _serializeSignedTransaction(){return(_serializeSignedTransaction=(0,i.A)((function*(e,t){var r,n,{metadataRpc:i}=e,a=(0,c.getRegistry)(_objectSpread(_objectSpread({},e),{},{specName:null!=(r=e.specName)?r:"",specVersion:+p.Ay.hexToDecimal(e.specVersion).toString(),chainName:null!=(n=e.chainName)?n:""}));return c.construct.signedTx(e,u.A.addHexPrefix(t),{metadataRpc:i,registry:a})}))).apply(this,arguments)}},510220:(e,t,r)=>{r.d(t,{I:()=>n});var n={ecdsa:new Uint8Array([2]),ed25519:new Uint8Array([0]),ethereum:new Uint8Array([2]),sr25519:new Uint8Array([1])}},180556:(e,t,r)=>{r.d(t,{Ac:()=>estimateTxSize,Ah:()=>slicePathTemplate,vN:()=>getUtxoAccountPrefixPath,zf:()=>getBIP44Path});var n=r(90366),i=r.n(n),a=r(928557);function slicePathTemplate(e){var[t,r]=e.split(a.h2);return{pathPrefix:t.slice(0,-1),pathSuffix:`{index}${r}`}}function getUtxoAccountPrefixPath({fullPath:e}){var t=e.split("/");return t.pop(),t.pop(),t.join("/")}function getBIP44Path(e,t){var r="";for(var[n,i]of Object.entries(e.addresses))if(i===t){r=n;break}return`${e.path}/${r}`}function estimateTxSize(e,t){return i().transactionBytes(e,t)}}}]);