"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[30707],{714718:(e,t,n)=>{n.d(t,{A:()=>useFormatDate});var r=n(514041),a=n(243915),o=n(152111),i=n(724726),s=n(584941),l=n(121684),c=n(567807),u=n(886738);function useFormatDate(){var e=(0,u.L)(),t=(0,r.useCallback)((function(t,n){var r;r="string"==typeof t?(0,a.A)(t):t;try{return(0,o.A)(r,null!=n?n:"PPp",{locale:(0,c.mw)(e)})}catch(e){return"-"}}),[e]),n=(0,r.useCallback)((function(n,r){var o,i;i="string"==typeof n?(0,a.A)(n):n;var s=(new Date).getFullYear(),l=(new Date).getMonth(),c="yyyy/LL/dd, HH:mm";return["de","es","en-US","fr-FR","it-IT","uk-UA"].includes(e)&&(c="LL/dd/yyyy, HH:mm"),(s===i.getFullYear()&&r?.hideTheYear||r?.hideYear)&&(c=(c=c.replace("yyyy/","")).replace("/yyyy","")),(l===i.getMonth()&&r?.hideTheMonth||r?.hideMonth)&&(c=c.replace("LL/","")),r?.hideTimeForever&&(c=c.replace(", HH:mm","")),r?.onlyTime&&(c="HH:mm"),null!=(o=t(i,c))?o:""}),[t,e]),f=(0,r.useCallback)((function(e,n){var r,o,i;return o="string"==typeof e?(0,a.A)(e):e,(new Date).getFullYear()===o.getFullYear()&&n?.hideTheYear||n?.hideYear?null!=(i=t(o,"MMMM"))?i:"":null!=(r=t(o,"MMMM, yyyy"))?r:""}),[t]),d=(0,r.useCallback)((function(t,n){var r;return null!=(r=(0,i.A)(t,n,{locale:(0,c.mw)(e)}))?r:""}),[e]),m=(0,r.useCallback)((function(t){var n;return null!=(n=(0,s.A)(t,{addSuffix:!0,locale:(0,c.mw)(e)}))?n:""}),[e]),h=(0,r.useCallback)((function(t){var n;return null!=(n=(0,l.A)(t,{locale:(0,c.mw)(e)}))?n:""}),[e]);return(0,r.useMemo)((function(){return{format:t,formatDate:n,formatMonth:f,formatDistanceToNow:m,formatDuration:h,formatDistanceStrict:d}}),[t,n,f,m,h,d])}},130707:(e,t,n)=>{n.r(t),n.d(t,{default:()=>w});var r=n(579071),a=n.n(r),o=n(324586),i=n(839850),s=n(586330),l=n(514041),c=n(908867),u=n(490343),f=n(259227),d=n(334439),m=n(392097),h=n(251039),v=n(17245),g=n(610421),p=n(791088),y=n(498356),b=n(714718),A=n(911998),D=n(831085),x=["item"];function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,o.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function HeaderRight(){var e=(0,c.A)(),t=(0,y.A)(),n=(0,l.useCallback)((function(){t.pushModal(m.ry.SettingModal,{screen:m.Pj.SettingNotifications})}),[t]);return(0,D.jsxs)(u.HeaderButtonGroup,{children:[(0,D.jsx)(u.HeaderIconButton,{icon:"BroomOutline",onPress:function(){var t;u.Dialog.show({icon:"BroomOutline",title:e.formatMessage({id:d.ETranslations.global_mark_all_as_confirmation_title}),description:e.formatMessage({id:d.ETranslations.global_mark_all_as_confirmation_desc}),onConfirm:(t=(0,s.A)((function*(){yield g.A.serviceNotification.markNotificationReadAll()})),function onConfirm(){return t.apply(this,arguments)})})}}),(0,D.jsx)(u.HeaderIconButton,{icon:"SettingsOutline",onPress:n})]})}function NotificationItem(e){var{item:t}=e,n=(0,i.A)(e,x),{formatDistanceToNow:r}=(0,b.A)(),{title:a,content:o}=t.body,{createdAt:s,readed:l,msgId:c}=t,[{badge:d}]=(0,f.useNotificationsAtom)(),[m]=(0,f.useNotificationsReadedAtom)();return(0,D.jsxs)(p.c,_objectSpread(_objectSpread({gap:"$0.5",flexDirection:"column",alignItems:"stretch",userSelect:"none",hoverStyle:{bg:"$bgHover"}},n),{},{children:[(0,D.jsxs)(u.XStack,{alignItems:"baseline",gap:"$3",pr:"$1.5",children:[(0,D.jsx)(u.SizableText,{flex:1,size:"$headingSm",numberOfLines:1,children:a}),(0,D.jsx)(u.SizableText,{size:"$bodySm",color:"$textSubdued",flexShrink:0,children:r(new Date(s))}),l||!d||m?.[c]?null:(0,D.jsx)(u.Stack,{position:"absolute",top:"$1.5",right:"$-2",borderRadius:"$full",bg:"$bgCriticalStrong",w:"$2",h:"$2"})]}),(0,D.jsx)(u.SizableText,{size:"$bodyMd",flex:1,maxWidth:"$96",children:o})]}))}const w=function NotificationList(){var e=(0,c.A)(),{bottom:t}=(0,u.useSafeAreaInsets)(),n=(0,y.A)(),r=(0,l.useCallback)((function(){return(0,D.jsx)(HeaderRight,{})}),[]),[{lastReceivedTime:o,firstTimeGuideOpened:i},p]=(0,f.useNotificationsAtom)(),b=(0,l.useRef)(!1);(0,l.useEffect)((function(){i||b.current||(setTimeout((function(){n.pushModal(m.ry.NotificationsModal,{screen:h.f.NotificationIntroduction})}),600),b.current=!0,p((function(e){return _objectSpread(_objectSpread({},e),{},{firstTimeGuideOpened:!0})})))}),[i,n,p]);var{result:x=[],isLoading:w}=(0,A.yk)((0,s.A)((function*(){return a()(o),g.A.serviceNotification.refreshBadgeFromServer(),yield g.A.serviceNotification.fetchMessageList()})),[o],{watchLoading:!0,checkIsFocused:!1});return(0,D.jsxs)(u.Page,{scrollEnabled:!0,safeAreaEnabled:!1,children:[(0,D.jsx)(u.Page.Header,{title:e.formatMessage({id:d.ETranslations.global_notifications}),headerRight:r}),(0,D.jsx)(u.Page.Body,{pb:t||"$5",children:w&&!x?.length?(0,D.jsx)(u.Stack,{gap:"$1.5",px:"$5",children:Array.from({length:3}).map((function(e,t){return(0,D.jsxs)(u.Stack,{gap:"$1",py:"$2",children:[(0,D.jsx)(u.Stack,{py:"$1",children:(0,D.jsx)(u.Skeleton,{h:"$3",w:"$16"})}),(0,D.jsx)(u.Stack,{py:"$1",children:(0,D.jsx)(u.Skeleton,{h:"$3",w:"$48"})})]},t)}))}):(0,D.jsxs)(D.Fragment,{children:[x?.length?null:(0,D.jsx)(u.Empty,{pt:170,icon:"BellOutline",title:e.formatMessage({id:d.ETranslations.notifications_empty_title}),description:e.formatMessage({id:d.ETranslations.notifications_empty_desc})}),x.map((function(e,t){return(0,D.jsx)(NotificationItem,_objectSpread(_objectSpread({item:e},0!==t&&{mt:"$2.5"}),{},{onPress:function(){v.A.navigateToNotificationDetail({navigation:n,message:e.body,notificationId:e?.msgId||e?.body?.extras?.params?.msgId||e?.body?.extras?.msgId||""})}}),t)}))]})})]})}},405405:(e,t,n)=>{function assign(e,t){if(null==e)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}n.d(t,{A:()=>assign})},639794:(e,t,n)=>{n.d(t,{A:()=>cloneObject});var r=n(405405);function cloneObject(e){return(0,r.A)({},e)}},724726:(e,t,n)=>{n.d(t,{A:()=>formatDistanceStrict});var r=n(766017),a=n(57641),o=n(247803),i=n(95286),s=n(639794),l=n(405405),c=n(372231),u=n(981092),f=6e4,d=1440,m=30*d,h=365*d;function formatDistanceStrict(e,t,n){var v,g,p;(0,u.A)(2,arguments);var y=(0,r.q)(),b=null!==(v=null!==(g=null==n?void 0:n.locale)&&void 0!==g?g:y.locale)&&void 0!==v?v:c.A;if(!b.formatDistance)throw new RangeError("locale must contain localize.formatDistance property");var A=(0,o.A)(e,t);if(isNaN(A))throw new RangeError("Invalid time value");var D,x,w=(0,l.A)((0,s.A)(n),{addSuffix:Boolean(null==n?void 0:n.addSuffix),comparison:A});A>0?(D=(0,i.A)(t),x=(0,i.A)(e)):(D=(0,i.A)(e),x=(0,i.A)(t));var S,M=String(null!==(p=null==n?void 0:n.roundingMethod)&&void 0!==p?p:"round");if("floor"===M)S=Math.floor;else if("ceil"===M)S=Math.ceil;else{if("round"!==M)throw new RangeError("roundingMethod must be 'floor', 'ceil' or 'round'");S=Math.round}var j,T=x.getTime()-D.getTime(),k=T/f,O=(T-((0,a.A)(x)-(0,a.A)(D)))/f,$=null==n?void 0:n.unit;if("second"===(j=$?String($):k<1?"second":k<60?"minute":k<d?"hour":O<m?"day":O<h?"month":"year")){var N=S(T/1e3);return b.formatDistance("xSeconds",N,w)}if("minute"===j){var _=S(k);return b.formatDistance("xMinutes",_,w)}if("hour"===j){var E=S(k/60);return b.formatDistance("xHours",E,w)}if("day"===j){var H=S(O/d);return b.formatDistance("xDays",H,w)}if("month"===j){var I=S(O/m);return 12===I&&"month"!==$?b.formatDistance("xYears",1,w):b.formatDistance("xMonths",I,w)}if("year"===j){var P=S(O/h);return b.formatDistance("xYears",P,w)}throw new RangeError("unit must be 'second', 'minute', 'hour', 'day', 'month' or 'year'")}},584941:(e,t,n)=>{n.d(t,{A:()=>formatDistanceToNow});var r=n(766017),a=n(247803),o=n(28268),i=n(847245),s=n(981092),l=n(362622);var c=n(372231),u=n(95286),f=n(639794),d=n(405405),m=n(57641),h=1440,v=2520,g=43200,p=86400;function formatDistance(e,t,n){var y,b;(0,s.A)(2,arguments);var A=(0,r.q)(),D=null!==(y=null!==(b=null==n?void 0:n.locale)&&void 0!==b?b:A.locale)&&void 0!==y?y:c.A;if(!D.formatDistance)throw new RangeError("locale must contain formatDistance property");var x=(0,a.A)(e,t);if(isNaN(x))throw new RangeError("Invalid time value");var w,S,M=(0,d.A)((0,f.A)(n),{addSuffix:Boolean(null==n?void 0:n.addSuffix),comparison:x});x>0?(w=(0,u.A)(t),S=(0,u.A)(e)):(w=(0,u.A)(e),S=(0,u.A)(t));var j,T=function differenceInSeconds(e,t,n){(0,s.A)(2,arguments);var r=(0,i.A)(e,t)/1e3;return(0,l.u)(null==n?void 0:n.roundingMethod)(r)}(S,w),k=((0,m.A)(S)-(0,m.A)(w))/1e3,O=Math.round((T-k)/60);if(O<2)return null!=n&&n.includeSeconds?T<5?D.formatDistance("lessThanXSeconds",5,M):T<10?D.formatDistance("lessThanXSeconds",10,M):T<20?D.formatDistance("lessThanXSeconds",20,M):T<40?D.formatDistance("halfAMinute",0,M):T<60?D.formatDistance("lessThanXMinutes",1,M):D.formatDistance("xMinutes",1,M):0===O?D.formatDistance("lessThanXMinutes",1,M):D.formatDistance("xMinutes",O,M);if(O<45)return D.formatDistance("xMinutes",O,M);if(O<90)return D.formatDistance("aboutXHours",1,M);if(O<h){var $=Math.round(O/60);return D.formatDistance("aboutXHours",$,M)}if(O<v)return D.formatDistance("xDays",1,M);if(O<g){var N=Math.round(O/h);return D.formatDistance("xDays",N,M)}if(O<p)return j=Math.round(O/g),D.formatDistance("aboutXMonths",j,M);if((j=(0,o.A)(S,w))<12){var _=Math.round(O/g);return D.formatDistance("xMonths",_,M)}var E=j%12,H=Math.floor(j/12);return E<3?D.formatDistance("aboutXYears",H,M):E<9?D.formatDistance("overXYears",H,M):D.formatDistance("almostXYears",H+1,M)}function formatDistanceToNow(e,t){return(0,s.A)(1,arguments),formatDistance(e,Date.now(),t)}},121684:(e,t,n)=>{n.d(t,{A:()=>formatDuration});var r=n(766017),a=n(372231),o=["years","months","weeks","days","hours","minutes","seconds"];function formatDuration(e,t){var n,i,s,l,c;if(arguments.length<1)throw new TypeError("1 argument required, but only ".concat(arguments.length," present"));var u=(0,r.q)(),f=null!==(n=null!==(i=null==t?void 0:t.locale)&&void 0!==i?i:u.locale)&&void 0!==n?n:a.A,d=null!==(s=null==t?void 0:t.format)&&void 0!==s?s:o,m=null!==(l=null==t?void 0:t.zero)&&void 0!==l&&l,h=null!==(c=null==t?void 0:t.delimiter)&&void 0!==c?c:" ";return f.formatDistance?d.reduce((function(t,n){var r="x".concat(n.replace(/(^.)/,(function(e){return e.toUpperCase()}))),a=e[n];return"number"==typeof a&&(m||e[n])?t.concat(f.formatDistance(r,a)):t}),[]).join(h):""}}}]);