"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[54090],{854090:(e,t,n)=>{n.r(t),n.d(t,{default:()=>components_LastActivityTracker});var a=n(586330),s=n(514041),i=n(735567),c=n(610421);var r=n(259227),u=n(676353),o=n(493515),p=n(31530),f=n(663522);const l=JSON.parse('{"apiKey":"AIzaSyDhZWGLNemE3oCQNvcMp4xgxzqE3KCG5Cs","authDomain":"onekey-uni.firebaseapp.com","databaseURL":"https://onekey-uni.firebaseio.com","projectId":"onekey-uni","storageBucket":"onekey-uni.appspot.com","messagingSenderId":"94391474021","appId":"1:94391474021:web:ad8d952ac748c7514b338c","measurementId":"G-KVDHXZGB6P"}');var analyticLogEvent=function(e,t){var n;if(l.apiKey)return(0,o.$s)((n=(0,p.Wp)(l),(0,o.P5)(n)),e,t)},d=n(726130),v=n(948675),y=n(884894);const components_LastActivityTracker=function(){var[{enableSystemIdleLock:e,appLockDuration:t}]=(0,r.usePasswordPersistAtom)(),[{unLock:n}]=(0,r.usePasswordAtom)(),[o]=(0,r.useSystemIdleLockSupport)();(0,s.useEffect)((function(){setTimeout((0,a.A)((function*(){var e=yield c.A.serviceSetting.getInstanceId(),t=yield c.A.serviceDevSetting.getDevSetting();u.zS.init({instanceId:e,baseURL:(0,d.n_)({serviceName:y.D.Utility,env:t.enabled&&t.settings?.enableTestEndpoint?"test":"prod"})}),analyticLogEvent("initialized",{instanceId:e,platform:f.Ay.symbol,distribution:f.Ay.appChannel}),f.Ay.symbol,f.Ay.appChannel})),0),v.U.app.page.appStart()}),[]);var p=(0,s.useCallback)((function(){"active"===i.A.currentState&&c.A.serviceSetting.refreshLastActivity().catch((function(){}))}),[]),l=(0,s.useCallback)((function(e){"idle"!==e&&"locked"!==e||c.A.servicePassword.lockApp()}),[]);return function useInterval(e,t){var n=(0,s.useRef)(e);(0,s.useEffect)((function(){n.current=e}),[e]),(0,s.useEffect)((function(){if(t||0===t){var e=setInterval((function(){return n.current()}),t);return function(){return clearInterval(e)}}}),[t])}(p,5e3),(0,s.useEffect)(p,[]),(0,s.useEffect)((function(){}),[t,e,l,o,n]),null}}}]);