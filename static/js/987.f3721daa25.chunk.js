"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[987],{326745:(e,t,n)=>{n.d(t,{u:()=>useAppRoute});var r=n(654266);function useAppRoute(){return(0,r.lq)()}},925771:(e,t,n)=>{n.d(t,{$:()=>CalculationListItem,k:()=>CalculationList});var r=n(324586),o=n(839850),i=n(490343),a=n(831085),s=["children"],l=["children"],c=["children"];function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function CalculationList({children:e}){return(0,a.jsx)(i.YStack,{gap:"$4",children:e})}function CalculationListItem(e){var{children:t}=e,n=(0,o.A)(e,s);return(0,a.jsx)(i.XStack,_objectSpread(_objectSpread({animation:"quick",enterStyle:{opacity:0},justifyContent:"space-between",alignItems:"center"},n),{},{children:t}))}CalculationList.Item=CalculationListItem,CalculationListItem.Label=function CalculationListItemLabel(e){var{children:t}=e,n=(0,o.A)(e,l);return(0,a.jsx)(i.SizableText,_objectSpread(_objectSpread({color:"$textSubdued"},n),{},{children:t}))},CalculationListItem.Value=function CalculationListItemValue(e){var{children:t}=e,n=(0,o.A)(e,c);return(0,a.jsx)(i.SizableText,_objectSpread(_objectSpread({size:"$bodyLgMedium"},n),{},{children:t}))}},286192:(e,t,n)=>{n.d(t,{BA:()=>EstimateNetworkFee,QL:()=>useShowClaimEstimateGasAlert,fH:()=>calcDaysSpent,sM:()=>useShowStakeEstimateGasAlert});var r=n(514041),o=n(241440),i=n(908867),a=n(490343),s=n(259227),l=n(334439),c=n(925771),d=n(831085),useShowStakeEstimateGasAlert=function(){var e=(0,i.A)(),[{currencyInfo:{symbol:t}}]=(0,s.useSettingsPersistAtom)();return(0,r.useCallback)((function({daysConsumed:n,estFiatValue:r,onConfirm:o}){var i=n?e.formatMessage({id:l.ETranslations.earn_transaction_loss_when_stake},{number:(0,d.jsx)(a.SizableText,{size:"$bodyLgMedium",color:"$textCaution",children:n})}):void 0;a.Dialog.show({title:e.formatMessage({id:l.ETranslations.earn_transaction_loss}),icon:"InfoCircleOutline",description:i,renderContent:(0,d.jsxs)(a.XStack,{children:[(0,d.jsxs)(a.SizableText,{size:"$bodyLg",mr:"$1",children:[e.formatMessage({id:l.ETranslations.global_est_network_fee}),":"]}),(0,d.jsx)(a.NumberSizeableText,{size:"$bodyLgMedium",formatter:"value",formatterOptions:{currency:t},children:r})]}),onConfirm:o})}),[e,t])},useShowClaimEstimateGasAlert=function(){var e=(0,i.A)(),[{currencyInfo:{symbol:t}}]=(0,s.useSettingsPersistAtom)();return(0,r.useCallback)((function({claimTokenFiatValue:n,estFiatValue:r,onConfirm:i}){var s=(0,o.A)(n).minus(r).absoluteValue().toFixed(),c=e.formatMessage({id:l.ETranslations.earn_transaction_loss_when_claim},{number:(0,d.jsx)(a.NumberSizeableText,{size:"$bodyLgMedium",formatter:"value",color:"$textCaution",formatterOptions:{currency:t},children:s})});a.Dialog.show({title:e.formatMessage({id:l.ETranslations.earn_transaction_loss}),icon:"InfoCircleOutline",description:c,renderContent:(0,d.jsxs)(a.YStack,{children:[(0,d.jsxs)(a.XStack,{children:[(0,d.jsxs)(a.SizableText,{size:"$bodyLg",mr:"$1",children:[e.formatMessage({id:l.ETranslations.global_est_network_fee}),":"]}),(0,d.jsx)(a.NumberSizeableText,{size:"$bodyLgMedium",formatter:"value",formatterOptions:{currency:t},children:r})]}),(0,d.jsxs)(a.XStack,{children:[(0,d.jsxs)(a.SizableText,{size:"$bodyLg",mr:"$1",children:[e.formatMessage({id:l.ETranslations.earn_reward_value}),":"]}),(0,d.jsx)(a.NumberSizeableText,{size:"$bodyLgMedium",formatter:"value",formatterOptions:{currency:t},children:n})]})]}),onConfirm:i})}),[e,t])},EstimateNetworkFeeListItem=function({estFiatValue:e,onPress:t}){var n=(0,i.A)(),[{currencyInfo:{symbol:r}}]=(0,s.useSettingsPersistAtom)();return Number(e)>0?(0,d.jsxs)(c.$,{onPress:t,children:[(0,d.jsx)(c.$.Label,{children:n.formatMessage({id:l.ETranslations.global_est_network_fee})}),(0,d.jsxs)(a.XStack,{alignItems:"center",cursor:t?"pointer":void 0,mr:t?-6:void 0,children:[(0,d.jsx)(a.NumberSizeableText,{size:"$bodyLgMedium",formatter:"value",formatterOptions:{currency:r},children:e}),t?(0,d.jsx)(a.Icon,{name:"ChevronRightSmallOutline",size:24}):null]})]}):null},calcDaysSpent=function(e,t){var n=(0,o.A)(t).div(e).multipliedBy(365);return n.isNaN()?void 0:Math.ceil(n.toNumber())},EstimateNetworkFee=function({estimateFeeResp:e,onPress:t,isVisible:n}){return e&&n?(0,d.jsx)(EstimateNetworkFeeListItem,{estFiatValue:e.feeFiatValue,onPress:t}):null}},138584:(e,t,n)=>{n.d(t,{Py:()=>SimpleSpinnerSkeleton,am:()=>isLoadingState,bU:()=>PageFrame,o0:()=>isErrorState});var r=n(908867),o=n(490343),i=n(791088),a=n(334439),s=n(831085),PageErrOccurred=function({onPress:e}){var t=(0,r.A)();return(0,s.jsx)(o.Empty,{pt:"$32",icon:"ErrorOutline",title:t.formatMessage({id:a.ETranslations.global_an_error_occurred}),description:t.formatMessage({id:a.ETranslations.global_an_error_occurred_desc}),buttonProps:{onPress:e,children:t.formatMessage({id:a.ETranslations.global_refresh})}})},SimpleSpinnerSkeleton=function(){return(0,s.jsxs)(o.Stack,{children:[(0,s.jsx)(o.Stack,{px:"$5",py:"$2",children:(0,s.jsx)(o.Skeleton.HeadingSm,{})}),Array.from({length:3}).map((function(e,t){return(0,s.jsxs)(i.c,{children:[(0,s.jsx)(o.Skeleton,{h:"$10",w:"$10",radius:"round"}),(0,s.jsxs)(o.Stack,{children:[(0,s.jsx)(o.Skeleton.BodyLg,{}),(0,s.jsx)(o.Skeleton.BodyMd,{})]})]},t)}))]})},isLoadingState=function({result:e,isLoading:t}){return Boolean(void 0===e&&(void 0===t||!0===t))},isErrorState=function({result:e,isLoading:t}){return Boolean(void 0===e&&!1===t)},PageFrame=function({children:e,loading:t,LoadingSkeleton:n,error:r,onRefresh:o}){return t?n?(0,s.jsx)(n,{}):null:r?(0,s.jsx)(PageErrOccurred,{onPress:o}):(0,s.jsx)(s.Fragment,{children:e})}},653913:(e,t,n)=>{n.d(t,{B8:()=>useUniversalStake,D0:()=>useUniversalClaim,Pg:()=>useUniversalWithdraw});var r=n(586330),o=n(514041),i=n(241440),a=n(610421),s=n(927799),l=n(553083),c=n(161024),d=n(286192);function useUniversalStake({networkId:e,accountId:t}){var n,{navigationToSendConfirm:i}=(0,s.E)({accountId:t,networkId:e});return(0,o.useCallback)((n=(0,r.A)((function*({amount:n,symbol:r,term:o,feeRate:s,provider:c,stakingInfo:d,onSuccess:u,onFail:m}){var f,b,g=yield a.A.serviceStaking.buildStakeTransaction({amount:n,networkId:e,accountId:t,symbol:r,term:o,provider:c,feeRate:s}),p=yield a.A.serviceStaking.buildEarnTx({networkId:e,accountId:t,tx:g});l.Ay.isBTCNetwork(e)&&p.fee&&(f=!0,b=!1),yield i({encodedTx:p,stakingInfo:d,onSuccess:u,onFail:m,useFeeInTx:f,feeInfoEditable:b})})),function(e){return n.apply(this,arguments)}),[i,t,e])}function useUniversalWithdraw({networkId:e,accountId:t}){var n,{navigationToSendConfirm:i}=(0,s.E)({accountId:t,networkId:e});return(0,o.useCallback)((n=(0,r.A)((function*({amount:n,symbol:o,provider:s,identity:d,stakingInfo:u,onSuccess:m,onFail:f}){var b,g=yield a.A.serviceStaking.getStakingConfigs({networkId:e,symbol:o,provider:s});if(!g)throw new Error("Staking config not found");if(g?.unstakeWithSignMessage){var p=yield a.A.serviceAccount.getAccount({accountId:t,networkId:e}),{message:y,deadline:k}=yield a.A.serviceStaking.buildLidoEthPermitMessageData({accountId:t,networkId:e,amount:n}),x=yield a.A.serviceDApp.openSignMessageModal({accountId:t,networkId:e,request:{origin:"https://lido.fi/",scope:"ethereum"},unsignedMessage:{type:c.$.TYPED_DATA_V4,message:y,payload:[p.address,y]},walletInternalSign:!0});b=yield a.A.serviceStaking.buildUnstakeTransaction({amount:n,networkId:e,accountId:t,symbol:o,provider:s,signature:x,deadline:k})}else b=yield a.A.serviceStaking.buildUnstakeTransaction({amount:n,identity:d,networkId:e,accountId:t,symbol:o,provider:s});var v,S,j,h=yield a.A.serviceStaking.buildEarnTx({networkId:e,accountId:t,tx:b});l.Ay.isBTCNetwork(e)&&h.fee&&(v=!0,S=!1),yield i({encodedTx:h,stakingInfo:u,signOnly:g?.withdrawSignOnly,useFeeInTx:v,feeInfoEditable:S,onSuccess:(j=(0,r.A)((function*(n){if(g?.withdrawSignOnly){var r=n[0].signedTx.finalizedPsbtHex;r&&d&&(yield a.A.serviceStaking.unstakePush({txId:d,networkId:e,accountId:t,symbol:o,provider:s,unstakeTxHex:r}),m?.(n))}else m?.(n)})),function onSuccess(e){return j.apply(this,arguments)}),onFail:f})})),function(e){return n.apply(this,arguments)}),[t,e,i])}function useUniversalClaim({networkId:e,accountId:t}){var n,{navigationToSendConfirm:c}=(0,s.E)({accountId:t,networkId:e}),u=(0,d.QL)();return(0,o.useCallback)((n=(0,r.A)((function*({identity:n,amount:o,provider:s,symbol:d,stakingInfo:m,onSuccess:f,onFail:b}){var g,p=(g=(0,r.A)((function*(){var r,i,u=yield a.A.serviceStaking.buildClaimTransaction({networkId:e,accountId:t,symbol:d,provider:s,amount:o,identity:n}),g=yield a.A.serviceStaking.buildEarnTx({networkId:e,accountId:t,tx:u});l.Ay.isBTCNetwork(e)&&g.fee&&(r=!0,i=!1),yield c({encodedTx:g,stakingInfo:m,onSuccess:f,onFail:b,useFeeInTx:r,feeInfoEditable:i})})),function continueClaim(){return g.apply(this,arguments)});if(Number(o)>0){var y=yield a.A.serviceStaking.estimateFee({networkId:e,provider:s,symbol:d,action:"claim",amount:o}),k=(0,i.A)(y.token.price).multipliedBy(o);if(k.lt(y.feeFiatValue))return void u({claimTokenFiatValue:k.toFixed(),estFiatValue:y.feeFiatValue,onConfirm:p})}yield p()})),function(e){return n.apply(this,arguments)}),[c,t,e,u])}},800987:(e,t,n)=>{n.r(t),n.d(t,{default:()=>B});var r=n(586330),o=n(514041),i=n(908867),a=n(490343),s=n(610421),l=n(325809),c=n(498356),d=n(326745),u=n(911998),m=n(153763),f=n(334439),b=n(392097),g=n(553083),p=n(714191),y=n(73197),k=n(550082),x=n(324586),v=n(582438),S=n.n(v),j=n(584186),h=n(831085);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var BabylonTracking=function({networkId:e,accountId:t,symbol:n,provider:o,onRefresh:l}){var c=(0,i.A)();return(0,u.yk)((0,r.A)((function*(){var i,a=yield s.A.serviceStaking.getPortfolioList({accountId:t,networkId:e,symbol:n,provider:o}),c=yield s.A.serviceStaking.getBabylonTrackingItems({accountId:t,networkId:e}),d=c.filter((function(e){return"stake"===e.action})),u=c.filter((function(e){return"claim"===e.action})),m=Date.now(),f=c.filter((function(e){return m-e.createAt>j.A.getTimeDurationMs({day:3})})).map((function(e){return e.txId}));d.forEach((i=(0,r.A)((function*(e){var t=a.find((function(t){return t.txId===e.txId}));t&&f.push(t.txId)})),function(e){return i.apply(this,arguments)})),u.forEach((function(e){a.find((function(t){return t.txId===e.txId&&"claimed"===t.status}))&&f.push(e.txId)})),f.length>0&&(yield s.A.serviceStaking.removeBabylonTrackingItem({txIds:S()(f)}),l?.())})),[e,t,n,o,l],{pollingInterval:3e4}),(0,h.jsx)(a.Alert,{type:"info",title:c.formatMessage({id:f.ETranslations.earn_pending_transactions_data_out_of_sync})})},BabylonTrackingAlert=function(e){var{provider:t}=e;return t.toLowerCase()!==y.e.Babylon.toLowerCase()?null:(0,h.jsx)(BabylonTracking,function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,x.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e))},w=n(138584);function FaqInfo({solutions:e}){var t=(0,i.A)();return(0,h.jsxs)(a.YStack,{gap:"$6",children:[(0,h.jsx)(a.SizableText,{size:"$headingLg",children:t.formatMessage({id:f.ETranslations.global_faqs})}),(0,h.jsx)(a.YStack,{children:(0,h.jsx)(a.Accordion,{type:"multiple",gap:"$2",children:e.map((function({question:e,answer:t},n){return(0,h.jsxs)(a.Accordion.Item,{value:String(n),children:[(0,h.jsx)(a.Accordion.Trigger,{unstyled:!0,flexDirection:"row",alignItems:"center",borderWidth:0,bg:"$transparent",px:"$2",py:"$1",mx:"$-2",my:"$-1",hoverStyle:{bg:"$bgHover"},pressStyle:{bg:"$bgActive"},borderRadius:"$2",children:function({open:t}){return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(a.SizableText,{textAlign:"left",flex:1,size:"$bodyLgMedium",color:t?"$text":"$textSubdued",children:e}),(0,h.jsx)(a.Stack,{animation:"quick",rotate:t?"180deg":"0deg",children:(0,h.jsx)(a.Icon,{name:"ChevronDownSmallOutline",color:t?"$iconActive":"$iconSubdued",size:"$5"})})]})}}),(0,h.jsx)(a.Accordion.HeightAnimator,{animation:"quick",children:(0,h.jsx)(a.Accordion.Content,{unstyled:!0,pt:"$2",pb:"$5",animation:"100ms",enterStyle:{opacity:0},exitStyle:{opacity:0},children:(0,h.jsx)(a.SizableText,{size:"$bodyMd",children:t})})})]},String(n))}))})})]})}var FaqSection=function({details:e}){var{result:t}=(0,u.yk)((0,r.A)((function*(){return e?s.A.serviceStaking.getFAQList({symbol:e.token.info.symbol,provider:e.provider.name}):Promise.resolve([])})),[e],{initResult:[]});return 0===t.length?null:(0,h.jsx)(FaqInfo,{solutions:t})},I=n(259227),_=n(839850),A=n(117746),T=["title","children","tooltip","link"];function GridItem_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function GridItem_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?GridItem_ownKeys(Object(n),!0).forEach((function(t){(0,x.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GridItem_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function GridItem(e){var{title:t,children:n,tooltip:r,link:i}=e,s=(0,_.A)(e,T),l=(0,o.useCallback)((function(){i&&(0,A.Dr)(i)}),[i]);return(0,h.jsxs)(a.YStack,GridItem_objectSpread(GridItem_objectSpread({p:"$3",flexBasis:"50%",$gtMd:{flexBasis:"33.33%"}},s),{},{children:[(0,h.jsxs)(a.XStack,{gap:"$1",mb:"$1",children:[(0,h.jsx)(a.SizableText,{size:"$bodyMd",color:"$textSubdued",children:t}),r?(0,h.jsx)(a.Popover,{placement:"top",title:t,renderTrigger:(0,h.jsx)(a.IconButton,{iconColor:"$iconSubdued",size:"small",icon:"InfoCircleOutline",variant:"tertiary"}),renderContent:(0,h.jsx)(a.Stack,{p:"$5",children:(0,h.jsx)(a.SizableText,{children:r})})}):null]}),(0,h.jsxs)(a.XStack,{gap:"$1",alignItems:"center",children:[(0,h.jsx)(a.SizableText,{size:"$bodyLgMedium",children:n}),i?(0,h.jsx)(a.Stack,{onPress:l,cursor:"pointer",children:(0,h.jsx)(a.Icon,{name:"OpenOutline",color:"$iconSubdued",size:"$5"})}):null]})]}))}function ProfitSection_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ProfitInfo({apr:e,earningsIn24h:t,rewardTokens:n,updateFrequency:r,unstakingPeriod:o,earnPoints:s}){var l=(0,i.A)(),[{currencyInfo:{symbol:c}}]=(0,I.useSettingsPersistAtom)();return(0,h.jsxs)(a.YStack,{gap:"$6",children:[(0,h.jsx)(a.SizableText,{size:"$headingLg",children:l.formatMessage({id:f.ETranslations.global_profit})}),s?(0,h.jsx)(a.Alert,{title:l.formatMessage({id:f.ETranslations.earn_earn_points}),description:l.formatMessage({id:f.ETranslations.earn_earn_points_desc})}):(0,h.jsxs)(a.XStack,{flexWrap:"wrap",m:"$-5",p:"$2",children:[e&&Number(e)>0?(0,h.jsx)(GridItem,{title:l.formatMessage({id:f.ETranslations.earn_rewards_percentage}),children:(0,h.jsx)(a.SizableText,{size:"$bodyLgMedium",color:"$textSuccess",children:`${e}% ${l.formatMessage({id:f.ETranslations.global_apr})}`})}):null,t&&Number(t)>0?(0,h.jsx)(GridItem,{title:l.formatMessage({id:f.ETranslations.earn_24h_earnings}),tooltip:l.formatMessage({id:f.ETranslations.earn_24h_earnings_tooltip}),children:(0,h.jsx)(a.NumberSizeableText,{formatter:"value",color:"$textSuccess",size:"$bodyLgMedium",formatterOptions:{currency:c},children:t})}):null,n?(0,h.jsx)(GridItem,{title:l.formatMessage({id:f.ETranslations.earn_reward_tokens}),children:n}):null,r?(0,h.jsx)(GridItem,{title:l.formatMessage({id:f.ETranslations.earn_update_frequency}),children:r}):null,o?(0,h.jsx)(GridItem,{title:l.formatMessage({id:f.ETranslations.earn_unstaking_period}),children:l.formatMessage({id:f.ETranslations.earn_up_to_number_days},{number:o})}):null]})]})}var ProfitSection=function({details:e}){if(!e)return null;var t={apr:Number(e.provider?.apr)>0?e.provider.apr:void 0,earningsIn24h:e.earnings24h,rewardTokens:e.rewardToken,earnPoints:e.provider.earnPoints,unstakingPeriod:e.unstakingPeriod};return(0,h.jsx)(ProfitInfo,function ProfitSection_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ProfitSection_ownKeys(Object(n),!0).forEach((function(t){(0,x.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ProfitSection_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t))},P=n(241440),O=n(905817);function ProviderSection_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ProviderInfo({validator:e,minOrMaxStaking:t,untilNextLaunch:n,network:r,babylonConfirmedCap:o,babylonStakingCap:s}){var l,c=(0,i.A)();if(t){var{minValue:d,maxValue:u}=t;u&&d?l={label:c.formatMessage({id:f.ETranslations.earn_min_max_staking}),value:`${d}/${u} ${t.token}`}:d&&(l={label:c.formatMessage({id:f.ETranslations.earn_min_staking}),value:`${d} ${t.token}`})}return(0,h.jsxs)(a.YStack,{gap:"$6",children:[(0,h.jsx)(a.SizableText,{size:"$headingLg",children:c.formatMessage({id:f.ETranslations.swap_history_detail_provider})}),(0,h.jsxs)(a.XStack,{flexWrap:"wrap",m:"$-5",p:"$2",children:[e?(0,h.jsx)(GridItem,{title:e.isProtocol?c.formatMessage({id:f.ETranslations.global_protocol}):c.formatMessage({id:f.ETranslations.earn_validator}),link:e.link,children:(0,O.c)(e.name)}):null,l?(0,h.jsx)(GridItem,{title:l.label,children:(0,h.jsx)(a.SizableText,{size:"$bodyLgMedium",children:l.value})}):null,n?(0,h.jsx)(GridItem,{title:c.formatMessage({id:f.ETranslations.earn_until_next_launch}),tooltip:c.formatMessage({id:f.ETranslations.earn_until_next_launch_tooltip}),children:(0,h.jsx)(a.SizableText,{size:"$bodyLgMedium",children:c.formatMessage({id:f.ETranslations.earn_number_symbol_left},{number:Number(n.value).toFixed(2),symbol:n.token})})}):null,r?.name?(0,h.jsx)(GridItem,{title:c.formatMessage({id:f.ETranslations.global_network}),children:r.name}):null,s?.value?(0,h.jsxs)(GridItem,{title:c.formatMessage({id:f.ETranslations.earn_staking_cap}),children:[s.value," BTC"]}):null,o?.value?(0,h.jsxs)(GridItem,{title:c.formatMessage({id:f.ETranslations.earn_confirmed_cap}),children:[o.value," BTC"]}):null]})]})}var ProviderSection=function({details:e}){if(!e)return null;var t={};return e.provider&&(t.validator={name:e.provider.name,link:e.provider.website,isProtocol:"everstake"!==e.provider.name.toLowerCase()},e.provider.minStakeAmount&&(t.minOrMaxStaking={minValue:Number(e.provider.minStakeAmount),maxValue:Number(e.provider.maxStakeAmount),token:e.token.info.symbol}),e.provider.nextLaunchLeft&&(t.untilNextLaunch={value:Number(e.provider.nextLaunchLeft),token:e.token.info.symbol}),"babylon"===e.provider.name&&(e.provider.stakingCap&&Number(e.provider.stakingCap)>0&&(t.babylonStakingCap={value:e.provider.stakingCap}),e.provider.totalStaked&&Number(e.provider.totalStaked)>0&&(t.babylonConfirmedCap={value:(0,P.A)(e.provider.totalStaked).decimalPlaces(4).toFixed()}))),e.network&&(t.network=e.network),0===Object.keys(t).length?null:(0,h.jsx)(ProviderInfo,function ProviderSection_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ProviderSection_ownKeys(Object(n),!0).forEach((function(t){(0,x.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ProviderSection_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t))};function ProtocolDetails({details:e,children:t}){return e?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(a.YStack,{gap:"$8",children:t}),(0,h.jsx)(a.Divider,{}),(0,h.jsx)(ProfitSection,{details:e}),(0,h.jsx)(a.Divider,{}),(0,h.jsx)(ProviderSection,{details:e}),(0,h.jsx)(a.Divider,{}),(0,h.jsx)(FaqSection,{details:e})]}):null}var $=n(353203),C=n(162616),M=n(491180);function NoAddressWarning({accountId:e,networkId:t,indexedAccountId:n,onCreateAddress:l}){var c=(0,i.A)(),[d,m]=(0,o.useState)(!1),{activeAccount:{wallet:b}}=(0,C.LH)({num:0}),{createAddress:p}=(0,$.m)(),y=(0,o.useCallback)((0,r.A)((function*(){m(!0);try{var e=yield s.A.serviceNetwork.getGlobalDeriveTypeOfNetwork({networkId:t});yield p({num:0,account:{walletId:b?.id,networkId:t,indexedAccountId:n,deriveType:g.Ay.isBTCNetwork(t)?"BIP86":e},selectAfterCreate:!1}),l()}finally{m(!1)}})),[b,n,t,p,l]),{result:k}=(0,u.yk)((0,r.A)((function*(){var{serviceAccount:r,serviceNetwork:o}=s.A,i="";try{i=(yield r.getAccount({accountId:e,networkId:t})).name}catch(e){if(n)i=(yield r.getIndexedAccount({id:n})).name}return{accountName:i,networkName:(yield o.getNetwork({networkId:t})).name}})),[e,n,t]),x=M.A.isOthersAccount({accountId:e}),v=(0,o.useMemo)((function(){var e,n;return x?{title:c.formatMessage({id:f.ETranslations.wallet_unsupported_network_title},{network:null!=(n=k?.networkName)?n:""}),description:c.formatMessage({id:f.ETranslations.wallet_unsupported_network_desc})}:{title:c.formatMessage({id:f.ETranslations.wallet_no_address}),description:c.formatMessage({id:f.ETranslations.global_private_key_error},{network:null!=(e=k?.networkName)?e:"",path:g.Ay.isBTCNetwork(t)?"(Taproot)":""})}}),[k,x,t,c]);return k?e||n?(0,h.jsx)(a.Alert,{type:"warning",title:v.title,description:v.description,action:x?void 0:{primary:c.formatMessage({id:f.ETranslations.dapp_connect_create}),onPrimaryPress:function(){return y()},isPrimaryLoading:d}}):(0,h.jsx)(a.Alert,{type:"critical",title:c.formatMessage({id:f.ETranslations.swap_page_button_no_connected_wallet})}):null}var E=n(17617),L=n(391944);function PortfolioSection_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function PortfolioSection_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?PortfolioSection_ownKeys(Object(n),!0).forEach((function(t){(0,x.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PortfolioSection_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var PortfolioItem=function({tokenImageUri:e,tokenSymbol:t,amount:n,statusText:i,onPress:s,buttonText:l,tooltip:c,disabled:d,useLoading:u}){var[m,f]=(0,o.useState)(!1),b=(0,o.useCallback)((0,r.A)((function*(){try{u&&f(!0),yield s?.()}finally{u&&f(!1)}})),[s,u]);return(0,h.jsxs)(a.XStack,{minHeight:30,alignItems:"center",justifyContent:"space-between",children:[(0,h.jsxs)(a.XStack,{alignItems:"center",gap:"$1.5",children:[(0,h.jsx)(L.o,{size:"sm",tokenImageUri:e}),(0,h.jsx)(a.NumberSizeableText,{size:"$bodyLgMedium",formatter:"balance",formatterOptions:{tokenSymbol:t},children:n}),(0,h.jsx)(a.XStack,{gap:"$1",ai:"center",children:(0,h.jsx)(a.SizableText,{size:"$bodyLg",children:i})}),c?(0,h.jsx)(a.Popover,{placement:"bottom",title:i,renderTrigger:(0,h.jsx)(a.IconButton,{iconColor:"$iconSubdued",size:"small",icon:"InfoCircleOutline",variant:"tertiary"}),renderContent:(0,h.jsx)(a.Stack,{p:"$5",children:(0,h.jsx)(a.SizableText,{children:c})})}):null]}),l&&s?(0,h.jsx)(a.Button,{size:"small",disabled:d,variant:"primary",onPress:b,loading:m,children:l}):null]})};function PortfolioInfo({token:e,active:t,pendingInactive:n,pendingInactivePeriod:r,pendingActive:o,pendingActiveTooltip:s,claimable:l,rewards:c,tooltipForClaimable:d,labelForClaimable:u,minClaimableNum:m,babylonOverflow:b,onClaim:g,onWithdraw:p,onPortfolioDetails:y}){var k=(0,i.A)();if(Number(n)>0||Number(l)>0||Number(o)>0||Number(b)>0||Number(t)>0){var x=Boolean(m&&c&&Number(c)<Number(m));return(0,h.jsxs)(a.YStack,{gap:"$6",children:[(0,h.jsxs)(a.XStack,{justifyContent:"space-between",children:[(0,h.jsx)(a.SizableText,{size:"$headingLg",children:k.formatMessage({id:f.ETranslations.earn_portfolio})}),void 0!==y?(0,h.jsx)(a.Button,{variant:"tertiary",iconAfter:"ChevronRightOutline",onPress:y,children:k.formatMessage({id:f.ETranslations.global_details})}):null]}),(0,h.jsxs)(a.YStack,{gap:"$3",children:[o&&Number(o)?(0,h.jsx)(PortfolioItem,{tokenImageUri:e.logoURI,tokenSymbol:e.symbol,amount:o,tooltip:s,statusText:k.formatMessage({id:f.ETranslations.earn_pending_activation})}):null,t&&Number(t)?(0,h.jsx)(PortfolioItem,{tokenImageUri:e.logoURI,tokenSymbol:e.symbol,amount:t,statusText:k.formatMessage({id:f.ETranslations.earn_active})}):null,n&&Number(n)?(0,h.jsx)(PortfolioItem,{tokenImageUri:e.logoURI,tokenSymbol:e.symbol,amount:n,statusText:k.formatMessage({id:f.ETranslations.earn_withdrawal_requested}),tooltip:r?k.formatMessage({id:f.ETranslations.earn_withdrawal_up_to_number_days},{number:r}):void 0}):null,l&&Number(l)>0?(0,h.jsx)(PortfolioItem,{tokenImageUri:e.logoURI,tokenSymbol:e.symbol,amount:l,statusText:null!=u?u:k.formatMessage({id:f.ETranslations.earn_claimable}),useLoading:!0,onPress:g,buttonText:k.formatMessage({id:f.ETranslations.earn_claim}),tooltip:d}):null,c&&Number(c)>0?(0,h.jsx)(PortfolioItem,{tokenImageUri:e.logoURI,tokenSymbol:e.symbol,amount:c,statusText:k.formatMessage({id:f.ETranslations.earn_rewards}),onPress:function(){return g?.({isReward:!0})},useLoading:!0,buttonText:k.formatMessage({id:f.ETranslations.earn_claim}),tooltip:x?k.formatMessage({id:f.ETranslations.earn_minimum_claim_tooltip},{number:m,symbol:e.symbol}):void 0,disabled:x}):null,Number(b)>0?(0,h.jsx)(a.Alert,{fullBleed:!0,borderRadius:"$3",borderWidth:E.A.hairlineWidth,borderColor:"$borderCautionSubdued",type:"critical",title:k.formatMessage({id:f.ETranslations.earn_overflow_number_alert},{number:b}),action:{primary:k.formatMessage({id:f.ETranslations.global_withdraw}),onPrimaryPress:p}}):null]})]})}return null}var PortfolioSection=function({details:e,onClaim:t,onWithdraw:n,onPortfolioDetails:r}){var o,a,s,l=(0,i.A)();if(!e)return null;e.provider.name.toLowerCase()===y.e.Everstake.toLowerCase()&&"eth"===e.token.info.symbol.toLowerCase()?o=l.formatMessage({id:f.ETranslations.earn_pending_activation_tooltip_eth}):e.pendingActivatePeriod&&(o=l.formatMessage({id:f.ETranslations.earn_pending_activation_tooltip},{number:e.pendingActivatePeriod})),e.provider.name.toLowerCase()===y.e.Everstake.toLowerCase()&&"atom"===e.token.info.symbol.toLowerCase()&&(s=l.formatMessage({id:f.ETranslations.earn_claim_together_tooltip})),e.provider.name.toLowerCase()===y.e.Everstake.toLowerCase()&&"matic"===e.token.info.symbol.toLowerCase()&&(a=l.formatMessage({id:f.ETranslations.earn_withdrawn}));var c={pendingInactive:e.pendingInactive,pendingInactivePeriod:e.unstakingPeriod?String(e.unstakingPeriod):void 0,pendingActive:e.pendingActive,pendingActiveTooltip:o,claimable:e.claimable,rewards:e.rewards,active:e.active,minClaimableNum:e.provider.minClaimableAmount,babylonOverflow:Number(e?.staked)>0&&Number(e.overflow)>0?e.overflow:void 0,token:e.token.info,labelForClaimable:a,tooltipForClaimable:s};return(0,h.jsx)(PortfolioInfo,PortfolioSection_objectSpread(PortfolioSection_objectSpread({},c),{},{onClaim:t,onPortfolioDetails:r,onWithdraw:n}))};function StakedValueSection_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function StakedValueSection_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?StakedValueSection_ownKeys(Object(n),!0).forEach((function(t){(0,x.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):StakedValueSection_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function StakedValueInfo({value:e=0,stakedNumber:t=0,availableNumber:n=0,tokenSymbol:r,stakeButtonProps:o,withdrawButtonProps:s}){var l=t+n,c=(0,i.A)(),d=(0,a.useMedia)(),[{currencyInfo:{symbol:u}}]=(0,I.useSettingsPersistAtom)();return(0,h.jsxs)(a.YStack,{gap:"$6",children:[(0,h.jsxs)(a.YStack,{gap:"$2",children:[(0,h.jsx)(a.SizableText,{size:"$headingLg",children:c.formatMessage({id:f.ETranslations.earn_staked_value})}),(0,h.jsxs)(a.XStack,{gap:"$2",children:[(0,h.jsx)(a.NumberSizeableText,{flex:1,size:"$heading4xl",color:0===e?"$textDisabled":"$text",formatter:"value",formatterOptions:{currency:u},children:e||0}),d.gtMd?(0,h.jsxs)(a.XStack,{gap:"$2",children:[(0,h.jsx)(a.Button,StakedValueSection_objectSpread(StakedValueSection_objectSpread({},s),{},{children:c.formatMessage({id:f.ETranslations.global_withdraw})})),(0,h.jsx)(a.Button,StakedValueSection_objectSpread(StakedValueSection_objectSpread({},o),{},{children:c.formatMessage({id:f.ETranslations.earn_stake})}))]}):null]})]}),(0,h.jsxs)(a.YStack,{gap:"$1.5",children:[(0,h.jsx)(a.YStack,{my:"$1.5",children:(0,h.jsx)(a.Progress,{colors:["$bgSuccessStrong","$bgInverse"],size:"medium",gap:2,value:0===l?0:t/l*100})}),(0,h.jsxs)(a.XStack,{justifyContent:"space-between",children:[(0,h.jsxs)(a.YStack,{gap:"$0.5",children:[(0,h.jsx)(a.SizableText,{size:"$bodyMd",color:"$textSubdued",children:c.formatMessage({id:f.ETranslations.earn_staked})}),(0,h.jsx)(a.NumberSizeableText,{size:"$bodyLgMedium",formatter:"balance",formatterOptions:{tokenSymbol:r},children:t||0})]}),(0,h.jsxs)(a.YStack,{gap:"$0.5",children:[(0,h.jsx)(a.SizableText,{size:"$bodyMd",color:"$textSuccess",textAlign:"right",children:c.formatMessage({id:f.ETranslations.global_available})}),(0,h.jsx)(a.NumberSizeableText,{size:"$bodyLgMedium",formatter:"balance",formatterOptions:{tokenSymbol:r},children:n||0})]})]})]})]})}var StakedValueSection=function({details:e,stakeButtonProps:t,withdrawButtonProps:n}){if(!e)return null;var r={value:Number(e.stakedFiatValue),stakedNumber:Number(e.staked),availableNumber:Number(e.available),tokenSymbol:e.token.info.symbol};return(0,h.jsx)(StakedValueInfo,StakedValueSection_objectSpread(StakedValueSection_objectSpread({},r),{},{stakeButtonProps:t,withdrawButtonProps:n}))},N=n(394764),PendingIndicator=function({num:e,onPress:t}){var n=(0,i.A)();return(0,h.jsx)(a.Stack,{cursor:t?"pointer":"default",children:(0,h.jsxs)(a.Badge,{badgeType:"info",badgeSize:"lg",onPress:t,children:[(0,h.jsx)(a.Stack,{borderRadius:"$full",p:3,bg:"$borderInfo",children:(0,h.jsx)(a.Stack,{w:"$1.5",h:"$1.5",borderRadius:"$full",bg:"$iconInfo"})}),(0,h.jsx)(a.Badge.Text,{pl:"$2",children:e>1?`${e} ${n.formatMessage({id:f.ETranslations.global_pending})} `:n.formatMessage({id:f.ETranslations.global_pending})})]})})},StakingActivityIndicator=function({num:e,onPress:t}){var n=(0,c.A)(),r=(0,o.useCallback)((function(){return e>0?(0,h.jsx)(PendingIndicator,{num:e,onPress:t}):t?(0,h.jsx)(a.IconButton,{variant:"tertiary",size:"medium",icon:"ClockTimeHistoryOutline",onPress:t}):null}),[e,t]);return(0,o.useEffect)((function(){n.setOptions({headerRight:r})}),[n,r,e]),null},StakingTransactionIndicator=function({accountId:e,networkId:t,stakeTag:n,onRefresh:i,onPress:a}){var{result:l,run:c}=(0,u.yk)((0,r.A)((function*(){return e?s.A.serviceStaking.fetchLocalStakingHistory({accountId:e,networkId:t,stakeTag:n}):[]})),[e,t,n],{initResult:[]}),d=l.length>0,f=(0,N.Z)(d),b=(0,m.E)();return(0,o.useEffect)((function(){b&&c()}),[b,c]),(0,u.yk)((0,r.A)((function*(){d&&(e&&(yield s.A.serviceHistory.fetchAccountHistory({accountId:e,networkId:t})),yield c())})),[e,d,t,c],{pollingInterval:j.A.getTimeDurationMs({seconds:50})}),(0,o.useEffect)((function(){!d&&f&&i?.()}),[f,d,i]),(0,h.jsx)(StakingActivityIndicator,{num:l.length,onPress:a})},OverviewSkeleton=function(){return(0,h.jsxs)(a.Stack,{gap:"$8",children:[(0,h.jsxs)(a.YStack,{gap:"$6",children:[(0,h.jsxs)(a.YStack,{gap:"$2",children:[(0,h.jsx)(a.Skeleton.HeadingLg,{}),(0,h.jsx)(a.Skeleton.Heading4Xl,{})]}),(0,h.jsxs)(a.YStack,{gap:"$1.5",children:[(0,h.jsx)(a.YStack,{py:"$1.5",children:(0,h.jsx)(a.Skeleton,{width:"100%",height:4})}),(0,h.jsxs)(a.XStack,{justifyContent:"space-between",children:[(0,h.jsxs)(a.YStack,{gap:"$0.5",children:[(0,h.jsx)(a.Skeleton.BodyMd,{}),(0,h.jsx)(a.Skeleton.BodyLg,{})]}),(0,h.jsxs)(a.YStack,{alignItems:"flex-end",gap:"$0.5",children:[(0,h.jsx)(a.Skeleton.BodyMd,{}),(0,h.jsx)(a.Skeleton.BodyLg,{})]})]})]})]}),(0,h.jsx)(a.Divider,{}),(0,h.jsxs)(a.YStack,{gap:"$6",children:[(0,h.jsx)(a.Skeleton.HeadingLg,{}),(0,h.jsxs)(a.XStack,{children:[(0,h.jsxs)(a.YStack,{gap:"$0.5",flex:1,children:[(0,h.jsx)(a.Skeleton.BodyMd,{}),(0,h.jsx)(a.Skeleton.BodyLg,{})]}),(0,h.jsxs)(a.YStack,{gap:"$0.5",flex:1,children:[(0,h.jsx)(a.Skeleton.BodyMd,{}),(0,h.jsx)(a.Skeleton.BodyLg,{})]}),(0,h.jsxs)(a.YStack,{gap:"$0.5",flex:1,$md:{display:"none"},children:[(0,h.jsx)(a.Skeleton.BodyMd,{}),(0,h.jsx)(a.Skeleton.BodyLg,{})]})]})]})]})},z=n(653913),ProtocolDetailsPage=function(){var e,t=(0,d.u)(),{accountId:n,networkId:l,indexedAccountId:p,symbol:x,provider:v}=t.params,S=(0,c.A)(),[j,I]=(0,o.useState)(!1),{result:_,run:A}=(0,u.yk)((0,r.A)((function*(){return s.A.serviceStaking.getEarnAccount({accountId:n,networkId:l,indexedAccountId:p})})),[n,p,l]),{result:T,isLoading:P,run:$}=(0,u.yk)((function(){return s.A.serviceStaking.getProtocolDetails({accountId:n,networkId:l,indexedAccountId:p,symbol:x,provider:v})}),[n,l,p,x,v],{watchLoading:!0}),C=(0,o.useCallback)((0,r.A)((function*(){yield A(),$()})),[A,$]),M=function(){var e,t=(0,c.A)();return(0,o.useCallback)((e=(0,r.A)((function*({details:e,accountId:n,networkId:r,symbol:o,provider:i,onSuccess:a}){if(e&&n){var l=yield s.A.serviceStaking.getStakingConfigs({networkId:r,symbol:o,provider:i});if(!l)throw new Error("Staking config not found");l.withdrawWithTx?t.push(b.Ax.WithdrawOptions,{accountId:n,networkId:r,details:e,symbol:o,provider:i}):t.push(b.Ax.Withdraw,{accountId:n,networkId:r,details:e,onSuccess:a})}})),function(t){return e.apply(this,arguments)}),[t])}(),E=function(){var e,t=(0,c.A)();return(0,o.useCallback)((e=(0,r.A)((function*({details:e,accountId:n,networkId:r,setStakeLoading:o,onSuccess:i}){if(e&&n)if(e.approveTarget){o?.(!0);try{var{allowanceParsed:a}=yield s.A.serviceStaking.fetchTokenAllowance({accountId:n,networkId:r,spenderAddress:e.approveTarget,tokenAddress:e.token.info.address});t.push(b.Ax.ApproveBaseStake,{accountId:n,networkId:r,details:e,currentAllowance:a})}finally{o?.(!1)}}else t.push(b.Ax.Stake,{accountId:n,networkId:r,details:e,onSuccess:i})})),function(t){return e.apply(this,arguments)}),[t])}(),{result:L,run:N}=(0,u.yk)((0,r.A)((function*(){return v.toLowerCase()===y.e.Babylon.toLowerCase()&&_?yield s.A.serviceStaking.getBabylonTrackingItems({accountId:_.accountId,networkId:_.networkId}):[]})),[v,_],{initResult:[]}),B=(0,m.E)();(0,o.useEffect)((function(){B&&N()}),[B,N]);var D,F=(0,o.useCallback)((0,r.A)((function*(){$(),N()})),[$,N]),R=(0,o.useCallback)((0,r.A)((function*(){var e;yield E({details:T,accountId:_?.accountId,networkId:l,symbol:x,provider:v,setStakeLoading:I,onSuccess:(e=(0,r.A)((function*(){g.Ay.isBTCNetwork(l)&&(yield $(),yield N())})),function onSuccess(){return e.apply(this,arguments)})})})),[T,_,l,E,I,x,v,$,N]),V=(0,o.useCallback)((0,r.A)((function*(){var e;yield M({details:T,accountId:_?.accountId,networkId:l,symbol:x,provider:v,onSuccess:(e=(0,r.A)((function*(){g.Ay.isBTCNetwork(l)&&(yield $())})),function onSuccess(){return e.apply(this,arguments)})})})),[M,T,_,l,x,v,$]),Y=function({accountId:e,networkId:t}){var n,i=(0,c.A)(),a=(0,z.D0)({networkId:t,accountId:null!=e?e:""});return(0,o.useCallback)((n=(0,r.A)((function*({details:n,symbol:r,provider:o,isReward:l,stakingInfo:c,onSuccess:d}){var u;if(n&&e){var m,f=yield s.A.serviceStaking.getStakingConfigs({networkId:t,symbol:r,provider:o});if(!f)throw new Error("Staking config not found");l?yield a({amount:null!=(m=n.rewards)?m:"0",symbol:r,provider:o,stakingInfo:c}):f.claimWithTx?i.push(b.Ax.ClaimOptions,{accountId:e,networkId:t,details:n,symbol:r,provider:o}):"everstake"!==o.toLowerCase()||"apt"!==r.toLowerCase()?yield a({amount:null!=(u=n.claimable)?u:"0",symbol:r,provider:o,stakingInfo:c}):i.push(b.Ax.Claim,{accountId:e,networkId:t,details:n,onSuccess:d,amount:f.claimWithAmount?n.claimable:void 0})}})),function(e){return n.apply(this,arguments)}),[i,e,t,a])}({accountId:_?.accountId,networkId:l}),U=(0,o.useCallback)((D=(0,r.A)((function*(e){if(T){var{isReward:t}=null!=e?e:{},n=t?T.rewards:T.claimable;yield Y({details:T,isReward:t,symbol:x,provider:v,stakingInfo:{label:k.D.Claim,protocol:T.provider.name,protocolLogoURI:T.provider.logoURI,receive:{token:T.token.info,amount:null!=n?n:"0"},tags:[(0,O.Y)(T)]}})}})),function(e){return D.apply(this,arguments)}),[Y,T,x,v]),K=(0,o.useMemo)((function(){return g.Ay.isBTCNetwork(l)&&_?.accountId?function(){S.push(b.Ax.PortfolioDetails,{accountId:_?.accountId,networkId:l,symbol:x,provider:v})}:void 0}),[S,_?.accountId,l,x,v]),W=(0,o.useMemo)((function(){if(T?.earnHistoryEnable&&_?.accountId)return function(){S.navigate(b.Ax.HistoryList,{accountId:_?.accountId,networkId:l,symbol:x,provider:v,stakeTag:(0,O.Y)(T)})}}),[S,_?.accountId,l,x,v,T]),G=(0,i.A)(),X=(0,a.useMedia)(),H=(0,o.useMemo)((function(){return{variant:"primary",loading:j,onPress:R,disabled:!_?.accountAddress}}),[j,_?.accountAddress,R]),q=(0,o.useMemo)((function(){return{onPress:V,disabled:!_?.accountAddress||!(Number(T?.active)>0||Number(T?.overflow)>0)}}),[V,_?.accountAddress,T?.active,T?.overflow]);return(0,h.jsxs)(a.Page,{scrollEnabled:!0,children:[(0,h.jsx)(a.Page.Header,{title:G.formatMessage({id:f.ETranslations.earn_earn_symbol},{symbol:g.Ay.isBTCNetwork(l)?`${x} (Taproot)`:x})}),(0,h.jsx)(a.Page.Body,{px:"$5",pb:"$5",gap:"$8",children:(0,h.jsxs)(w.bU,{LoadingSkeleton:OverviewSkeleton,loading:(0,w.am)({result:T,isLoading:P}),error:(0,w.o0)({result:T,isLoading:P}),onRefresh:$,children:[(0,h.jsx)(ProtocolDetails,{details:T,children:_?.accountAddress?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(StakedValueSection,{details:T,stakeButtonProps:H,withdrawButtonProps:q}),(0,h.jsx)(PortfolioSection,{details:T,onClaim:U,onWithdraw:V,onPortfolioDetails:K}),L.length>0?(0,h.jsx)(BabylonTrackingAlert,{accountId:_.accountId,networkId:l,provider:v,symbol:x,onRefresh:F}):null]}):(0,h.jsx)(NoAddressWarning,{accountId:n,networkId:l,indexedAccountId:p,onCreateAddress:C})}),X.gtMd?null:(0,h.jsx)(a.Page.Footer,{onConfirmText:G.formatMessage({id:f.ETranslations.earn_stake}),confirmButtonProps:H,onCancelText:G.formatMessage({id:f.ETranslations.global_withdraw}),cancelButtonProps:q}),T?(0,h.jsx)(StakingTransactionIndicator,{accountId:null!=(e=_?.accountId)?e:"",networkId:l,stakeTag:(0,O.Y)(T),onRefresh:$,onPress:W}):null]})})]})};const B=function ProtocolDetailsPageWithProvider(){return(0,h.jsx)(l.b8,{config:{sceneName:p.Zs.home,sceneUrl:""},enabledNum:[0],children:(0,h.jsx)(ProtocolDetailsPage,{})})}},905817:(e,t,n)=>{n.d(t,{FZ:()=>countDecimalPlaces,Y:()=>buildLocalTxStatusSyncId,c:()=>capitalizeString});var r=n(241440),buildLocalTxStatusSyncId=function(e){return`${e.provider.name.toLowerCase()}-${e.token.info.symbol.toLowerCase()}`};function capitalizeString(e){return e?e.charAt(0).toUpperCase()+e.slice(1):e}function countDecimalPlaces(e){var t="string"==typeof e?Number(e):e;if(Number.isNaN(t))return 0;var n="string"==typeof e?e:(0,r.A)(e).toFixed(),o=n.indexOf(".");return-1===o?0:n.length-o-1}}}]);