"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[17539],{326745:(e,n,t)=>{t.d(n,{u:()=>useAppRoute});var r=t(654266);function useAppRoute(){return(0,r.lq)()}},925771:(e,n,t)=>{t.d(n,{$:()=>CalculationListItem,k:()=>CalculationList});var r=t(324586),a=t(839850),i=t(490343),o=t(831085),s=["children"],l=["children"],c=["children"];function ownKeys(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function _objectSpread(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ownKeys(Object(t),!0).forEach((function(n){(0,r.A)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function CalculationList({children:e}){return(0,o.jsx)(i.YStack,{gap:"$4",children:e})}function CalculationListItem(e){var{children:n}=e,t=(0,a.A)(e,s);return(0,o.jsx)(i.XStack,_objectSpread(_objectSpread({animation:"quick",enterStyle:{opacity:0},justifyContent:"space-between",alignItems:"center"},t),{},{children:n}))}CalculationList.Item=CalculationListItem,CalculationListItem.Label=function CalculationListItemLabel(e){var{children:n}=e,t=(0,a.A)(e,l);return(0,o.jsx)(i.SizableText,_objectSpread(_objectSpread({color:"$textSubdued"},t),{},{children:n}))},CalculationListItem.Value=function CalculationListItemValue(e){var{children:n}=e,t=(0,a.A)(e,c);return(0,o.jsx)(i.SizableText,_objectSpread(_objectSpread({size:"$bodyLgMedium"},t),{},{children:n}))}},713989:(e,n,t)=>{t.d(n,{G:()=>StakeShouldUnderstand,a:()=>WithdrawShouldUnderstand});var r=t(908867),a=t(490343),i=t(334439),o=t(831085),ShouldUnderstandListItemListItem=function({title:e,description:n,index:t}){return(0,o.jsxs)(a.YStack,{children:[(0,o.jsxs)(a.XStack,{children:[(0,o.jsx)(a.Stack,{w:"$5",children:(0,o.jsxs)(a.SizableText,{children:[t,"."]})}),(0,o.jsx)(a.Stack,{flex:1,children:(0,o.jsx)(a.SizableText,{children:e})})]}),n?(0,o.jsx)(a.XStack,{pl:"$5",children:(0,o.jsx)(a.SizableText,{children:n})}):null]})},ShouldUnderstand=function({items:e}){return(0,o.jsx)(a.YStack,{flex:1,children:(0,o.jsx)(a.ScrollView,{maxHeight:560,children:(0,o.jsx)(a.YStack,{gap:"$5",children:e.map((function(e,n){return(0,o.jsx)(ShouldUnderstandListItemListItem,{index:n+1,title:e.title,description:e.description},n)}))})})})},createTypography=function(e,n){return n?e:""},StakeShouldUnderstand=function({provider:e,symbol:n,apr:t,updateFrequency:s,receiveSymbol:l,unstakingPeriod:c}){var u=(0,r.A)(),d=[];return d="everstake"===e&&["sol","eth","apt"].includes(n)?[createTypography(u.formatMessage({id:i.ETranslations.earn_earn_up_to_number_per_year},{number:(0,o.jsxs)(a.SizableText,{color:"$textSuccess",children:[t,"%"]})}),t),createTypography(u.formatMessage({id:i.ETranslations.earn_rewards_updated_around_time},{time:(0,o.jsx)(a.SizableText,{color:"$textSuccess",children:s})}),s),createTypography(u.formatMessage({id:i.ETranslations.earn_rewards_automatically_restaked},{automatically:(0,o.jsx)(a.SizableText,{color:"$textSuccess",children:u.formatMessage({id:i.ETranslations.earn_automatically})})}),!0),createTypography(u.formatMessage({id:i.ETranslations.earn_withdrawal_up_to_number_days},{number:c}),c)]:"everstake"===e&&["atom","matic"].includes(n)?[createTypography(u.formatMessage({id:i.ETranslations.earn_earn_up_to_number_per_year},{number:(0,o.jsxs)(a.SizableText,{color:"$textSuccess",children:[t,"%"]})}),{number:t}),createTypography(u.formatMessage({id:i.ETranslations.earn_rewards_updated_around_time},{time:(0,o.jsx)(a.SizableText,{color:"$textSuccess",children:s})}),s),createTypography(u.formatMessage({id:i.ETranslations.earn_rewards_manually_restaked},{manually:(0,o.jsx)(a.SizableText,{color:"$textSuccess",children:u.formatMessage({id:i.ETranslations.earn_manually})})}),!0),createTypography(u.formatMessage({id:i.ETranslations.earn_withdrawal_up_to_number_days},{number:c}),c)]:"lido"===e&&["eth","matic"].includes(n)?[createTypography(u.formatMessage({id:i.ETranslations.earn_earn_up_to_number_per_year},{number:(0,o.jsxs)(a.SizableText,{color:"$textSuccess",children:[t,"%"]})}),t),createTypography(u.formatMessage({id:i.ETranslations.earn_receive_token_trade_anytime},{token:(0,o.jsx)(a.SizableText,{color:"$textSuccess",children:l})}),l),createTypography(u.formatMessage({id:i.ETranslations.earn_rewards_updated_around_time},{time:(0,o.jsx)(a.SizableText,{color:"$textSuccess",children:s})}),s),createTypography(u.formatMessage({id:i.ETranslations.earn_rewards_automatically_restaked},{automatically:(0,o.jsx)(a.SizableText,{color:"$textSuccess",children:u.formatMessage({id:i.ETranslations.earn_automatically})})}),!0),createTypography(u.formatMessage({id:i.ETranslations.earn_withdrawal_up_to_number_days},{number:c}),c)]:"babylon"===e?[u.formatMessage({id:i.ETranslations.earn_stake_through_onekey_earn_points}),u.formatMessage({id:i.ETranslations.earn_check_staking_results_overflow}),createTypography(u.formatMessage({id:i.ETranslations.earn_early_withdraw_stake_unstaking_period},{number:c}),c)]:[createTypography(u.formatMessage({id:i.ETranslations.earn_earn_up_to_number_per_year},{number:(0,o.jsx)(a.SizableText,{color:"$textSuccess",children:null!=t?t:4})}),!0)],(0,o.jsx)(ShouldUnderstand,{items:d.filter((function(e){return!!e})).map((function(e){return{title:e}}))})},WithdrawShouldUnderstand=function({withdrawalPeriod:e}){var n=(0,r.A)();return(0,o.jsx)(ShouldUnderstand,{items:[{title:n.formatMessage({id:i.ETranslations.earn_withdrawal_take_up_to_number_days},{number:e})},{title:n.formatMessage({id:i.ETranslations.earn_claim_assets_after_processing})}]})}},286192:(e,n,t)=>{t.d(n,{BA:()=>EstimateNetworkFee,QL:()=>useShowClaimEstimateGasAlert,fH:()=>calcDaysSpent,sM:()=>useShowStakeEstimateGasAlert});var r=t(514041),a=t(241440),i=t(908867),o=t(490343),s=t(259227),l=t(334439),c=t(925771),u=t(831085),useShowStakeEstimateGasAlert=function(){var e=(0,i.A)(),[{currencyInfo:{symbol:n}}]=(0,s.useSettingsPersistAtom)();return(0,r.useCallback)((function({daysConsumed:t,estFiatValue:r,onConfirm:a}){var i=t?e.formatMessage({id:l.ETranslations.earn_transaction_loss_when_stake},{number:(0,u.jsx)(o.SizableText,{size:"$bodyLgMedium",color:"$textCaution",children:t})}):void 0;o.Dialog.show({title:e.formatMessage({id:l.ETranslations.earn_transaction_loss}),icon:"InfoCircleOutline",description:i,renderContent:(0,u.jsxs)(o.XStack,{children:[(0,u.jsxs)(o.SizableText,{size:"$bodyLg",mr:"$1",children:[e.formatMessage({id:l.ETranslations.global_est_network_fee}),":"]}),(0,u.jsx)(o.NumberSizeableText,{size:"$bodyLgMedium",formatter:"value",formatterOptions:{currency:n},children:r})]}),onConfirm:a})}),[e,n])},useShowClaimEstimateGasAlert=function(){var e=(0,i.A)(),[{currencyInfo:{symbol:n}}]=(0,s.useSettingsPersistAtom)();return(0,r.useCallback)((function({claimTokenFiatValue:t,estFiatValue:r,onConfirm:i}){var s=(0,a.A)(t).minus(r).absoluteValue().toFixed(),c=e.formatMessage({id:l.ETranslations.earn_transaction_loss_when_claim},{number:(0,u.jsx)(o.NumberSizeableText,{size:"$bodyLgMedium",formatter:"value",color:"$textCaution",formatterOptions:{currency:n},children:s})});o.Dialog.show({title:e.formatMessage({id:l.ETranslations.earn_transaction_loss}),icon:"InfoCircleOutline",description:c,renderContent:(0,u.jsxs)(o.YStack,{children:[(0,u.jsxs)(o.XStack,{children:[(0,u.jsxs)(o.SizableText,{size:"$bodyLg",mr:"$1",children:[e.formatMessage({id:l.ETranslations.global_est_network_fee}),":"]}),(0,u.jsx)(o.NumberSizeableText,{size:"$bodyLgMedium",formatter:"value",formatterOptions:{currency:n},children:r})]}),(0,u.jsxs)(o.XStack,{children:[(0,u.jsxs)(o.SizableText,{size:"$bodyLg",mr:"$1",children:[e.formatMessage({id:l.ETranslations.earn_reward_value}),":"]}),(0,u.jsx)(o.NumberSizeableText,{size:"$bodyLgMedium",formatter:"value",formatterOptions:{currency:n},children:t})]})]}),onConfirm:i})}),[e,n])},EstimateNetworkFeeListItem=function({estFiatValue:e,onPress:n}){var t=(0,i.A)(),[{currencyInfo:{symbol:r}}]=(0,s.useSettingsPersistAtom)();return Number(e)>0?(0,u.jsxs)(c.$,{onPress:n,children:[(0,u.jsx)(c.$.Label,{children:t.formatMessage({id:l.ETranslations.global_est_network_fee})}),(0,u.jsxs)(o.XStack,{alignItems:"center",cursor:n?"pointer":void 0,mr:n?-6:void 0,children:[(0,u.jsx)(o.NumberSizeableText,{size:"$bodyLgMedium",formatter:"value",formatterOptions:{currency:r},children:e}),n?(0,u.jsx)(o.Icon,{name:"ChevronRightSmallOutline",size:24}):null]})]}):null},calcDaysSpent=function(e,n){var t=(0,a.A)(n).div(e).multipliedBy(365);return t.isNaN()?void 0:Math.ceil(t.toNumber())},EstimateNetworkFee=function({estimateFeeResp:e,onPress:n,isVisible:t}){return e&&t?(0,u.jsx)(EstimateNetworkFeeListItem,{estFiatValue:e.feeFiatValue,onPress:n}):null}},87474:(e,n,t)=>{t.d(n,{A:()=>StakingFormWrapper});var r=t(324586),a=t(839850),i=t(490343),o=t(831085),s=["children"];function ownKeys(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function _objectSpread(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ownKeys(Object(t),!0).forEach((function(n){(0,r.A)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function StakingFormWrapper(e){var{children:n}=e,t=(0,a.A)(e,s);return(0,o.jsx)(i.YStack,_objectSpread(_objectSpread({p:"$5",gap:"$5"},t),{},{children:n}))}},90393:(e,n,t)=>{t.d(n,{Z:()=>useProviderLabel});var r=t(908867),a=t(334439),useProviderLabel=function(e){var n=(0,r.A)(),t=n.formatMessage({id:a.ETranslations.global_protocol});return"everstake"===e.toLowerCase()?t=n.formatMessage({id:a.ETranslations.earn_validator}):"babylogn"===e.toLowerCase()&&(t=n.formatMessage({id:a.ETranslations.earn_finality_provider})),t}},653913:(e,n,t)=>{t.d(n,{B8:()=>useUniversalStake,D0:()=>useUniversalClaim,Pg:()=>useUniversalWithdraw});var r=t(586330),a=t(514041),i=t(241440),o=t(610421),s=t(927799),l=t(553083),c=t(161024),u=t(286192);function useUniversalStake({networkId:e,accountId:n}){var t,{navigationToSendConfirm:i}=(0,s.E)({accountId:n,networkId:e});return(0,a.useCallback)((t=(0,r.A)((function*({amount:t,symbol:r,term:a,feeRate:s,provider:c,stakingInfo:u,onSuccess:d,onFail:m}){var f,b,g=yield o.A.serviceStaking.buildStakeTransaction({amount:t,networkId:e,accountId:n,symbol:r,term:a,provider:c,feeRate:s}),p=yield o.A.serviceStaking.buildEarnTx({networkId:e,accountId:n,tx:g});l.Ay.isBTCNetwork(e)&&p.fee&&(f=!0,b=!1),yield i({encodedTx:p,stakingInfo:u,onSuccess:d,onFail:m,useFeeInTx:f,feeInfoEditable:b})})),function(e){return t.apply(this,arguments)}),[i,n,e])}function useUniversalWithdraw({networkId:e,accountId:n}){var t,{navigationToSendConfirm:i}=(0,s.E)({accountId:n,networkId:e});return(0,a.useCallback)((t=(0,r.A)((function*({amount:t,symbol:a,provider:s,identity:u,stakingInfo:d,onSuccess:m,onFail:f}){var b,g=yield o.A.serviceStaking.getStakingConfigs({networkId:e,symbol:a,provider:s});if(!g)throw new Error("Staking config not found");if(g?.unstakeWithSignMessage){var p=yield o.A.serviceAccount.getAccount({accountId:n,networkId:e}),{message:y,deadline:x}=yield o.A.serviceStaking.buildLidoEthPermitMessageData({accountId:n,networkId:e,amount:t}),_=yield o.A.serviceDApp.openSignMessageModal({accountId:n,networkId:e,request:{origin:"https://lido.fi/",scope:"ethereum"},unsignedMessage:{type:c.$.TYPED_DATA_V4,message:y,payload:[p.address,y]},walletInternalSign:!0});b=yield o.A.serviceStaking.buildUnstakeTransaction({amount:t,networkId:e,accountId:n,symbol:a,provider:s,signature:_,deadline:x})}else b=yield o.A.serviceStaking.buildUnstakeTransaction({amount:t,identity:u,networkId:e,accountId:n,symbol:a,provider:s});var h,k,v,S=yield o.A.serviceStaking.buildEarnTx({networkId:e,accountId:n,tx:b});l.Ay.isBTCNetwork(e)&&S.fee&&(h=!0,k=!1),yield i({encodedTx:S,stakingInfo:d,signOnly:g?.withdrawSignOnly,useFeeInTx:h,feeInfoEditable:k,onSuccess:(v=(0,r.A)((function*(t){if(g?.withdrawSignOnly){var r=t[0].signedTx.finalizedPsbtHex;r&&u&&(yield o.A.serviceStaking.unstakePush({txId:u,networkId:e,accountId:n,symbol:a,provider:s,unstakeTxHex:r}),m?.(t))}else m?.(t)})),function onSuccess(e){return v.apply(this,arguments)}),onFail:f})})),function(e){return t.apply(this,arguments)}),[n,e,i])}function useUniversalClaim({networkId:e,accountId:n}){var t,{navigationToSendConfirm:c}=(0,s.E)({accountId:n,networkId:e}),d=(0,u.QL)();return(0,a.useCallback)((t=(0,r.A)((function*({identity:t,amount:a,provider:s,symbol:u,stakingInfo:m,onSuccess:f,onFail:b}){var g,p=(g=(0,r.A)((function*(){var r,i,d=yield o.A.serviceStaking.buildClaimTransaction({networkId:e,accountId:n,symbol:u,provider:s,amount:a,identity:t}),g=yield o.A.serviceStaking.buildEarnTx({networkId:e,accountId:n,tx:d});l.Ay.isBTCNetwork(e)&&g.fee&&(r=!0,i=!1),yield c({encodedTx:g,stakingInfo:m,onSuccess:f,onFail:b,useFeeInTx:r,feeInfoEditable:i})})),function continueClaim(){return g.apply(this,arguments)});if(Number(a)>0){var y=yield o.A.serviceStaking.estimateFee({networkId:e,provider:s,symbol:u,action:"claim",amount:a}),x=(0,i.A)(y.token.price).multipliedBy(a);if(x.lt(y.feeFiatValue))return void d({claimTokenFiatValue:x.toFixed(),estFiatValue:y.feeFiatValue,onConfirm:p})}yield p()})),function(e){return t.apply(this,arguments)}),[c,n,e,d])}},717539:(e,n,t)=>{t.r(n),t.d(n,{default:()=>Withdraw});var r=t(586330),a=t(514041),i=t(241440),o=t(908867),s=t(490343),l=t(610421),c=t(498356),u=t(326745),d=t(911998),m=t(334439),f=t(948675),b=t(73197),g=t(550082),p=t(728046),y=t(88803),x=t(259227),_=t(905817),h=t(925771),k=t(713989),v=t(286192),S=t(87474),w=t(831085),UniversalWithdraw=function({balance:e,price:n,tokenImageUri:t,tokenSymbol:l,providerLogo:c,providerName:u,initialAmount:d,minAmount:f="0",unstakingPeriod:b,providerLabel:g,decimals:T,showPayWith:j,payWithToken:I,payWithTokenRate:A="1",hideReceived:M,estimateFeeResp:C,onConfirm:$}){var E=Number(n)>0?n:"0",[O,P]=(0,a.useState)(!1),[L,z]=(0,a.useState)(null!=d?d:""),[{currencyInfo:{symbol:F}}]=(0,x.useSettingsPersistAtom)(),N=(0,o.A)(),V=(0,a.useCallback)((0,r.A)((function*(){var e,n;p.A.dismiss(),s.Dialog.show({renderIcon:(0,w.jsx)(s.Image,{width:"$14",height:"$14",src:null!=t?t:""}),title:N.formatMessage({id:m.ETranslations.earn_provider_asset_withdrawal},{provider:(0,_.c)(null!=u?u:""),asset:null!=(e=l?.toUpperCase())?e:""}),renderContent:(0,w.jsx)(k.a,{withdrawalPeriod:null!=b?b:3}),onConfirm:(n=(0,r.A)((function*(e){try{P(!0),yield e.close(),yield $?.(L)}finally{P(!1)}})),function onConfirm(e){return n.apply(this,arguments)}),onConfirmText:N.formatMessage({id:m.ETranslations.global_withdraw}),showCancelButton:!1})})),[L,$,N,t,l,u,b]),D=(0,a.useCallback)((function(e){if(new i.A(e).isNaN())""===e&&z("");else{var n=Boolean(T&&Number(T)>0&&(0,_.FZ)(e)>T);z(n?function(e){return e}:e)}}),[T]),U=(0,a.useMemo)((function(){if(Number(L)>0&&Number(E)>0)return(0,i.A)(L).multipliedBy(E).toFixed()}),[L,E]),R=(0,a.useMemo)((function(){return new i.A(L).gt(e)}),[L,e]),B=(0,a.useMemo)((function(){var e=new i.A(f),n=new i.A(L);return!(!e.isGreaterThan(0)||!n.isGreaterThan(0))&&n.isLessThan(e)}),[f,L]),W=(0,a.useMemo)((function(){if(Number(f)>0){var n=new i.A(Number(f)),t=new i.A(L),r=new i.A(e);if(n.gt(0)&&t.gt(0)&&r.gte(0))return t.gt(0)&&t.gte(n)&&r.minus(t).gt(0)&&r.minus(t).lt(n)}return!1}),[f,L,e]),X=(0,a.useCallback)((function(){D(e)}),[D,e]),Y=(0,a.useMemo)((function(){return(0,i.A)(L).isNaN()||(0,i.A)(L).isLessThanOrEqualTo(0)||R||B}),[L,R,B]),K=void 0===d;return(0,w.jsxs)(S.A,{children:[(0,w.jsxs)(s.Stack,{position:"relative",opacity:K?1:.7,children:[(0,w.jsx)(y.J,{bg:K?"$bgApp":"$bgDisabled",hasError:R||B,value:L,onChange:D,tokenSelectorTriggerProps:{selectedTokenImageUri:t,selectedTokenSymbol:l},inputProps:{placeholder:"0",autoFocus:K},balanceProps:{value:e,iconText:N.formatMessage({id:m.ETranslations.earn_staked}),onPress:X},valueProps:{value:U,currency:U?F:void 0},enableMaxAmount:!0}),K?null:(0,w.jsx)(s.Stack,{position:"absolute",w:"100%",h:"100%",zIndex:1})]}),W?(0,w.jsx)(s.Alert,{icon:"InfoCircleOutline",type:"warning",title:N.formatMessage({id:m.ETranslations.earn_unstake_all_due_to_min_withdrawal},{number:f,symbol:l})}):null,B?(0,w.jsx)(s.Alert,{icon:"InfoCircleOutline",type:"critical",title:N.formatMessage({id:m.ETranslations.earn_minimum_amount},{number:`${f} ${null!=l?l:""}`})}):null,R?(0,w.jsx)(s.Alert,{icon:"InfoCircleOutline",type:"critical",title:N.formatMessage({id:m.ETranslations.earn_insufficient_staked_balance})}):null,(0,w.jsxs)(h.k,{children:[L&&!M?(0,w.jsxs)(h.$,{children:[(0,w.jsx)(h.$.Label,{children:N.formatMessage({id:m.ETranslations.earn_receive})}),(0,w.jsx)(h.$.Value,{children:(0,w.jsx)(s.NumberSizeableText,{formatter:"balance",size:"$bodyLgMedium",formatterOptions:{tokenSymbol:l},children:L})})]}):null,j&&I&&Number(L)>0?(0,w.jsxs)(h.$,{children:[(0,w.jsx)(h.$.Label,{children:N.formatMessage({id:m.ETranslations.earn_pay_with})}),(0,w.jsx)(h.$.Value,{children:(0,w.jsx)(s.NumberSizeableText,{formatter:"balance",size:"$bodyLgMedium",formatterOptions:{tokenSymbol:I},children:(0,i.A)(L).multipliedBy(A).toFixed()})})]}):null,c&&u?(0,w.jsxs)(h.$,{children:[(0,w.jsx)(h.$.Label,{children:null!=g?g:N.formatMessage({id:m.ETranslations.global_protocol})}),(0,w.jsx)(h.$.Value,{children:(0,w.jsxs)(s.XStack,{gap:"$2",alignItems:"center",children:[(0,w.jsx)(s.Image,{width:"$5",height:"$5",src:c,borderRadius:"$2"}),(0,w.jsx)(s.SizableText,{size:"$bodyLgMedium",children:(0,_.c)(u)})]})})]}):null,b?(0,w.jsxs)(h.$,{children:[(0,w.jsxs)(s.XStack,{flex:1,alignItems:"center",gap:"$1",children:[(0,w.jsx)(h.$.Label,{children:N.formatMessage({id:m.ETranslations.earn_unstaking_period})}),(0,w.jsx)(s.Popover,{title:N.formatMessage({id:m.ETranslations.earn_unstaking_period}),placement:"bottom-start",renderTrigger:(0,w.jsx)(s.IconButton,{iconColor:"$iconSubdued",size:"small",icon:"InfoCircleOutline",variant:"tertiary"}),renderContent:(0,w.jsx)(s.Stack,{p:"$5",children:(0,w.jsx)(s.SizableText,{children:N.formatMessage({id:m.ETranslations.earn_unstaking_period_tooltip})})})})]}),(0,w.jsx)(h.$.Value,{children:N.formatMessage({id:m.ETranslations.earn_up_to_number_days},{number:b})})]}):null,C?(0,w.jsx)(v.BA,{estimateFeeResp:C,isVisible:Number(L)>0}):null]}),(0,w.jsx)(s.Page.Footer,{onConfirmText:N.formatMessage({id:m.ETranslations.global_continue}),confirmButtonProps:{onPress:V,loading:O,disabled:Y}})]})},T=t(90393),j=t(653913);const Withdraw=function(){var e,n=(0,o.A)(),t=(0,u.u)(),{accountId:p,networkId:y,details:x,identity:h,amount:k,onSuccess:v}=t.params,{token:S,provider:I,active:A,overflow:M}=x,{price:C,info:$}=S,E=(0,_.Y)(x),O=(0,c.A)(),P=(0,j.Pg)({accountId:p,networkId:y}),L=(0,a.useCallback)((e=(0,r.A)((function*(e){yield P({amount:e,identity:h,symbol:$.symbol,provider:I.name,stakingInfo:{label:g.D.Withdraw,protocol:I.name,protocolLogoURI:I.logoURI,tags:[E]},onSuccess:function(){O.pop(),f.U.staking.page.unstaking({token:$,stakingProtocol:I.name}),v?.()}})})),function(n){return e.apply(this,arguments)}),[P,$,O,I,E,h,v]),z=(0,T.Z)(I.name),F=(0,a.useMemo)((function(){return"lido"===I.name.toLowerCase()}),[I]),N=(0,a.useMemo)((function(){return"everstake"===I.name.toLowerCase()&&"apt"===$.symbol.toLowerCase()}),[I,$.symbol]),{result:V}=(0,d.yk)((0,r.A)((function*(){return yield l.A.serviceStaking.estimateFee({networkId:y,provider:I.name,symbol:$.symbol,action:"unstake",amount:"1",txId:I.name.toLowerCase()===b.e.Babylon.toLowerCase()?h:void 0})})),[y,I.name,$.symbol,h]),D=(0,a.useMemo)((function(){return x.provider.unstakingTime?Math.ceil(x.provider.unstakingTime/86400):x.unstakingPeriod}),[x]);return(0,w.jsxs)(s.Page,{children:[(0,w.jsx)(s.Page.Header,{title:n.formatMessage({id:m.ETranslations.earn_withdraw_token},{token:$.symbol})}),(0,w.jsx)(s.Page.Body,{children:(0,w.jsx)(UniversalWithdraw,{price:C,hideReceived:N,decimals:x.token.info.decimals,balance:(0,i.A)(null!=A?A:0).plus(null!=M?M:0).toFixed(),initialAmount:k,tokenSymbol:$.symbol,tokenImageUri:$.logoURI,providerLogo:I.logoURI,providerName:I.name,onConfirm:L,minAmount:Number(I.minUnstakeAmount)>0?String(I.minUnstakeAmount):void 0,unstakingPeriod:D,providerLabel:z,showPayWith:F,payWithToken:x.rewardToken,payWithTokenRate:I.lidoStTokenRate,estimateFeeResp:V})})]})}},905817:(e,n,t)=>{t.d(n,{FZ:()=>countDecimalPlaces,Y:()=>buildLocalTxStatusSyncId,c:()=>capitalizeString});var r=t(241440),buildLocalTxStatusSyncId=function(e){return`${e.provider.name.toLowerCase()}-${e.token.info.symbol.toLowerCase()}`};function capitalizeString(e){return e?e.charAt(0).toUpperCase()+e.slice(1):e}function countDecimalPlaces(e){var n="string"==typeof e?Number(e):e;if(Number.isNaN(n))return 0;var t="string"==typeof e?e:(0,r.A)(e).toFixed(),a=t.indexOf(".");return-1===a?0:t.length-a-1}}}]);