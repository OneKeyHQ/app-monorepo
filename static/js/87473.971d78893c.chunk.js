/*! For license information please see 87473.971d78893c.chunk.js.LICENSE.txt */
(self.webpackChunkweb=self.webpackChunkweb||[]).push([[87473],{387473:(t,e,r)=>{"use strict";var i=r(901048).Buffer,n=t.exports;n.version="v"+r(178830).rE,n.versionGuard=function(t){if(void 0!==t){throw new Error("More than one instance of kaspacore-lib found. Please make sure to require kaspacore-lib and check that submodules do not also include their own kaspacore-lib dependency.")}},n.versionGuard(r.g._kaspacoreLibVersion),r.g._kaspacoreLibVersion=n.version;const s=(()=>{let t={},e=new Promise(((e,r)=>{t={resolve:e,reject:r}}));return Object.assign(e,t),e})();n.ready=()=>{s.resolve(!0)},n.initRuntime=()=>s,n.crypto={},n.crypto.BN=r(47495),n.crypto.ECDSA=r(269575),n.crypto.Schnorr=r(510682),n.crypto.Hash=r(905079),n.crypto.Random=r(671820),n.crypto.Point=r(976649),n.crypto.Signature=r(918677),n.encoding={},n.encoding.Base58=r(365819),n.encoding.Base58Check=r(408467),n.encoding.BufferReader=r(821722),n.encoding.BufferWriter=r(111978),n.encoding.Varint=r(455513),n.util={},n.util.buffer=r(201146),n.util.js=r(359983),n.util.preconditions=r(198641),n.util.base32=r(596988),n.util.convertBits=r(481225),n.setDebugLevel=t=>{n.util.js.debugLevel=t},n.errors=r(669277),n.Address=r(61365),n.Block=r(256043),n.MerkleBlock=r(785068),n.BlockHeader=r(592595),n.HDPrivateKey=r(719755),n.HDPublicKey=r(999513),n.Networks=r(628658),n.Opcode=r(938387),n.PrivateKey=r(901487),n.PublicKey=r(536061),n.Script=r(526785),n.Transaction=r(470234),n.URI=r(53763),n.Unit=r(397659),n.deps={},n.deps.bnjs=r(817328),n.deps.bs58=r(939216),n.deps.Buffer=i,n.deps.elliptic=r(590653),n.deps._=r(645250),n.Transaction.sighash=r(361763)},61365:(t,e,r)=>{"use strict";var i=r(901048).Buffer,n=r(645250),s=r(198641),o=r(669277),a=r(408467),u=r(628658),h=r(905079),f=r(359983),c=r(536061),d=(r(47495),r(596988)),p=r(481225);function Address(t,e,r){if(!(this instanceof Address))return new Address(t,e,r);if(n.isArray(t)&&n.isNumber(e))return Address.createMultisig(t,e,r);if(t instanceof Address)return t;if(s.checkArgument(t,"First argument is required, please include address data.","guide/address.html"),e&&!u.get(e))throw new TypeError('Second argument must be "livenet", "testnet", or "regtest".');if(r&&r!==Address.PayToPublicKey&&r!==Address.PayToScriptHash)throw new TypeError('Third argument must be "pubkey" or "scripthash".');var i=this._classifyArguments(t,e,r);return i.network=i.network||u.get(e)||u.defaultNetwork,i.type=i.type||r||Address.PayToPublicKey,f.defineImmutable(this,{hashBuffer:i.hashBuffer,network:i.network,type:i.type}),this}function decodeCashAddress(t){function validChecksum(t,e){var r=function prefixToArray(t){for(var e=[],r=0;r<t.length;r++)e.push(31&t.charCodeAt(r));return e}(t).concat([0]);return 0===polymod(r.concat(e))}s.checkArgument(function hasSingleCase(t){var e=t.toLowerCase(),r=t.toUpperCase();return t===e||t===r}(t),"Mixed case");var e,r,n=(t=t.toLowerCase()).split(":");s.checkArgument(n.length<=2,"Invalid format:"+t),2===n.length?(e=n[0],r=n[1]):(e=null,r=n[0]);var o=d.decode(r.toLowerCase());if(e)s.checkArgument(validChecksum(e,o),"Invalid checksum:"+t);else{for(var a,h=["livenet","testnet","regtest"];!e&&(a=h.shift());){var f=u.get(a).prefix;validChecksum(f,o)&&(e=f)}s.checkArgument(e,"Invalid checksum:"+t)}var c=p(o.slice(0,-8),5,8,!0),l=c.shift(),m=c;1==l?s.checkArgument(264==8*m.length,"Invalid hash size:"+t):s.checkArgument(256==8*m.length,"Invalid hash size:"+t);var b=function getType(t){switch(120&t){case 0:return"pubkey";case 8:return"scripthash";default:throw new Error("Invalid address type in version byte:"+t)}}(l),g=u.get(e),y={};return y.hashBuffer=i.from(m),y.network=g,y.type=b,y}Address.prototype._classifyArguments=function(t,e,r){if((t instanceof i||t instanceof Uint8Array)&&32===t.length)return Address._transformPublicKeyBuffer(t);if((t instanceof i||t instanceof Uint8Array)&&21===t.length)return Address._transformBuffer(t,e,r);if(t instanceof c)return Address._transformPublicKey(t);if(t instanceof b)return Address._transformScript(t,e);if("string"==typeof t)return Address._transformString(t,e,r);if(n.isObject(t))return Address._transformObject(t);throw new TypeError("First argument is an unrecognized data format.")},Address.PayToPublicKey="pubkey",Address.PayToScriptHash="scripthash",Address._transformHash=function(t){var e={};if(!(t instanceof i||t instanceof Uint8Array))throw new TypeError("Address supplied is not a buffer.");if(20!==t.length)throw new TypeError("Address hashbuffers must be exactly 20 bytes.");return e.hashBuffer=t,e},Address._transformObject=function(t){return s.checkArgument(t.hash||t.hashBuffer,"Must provide a `hash` or `hashBuffer` property"),s.checkArgument(t.type,"Must provide a `type` property"),{hashBuffer:t.hash?i.from(t.hash,"hex"):t.hashBuffer,network:u.get(t.network)||u.defaultNetwork,type:t.type}},Address._classifyFromVersion=function(t){var e={},r=u.get(t[0],"pubkeyhash"),i=u.get(t[0],"scripthash");return r?(e.network=r,e.type=Address.PayToPublicKey):i&&(e.network=i,e.type=Address.PayToScriptHash),e},Address._transformBuffer=function(t,e,r){var n={};if(!(t instanceof i||t instanceof Uint8Array))throw new TypeError("Address supplied is not a buffer.");if(21!==t.length)throw new TypeError("Address buffers must be exactly 21 bytes.");var s=u.get(e),o=Address._classifyFromVersion(t);if(e&&!s)throw new TypeError("Unknown network");if(!o.network||s&&s!==o.network)throw new TypeError("Address has mismatched network type.");if(!o.type||r&&r!==o.type)throw new TypeError("Address has mismatched type.");return n.hashBuffer=t.slice(1),n.network=o.network,n.type=o.type,n},Address._transformPublicKey=function(t){var e={};if(!(t instanceof c))throw new TypeError("Address must be an instance of PublicKey.");return e.hashBuffer=t.toBuffer(),e.type=Address.PayToPublicKey,e},Address._transformPublicKeyBuffer=function(t){var e={};if(!(t instanceof i))throw new TypeError("pubkeyBuffer must be a buffer");return e.hashBuffer=t,e.type=Address.PayToPublicKey,e},Address._transformScript=function(t,e){s.checkArgument(t instanceof b,"script must be a Script instance");var r=t.getAddressInfo(e);if(!r)throw new o.Script.CantDeriveAddress(t);return r},Address.createMultisig=function(t,e,r){return r=r||t[0].network||u.defaultNetwork,Address.payingTo(b.buildMultisigOut(t,e),r)},Address._decodeCashAddress=decodeCashAddress,Address._transformString=function(t,e,r){if("string"!=typeof t)throw new TypeError("data parameter supplied is not a string.");if(t.length<34)throw new Error("Invalid address");if(t.length>100)throw new TypeError("address string is too long");t=t.trim();var i=u.get(e);if(e&&!i)throw new TypeError("Unknown network");if(t.length>35){var n=decodeCashAddress(t);if(!n.network||i&&i.name!==n.network.name)throw new TypeError("Address has mismatched network type.");if(!n.type||r&&r!==n.type)throw new TypeError("Address has mismatched type.");return n}var s=a.decode(t);return Address._transformBuffer(s,e,r)},Address.fromPublicKey=function(t,e){var r=Address._transformPublicKey(t);return e=e||u.defaultNetwork,new Address(r.hashBuffer,e,r.type)},Address.fromPublicKeyBuffer=function(t,e){var r=Address._transformPublicKeyBuffer(t);return new Address(r.hashBuffer,e,Address.PayToPublicKeyHash)},Address.fromScriptHash=function(t,e){s.checkArgument(t,"hash parameter is required");var r=Address._transformHash(t);return new Address(r.hashBuffer,e,Address.PayToScriptHash)},Address.payingTo=function(t,e){return s.checkArgument(t,"script is required"),s.checkArgument(t instanceof b,"script must be instance of Script"),Address.fromScriptHash(h.sha256ripemd160(t.toBuffer()),e)},Address.fromScript=function(t,e){s.checkArgument(t instanceof b,"script must be a Script instance");var r=Address._transformScript(t,e);return new Address(r.hashBuffer,e,r.type)},Address.fromBuffer=function(t,e,r){var i=Address._transformBuffer(t,e,r);return new Address(i.hashBuffer,i.network,i.type)},Address.fromString=function(t,e,r){var i=Address._transformString(t,e,r);return new Address(i.hashBuffer,i.network,i.type)},Address.fromObject=function fromObject(t){return s.checkState(f.isHexa(t.hash),'Unexpected hash property, "'+t.hash+'", expected to be hex.'),new Address(i.from(t.hash,"hex"),t.network,t.type)},Address.getValidationError=function(t,e,r){var i;try{new Address(t,e,r)}catch(t){i=t}return i},Address.isValid=function(t,e,r){return!Address.getValidationError(t,e,r)},Address.prototype.isPayToPublicKey=function(){return this.type===Address.PayToPublicKey},Address.prototype.isPayToScriptHash=function(){return this.type===Address.PayToScriptHash},Address.prototype.toBuffer=function(){var t=i.from([this.network[this.type]]);return i.concat([t,this.hashBuffer])},Address.prototype.toObject=Address.prototype.toJSON=function toObject(){return{hash:this.hashBuffer.toString("hex"),type:this.type,network:this.network.toString()}},Address.prototype.inspect=function(){return"<Address: "+this.toString()+", type: "+this.type+", network: "+this.network+">"},Address.prototype.toCashBuffer=function(){var t=i.from([this.network[this.type]]);return i.concat([t,this.hashBuffer])},Address.prototype.toLegacyAddress=function(){return a.encode(this.toBuffer())},Address.prototype.toCashAddress=function(t){var e=this.network.prefixArray.concat([0]),r=function getTypeBits(t){switch(t){case"pubkey":return 0;case"scripthash":return 8;default:throw new Error("Invalid type:"+t)}}(this.type),i=Array.prototype.slice.call(this.hashBuffer,0),n=p([r].concat(i),8,5),s=e.concat(n).concat([0,0,0,0,0,0,0,0]),o=n.concat(function checksumToArray(t){for(var e=[],r=0;r<8;++r)e.push(31&t),t/=32;return e.reverse()}(polymod(s)));return!0===t?d.encode(o):this.network.prefix+":"+d.encode(o)},Address.prototype.toString=Address.prototype.toCashAddress;var l=[152,121,243,174,30],m=[4072443489,3077413346,1046459332,783016616,1329849456];function polymod(t){for(var e=0,r=1,i=0,n=0;n<t.length;n++){i=e>>>3,e&=7,e<<=5,e|=r>>>27,r&=134217727,r<<=5,r^=t[n];for(var s=0;s<l.length;++s)i&1<<s&&(e^=l[s],r^=m[s])}return(r^=1)<0&&(r^=1<<31,r+=2*(1<<30)),e*(1<<30)*4+r}t.exports=Address;var b=r(526785)},492730:(t,e,r)=>{"use strict";var i=r(901048).Buffer,n=r(645250),s=r(592595),o=r(47495),a=r(201146),u=r(821722),h=r(111978),f=r(905079),c=r(470234),d=r(198641);function Block(t){return this instanceof Block?(n.extend(this,Block._from(t)),this):new Block(t)}Block.MAX_BLOCK_SIZE=1e6,Block._from=function _from(t){var e={};if(a.isBuffer(t))e=Block._fromBufferReader(u(t));else{if(!n.isObject(t))throw new TypeError("Unrecognized argument for Block");e=Block._fromObject(t)}return e},Block._fromObject=function _fromObject(t){var e=[];return t.transactions.forEach((function(t){t instanceof c?e.push(t):e.push(c().fromObject(t))})),{header:s.fromObject(t.header),transactions:e}},Block.fromObject=function fromObject(t){var e=Block._fromObject(t);return new Block(e)},Block._fromBufferReader=function _fromBufferReader(t){var e={};d.checkState(!t.finished(),"No block data received"),e.header=s.fromBufferReader(t);var r=t.readVarintNum();e.transactions=[];for(var i=0;i<r;i++)e.transactions.push(c().fromBufferReader(t));return e},Block.fromBufferReader=function fromBufferReader(t){d.checkArgument(t,"br is required");var e=Block._fromBufferReader(t);return new Block(e)},Block.fromBuffer=function fromBuffer(t){return Block.fromBufferReader(new u(t))},Block.fromString=function fromString(t){var e=i.from(t,"hex");return Block.fromBuffer(e)},Block.fromRawBlock=function fromRawBlock(t){a.isBuffer(t)||(t=i.from(t,"binary"));var e=u(t);e.pos=Block.Values.START_OF_BLOCK;var r=Block._fromBufferReader(e);return new Block(r)},Block.prototype.toObject=Block.prototype.toJSON=function toObject(){var t=[];return this.transactions.forEach((function(e){t.push(e.toObject())})),{header:this.header.toObject(),transactions:t}},Block.prototype.toBuffer=function toBuffer(){return this.toBufferWriter().concat()},Block.prototype.toString=function toString(){return this.toBuffer().toString("hex")},Block.prototype.toBufferWriter=function toBufferWriter(t){t||(t=new h),t.write(this.header.toBuffer()),t.writeVarintNum(this.transactions.length);for(var e=0;e<this.transactions.length;e++)this.transactions[e].toBufferWriter(t);return t},Block.prototype.getTransactionHashes=function getTransactionHashes(){var t=[];if(0===this.transactions.length)return[Block.Values.NULL_HASH];for(var e=0;e<this.transactions.length;e++)t.push(this.transactions[e]._getHash());return t},Block.prototype.getMerkleTree=function getMerkleTree(){for(var t=this.getTransactionHashes(),e=0,r=this.transactions.length;r>1;r=Math.floor((r+1)/2)){for(var n=0;n<r;n+=2){var s=Math.min(n+1,r-1),o=i.concat([t[e+n],t[e+s]]);t.push(f.sha256sha256(o))}e+=r}return t},Block.prototype.getMerkleRoot=function getMerkleRoot(){var t=this.getMerkleTree();return t[t.length-1]},Block.prototype.validMerkleRoot=function validMerkleRoot(){var t=new o(this.header.merkleRoot.toString("hex"),"hex"),e=new o(this.getMerkleRoot().toString("hex"),"hex");return 0===t.cmp(e)},Block.prototype._getHash=function(){return this.header._getHash()};var p={configurable:!1,enumerable:!0,get:function(){return this._id||(this._id=this.header.id),this._id},set:n.noop};Object.defineProperty(Block.prototype,"id",p),Object.defineProperty(Block.prototype,"hash",p),Block.prototype.inspect=function inspect(){return"<Block "+this.id+">"},Block.Values={START_OF_BLOCK:8,NULL_HASH:i.from("0000000000000000000000000000000000000000000000000000000000000000","hex")},t.exports=Block},592595:(t,e,r)=>{"use strict";var i=r(901048).Buffer,n=r(645250),s=r(47495),o=r(201146),a=r(821722),u=r(111978),h=r(905079),f=(r(359983),r(198641)),c=function BlockHeader(t){if(!(this instanceof BlockHeader))return new BlockHeader(t);var e=BlockHeader._from(t);return this.version=e.version,this.prevHash=e.prevHash,this.merkleRoot=e.merkleRoot,this.time=e.time,this.timestamp=e.time,this.bits=e.bits,this.nonce=e.nonce,e.hash&&f.checkState(this.hash===e.hash,"Argument object hash property does not match block hash."),this};c._from=function _from(t){var e={};if(o.isBuffer(t))e=c._fromBufferReader(a(t));else{if(!n.isObject(t))throw new TypeError("Unrecognized argument for BlockHeader");e=c._fromObject(t)}return e},c._fromObject=function _fromObject(t){f.checkArgument(t,"data is required");var e=t.prevHash,r=t.merkleRoot;return n.isString(t.prevHash)&&(e=o.reverse(i.from(t.prevHash,"hex"))),n.isString(t.merkleRoot)&&(r=o.reverse(i.from(t.merkleRoot,"hex"))),{hash:t.hash,version:t.version,prevHash:e,merkleRoot:r,time:t.time,timestamp:t.time,bits:t.bits,nonce:t.nonce}},c.fromObject=function fromObject(t){var e=c._fromObject(t);return new c(e)},c.fromRawBlock=function fromRawBlock(t){o.isBuffer(t)||(t=i.from(t,"binary"));var e=a(t);e.pos=c.Constants.START_OF_HEADER;var r=c._fromBufferReader(e);return new c(r)},c.fromBuffer=function fromBuffer(t){var e=c._fromBufferReader(a(t));return new c(e)},c.fromString=function fromString(t){var e=i.from(t,"hex");return c.fromBuffer(e)},c._fromBufferReader=function _fromBufferReader(t){var e={};return e.version=t.readInt32LE(),e.prevHash=t.read(32),e.merkleRoot=t.read(32),e.time=t.readUInt32LE(),e.bits=t.readUInt32LE(),e.nonce=t.readUInt32LE(),e},c.fromBufferReader=function fromBufferReader(t){var e=c._fromBufferReader(t);return new c(e)},c.prototype.toObject=c.prototype.toJSON=function toObject(){return{hash:this.hash,version:this.version,prevHash:o.reverse(this.prevHash).toString("hex"),merkleRoot:o.reverse(this.merkleRoot).toString("hex"),time:this.time,bits:this.bits,nonce:this.nonce}},c.prototype.toBuffer=function toBuffer(){return this.toBufferWriter().concat()},c.prototype.toString=function toString(){return this.toBuffer().toString("hex")},c.prototype.toBufferWriter=function toBufferWriter(t){return t||(t=new u),t.writeInt32LE(this.version),t.write(this.prevHash),t.write(this.merkleRoot),t.writeUInt32LE(this.time),t.writeUInt32LE(this.bits),t.writeUInt32LE(this.nonce),t},c.prototype.getTargetDifficulty=function getTargetDifficulty(t){t=t||this.bits;for(var e=new s(16777215&t),r=8*((t>>>24)-3);r-- >0;)e=e.mul(new s(2));return e},c.prototype.getDifficulty=function getDifficulty(){var t=this.getTargetDifficulty(486604799).mul(new s(Math.pow(10,8))),e=this.getTargetDifficulty(),r=t.div(e).toString(10),i=r.length-8;return r=r.slice(0,i)+"."+r.slice(i),parseFloat(r)},c.prototype._getHash=function hash(){var t=this.toBuffer();return h.sha256sha256(t)};var d={configurable:!1,enumerable:!0,get:function(){return this._id||(this._id=a(this._getHash()).readReverse().toString("hex")),this._id},set:n.noop};Object.defineProperty(c.prototype,"id",d),Object.defineProperty(c.prototype,"hash",d),c.prototype.validTimestamp=function validTimestamp(){var t=Math.round((new Date).getTime()/1e3);return!(this.time>t+c.Constants.MAX_TIME_OFFSET)},c.prototype.validProofOfWork=function validProofOfWork(){var t=new s(this.id,"hex"),e=this.getTargetDifficulty();return!(t.cmp(e)>0)},c.prototype.inspect=function inspect(){return"<BlockHeader "+this.id+">"},c.Constants={START_OF_HEADER:8,MAX_TIME_OFFSET:7200,LARGEST_HASH:new s("10000000000000000000000000000000000000000000000000000000000000000","hex")},t.exports=c},256043:(t,e,r)=>{t.exports=r(492730),t.exports.BlockHeader=r(592595),t.exports.MerkleBlock=r(785068)},785068:(t,e,r)=>{"use strict";var i=r(901048).Buffer,n=r(645250),s=r(592595),o=r(201146),a=r(821722),u=r(111978),h=r(905079),f=(r(359983),r(470234)),c=r(669277),d=r(198641);function MerkleBlock(t){if(!(this instanceof MerkleBlock))return new MerkleBlock(t);var e={};if(o.isBuffer(t))e=MerkleBlock._fromBufferReader(a(t));else{if(!n.isObject(t))throw new TypeError("Unrecognized argument for MerkleBlock");e={header:t.header instanceof s?t.header:s.fromObject(t.header),numTransactions:t.numTransactions,hashes:t.hashes,flags:t.flags}}return n.extend(this,e),this._flagBitsUsed=0,this._hashesUsed=0,this}MerkleBlock.fromBuffer=function fromBuffer(t){return MerkleBlock.fromBufferReader(a(t))},MerkleBlock.fromBufferReader=function fromBufferReader(t){return new MerkleBlock(MerkleBlock._fromBufferReader(t))},MerkleBlock.prototype.toBuffer=function toBuffer(){return this.toBufferWriter().concat()},MerkleBlock.prototype.toBufferWriter=function toBufferWriter(t){t||(t=new u),t.write(this.header.toBuffer()),t.writeUInt32LE(this.numTransactions),t.writeVarintNum(this.hashes.length);for(var e=0;e<this.hashes.length;e++)t.write(i.from(this.hashes[e],"hex"));for(t.writeVarintNum(this.flags.length),e=0;e<this.flags.length;e++)t.writeUInt8(this.flags[e]);return t},MerkleBlock.prototype.toObject=MerkleBlock.prototype.toJSON=function toObject(){return{header:this.header.toObject(),numTransactions:this.numTransactions,hashes:this.hashes,flags:this.flags}},MerkleBlock.prototype.validMerkleTree=function validMerkleTree(){if(d.checkState(n.isArray(this.flags),"MerkleBlock flags is not an array"),d.checkState(n.isArray(this.hashes),"MerkleBlock hashes is not an array"),this.hashes.length>this.numTransactions)return!1;if(8*this.flags.length<this.hashes.length)return!1;var t=this._calcTreeHeight(),e={hashesUsed:0,flagBitsUsed:0},r=this._traverseMerkleTree(t,0,e);return e.hashesUsed===this.hashes.length&&o.equals(r,this.header.merkleRoot)},MerkleBlock.prototype.filterdTxsHash=function filterdTxsHash(){if(d.checkState(n.isArray(this.flags),"MerkleBlock flags is not an array"),d.checkState(n.isArray(this.hashes),"MerkleBlock hashes is not an array"),this.hashes.length>this.numTransactions)throw new c.MerkleBlock.InvalidMerkleTree;if(8*this.flags.length<this.hashes.length)throw new c.MerkleBlock.InvalidMerkleTree;if(1===this.hashes.length)return[];var t=this._calcTreeHeight(),e={hashesUsed:0,flagBitsUsed:0},r=this._traverseMerkleTree(t,0,e,!0);if(e.hashesUsed!==this.hashes.length)throw new c.MerkleBlock.InvalidMerkleTree;return r},MerkleBlock.prototype._traverseMerkleTree=function traverseMerkleTree(t,e,r,n){(r=r||{}).txs=r.txs||[],r.flagBitsUsed=r.flagBitsUsed||0,r.hashesUsed=r.hashesUsed||0;n=n||!1;if(r.flagBitsUsed>8*this.flags.length)return null;var s=this.flags[r.flagBitsUsed>>3]>>>(7&r.flagBitsUsed++)&1;if(0!==t&&s){var o=this._traverseMerkleTree(t-1,2*e,r),a=o;return 2*e+1<this._calcTreeWidth(t-1)&&(a=this._traverseMerkleTree(t-1,2*e+1,r)),n?r.txs:h.sha256sha256(new i.concat([o,a]))}if(r.hashesUsed>=this.hashes.length)return null;var u=this.hashes[r.hashesUsed++];return 0===t&&s&&r.txs.push(u),i.from(u,"hex")},MerkleBlock.prototype._calcTreeWidth=function calcTreeWidth(t){return this.numTransactions+(1<<t)-1>>t},MerkleBlock.prototype._calcTreeHeight=function calcTreeHeight(){for(var t=0;this._calcTreeWidth(t)>1;)t++;return t},MerkleBlock.prototype.hasTransaction=function hasTransaction(t){d.checkArgument(!n.isUndefined(t),"tx cannot be undefined"),d.checkArgument(t instanceof f||"string"==typeof t,'Invalid tx given, tx must be a "string" or "Transaction"');var e=t;t instanceof f&&(e=o.reverse(i.from(t.id,"hex")).toString("hex"));var r=[],s=this._calcTreeHeight();return this._traverseMerkleTree(s,0,{txs:r}),-1!==r.indexOf(e)},MerkleBlock._fromBufferReader=function _fromBufferReader(t){d.checkState(!t.finished(),"No merkleblock data received");var e={};e.header=s.fromBufferReader(t),e.numTransactions=t.readUInt32LE();var r=t.readVarintNum();e.hashes=[];for(var i=0;i<r;i++)e.hashes.push(t.read(32).toString("hex"));var n=t.readVarintNum();for(e.flags=[],i=0;i<n;i++)e.flags.push(t.readUInt8());return e},MerkleBlock.fromObject=function fromObject(t){return new MerkleBlock(t)},t.exports=MerkleBlock},47495:(t,e,r)=>{"use strict";var i=r(901048).Buffer,n=r(817328),s=r(198641),o=r(645250),reversebuf=function(t){for(var e=i.alloc(t.length),r=0;r<t.length;r++)e[r]=t[t.length-1-r];return e};n.Zero=new n(0),n.One=new n(1),n.Minus1=new n(-1),n.fromNumber=function(t){if(o.isNumber(t))return t<=9007199254740991?new n(t):new n(t.toString(16),16);if(o.isString(t))return new n(t,10);throw new Error("Invalid input type")},n.fromString=function(t,e){return s.checkArgument(o.isString(t)),new n(t,e)},n.fromBuffer=function(t,e){void 0!==e&&"little"===e.endian&&(t=reversebuf(t));var r=t.toString("hex");return new n(r,16)},n.fromSM=function(t,e){var r;if(0===t.length)return n.fromBuffer(i.from([0]));var s="big";return e&&(s=e.endian),"little"===s&&(t=reversebuf(t)),128&t[0]?(t[0]=127&t[0],(r=n.fromBuffer(t)).neg().copy(r)):r=n.fromBuffer(t),r},n.prototype.toNumber=function(){return parseInt(this.toString(10),10)},n.prototype.toBuffer=function(t){var e,r;if(t&&t.size){var s=(r=this.toString(16,2)).length/2;e=i.from(r,"hex"),s===t.size||(s>t.size?e=n.trim(e,t.size):s<t.size&&(e=n.pad(e,s,t.size)))}else r=this.toString(16,2),e=i.from(r,"hex");return void 0!==t&&"little"===t.endian&&(e=reversebuf(e)),e},n.prototype.toSMBigEndian=function(){var t;return-1===this.cmp(n.Zero)?128&(t=this.neg().toBuffer())[0]?t=i.concat([i.from([128]),t]):t[0]=128|t[0]:128&(t=this.toBuffer())[0]&&(t=i.concat([i.from([0]),t])),1===t.length&0===t[0]&&(t=i.from([])),t},n.prototype.toSM=function(t){var e=t?t.endian:"big",r=this.toSMBigEndian();return"little"===e&&(r=reversebuf(r)),r},n.fromScriptNumBuffer=function(t,e,r){var i=r||4;if(s.checkArgument(t.length<=i,new Error("script number overflow")),e&&t.length>0&&!(127&t[t.length-1]||!(t.length<=1)&&128&t[t.length-2]))throw new Error("non-minimally encoded script number");return n.fromSM(t,{endian:"little"})},n.prototype.toScriptNumBuffer=function(){return this.toSM({endian:"little"})},n.trim=function(t,e){return t.slice(e-t.length,t.length)},n.pad=function(t,e,r){for(var n=i.alloc(r),s=0;s<t.length;s++)n[n.length-1-s]=t[t.length-1-s];for(s=0;s<r-e;s++)n[s]=0;return n},t.exports=n},269575:(t,e,r)=>{"use strict";var i=r(901048).Buffer,n=r(47495),s=r(976649),o=r(918677),a=r(536061),u=r(671820),h=r(905079),f=r(201146),c=r(645250),d=r(198641),p=function ECDSA(t){if(!(this instanceof ECDSA))return new ECDSA(t);t&&this.set(t)};p.prototype.set=function(t){return this.hashbuf=t.hashbuf||this.hashbuf,this.endian=t.endian||this.endian,this.privkey=t.privkey||this.privkey,this.pubkey=t.pubkey||(this.privkey?this.privkey.publicKey:this.pubkey),this.sig=t.sig||this.sig,this.k=t.k||this.k,this.verified=t.verified||this.verified,this},p.prototype.privkey2pubkey=function(){this.pubkey=this.privkey.toPublicKey()},p.prototype.calci=function(){for(var t=0;t<4;t++){var e;this.sig.i=t;try{e=this.toPublicKey()}catch(t){console.error(t);continue}if(e.point.eq(this.pubkey.point))return this.sig.compressed=this.pubkey.compressed,this}throw this.sig.i=void 0,new Error("Unable to find valid recovery factor")},p.fromString=function(t){var e=JSON.parse(t);return new p(e)},p.prototype.randomK=function(){var t,e=s.getN();do{t=n.fromBuffer(u.getRandomBuffer(32))}while(!t.lt(e)||!t.gt(n.Zero));return this.k=t,this},p.prototype.deterministicK=function(t){c.isUndefined(t)&&(t=0);var e=i.alloc(32);e.fill(1);var r=i.alloc(32);r.fill(0);var o=this.privkey.bn.toBuffer({size:32}),a="little"===this.endian?f.reverse(this.hashbuf):this.hashbuf;r=h.sha256hmac(i.concat([e,i.from([0]),o,a]),r),e=h.sha256hmac(e,r),r=h.sha256hmac(i.concat([e,i.from([1]),o,a]),r),e=h.sha256hmac(e,r),e=h.sha256hmac(e,r);for(var u=n.fromBuffer(e),d=s.getN(),p=0;p<t||!u.lt(d)||!u.gt(n.Zero);p++)r=h.sha256hmac(i.concat([e,i.from([0])]),r),e=h.sha256hmac(e,r),e=h.sha256hmac(e,r),u=n.fromBuffer(e);return this.k=u,this},p.prototype.toPublicKey=function(){var t=this.sig.i;d.checkArgument(0===t||1===t||2===t||3===t,new Error("i must be equal to 0, 1, 2, or 3"));var e=n.fromBuffer(this.hashbuf),r=this.sig.r,i=this.sig.s,o=1&t,u=t>>1,h=s.getN(),f=s.getG(),c=u?r.add(h):r,p=s.fromX(o,c);if(!p.mul(h).isInfinity())throw new Error("nR is not a valid curve point");var l=e.neg().umod(h),m=r.invm(h),b=p.mul(i).add(f.mul(l)).mul(m);return a.fromPoint(b,this.sig.compressed)},p.prototype.sigError=function(){if(!f.isBuffer(this.hashbuf)||32!==this.hashbuf.length)return"hashbuf must be a 32 byte buffer";var t=this.sig.r,e=this.sig.s;if(!(t.gt(n.Zero)&&t.lt(s.getN())&&e.gt(n.Zero)&&e.lt(s.getN())))return"r and s not in range";var r=n.fromBuffer(this.hashbuf,this.endian?{endian:this.endian}:void 0),i=s.getN(),o=e.invm(i),a=o.mul(r).umod(i),u=o.mul(t).umod(i),h=s.getG().mulAdd(a,this.pubkey.point,u);return h.isInfinity()?"p is infinity":0!==h.getX().umod(i).cmp(t)&&"Invalid signature"},p.toLowS=function(t){return t.gt(n.fromBuffer(i.from("7FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF5D576E7357A4501DDFE92F46681B20A0","hex")))&&(t=s.getN().sub(t)),t},p.prototype._findSignature=function(t,e){var r,i,o,a=s.getN(),u=s.getG(),h=0;do{(!this.k||h>0)&&this.deterministicK(h),h++,r=this.k,i=u.mul(r).x.umod(a),o=r.invm(a).mul(e.add(t.mul(i))).umod(a)}while(i.cmp(n.Zero)<=0||o.cmp(n.Zero)<=0);return{s:o=p.toLowS(o),r:i}},p.prototype.sign=function(){var t=this.hashbuf,e=this.privkey,r=e.bn;d.checkState(t&&e&&r,new Error("invalid parameters")),d.checkState(f.isBuffer(t)&&32===t.length,new Error("hashbuf must be a 32 byte buffer"));var i=n.fromBuffer(t,this.endian?{endian:this.endian}:void 0),s=this._findSignature(r,i);return s.compressed=this.pubkey.compressed,this.sig=new o(s),this},p.prototype.signRandomK=function(){return this.randomK(),this.sign()},p.prototype.toString=function(){var t={};return this.hashbuf&&(t.hashbuf=this.hashbuf.toString("hex")),this.privkey&&(t.privkey=this.privkey.toString()),this.pubkey&&(t.pubkey=this.pubkey.toString()),this.sig&&(t.sig=this.sig.toString()),this.k&&(t.k=this.k.toString()),JSON.stringify(t)},p.prototype.verify=function(){return this.sigError()?this.verified=!1:this.verified=!0,this},p.sign=function(t,e,r){return p().set({hashbuf:t,endian:r,privkey:e}).sign().sig},p.verify=function(t,e,r,i){return p().set({hashbuf:t,endian:i,sig:e,pubkey:r}).verify().verified},t.exports=p},905079:(t,e,r)=>{"use strict";var i=r(901048).Buffer,n=r(483040),s=r(201146),o=r(198641),a=t.exports;a.sha1=function(t){return o.checkArgument(s.isBuffer(t)),n.createHash("sha1").update(t).digest()},a.sha1.blocksize=512,a.sha256=function(t){return o.checkArgument(s.isBuffer(t)),n.createHash("sha256").update(t).digest()},a.sha256.blocksize=512,a.sha256sha256=function(t){return o.checkArgument(s.isBuffer(t)),a.sha256(a.sha256(t))},a.ripemd160=function(t){return o.checkArgument(s.isBuffer(t)),n.createHash("ripemd160").update(t).digest()},a.sha256ripemd160=function(t){return o.checkArgument(s.isBuffer(t)),a.ripemd160(a.sha256(t))},a.sha512=function(t){return o.checkArgument(s.isBuffer(t)),n.createHash("sha512").update(t).digest()},a.sha512.blocksize=1024,a.hmac=function(t,e,r){o.checkArgument(s.isBuffer(e)),o.checkArgument(s.isBuffer(r)),o.checkArgument(t.blocksize);var n=t.blocksize/8;if(r.length>n)r=t(r);else if(r<n){var a=i.alloc(n);a.fill(0),r.copy(a),r=a}var u=i.alloc(n);u.fill(92);var h=i.alloc(n);h.fill(54);for(var f=i.alloc(n),c=i.alloc(n),d=0;d<n;d++)f[d]=u[d]^r[d],c[d]=h[d]^r[d];return t(i.concat([f,t(i.concat([c,e]))]))},a.sha256hmac=function(t,e){return a.hmac(a.sha256,t,e)},a.sha512hmac=function(t,e){return a.hmac(a.sha512,t,e)}},976649:(t,e,r)=>{"use strict";var i=r(901048).Buffer,n=r(47495),s=r(201146),o=new(0,r(590653).ec)("secp256k1"),a=o.curve.point.bind(o.curve),u=o.curve.pointFromX.bind(o.curve),h=function Point(t,e,r){try{var i=a(t,e,r)}catch(t){throw new Error("Invalid Point")}return i.validate(),i};h.prototype=Object.getPrototypeOf(o.curve.point()),h.fromX=function fromX(t,e){try{var r=u(e,t)}catch(t){throw new Error("Invalid X")}return r.validate(),r},h.getG=function getG(){return o.curve.g},h.getN=function getN(){return new n(o.curve.n.toArray())},h.prototype._getX||(h.prototype._getX=h.prototype.getX),h.prototype.getX=function getX(){return new n(this._getX().toArray())},h.prototype._getY||(h.prototype._getY=h.prototype.getY),h.prototype.getY=function getY(){return new n(this._getY().toArray())},h.prototype.validate=function validate(){if(this.isInfinity())throw new Error("Point cannot be equal to Infinity");var t;try{t=u(this.getX(),this.getY().isOdd())}catch(t){throw new Error("Point does not lie on the curve")}if(0!==t.y.cmp(this.y))throw new Error("Invalid y value for curve.");if(!this.mul(h.getN()).isInfinity())throw new Error("Point times N must be infinity");return this},h.pointToCompressed=function pointToCompressed(t){var e,r=t.getX().toBuffer({size:32}),n=t.getY().toBuffer({size:32});return e=n[n.length-1]%2?i.from([3]):i.from([2]),s.concat([e,r])},h.prototype.hasSquare=function(){return!this.isInfinity()&&this.isSquare(this.getY())},h.prototype.isSquare=function(t){let e=new n("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F","hex");return new n(t).toRed(n.red(e)).redPow(e.sub(n.One).div(new n(2))).fromRed().eq(new n(1))},t.exports=h},671820:(t,e,r)=>{"use strict";var i=r(901048).Buffer;function Random(){}Random.getRandomBuffer=function(t){return{env:{ONEKEY_PROXY:void 0,NODE_ENV:"production",TAMAGUI_TARGET:"web"}}.browser?Random.getRandomBufferBrowser(t):Random.getRandomBufferNode(t)},Random.getRandomBufferNode=function(t){return r(483040).randomBytes(t)},Random.getRandomBufferBrowser=function(t){if(!window.crypto&&!window.msCrypto)throw new Error("window.crypto not available");if(window.crypto&&window.crypto.getRandomValues)var e=window.crypto;else{if(!window.msCrypto||!window.msCrypto.getRandomValues)throw new Error("window.crypto.getRandomValues not available");e=window.msCrypto}var r=new Uint8Array(t);return e.getRandomValues(r),i.from(r)},Random.getPseudoRandomBuffer=function(t){for(var e,r=i.alloc(t),n=0;n<=t;n++){0===n-4*Math.floor(n/4)?(e=4294967296*Math.random(),r[n]=255&e):r[n]=255&(e>>>=8)}return r},t.exports=Random},510682:(t,e,r)=>{"use strict";var i=r(901048).Buffer;const n=r(374261);var s=r(47495),o=r(976649),a=r(918677),u=(r(536061),r(671820),r(905079)),h=r(201146),f=(r(645250),r(198641)),c=function Schnorr(t){if(!(this instanceof Schnorr))return new Schnorr(t);t&&this.set(t)};function getrBuffer(t){return t.toBuffer().length<32?t.toBuffer({size:32}):t.toBuffer()}c.prototype.set=function(t){return this.hashbuf=t.hashbuf||this.hashbuf,this.endian=t.endian||this.endian,this.privkey=t.privkey||this.privkey,this.pubkey=t.pubkey||(this.privkey?this.privkey.publicKey:this.pubkey),this.sig=t.sig||this.sig,this.verified=t.verified||this.verified,this},c.prototype.privkey2pubkey=function(){this.pubkey=this.privkey.toPublicKey()},c.prototype.toPublicKey=function(){return this.privkey.toPublicKey()},c.prototype.sign=function(){var t=this.hashbuf,e=this.privkey,r=e.bn;f.checkState(t&&e&&r,new Error("invalid parameters")),f.checkState(h.isBuffer(t)&&32===t.length,new Error("hashbuf must be a 32 byte buffer"));var i=s.fromBuffer(t,this.endian?{endian:this.endian}:void 0),n=this._findSignature(r,i);return n.compressed=this.pubkey.compressed,n.isSchnorr=!0,this.sig=new a(n),this},c.prototype._findSignature=function(t,e){let r=o.getN(),n=o.getG();f.checkState(!t.lte(new s(0)),new Error("privkey out of field of curve")),f.checkState(!t.gte(r),new Error("privkey out of field of curve"));let a=this.nonceFunctionRFC6979(t.toBuffer({size:32}),e.toBuffer({size:32})),h=n.mul(t),c=n.mul(a);c.hasSquare()||(a=r.sub(a));let d=c.getX();return{r:d,s:s.fromBuffer(u.sha256(i.concat([getrBuffer(d),o.pointToCompressed(h),e.toBuffer({size:32})]))).mul(t).add(a).mod(r)}},c.prototype.sigError=function(){if(!h.isBuffer(this.hashbuf)||32!==this.hashbuf.length)return"hashbuf must be a 32 byte buffer";let t=getrBuffer(this.sig.r).length+function getsBuffer(t){return t.toBuffer().length<32?t.toBuffer({size:32}):t.toBuffer()}(this.sig.s).length;if(64!==t&&65!==t)return"signature must be a 64 byte or 65 byte array";let e="little"===this.endian?h.reverse(this.hashbuf):this.hashbuf,r=this.pubkey.point,n=o.getG();if(r.isInfinity())return!0;let a=this.sig.r,f=this.sig.s,c=new s("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F","hex"),d=o.getN();if(a.gte(c)||f.gte(d))return!0;let p=getrBuffer(this.sig.r),l=o.pointToCompressed(r),m=u.sha256(i.concat([p,l,e])),b=s.fromBuffer(m,"big").umod(d),g=n.mul(f),y=r.mul(d.sub(b)),v=g.add(y);return!(!v.isInfinity()&&v.hasSquare()&&v.getX().eq(a))},c.prototype.verify=function(){return this.sigError()?this.verified=!1:this.verified=!0,this},c.prototype.nonceFunctionRFC6979=function(t,e){let r=i.from("0101010101010101010101010101010101010101010101010101010101010101","hex"),n=i.from("0000000000000000000000000000000000000000000000000000000000000000","hex"),a=i.concat([t,e,i.from("","ascii"),i.from("Schnorr+SHA256  ","ascii")]);n=u.sha256hmac(i.concat([r,i.from("00","hex"),a]),n),r=u.sha256hmac(r,n),n=u.sha256hmac(i.concat([r,i.from("01","hex"),a]),n),r=u.sha256hmac(r,n);let h,c=new s(0);for(;r=u.sha256hmac(r,n),h=s.fromBuffer(r),c=h,f.checkState(r.length>=32,"V length should be >= 32"),!c.gt(new s(0))||!c.lt(o.getN());)n=u.sha256hmac(i.concat([r,i.from("00","hex")]),n),r=u.hmac(u.sha256,r,n);return c},c.sign=function(t,e,r){let s=n.schnorr.sign(i.from(t).toString("hex"),e.toString()),o=a.fromString(s.sig),u=o.toBuffer("schnorr").toString("hex");if(u.length<128)throw new Error(`Invalid Signature\nsecp256k1 sig:${s.sig}\nSignature.fromString:${u}`);return o.compressed=!0,o},c.verify=function(t,e,r,i){return!0},t.exports=c},918677:(t,e,r)=>{"use strict";var i=r(901048).Buffer,n=r(47495),s=r(645250),o=r(198641),a=r(201146),u=r(359983),h=function Signature(t,e,r){if(!(this instanceof Signature))return new Signature(t,e,r);if(t instanceof n)this.set({r:t,s:e,isSchnorr:r});else if(t){var i=t;this.set(i)}};h.prototype.set=function(t){return this.r=t.r||this.r||void 0,this.s=t.s||this.s||void 0,this.i=void 0!==t.i?t.i:this.i,this.compressed=void 0!==t.compressed?t.compressed:this.compressed,this.isSchnorr=t.isSchnorr,this.nhashtype=t.nhashtype||this.nhashtype||void 0,this},h.fromCompact=function(t){o.checkArgument(a.isBuffer(t),"Argument is expected to be a Buffer");var e=new h,r=!0,i=t.slice(0,1)[0]-27-4;i<0&&(r=!1,i+=4);var s=t.slice(1,33),u=t.slice(33,65);return o.checkArgument(0===i||1===i||2===i||3===i,new Error("i must be 0, 1, 2, or 3")),o.checkArgument(32===s.length,new Error("r must be 32 bytes")),o.checkArgument(32===u.length,new Error("s must be 32 bytes")),e.compressed=r,e.i=i,e.r=n.fromBuffer(s),e.s=n.fromBuffer(u),e},h.fromDER=h.fromBuffer=function(t,e){let r=h.parseSchnorrEncodedSig(t),i=new h;return i.r=r.r,i.s=r.s,i.isSchnorr=!0,i},h.fromTxFormat=function(t){var e=t.readUInt8(t.length-1),r=t.slice(0,t.length-1),i=new h.fromDER(r,!1);return i.nhashtype=e,i},h.fromDataFormat=function(t){var e=t.slice(0,t.length);return new h.fromDER(e,!1)},h.fromString=function(t){var e=i.from(t,"hex");return h.fromDER(e)},h.parseSchnorrEncodedSig=function(t){let e,r=t.slice(0,32),i=t.slice(32,64);return 65===t.length&&(e=t.slice(64,65),this.nhashtype=e),{r:n.fromBuffer(r),s:n.fromBuffer(i),nhashtype:e}},h.parseDER=function(t,e){o.checkArgument(a.isBuffer(t),new Error("DER formatted signature should be a buffer")),s.isUndefined(e)&&(e=!0);var r=t[0];o.checkArgument(48===r,new Error("Header byte should be 0x30"));var i=t[1],u=t.slice(2).length;o.checkArgument(!e||i===u,new Error("Length byte should length of what follows")),i=i<u?i:u;var h=t[2];o.checkArgument(2===h,new Error("Integer byte for r should be 0x02"));var f=t[3],c=t.slice(4,4+f),d=n.fromBuffer(c),p=0===t[4];o.checkArgument(f===c.length,new Error("Length of r incorrect"));var l=t[4+f+0];o.checkArgument(2===l,new Error("Integer byte for s should be 0x02"));var m=t[4+f+1],b=t.slice(4+f+2,4+f+2+m),g=n.fromBuffer(b),y=0===t[4+f+2+2];o.checkArgument(m===b.length,new Error("Length of s incorrect"));var v=4+f+2+m;return o.checkArgument(i===v-2,new Error("Length of signature incorrect")),{header:r,length:i,rheader:h,rlength:f,rneg:p,rbuf:c,r:d,sheader:l,slength:m,sneg:y,sbuf:b,s:g}},h.prototype.toCompact=function(t,e){if(t="number"==typeof t?t:this.i,e="boolean"==typeof e?e:this.compressed,0!==t&&1!==t&&2!==t&&3!==t)throw new Error("i must be equal to 0, 1, 2, or 3");var r=t+27+4;!1===e&&(r-=4);var n=i.from([r]),s=this.r.toBuffer({size:32}),o=this.s.toBuffer({size:32});return i.concat([n,s,o])},h.prototype.toBuffer=h.prototype.toDER=function(t){if("schnorr"===(t=t||"ecdsa")){let t=this.r.toBuffer({size:32}),e=this.s.toBuffer({size:32});return i.concat([t,e])}let e=this.r.toBuffer(),r=this.s.toBuffer();var n=!!(128&e[0]),s=!!(128&r[0]),o=n?i.concat([i.from([0]),e]):e,a=s?i.concat([i.from([0]),r]):r,u=o.length,h=a.length,f=2+u+2+h;return i.concat([i.from([48,f,2,u]),o,i.from([2,h]),a])},h.prototype.toString=function(){return this.toDER().toString("hex")},h.isTxDER=function(t){return h.isDER(t.slice(0,t.length-1))},h.isDER=function(t){if(t.length<8||t.length>72)return!1;if(48!=t[0])return!1;if(t[1]!=t.length-2)return!1;if(2!=t[2])return!1;var e=t[3];if(0==e)return!1;if(128&t[4])return!1;if(e>t.length-7)return!1;if(e>1&&0==t[4]&&!(128&t[5]))return!1;var r=e+4;if(2!=t[r])return!1;var i=t[r+1];return 0!=i&&(!(128&t[r+2])&&(r+i+2==t.length&&!(i>1&&0==t[r+2]&&!(128&t[r+3]))))},h.prototype.hasLowS=function(){return!this.s.lt(new n(1))&&!this.s.gt(new n("7FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF5D576E7357A4501DDFE92F46681B20A0","hex"))},h.prototype.hasDefinedHashtype=function(){if(!u.isNaturalNumber(this.nhashtype))return!1;var t=~(h.SIGHASH_FORKID|h.SIGHASH_ANYONECANPAY)>>>0,e=this.nhashtype&t;return!(e<h.SIGHASH_ALL||e>h.SIGHASH_SINGLE)},h.prototype.toTxFormat=function(t){var e=this.toDER(t),r=i.alloc(1);return r.writeUInt8(this.nhashtype,0),i.concat([e,r])},h.SIGHASH_ALL=1,h.SIGHASH_NONE=2,h.SIGHASH_SINGLE=3,h.SIGHASH_FORKID=64,h.SIGHASH_ANYONECANPAY=128,t.exports=h},365819:(t,e,r)=>{"use strict";var i=r(901048).Buffer,n=r(645250),s=r(939216),o=r(901048),a="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz".split(""),u=function Base58(t){if(!(this instanceof Base58))return new Base58(t);if(i.isBuffer(t)){var e=t;this.fromBuffer(e)}else if("string"==typeof t){var r=t;this.fromString(r)}else t&&this.set(t)};u.validCharacters=function validCharacters(t){return o.Buffer.isBuffer(t)&&(t=t.toString()),n.every(n.map(t,(function(t){return n.includes(a,t)})))},u.prototype.set=function(t){return this.buf=t.buf||this.buf||void 0,this},u.encode=function(t){if(!o.Buffer.isBuffer(t))throw new Error("Input should be a buffer");return s.encode(t)},u.decode=function(t){if("string"!=typeof t)throw new Error("Input should be a string");return i.from(s.decode(t))},u.prototype.fromBuffer=function(t){return this.buf=t,this},u.prototype.fromString=function(t){var e=u.decode(t);return this.buf=e,this},u.prototype.toBuffer=function(){return this.buf},u.prototype.toString=function(){return u.encode(this.buf)},t.exports=u},408467:(t,e,r)=>{"use strict";var i=r(901048).Buffer,n=r(645250),s=r(365819),o=(r(901048),r(905079).sha256sha256),a=function Base58Check(t){if(!(this instanceof Base58Check))return new Base58Check(t);if(i.isBuffer(t)){var e=t;this.fromBuffer(e)}else if("string"==typeof t){var r=t;this.fromString(r)}else t&&this.set(t)};a.prototype.set=function(t){return this.buf=t.buf||this.buf||void 0,this},a.validChecksum=function validChecksum(t,e){return n.isString(t)&&(t=i.from(s.decode(t))),n.isString(e)&&(e=i.from(s.decode(e))),e||(e=t.slice(-4),t=t.slice(0,-4)),a.checksum(t).toString("hex")===e.toString("hex")},a.decode=function(t){if("string"!=typeof t)throw new Error("Input must be a string");var e=i.from(s.decode(t));if(e.length<4)throw new Error("Input string too short");var r=e.slice(0,-4),n=e.slice(-4),a=o(r).slice(0,4);if(n.toString("hex")!==a.toString("hex"))throw new Error("Checksum mismatch");return r},a.checksum=function(t){return o(t).slice(0,4)},a.encode=function(t){if(!i.isBuffer(t))throw new Error("Input must be a buffer");var e=i.alloc(t.length+4),r=a.checksum(t);return t.copy(e),r.copy(e,t.length),s.encode(e)},a.prototype.fromBuffer=function(t){return this.buf=t,this},a.prototype.fromString=function(t){var e=a.decode(t);return this.buf=e,this},a.prototype.toBuffer=function(){return this.buf},a.prototype.toString=function(){return a.encode(this.buf)},t.exports=a},821722:(t,e,r)=>{"use strict";var i=r(901048).Buffer,n=r(645250),s=r(198641),o=r(201146),a=r(47495),u=function BufferReader(t){if(!(this instanceof BufferReader))return new BufferReader(t);if(!n.isUndefined(t))if(i.isBuffer(t))this.set({buf:t});else if(n.isString(t)){var e=i.from(t,"hex");if(2*e.length!=t.length)throw new TypeError("Invalid hex string");this.set({buf:e})}else{if(!n.isObject(t))throw new TypeError("Unrecognized argument for BufferReader");var r=t;this.set(r)}};u.prototype.set=function(t){return this.buf=t.buf||this.buf||void 0,this.pos=t.pos||this.pos||0,this},u.prototype.eof=function(){return this.pos>=this.buf.length},u.prototype.finished=u.prototype.eof,u.prototype.read=function(t){s.checkArgument(!n.isUndefined(t),"Must specify a length");var e=this.buf.slice(this.pos,this.pos+t);return this.pos=this.pos+t,e},u.prototype.readAll=function(){var t=this.buf.slice(this.pos,this.buf.length);return this.pos=this.buf.length,t},u.prototype.readUInt8=function(){var t=this.buf.readUInt8(this.pos);return this.pos=this.pos+1,t},u.prototype.readUInt16BE=function(){var t=this.buf.readUInt16BE(this.pos);return this.pos=this.pos+2,t},u.prototype.readUInt16LE=function(){var t=this.buf.readUInt16LE(this.pos);return this.pos=this.pos+2,t},u.prototype.readUInt32BE=function(){var t=this.buf.readUInt32BE(this.pos);return this.pos=this.pos+4,t},u.prototype.readUInt32LE=function(){var t=this.buf.readUInt32LE(this.pos);return this.pos=this.pos+4,t},u.prototype.readInt32LE=function(){var t=this.buf.readInt32LE(this.pos);return this.pos=this.pos+4,t},u.prototype.readUInt64BEBN=function(){var t=this.buf.slice(this.pos,this.pos+8),e=a.fromBuffer(t);return this.pos=this.pos+8,e},u.prototype.readUInt64LEBN=function(){var t,e=this.buf.readUInt32LE(this.pos),r=4294967296*this.buf.readUInt32LE(this.pos+4)+e;if(r<=9007199254740991)t=new a(r);else{var i=Array.prototype.slice.call(this.buf,this.pos,this.pos+8);t=new a(i,10,"le")}return this.pos=this.pos+8,t},u.prototype.readVarintNum=function(){var t=this.readUInt8();switch(t){case 253:return this.readUInt16LE();case 254:return this.readUInt32LE();case 255:var e=this.readUInt64LEBN().toNumber();if(e<=Math.pow(2,53))return e;throw new Error("number too large to retain precision - use readVarintBN");default:return t}},u.prototype.readVarLengthBuffer=function(){var t=this.readVarintNum(),e=this.read(t);return s.checkState(e.length===t,"Invalid length while reading varlength buffer. Expected to read: "+t+" and read "+e.length),e},u.prototype.readVarintBuf=function(){switch(this.buf.readUInt8(this.pos)){case 253:return this.read(3);case 254:return this.read(5);case 255:return this.read(9);default:return this.read(1)}},u.prototype.readVarintBN=function(){var t=this.readUInt8();switch(t){case 253:return new a(this.readUInt16LE());case 254:return new a(this.readUInt32LE());case 255:return this.readUInt64LEBN();default:return new a(t)}},u.prototype.reverse=function(){for(var t=i.alloc(this.buf.length),e=0;e<t.length;e++)t[e]=this.buf[this.buf.length-1-e];return this.buf=t,this},u.prototype.readReverse=function(t){n.isUndefined(t)&&(t=this.buf.length);var e=this.buf.slice(this.pos,this.pos+t);return this.pos=this.pos+t,o.reverse(e)},t.exports=u},111978:(t,e,r)=>{"use strict";var i=r(901048).Buffer,n=r(201146),s=r(626093),o=function BufferWriter(t){if(!(this instanceof BufferWriter))return new BufferWriter(t);this.bufLen=0,t?this.set(t):this.bufs=[]};o.prototype.set=function(t){return this.bufs=t.bufs||this.bufs||[],this.bufLen=this.bufs.reduce((function(t,e){return t+e.length}),0),this},o.prototype.toBuffer=function(){return this.concat()},o.prototype.concat=function(){return i.concat(this.bufs,this.bufLen)},o.prototype.write=function(t){return s(n.isBuffer(t)),this.bufs.push(t),this.bufLen+=t.length,this},o.prototype.writeReverse=function(t){return s(n.isBuffer(t)),this.bufs.push(n.reverse(t)),this.bufLen+=t.length,this},o.prototype.writeUInt8=function(t){var e=i.alloc(1);return e.writeUInt8(t,0),this.write(e),this},o.prototype.writeUInt16BE=function(t){var e=i.alloc(2);return e.writeUInt16BE(t,0),this.write(e),this},o.prototype.writeUInt16LE=function(t){var e=i.alloc(2);return e.writeUInt16LE(t,0),this.write(e),this},o.prototype.writeUInt32BE=function(t){var e=i.alloc(4);return e.writeUInt32BE(t,0),this.write(e),this},o.prototype.writeInt32LE=function(t){var e=i.alloc(4);return e.writeInt32LE(t,0),this.write(e),this},o.prototype.writeUInt32LE=function(t){var e=i.alloc(4);return e.writeUInt32LE(t,0),this.write(e),this},o.prototype.writeUInt64BEBN=function(t){var e=t.toBuffer({size:8});return this.write(e),this},o.prototype.writeUInt64LEBN=function(t){var e=t.toBuffer({size:8});return this.writeReverse(e),this},o.prototype.writeVarintNum=function(t){var e=o.varintBufNum(t);return this.write(e),this},o.prototype.writeVarintBN=function(t){var e=o.varintBufBN(t);return this.write(e),this},o.varintBufNum=function(t){var e=void 0;return t<253?(e=i.alloc(1)).writeUInt8(t,0):t<65536?((e=i.alloc(3)).writeUInt8(253,0),e.writeUInt16LE(t,1)):t<4294967296?((e=i.alloc(5)).writeUInt8(254,0),e.writeUInt32LE(t,1)):((e=i.alloc(9)).writeUInt8(255,0),e.writeInt32LE(-1&t,1),e.writeUInt32LE(Math.floor(t/4294967296),5)),e},o.varintBufBN=function(t){var e=void 0,r=t.toNumber();if(r<253)(e=i.alloc(1)).writeUInt8(r,0);else if(r<65536)(e=i.alloc(3)).writeUInt8(253,0),e.writeUInt16LE(r,1);else if(r<4294967296)(e=i.alloc(5)).writeUInt8(254,0),e.writeUInt32LE(r,1);else{var n=new o;n.writeUInt8(255),n.writeUInt64LEBN(t);e=n.concat()}return e},t.exports=o},455513:(t,e,r)=>{"use strict";var i=r(901048).Buffer,n=r(111978),s=r(821722),o=r(47495),a=function Varint(t){if(!(this instanceof Varint))return new Varint(t);if(i.isBuffer(t))this.buf=t;else if("number"==typeof t){var e=t;this.fromNumber(e)}else if(t instanceof o){var r=t;this.fromBN(r)}else if(t){var n=t;this.set(n)}};a.prototype.set=function(t){return this.buf=t.buf||this.buf,this},a.prototype.fromString=function(t){return this.set({buf:i.from(t,"hex")}),this},a.prototype.toString=function(){return this.buf.toString("hex")},a.prototype.fromBuffer=function(t){return this.buf=t,this},a.prototype.fromBufferReader=function(t){return this.buf=t.readVarintBuf(),this},a.prototype.fromBN=function(t){return this.buf=n().writeVarintBN(t).concat(),this},a.prototype.fromNumber=function(t){return this.buf=n().writeVarintNum(t).concat(),this},a.prototype.toBuffer=function(){return this.buf},a.prototype.toBN=function(){return s(this.buf).readVarintBN()},a.prototype.toNumber=function(){return s(this.buf).readVarintNum()},t.exports=a},669277:(t,e,r)=>{"use strict";var i=r(645250);var traverseNode=function(t,e){var NodeError=function(){if(i.isString(e.message))this.message=function format(t,e){return t.replace("{0}",e[0]).replace("{1}",e[1]).replace("{2}",e[2])}(e.message,arguments);else{if(!i.isFunction(e.message))throw new Error("Invalid error definition for "+e.name);this.message=e.message.apply(null,arguments)}this.stack=this.message+"\n"+(new Error).stack};return(NodeError.prototype=Object.create(t.prototype)).name=t.prototype.name+e.name,t[e.name]=NodeError,e.errors&&childDefinitions(NodeError,e.errors),NodeError},childDefinitions=function(t,e){i.each(e,(function(e){traverseNode(t,e)}))},n={Error:function(){this.message="Internal error",this.stack=this.message+"\n"+(new Error).stack}};n.Error.prototype=Object.create(Error.prototype),n.Error.prototype.name="kaspacore.Error";var s,o=r(175010);s=n.Error,childDefinitions(s,o),t.exports=n.Error,t.exports.extend=function(t){return traverseNode(n.Error,t)}},175010:t=>{"use strict";t.exports=[{name:"InvalidB58Char",message:"Invalid Base58 character: {0} in {1}"},{name:"InvalidB58Checksum",message:"Invalid Base58 checksum for {0}"},{name:"InvalidNetwork",message:"Invalid version for network: got {0}"},{name:"InvalidState",message:"Invalid state: {0}"},{name:"NotImplemented",message:"Function {0} was not implemented yet"},{name:"InvalidNetworkArgument",message:'Invalid network: must be "livenet" or "testnet", got {0}'},{name:"InvalidArgument",message:function(){return"Invalid Argument"+(arguments[0]?": "+arguments[0]:"")+(arguments[1]?" Documentation: http://kaspacore.io/"+arguments[1]:"")}},{name:"AbstractMethodInvoked",message:"Abstract Method Invocation: {0}"},{name:"InvalidArgumentType",message:function(){return"Invalid Argument for "+arguments[2]+", expected "+arguments[1]+" but got "+typeof arguments[0]}},{name:"Unit",message:"Internal Error on Unit {0}",errors:[{name:"UnknownCode",message:"Unrecognized unit code: {0}"},{name:"InvalidRate",message:"Invalid exchange rate: {0}"}]},{name:"MerkleBlock",message:"Internal Error on MerkleBlock {0}",errors:[{name:"InvalidMerkleTree",message:"This MerkleBlock contain an invalid Merkle Tree"}]},{name:"Transaction",message:"Internal Error on Transaction {0}",errors:[{name:"Input",message:"Internal Error on Input {0}",errors:[{name:"MissingScript",message:"Need a script to create an input"},{name:"UnsupportedScript",message:"Unsupported input script type: {0}"},{name:"MissingPreviousOutput",message:"No previous output information."},{name:"BlockHeightOutOfRange",message:"Block Height can only be between 0 and 65535"},{name:"LockTimeRange",message:"Seconds needs to be more that 0 and less that 33553920"}]},{name:"NeedMoreInfo",message:"{0}"},{name:"InvalidSorting",message:"The sorting function provided did not return the change output as one of the array elements"},{name:"InvalidOutputAmountSum",message:"{0}"},{name:"MissingSignatures",message:"Some inputs have not been fully signed"},{name:"InvalidIndex",message:"Invalid index: {0} is not between 0, {1}"},{name:"UnableToVerifySignature",message:"Unable to verify signature: {0}"},{name:"DustOutputs",message:"Dust amount detected in one output"},{name:"InvalidSatoshis",message:"Output satoshis are invalid"},{name:"FeeError",message:"Internal Error on Fee {0}",errors:[{name:"TooSmall",message:"Fee is too small: {0}"},{name:"TooLarge",message:"Fee is too large: {0}"},{name:"Different",message:"Unspent value is different from specified fee: {0}"}]},{name:"ChangeAddressMissing",message:"Change address is missing"},{name:"BlockHeightTooHigh",message:"Block Height can be at most 2^32 -1"},{name:"NLockTimeOutOfRange",message:"Block Height can only be between 0 and 499 999 999"},{name:"LockTimeTooEarly",message:"Lock Time can't be earlier than UNIX date 500 000 000"}]},{name:"Script",message:"Internal Error on Script {0}",errors:[{name:"UnrecognizedAddress",message:"Expected argument {0} to be an address"},{name:"CantDeriveAddress",message:"Can't derive address associated with script {0}, needs to be p2pkh in, p2pkh out, p2sh in, or p2sh out."},{name:"InvalidBuffer",message:"Invalid script buffer: can't parse valid script from given buffer {0}"}]},{name:"HDPrivateKey",message:"Internal Error on HDPrivateKey {0}",errors:[{name:"InvalidDerivationArgument",message:"Invalid derivation argument {0}, expected string, or number and boolean"},{name:"InvalidEntropyArgument",message:"Invalid entropy: must be an hexa string or binary buffer, got {0}",errors:[{name:"TooMuchEntropy",message:'Invalid entropy: more than 512 bits is non standard, got "{0}"'},{name:"NotEnoughEntropy",message:'Invalid entropy: at least 128 bits needed, got "{0}"'}]},{name:"InvalidLength",message:"Invalid length for xprivkey string in {0}"},{name:"InvalidPath",message:"Invalid derivation path: {0}"},{name:"UnrecognizedArgument",message:'Invalid argument: creating a HDPrivateKey requires a string, buffer, json or object, got "{0}"'}]},{name:"HDPublicKey",message:"Internal Error on HDPublicKey {0}",errors:[{name:"ArgumentIsPrivateExtended",message:"Argument is an extended private key: {0}"},{name:"InvalidDerivationArgument",message:"Invalid derivation argument: got {0}"},{name:"InvalidLength",message:'Invalid length for xpubkey: got "{0}"'},{name:"InvalidPath",message:'Invalid derivation path, it should look like: "m/1/100", got "{0}"'},{name:"InvalidIndexCantDeriveHardened",message:"Invalid argument: creating a hardened path requires an HDPrivateKey"},{name:"MustSupplyArgument",message:"Must supply an argument to create a HDPublicKey"},{name:"UnrecognizedArgument",message:"Invalid argument for creation, must be string, json, buffer, or object"}]}]},719755:(t,e,r)=>{"use strict";var i=r(901048).Buffer,n=r(626093),s=r(901048),o=r(645250),a=r(198641),u=r(47495),h=r(365819),f=r(408467),c=r(905079),d=r(628658),p=r(976649),l=r(901487),m=r(671820),b=r(669277),g=b.HDPrivateKey,y=r(201146),v=r(359983);function HDPrivateKey(t){if(t instanceof HDPrivateKey)return t;if(!(this instanceof HDPrivateKey))return new HDPrivateKey(t);if(!t)return this._generateRandomly();if(d.get(t))return this._generateRandomly(t);if(o.isString(t)||y.isBuffer(t))if(HDPrivateKey.isValidSerialized(t))this._buildFromSerialized(t);else if(v.isValidJSON(t))this._buildFromJSON(t);else{if(!y.isBuffer(t)||!HDPrivateKey.isValidSerialized(t.toString()))throw HDPrivateKey.getSerializedError(t);this._buildFromSerialized(t.toString())}else{if(!o.isObject(t))throw new g.UnrecognizedArgument(t);this._buildFromObject(t)}}HDPrivateKey.isValidPath=function(t,e){if(o.isString(t)){var r=HDPrivateKey._getDerivationIndexes(t);return null!==r&&o.every(r,HDPrivateKey.isValidPath)}return!!o.isNumber(t)&&(t<HDPrivateKey.Hardened&&!0===e&&(t+=HDPrivateKey.Hardened),t>=0&&t<HDPrivateKey.MaxIndex)},HDPrivateKey._getDerivationIndexes=function(t){var e=t.split("/");if(o.includes(HDPrivateKey.RootElementAlias,t))return[];if(!o.includes(HDPrivateKey.RootElementAlias,e[0]))return null;var r=e.slice(1).map((function(t){var e="'"===t.slice(-1);if(e&&(t=t.slice(0,-1)),!t||"-"===t[0])return NaN;var r=+t;return e&&(r+=HDPrivateKey.Hardened),r}));return o.some(r,isNaN)?null:r},HDPrivateKey.prototype.derive=function(t,e){return this.deriveNonCompliantChild(t,e)},HDPrivateKey.prototype.deriveChild=function(t,e){if(o.isNumber(t))return this._deriveWithNumber(t,e);if(o.isString(t))return this._deriveFromString(t);throw new g.InvalidDerivationArgument(t)},HDPrivateKey.prototype.deriveNonCompliantChild=function(t,e){if(o.isNumber(t))return this._deriveWithNumber(t,e,!0);if(o.isString(t))return this._deriveFromString(t,!0);throw new g.InvalidDerivationArgument(t)},HDPrivateKey.prototype._deriveWithNumber=function(t,e,r){if(!HDPrivateKey.isValidPath(t,e))throw new g.InvalidPath(t);e=t>=HDPrivateKey.Hardened||e,t<HDPrivateKey.Hardened&&!0===e&&(t+=HDPrivateKey.Hardened);var s,o=y.integerAsBuffer(t);if(e&&r){var a=this.privateKey.bn.toBuffer();s=y.concat([i.from([0]),a,o])}else if(e){var h=this.privateKey.bn.toBuffer({size:32});n(32===h.length,"length of private key buffer is expected to be 32 bytes"),s=y.concat([i.from([0]),h,o])}else s=y.concat([this.publicKey.toBuffer(),o]);var f=c.sha512hmac(s,this._buffers.chainCode),d=u.fromBuffer(f.slice(0,32),{size:32}),m=f.slice(32,64),b=d.add(this.privateKey.toBigNumber()).umod(p.getN()).toBuffer({size:32});return l.isValid(b)?new HDPrivateKey({network:this.network,depth:this.depth+1,parentFingerPrint:this.fingerPrint,childIndex:t,chainCode:m,privateKey:b}):this._deriveWithNumber(t+1,null,r)},HDPrivateKey.prototype._deriveFromString=function(t,e){if(!HDPrivateKey.isValidPath(t))throw new g.InvalidPath(t);return HDPrivateKey._getDerivationIndexes(t).reduce((function(t,r){return t._deriveWithNumber(r,null,e)}),this)},HDPrivateKey.isValidSerialized=function(t,e){return!HDPrivateKey.getSerializedError(t,e)},HDPrivateKey.getSerializedError=function(t,e){if(!o.isString(t)&&!y.isBuffer(t))return new g.UnrecognizedArgument("Expected string or buffer");if(!h.validCharacters(t))return new b.InvalidB58Char("(unknown)",t);try{t=f.decode(t)}catch(e){return new b.InvalidB58Checksum(t)}if(t.length!==HDPrivateKey.DataLength)return new g.InvalidLength(t);if(!o.isUndefined(e)){var r=HDPrivateKey._validateNetwork(t,e);if(r)return r}return null},HDPrivateKey._validateNetwork=function(t,e){var r=d.get(e);if(!r)return new b.InvalidNetworkArgument(e);var i=t.slice(0,4);return y.integerFromBuffer(i)!==r.xprivkey?new b.InvalidNetwork(i):null},HDPrivateKey.fromString=function(t){return a.checkArgument(o.isString(t),"No valid string was provided"),new HDPrivateKey(t)},HDPrivateKey.fromObject=function(t){return a.checkArgument(o.isObject(t),"No valid argument was provided"),new HDPrivateKey(t)},HDPrivateKey.prototype._buildFromJSON=function(t){return this._buildFromObject(JSON.parse(t))},HDPrivateKey.prototype._buildFromObject=function(t){var e={version:t.network?y.integerAsBuffer(d.get(t.network).xprivkey):t.version,depth:o.isNumber(t.depth)?y.integerAsSingleByteBuffer(t.depth):t.depth,parentFingerPrint:o.isNumber(t.parentFingerPrint)?y.integerAsBuffer(t.parentFingerPrint):t.parentFingerPrint,childIndex:o.isNumber(t.childIndex)?y.integerAsBuffer(t.childIndex):t.childIndex,chainCode:o.isString(t.chainCode)?i.from(t.chainCode,"hex"):t.chainCode,privateKey:o.isString(t.privateKey)&&v.isHexa(t.privateKey)?i.from(t.privateKey,"hex"):t.privateKey,checksum:t.checksum?t.checksum.length?t.checksum:y.integerAsBuffer(t.checksum):void 0};return this._buildFromBuffers(e)},HDPrivateKey.prototype._buildFromSerialized=function(t){var e=f.decode(t),r={version:e.slice(HDPrivateKey.VersionStart,HDPrivateKey.VersionEnd),depth:e.slice(HDPrivateKey.DepthStart,HDPrivateKey.DepthEnd),parentFingerPrint:e.slice(HDPrivateKey.ParentFingerPrintStart,HDPrivateKey.ParentFingerPrintEnd),childIndex:e.slice(HDPrivateKey.ChildIndexStart,HDPrivateKey.ChildIndexEnd),chainCode:e.slice(HDPrivateKey.ChainCodeStart,HDPrivateKey.ChainCodeEnd),privateKey:e.slice(HDPrivateKey.PrivateKeyStart,HDPrivateKey.PrivateKeyEnd),checksum:e.slice(HDPrivateKey.ChecksumStart,HDPrivateKey.ChecksumEnd),xprivkey:t};return this._buildFromBuffers(r)},HDPrivateKey.prototype._generateRandomly=function(t){return HDPrivateKey.fromSeed(m.getRandomBuffer(64),t)},HDPrivateKey.fromSeed=function(t,e){if(v.isHexaString(t)&&(t=i.from(t,"hex")),!i.isBuffer(t))throw new g.InvalidEntropyArgument(t);if(t.length<16)throw new g.InvalidEntropyArgument.NotEnoughEntropy(t);if(t.length>64)throw new g.InvalidEntropyArgument.TooMuchEntropy(t);var r=c.sha512hmac(t,i.from("Bitcoin seed"));return new HDPrivateKey({network:d.get(e)||d.defaultNetwork,depth:0,parentFingerPrint:0,childIndex:0,privateKey:r.slice(0,32),chainCode:r.slice(32,64)})},HDPrivateKey.prototype._calcHDPublicKey=function(){if(!this._hdPublicKey){var t=r(999513);this._hdPublicKey=new t(this)}},HDPrivateKey.prototype._buildFromBuffers=function(t){HDPrivateKey._validateBufferArguments(t),v.defineImmutable(this,{_buffers:t});var e=[t.version,t.depth,t.parentFingerPrint,t.childIndex,t.chainCode,y.emptyBuffer(1),t.privateKey],r=s.Buffer.concat(e);if(t.checksum&&t.checksum.length){if(t.checksum.toString()!==f.checksum(r).toString())throw new b.InvalidB58Checksum(r)}else t.checksum=f.checksum(r);var n,o=d.get(y.integerFromBuffer(t.version));n=f.encode(s.Buffer.concat(e)),t.xprivkey=i.from(n);var a=new l(u.fromBuffer(t.privateKey),o),h=a.toPublicKey(),p=HDPrivateKey.ParentFingerPrintSize,m=c.sha256ripemd160(h.toBuffer()).slice(0,p);return v.defineImmutable(this,{xprivkey:n,network:o,depth:y.integerFromSingleByteBuffer(t.depth),privateKey:a,publicKey:h,fingerPrint:m}),this._hdPublicKey=null,Object.defineProperty(this,"hdPublicKey",{configurable:!1,enumerable:!0,get:function(){return this._calcHDPublicKey(),this._hdPublicKey}}),Object.defineProperty(this,"xpubkey",{configurable:!1,enumerable:!0,get:function(){return this._calcHDPublicKey(),this._hdPublicKey.xpubkey}}),this},HDPrivateKey._validateBufferArguments=function(t){var checkBuffer=function(e,r){var i=t[e];n(y.isBuffer(i),e+" argument is not a buffer"),n(i.length===r,e+" has not the expected size: found "+i.length+", expected "+r)};checkBuffer("version",HDPrivateKey.VersionSize),checkBuffer("depth",HDPrivateKey.DepthSize),checkBuffer("parentFingerPrint",HDPrivateKey.ParentFingerPrintSize),checkBuffer("childIndex",HDPrivateKey.ChildIndexSize),checkBuffer("chainCode",HDPrivateKey.ChainCodeSize),checkBuffer("privateKey",HDPrivateKey.PrivateKeySize),t.checksum&&t.checksum.length&&checkBuffer("checksum",HDPrivateKey.CheckSumSize)},HDPrivateKey.prototype.toString=function(){return this.xprivkey},HDPrivateKey.prototype.inspect=function(){return"<HDPrivateKey: "+this.xprivkey+">"},HDPrivateKey.prototype.toObject=HDPrivateKey.prototype.toJSON=function toObject(){return{network:d.get(y.integerFromBuffer(this._buffers.version),"xprivkey").name,depth:y.integerFromSingleByteBuffer(this._buffers.depth),fingerPrint:y.integerFromBuffer(this.fingerPrint),parentFingerPrint:y.integerFromBuffer(this._buffers.parentFingerPrint),childIndex:y.integerFromBuffer(this._buffers.childIndex),chainCode:this._buffers.chainCode.toString("hex"),privateKey:this.privateKey.toBuffer().toString("hex"),checksum:y.integerFromBuffer(this._buffers.checksum),xprivkey:this.xprivkey}},HDPrivateKey.fromBuffer=function(t){return new HDPrivateKey(t.toString())},HDPrivateKey.prototype.toBuffer=function(){return y.copy(this._buffers.xprivkey)},HDPrivateKey.DefaultDepth=0,HDPrivateKey.DefaultFingerprint=0,HDPrivateKey.DefaultChildIndex=0,HDPrivateKey.Hardened=2147483648,HDPrivateKey.MaxIndex=2*HDPrivateKey.Hardened,HDPrivateKey.RootElementAlias=["m","M","m'","M'"],HDPrivateKey.VersionSize=4,HDPrivateKey.DepthSize=1,HDPrivateKey.ParentFingerPrintSize=4,HDPrivateKey.ChildIndexSize=4,HDPrivateKey.ChainCodeSize=32,HDPrivateKey.PrivateKeySize=32,HDPrivateKey.CheckSumSize=4,HDPrivateKey.DataLength=78,HDPrivateKey.SerializedByteSize=82,HDPrivateKey.VersionStart=0,HDPrivateKey.VersionEnd=HDPrivateKey.VersionStart+HDPrivateKey.VersionSize,HDPrivateKey.DepthStart=HDPrivateKey.VersionEnd,HDPrivateKey.DepthEnd=HDPrivateKey.DepthStart+HDPrivateKey.DepthSize,HDPrivateKey.ParentFingerPrintStart=HDPrivateKey.DepthEnd,HDPrivateKey.ParentFingerPrintEnd=HDPrivateKey.ParentFingerPrintStart+HDPrivateKey.ParentFingerPrintSize,HDPrivateKey.ChildIndexStart=HDPrivateKey.ParentFingerPrintEnd,HDPrivateKey.ChildIndexEnd=HDPrivateKey.ChildIndexStart+HDPrivateKey.ChildIndexSize,HDPrivateKey.ChainCodeStart=HDPrivateKey.ChildIndexEnd,HDPrivateKey.ChainCodeEnd=HDPrivateKey.ChainCodeStart+HDPrivateKey.ChainCodeSize,HDPrivateKey.PrivateKeyStart=HDPrivateKey.ChainCodeEnd+1,HDPrivateKey.PrivateKeyEnd=HDPrivateKey.PrivateKeyStart+HDPrivateKey.PrivateKeySize,HDPrivateKey.ChecksumStart=HDPrivateKey.PrivateKeyEnd,HDPrivateKey.ChecksumEnd=HDPrivateKey.ChecksumStart+HDPrivateKey.CheckSumSize,n(HDPrivateKey.ChecksumEnd===HDPrivateKey.SerializedByteSize),t.exports=HDPrivateKey},999513:(t,e,r)=>{"use strict";var i=r(901048).Buffer,n=r(645250),s=r(198641),o=r(47495),a=r(365819),u=r(408467),h=r(905079),f=r(719755),c=r(628658),d=r(976649),p=r(536061),l=r(669277),m=l,b=l.HDPublicKey,g=r(626093),y=r(359983),v=r(201146);function HDPublicKey(t){if(t instanceof HDPublicKey)return t;if(!(this instanceof HDPublicKey))return new HDPublicKey(t);if(t){if(n.isString(t)||v.isBuffer(t)){var e=HDPublicKey.getSerializedError(t);if(e){if(v.isBuffer(t)&&!HDPublicKey.getSerializedError(t.toString()))return this._buildFromSerialized(t.toString());if(e instanceof b.ArgumentIsPrivateExtended)return new f(t).hdPublicKey;throw e}return this._buildFromSerialized(t)}if(n.isObject(t))return t instanceof f?this._buildFromPrivate(t):this._buildFromObject(t);throw new b.UnrecognizedArgument(t)}throw new b.MustSupplyArgument}HDPublicKey.isValidPath=function(t){if(n.isString(t)){var e=f._getDerivationIndexes(t);return null!==e&&n.every(e,HDPublicKey.isValidPath)}return!!n.isNumber(t)&&(t>=0&&t<HDPublicKey.Hardened)},HDPublicKey.prototype.derive=function(t,e){return this.deriveChild(t,e)},HDPublicKey.prototype.deriveChild=function(t,e){if(n.isNumber(t))return this._deriveWithNumber(t,e);if(n.isString(t))return this._deriveFromString(t);throw new b.InvalidDerivationArgument(t)},HDPublicKey.prototype._deriveWithNumber=function(t,e){if(t>=HDPublicKey.Hardened||e)throw new b.InvalidIndexCantDeriveHardened;if(t<0)throw new b.InvalidPath(t);var r,i=v.integerAsBuffer(t),n=v.concat([this.publicKey.toBuffer(),i]),s=h.sha512hmac(n,this._buffers.chainCode),a=o.fromBuffer(s.slice(0,32),{size:32}),u=s.slice(32,64);try{r=p.fromPoint(d.getG().mul(a).add(this.publicKey.point))}catch(e){return this._deriveWithNumber(t+1)}return new HDPublicKey({network:this.network,depth:this.depth+1,parentFingerPrint:this.fingerPrint,childIndex:t,chainCode:u,publicKey:r})},HDPublicKey.prototype._deriveFromString=function(t){if(n.includes(t,"'"))throw new b.InvalidIndexCantDeriveHardened;if(!HDPublicKey.isValidPath(t))throw new b.InvalidPath(t);return f._getDerivationIndexes(t).reduce((function(t,e){return t._deriveWithNumber(e)}),this)},HDPublicKey.isValidSerialized=function(t,e){return n.isNull(HDPublicKey.getSerializedError(t,e))},HDPublicKey.getSerializedError=function(t,e){if(!n.isString(t)&&!v.isBuffer(t))return new b.UnrecognizedArgument("expected buffer or string");if(!a.validCharacters(t))return new m.InvalidB58Char("(unknown)",t);try{t=u.decode(t)}catch(e){return new m.InvalidB58Checksum(t)}if(t.length!==HDPublicKey.DataSize)return new b.InvalidLength(t);if(!n.isUndefined(e)){var r=HDPublicKey._validateNetwork(t,e);if(r)return r}var i=v.integerFromBuffer(t.slice(0,4));return i===c.livenet.xprivkey||i===c.testnet.xprivkey?new b.ArgumentIsPrivateExtended:null},HDPublicKey._validateNetwork=function(t,e){var r=c.get(e);if(!r)return new m.InvalidNetworkArgument(e);var i=t.slice(HDPublicKey.VersionStart,HDPublicKey.VersionEnd);return v.integerFromBuffer(i)!==r.xpubkey?new m.InvalidNetwork(i):null},HDPublicKey.prototype._buildFromPrivate=function(t){var e=n.clone(t._buffers),r=d.getG().mul(o.fromBuffer(e.privateKey));return e.publicKey=d.pointToCompressed(r),e.version=v.integerAsBuffer(c.get(v.integerFromBuffer(e.version)).xpubkey),e.privateKey=void 0,e.checksum=void 0,e.xprivkey=void 0,this._buildFromBuffers(e)},HDPublicKey.prototype._buildFromObject=function(t){var e={version:t.network?v.integerAsBuffer(c.get(t.network).xpubkey):t.version,depth:n.isNumber(t.depth)?v.integerAsSingleByteBuffer(t.depth):t.depth,parentFingerPrint:n.isNumber(t.parentFingerPrint)?v.integerAsBuffer(t.parentFingerPrint):t.parentFingerPrint,childIndex:n.isNumber(t.childIndex)?v.integerAsBuffer(t.childIndex):t.childIndex,chainCode:n.isString(t.chainCode)?i.from(t.chainCode,"hex"):t.chainCode,publicKey:n.isString(t.publicKey)?i.from(t.publicKey,"hex"):v.isBuffer(t.publicKey)?t.publicKey:t.publicKey.toBuffer(),checksum:n.isNumber(t.checksum)?v.integerAsBuffer(t.checksum):t.checksum};return this._buildFromBuffers(e)},HDPublicKey.prototype._buildFromSerialized=function(t){var e=u.decode(t),r={version:e.slice(HDPublicKey.VersionStart,HDPublicKey.VersionEnd),depth:e.slice(HDPublicKey.DepthStart,HDPublicKey.DepthEnd),parentFingerPrint:e.slice(HDPublicKey.ParentFingerPrintStart,HDPublicKey.ParentFingerPrintEnd),childIndex:e.slice(HDPublicKey.ChildIndexStart,HDPublicKey.ChildIndexEnd),chainCode:e.slice(HDPublicKey.ChainCodeStart,HDPublicKey.ChainCodeEnd),publicKey:e.slice(HDPublicKey.PublicKeyStart,HDPublicKey.PublicKeyEnd),checksum:e.slice(HDPublicKey.ChecksumStart,HDPublicKey.ChecksumEnd),xpubkey:t};return this._buildFromBuffers(r)},HDPublicKey.prototype._buildFromBuffers=function(t){HDPublicKey._validateBufferArguments(t),y.defineImmutable(this,{_buffers:t});var e=[t.version,t.depth,t.parentFingerPrint,t.childIndex,t.chainCode,t.publicKey],r=v.concat(e),n=u.checksum(r);if(t.checksum&&t.checksum.length){if(t.checksum.toString("hex")!==n.toString("hex"))throw new m.InvalidB58Checksum(r,n)}else t.checksum=n;var s,o=c.get(v.integerFromBuffer(t.version));s=u.encode(v.concat(e)),t.xpubkey=i.from(s);var a=new p(t.publicKey,{network:o}),f=HDPublicKey.ParentFingerPrintSize,d=h.sha256ripemd160(a.toBuffer()).slice(0,f);return y.defineImmutable(this,{xpubkey:s,network:o,depth:v.integerFromSingleByteBuffer(t.depth),publicKey:a,fingerPrint:d}),this},HDPublicKey._validateBufferArguments=function(t){var checkBuffer=function(e,r){var i=t[e];g(v.isBuffer(i),e+" argument is not a buffer, it's "+typeof i),g(i.length===r,e+" has not the expected size: found "+i.length+", expected "+r)};checkBuffer("version",HDPublicKey.VersionSize),checkBuffer("depth",HDPublicKey.DepthSize),checkBuffer("parentFingerPrint",HDPublicKey.ParentFingerPrintSize),checkBuffer("childIndex",HDPublicKey.ChildIndexSize),checkBuffer("chainCode",HDPublicKey.ChainCodeSize),checkBuffer("publicKey",HDPublicKey.PublicKeySize),t.checksum&&t.checksum.length&&checkBuffer("checksum",HDPublicKey.CheckSumSize)},HDPublicKey.fromString=function(t){return s.checkArgument(n.isString(t),"No valid string was provided"),new HDPublicKey(t)},HDPublicKey.fromObject=function(t){return s.checkArgument(n.isObject(t),"No valid argument was provided"),new HDPublicKey(t)},HDPublicKey.prototype.toString=function(){return this.xpubkey},HDPublicKey.prototype.inspect=function(){return"<HDPublicKey: "+this.xpubkey+">"},HDPublicKey.prototype.toObject=HDPublicKey.prototype.toJSON=function toObject(){return{network:c.get(v.integerFromBuffer(this._buffers.version)).name,depth:v.integerFromSingleByteBuffer(this._buffers.depth),fingerPrint:v.integerFromBuffer(this.fingerPrint),parentFingerPrint:v.integerFromBuffer(this._buffers.parentFingerPrint),childIndex:v.integerFromBuffer(this._buffers.childIndex),chainCode:i.from(this._buffers.chainCode,"hex"),publicKey:this.publicKey.toString(),checksum:v.integerFromBuffer(this._buffers.checksum),xpubkey:this.xpubkey}},HDPublicKey.fromBuffer=function(t){return new HDPublicKey(t)},HDPublicKey.prototype.toBuffer=function(){return v.copy(this._buffers.xpubkey)},HDPublicKey.Hardened=2147483648,HDPublicKey.RootElementAlias=["m","M"],HDPublicKey.VersionSize=4,HDPublicKey.DepthSize=1,HDPublicKey.ParentFingerPrintSize=4,HDPublicKey.ChildIndexSize=4,HDPublicKey.ChainCodeSize=32,HDPublicKey.PublicKeySize=33,HDPublicKey.CheckSumSize=4,HDPublicKey.DataSize=78,HDPublicKey.SerializedByteSize=82,HDPublicKey.VersionStart=0,HDPublicKey.VersionEnd=HDPublicKey.VersionStart+HDPublicKey.VersionSize,HDPublicKey.DepthStart=HDPublicKey.VersionEnd,HDPublicKey.DepthEnd=HDPublicKey.DepthStart+HDPublicKey.DepthSize,HDPublicKey.ParentFingerPrintStart=HDPublicKey.DepthEnd,HDPublicKey.ParentFingerPrintEnd=HDPublicKey.ParentFingerPrintStart+HDPublicKey.ParentFingerPrintSize,HDPublicKey.ChildIndexStart=HDPublicKey.ParentFingerPrintEnd,HDPublicKey.ChildIndexEnd=HDPublicKey.ChildIndexStart+HDPublicKey.ChildIndexSize,HDPublicKey.ChainCodeStart=HDPublicKey.ChildIndexEnd,HDPublicKey.ChainCodeEnd=HDPublicKey.ChainCodeStart+HDPublicKey.ChainCodeSize,HDPublicKey.PublicKeyStart=HDPublicKey.ChainCodeEnd,HDPublicKey.PublicKeyEnd=HDPublicKey.PublicKeyStart+HDPublicKey.PublicKeySize,HDPublicKey.ChecksumStart=HDPublicKey.PublicKeyEnd,HDPublicKey.ChecksumEnd=HDPublicKey.ChecksumStart+HDPublicKey.CheckSumSize,g(HDPublicKey.PublicKeyEnd===HDPublicKey.DataSize),g(HDPublicKey.ChecksumEnd===HDPublicKey.SerializedByteSize),t.exports=HDPublicKey},628658:(t,e,r)=>{"use strict";var i=r(645250),n=r(201146),s=r(359983),o=[],a={};function Network(){}function get(t,e){if(~o.indexOf(t))return t;if(!e)return a[t];i.isArray(e)||(e=[e]);for(var r=0;r<o.length;r++){var n=o[r],s=i.pick(n,e);if(~i.values(s).indexOf(t))return n}}function prefixToArray(t){for(var e=[],r=0;r<t.length;r++)e.push(31&t.charCodeAt(r));return e}function addNetwork(t){var e=new Network;s.defineImmutable(e,{name:t.name,alias:t.alias,pubkeyhash:t.pubkeyhash,privatekey:t.privatekey,scripthash:t.scripthash,xpubkey:t.xpubkey,xprivkey:t.xprivkey});var r=t.indexBy||Object.keys(t);return t.prefix&&i.extend(e,{prefix:t.prefix,prefixArray:prefixToArray(t.prefix)}),t.networkMagic&&i.extend(e,{networkMagic:n.integerAsBuffer(t.networkMagic)}),t.port&&i.extend(e,{port:t.port}),t.dnsSeeds&&i.extend(e,{dnsSeeds:t.dnsSeeds}),o.push(e),function indexNetworkBy(t,e){for(var r=0;r<e.length;r++){var n=t[e[r]];i.isUndefined(n)||i.isObject(n)||(a[n]=t)}}(e,r),e}Network.prototype.toString=function toString(){return this.name};var u=["seed.bitcoinabc.org","seed-abc.bitcoinforks.org","btccash-seeder.bitcoinunlimited.info","seeder.jasonbcox.com","seed.deadalnix.me","seed.bchd.cash"],h={name:"livenet",alias:"mainnet",prefix:"bitcoincash",pubkeyhash:28,privatekey:128,scripthash:40,xpubkey:76067358,xprivkey:76066276,networkMagic:3823236072,port:8333,dnsSeeds:u};addNetwork({name:"testnet",prefix:"bchtest",pubkeyhash:111,privatekey:239,scripthash:196,xpubkey:70617039,xprivkey:70615956,networkMagic:4108710900,port:18333,dnsSeeds:u}),addNetwork({name:"regtest",prefix:"bchreg",pubkeyhash:111,privatekey:239,scripthash:196,xpubkey:70617039,xprivkey:70615956,networkMagic:3669344250,port:18444,dnsSeeds:[],indexBy:["port","name","prefix","networkMagic"]}),addNetwork(h);var f=get("livenet"),c=get("regtest"),d=get("testnet");["kaspa","kaspadev","kaspareg","kaspatest","kaspasim"].map((t=>{addNetwork({name:t,prefix:t,pubkeyhash:0,privatekey:128,scripthash:5,xpubkey:76067358,xprivkey:76066276,networkMagic:3669344250})})),t.exports={add:addNetwork,remove:function removeNetwork(t){for(var e=0;e<o.length;e++)o[e]===t&&o.splice(e,1);!function unindexNetworkBy(t,e){for(var r=0;r<e.length;r++){var i=e[r];a[i]===t&&delete a[i]}}(t,Object.keys(a))},defaultNetwork:f,livenet:f,mainnet:f,testnet:d,regtest:c,get,enableRegtest:function enableRegtest(){d.regtestEnabled=!0},disableRegtest:function disableRegtest(){d.regtestEnabled=!1}}},938387:(t,e,r)=>{"use strict";var i=r(901048).Buffer,n=r(645250),s=r(198641),o=r(201146),a=r(359983);function Opcode(t){if(!(this instanceof Opcode))return new Opcode(t);var e;if(n.isNumber(t))e=t;else{if(!n.isString(t))throw new TypeError('Unrecognized num type: "'+typeof t+'" for Opcode');e=Opcode.map[t]}return a.defineImmutable(this,{num:e}),this}for(var u in Opcode.fromBuffer=function(t){return s.checkArgument(o.isBuffer(t)),new Opcode(Number("0x"+t.toString("hex")))},Opcode.fromNumber=function(t){return s.checkArgument(n.isNumber(t)),new Opcode(t)},Opcode.fromString=function(t){s.checkArgument(n.isString(t));var e=Opcode.map[t];if(void 0===e)throw new TypeError("Invalid opcodestr");return new Opcode(e)},Opcode.prototype.toHex=function(){return this.num.toString(16)},Opcode.prototype.toBuffer=function(){return i.from(this.toHex(),"hex")},Opcode.prototype.toNumber=function(){return this.num},Opcode.prototype.toString=function(){var t=Opcode.reverseMap[this.num];if(void 0===t)throw new Error("Opcode does not have a string representation");return t},Opcode.smallInt=function(t){return s.checkArgument(n.isNumber(t),"Invalid Argument: n should be number"),s.checkArgument(t>=0&&t<=16,"Invalid Argument: n must be between 0 and 16"),0===t?Opcode("OP_0"):new Opcode(Opcode.map.OP_1+t-1)},Opcode.map={OP_FALSE:0,OP_0:0,OP_PUSHDATA1:76,OP_PUSHDATA2:77,OP_PUSHDATA4:78,OP_1NEGATE:79,OP_RESERVED:80,OP_TRUE:81,OP_1:81,OP_2:82,OP_3:83,OP_4:84,OP_5:85,OP_6:86,OP_7:87,OP_8:88,OP_9:89,OP_10:90,OP_11:91,OP_12:92,OP_13:93,OP_14:94,OP_15:95,OP_16:96,OP_NOP:97,OP_VER:98,OP_IF:99,OP_NOTIF:100,OP_VERIF:101,OP_VERNOTIF:102,OP_ELSE:103,OP_ENDIF:104,OP_VERIFY:105,OP_RETURN:106,OP_TOALTSTACK:107,OP_FROMALTSTACK:108,OP_2DROP:109,OP_2DUP:110,OP_3DUP:111,OP_2OVER:112,OP_2ROT:113,OP_2SWAP:114,OP_IFDUP:115,OP_DEPTH:116,OP_DROP:117,OP_DUP:118,OP_NIP:119,OP_OVER:120,OP_PICK:121,OP_ROLL:122,OP_ROT:123,OP_SWAP:124,OP_TUCK:125,OP_CAT:126,OP_SPLIT:127,OP_NUM2BIN:128,OP_BIN2NUM:129,OP_SIZE:130,OP_INVERT:131,OP_AND:132,OP_OR:133,OP_XOR:134,OP_EQUAL:135,OP_EQUALVERIFY:136,OP_RESERVED1:137,OP_RESERVED2:138,OP_1ADD:139,OP_1SUB:140,OP_2MUL:141,OP_2DIV:142,OP_NEGATE:143,OP_ABS:144,OP_NOT:145,OP_0NOTEQUAL:146,OP_ADD:147,OP_SUB:148,OP_MUL:149,OP_DIV:150,OP_MOD:151,OP_LSHIFT:152,OP_RSHIFT:153,OP_BOOLAND:154,OP_BOOLOR:155,OP_NUMEQUAL:156,OP_NUMEQUALVERIFY:157,OP_NUMNOTEQUAL:158,OP_LESSTHAN:159,OP_GREATERTHAN:160,OP_LESSTHANOREQUAL:161,OP_GREATERTHANOREQUAL:162,OP_MIN:163,OP_MAX:164,OP_WITHIN:165,OP_RIPEMD160:166,OP_SHA1:167,OP_SHA256:168,OP_HASH160:169,OP_HASH256:170,OP_BLAKE2B:170,OP_CODESEPARATOR:171,OP_CHECKSIG:172,OP_CHECKSIGVERIFY:173,OP_CHECKMULTISIG:174,OP_CHECKMULTISIGVERIFY:175,OP_NOP2:177,OP_CHECKLOCKTIMEVERIFY:177,OP_NOP3:178,OP_CHECKSEQUENCEVERIFY:178,OP_NOP1:176,OP_NOP4:179,OP_NOP5:180,OP_NOP6:181,OP_NOP7:182,OP_NOP8:183,OP_NOP9:184,OP_NOP10:185,OP_CHECKDATASIG:186,OP_CHECKDATASIGVERIFY:187,OP_REVERSEBYTES:188,OP_PREFIX_BEGIN:240,OP_PREFIX_END:241,OP_SMALLINTEGER:250,OP_PUBKEYS:251,OP_PUBKEYHASH:253,OP_PUBKEY:254,OP_INVALIDOPCODE:255},Opcode.reverseMap=[],Opcode.map)Opcode.reverseMap[Opcode.map[u]]=u;n.extend(Opcode,Opcode.map),Opcode.isSmallIntOp=function(t){return t instanceof Opcode&&(t=t.toNumber()),t===Opcode.map.OP_0||t>=Opcode.map.OP_1&&t<=Opcode.map.OP_16},Opcode.prototype.inspect=function(){return"<Opcode: "+this.toString()+", hex: "+this.toHex()+", decimal: "+this.num+">"},t.exports=Opcode},901487:(t,e,r)=>{"use strict";var i=r(901048).Buffer,n=r(645250),s=r(61365),o=r(408467),a=r(47495),u=r(359983),h=r(628658),f=r(976649),c=r(536061),d=r(671820),p=r(198641);const l=r(374261);function PrivateKey(t,e){if(!(this instanceof PrivateKey))return new PrivateKey(t,e);if(t instanceof PrivateKey)return t;var r=this._classifyArguments(t,e);if(!r.bn||0===r.bn.cmp(new a(0)))throw new TypeError("Number can not be equal to zero, undefined, null or false");if(!r.bn.lt(f.getN()))throw new TypeError("Number must be less than N");if(void 0===r.network)throw new TypeError('Must specify the network ("livenet" or "testnet")');return u.defineImmutable(this,{bn:r.bn,compressed:r.compressed,network:r.network}),Object.defineProperty(this,"publicKey",{configurable:!1,enumerable:!0,get:this.toPublicKey.bind(this)}),this}PrivateKey.prototype._classifyArguments=function(t,e){var r={compressed:!0,network:e?h.get(e):h.defaultNetwork};if(n.isUndefined(t)||n.isNull(t))r.bn=PrivateKey._getRandomBN();else if(t instanceof a)r.bn=t;else if(t instanceof i||t instanceof Uint8Array)r=PrivateKey._transformBuffer(t,e);else if(t.bn&&t.network)r=PrivateKey._transformObject(t);else if(!e&&h.get(t))r.bn=PrivateKey._getRandomBN(),r.network=h.get(t);else{if("string"!=typeof t)throw new TypeError("First argument is an unrecognized data type.");u.isHexa(t)?r.bn=new a(i.from(t,"hex")):r=PrivateKey._transformWIF(t,e)}return r},PrivateKey._getRandomBN=function(){var t,e;do{var r=d.getRandomBuffer(32);t=(e=a.fromBuffer(r)).lt(f.getN())}while(!t);return e},PrivateKey._transformBuffer=function(t,e){var r={};if(32===t.length)return PrivateKey._transformBNBuffer(t,e);if(r.network=h.get(t[0],"privatekey"),!r.network)throw new Error("Invalid network");if(e&&r.network!==h.get(e))throw new TypeError("Private key network mismatch");if(34===t.length&&1===t[33])r.compressed=!0;else{if(33!==t.length)throw new Error("Length of buffer must be 33 (uncompressed) or 34 (compressed)");r.compressed=!1}return r.bn=a.fromBuffer(t.slice(1,33)),r},PrivateKey._transformBNBuffer=function(t,e){var r={};return r.network=h.get(e)||h.defaultNetwork,r.bn=a.fromBuffer(t),r.compressed=!1,r},PrivateKey._transformWIF=function(t,e){return PrivateKey._transformBuffer(o.decode(t),e)},PrivateKey.fromBuffer=function(t,e){return new PrivateKey(t,e)},PrivateKey._transformObject=function(t){return{bn:new a(t.bn,"hex"),network:h.get(t.network),compressed:t.compressed}},PrivateKey.fromString=PrivateKey.fromWIF=function(t){return p.checkArgument(n.isString(t),"First argument is expected to be a string."),new PrivateKey(t)},PrivateKey.fromObject=function(t){return p.checkArgument(n.isObject(t),"First argument is expected to be an object."),new PrivateKey(t)},PrivateKey.fromRandom=function(t){var e=PrivateKey._getRandomBN();return new PrivateKey(e,t)},PrivateKey.getValidationError=function(t,e){var r;try{new PrivateKey(t,e)}catch(t){r=t}return r},PrivateKey.isValid=function(t,e){return!!t&&!PrivateKey.getValidationError(t,e)},PrivateKey.prototype.toString=function(){return this.toBuffer().toString("hex")},PrivateKey.prototype.toWIF=function(){var t,e=this.network;return t=this.compressed?i.concat([i.from([e.privatekey]),this.bn.toBuffer({size:32}),i.from([1])]):i.concat([i.from([e.privatekey]),this.bn.toBuffer({size:32})]),o.encode(t)},PrivateKey.prototype.toBigNumber=function(){return this.bn},PrivateKey.prototype.toBuffer=function(){return this.bn.toBuffer({size:32})},PrivateKey.prototype.toBufferNoPadding=function(){return this.bn.toBuffer()},PrivateKey.prototype.toPublicKey=function(){if(!this._pubkey){let t=l.getPublicKey(this.toString(),!0);this._pubkey=new c(i.from(t),{network:this.network.name})}return this._pubkey},PrivateKey.prototype.toAddress=function(t){var e=this.toPublicKey();return s.fromPublicKey(e,t||this.network)},PrivateKey.prototype.toObject=PrivateKey.prototype.toJSON=function toObject(){return{bn:this.bn.toString("hex"),compressed:this.compressed,network:this.network.toString()}},PrivateKey.prototype.inspect=function(){var t=this.compressed?"":", uncompressed";return"<PrivateKey: "+this.toString()+", network: "+this.network+t+">"},t.exports=PrivateKey},536061:(t,e,r)=>{"use strict";var i=r(901048).Buffer,n=r(47495),s=r(976649),o=r(905079),a=r(359983),u=r(628658),h=r(645250),f=r(198641);function PublicKey(t,e){if(!(this instanceof PublicKey))return new PublicKey(t,e);if(f.checkArgument(t,"First argument is required, please include public key data."),t instanceof PublicKey)return t;e=e||{};var r=this._classifyArgs(t,e);return r.point.validate(),a.defineImmutable(this,{point:r.point,compressed:r.compressed,network:r.network||u.defaultNetwork}),this}PublicKey.prototype._classifyArgs=function(t,e){var r={compressed:h.isUndefined(e.compressed)||e.compressed};if(t instanceof s)r.point=t;else if(t.x&&t.y)r=PublicKey._transformObject(t);else if("string"==typeof t)r=PublicKey._transformDER(i.from(t,"hex"));else if(PublicKey._isBuffer(t))r=PublicKey._transformDER(t);else{if(!PublicKey._isPrivateKey(t))throw new TypeError("First argument is an unrecognized data format.");r=PublicKey._transformPrivateKey(t)}return r.network||(r.network=h.isUndefined(e.network)?void 0:u.get(e.network)),r},PublicKey._isPrivateKey=function(t){return t instanceof r(901487)},PublicKey._isBuffer=function(t){return t instanceof i||t instanceof Uint8Array},PublicKey._transformPrivateKey=function(t){f.checkArgument(PublicKey._isPrivateKey(t),"Must be an instance of PrivateKey");var e={};return e.point=s.getG().mul(t.bn),e.compressed=t.compressed,e.network=t.network,e},PublicKey._transformDER=function(t,e){f.checkArgument(PublicKey._isBuffer(t),"Must be a hex buffer of DER encoded public key");var r,i,o,a,u={};if(e=!!h.isUndefined(e)||e,4!==t[0]&&(e||6!==t[0]&&7!==t[0]))if(3===t[0])o=t.slice(1),r=new n(o),(u=PublicKey._transformX(!0,r)).compressed=!0;else{if(2!==t[0])throw new TypeError("Invalid DER format public key");o=t.slice(1),r=new n(o),(u=PublicKey._transformX(!1,r)).compressed=!0}else{if(o=t.slice(1,33),a=t.slice(33,65),32!==o.length||32!==a.length||65!==t.length)throw new TypeError("Length of x and y must be 32 bytes");r=new n(o),i=new n(a),u.point=new s(r,i),u.compressed=!1}return u},PublicKey._transformX=function(t,e){f.checkArgument("boolean"==typeof t,"Must specify whether y is odd or not (true or false)");var r={};return r.point=s.fromX(t,e),r},PublicKey._transformObject=function(t){var e=new n(t.x,"hex"),r=new n(t.y,"hex");return new PublicKey(new s(e,r),{compressed:t.compressed})},PublicKey.fromPrivateKey=function(t){f.checkArgument(PublicKey._isPrivateKey(t),"Must be an instance of PrivateKey");var e=PublicKey._transformPrivateKey(t);return new PublicKey(e.point,{compressed:e.compressed,network:e.network})},PublicKey.fromDER=PublicKey.fromBuffer=function(t,e){f.checkArgument(PublicKey._isBuffer(t),"Must be a hex buffer of DER encoded public key");var r=PublicKey._transformDER(t,e);return new PublicKey(r.point,{compressed:r.compressed})},PublicKey.fromPoint=function(t,e){return f.checkArgument(t instanceof s,"First argument must be an instance of Point."),new PublicKey(t,{compressed:e})},PublicKey.fromString=function(t,e){var r=i.from(t,e||"hex"),n=PublicKey._transformDER(r);return new PublicKey(n.point,{compressed:n.compressed})},PublicKey.fromX=function(t,e){var r=PublicKey._transformX(t,e);return new PublicKey(r.point,{compressed:r.compressed})},PublicKey.getValidationError=function(t){var e;try{new PublicKey(t)}catch(t){e=t}return e},PublicKey.isValid=function(t){return!PublicKey.getValidationError(t)},PublicKey.prototype.toObject=PublicKey.prototype.toJSON=function toObject(){return{x:this.point.getX().toString("hex",2),y:this.point.getY().toString("hex",2),compressed:this.compressed}},PublicKey.prototype.toBuffer=PublicKey.prototype.toDER=function(){return this.point.getX().toBuffer({size:32})},PublicKey.prototype._getID=function _getID(){return o.sha256ripemd160(this.toBuffer())},PublicKey.prototype.toAddress=function(t){return r(61365).fromPublicKey(this,t||this.network)},PublicKey.prototype.toString=function(){return this.toDER().toString("hex")},PublicKey.prototype.inspect=function(){return"<PublicKey: "+this.toString()+(this.compressed?"":", uncompressed")+">"},t.exports=PublicKey},526785:(t,e,r)=>{t.exports=r(762538),t.exports.Interpreter=r(542675)},542675:(t,e,r)=>{"use strict";var i=r(901048).Buffer,n=r(645250),s=r(762538),o=r(938387),a=r(47495),u=r(905079),h=r(918677),f=r(536061),c=r(269575),d=r(510682),p=function Interpreter(t){if(!(this instanceof Interpreter))return new Interpreter(t);t?(this.initialize(),this.set(t)):this.initialize()};p.prototype.verify=function(t,e,i,o,a,u){var h,f=r(470234);if(n.isUndefined(i)&&(i=new f),n.isUndefined(o)&&(o=0),n.isUndefined(a)&&(a=0),a&p.SCRIPT_ENABLE_SIGHASH_FORKID&&(a|=p.SCRIPT_VERIFY_STRICTENC,!u))throw new Error("internal error - need satoshisBN to verify FORKID transactions");if(this.set({script:t,tx:i,nin:o,flags:a,satoshisBN:u}),a&p.SCRIPT_VERIFY_SIGPUSHONLY&&!t.isPushOnly())return this.errstr="SCRIPT_ERR_SIG_PUSHONLY",!1;if(!this.evaluate())return!1;a&p.SCRIPT_VERIFY_P2SH&&(h=this.stack.slice());var c=this.stack;if(this.initialize(),this.set({script:e,stack:c,tx:i,nin:o,flags:a,satoshisBN:u}),!this.evaluate())return!1;if(0===this.stack.length)return this.errstr="SCRIPT_ERR_EVAL_FALSE_NO_RESULT",!1;var d=this.stack[this.stack.length-1];if(!p.castToBool(d))return this.errstr="SCRIPT_ERR_EVAL_FALSE_IN_STACK",!1;if(a&p.SCRIPT_VERIFY_P2SH&&e.isScriptHashOut()){if(!t.isPushOnly())return this.errstr="SCRIPT_ERR_SIG_PUSHONLY",!1;if(0===h.length)throw new Error("internal error - stack copy empty");var l=h[h.length-1],m=s.fromBuffer(l);if(h.pop(),this.initialize(),this.set({script:m,stack:h,tx:i,nin:o,flags:a,satoshisBN:u}),!this.evaluate())return!1;if(0===h.length)return this.errstr="SCRIPT_ERR_EVAL_FALSE_NO_P2SH_STACK",!1;if(!p.castToBool(h[h.length-1]))return this.errstr="SCRIPT_ERR_EVAL_FALSE_IN_P2SH_STACK",!1}if(a&p.SCRIPT_VERIFY_CLEANSTACK){if(!(a&p.SCRIPT_VERIFY_P2SH))throw new Error("internal error - CLEANSTACK without P2SH");if(1!=h.length)return this.errstr="SCRIPT_ERR_CLEANSTACK",!1}return!0},t.exports=p,p.prototype.initialize=function(t){this.stack=[],this.altstack=[],this.pc=0,this.pbegincodehash=0,this.nOpCount=0,this.vfExec=[],this.errstr="",this.flags=0},p.prototype.set=function(t){this.script=t.script||this.script,this.tx=t.tx||this.tx,this.nin=void 0!==t.nin?t.nin:this.nin,this.satoshisBN=t.satoshisBN||this.satoshisBN,this.stack=t.stack||this.stack,this.altstack=t.altack||this.altstack,this.pc=void 0!==t.pc?t.pc:this.pc,this.pbegincodehash=void 0!==t.pbegincodehash?t.pbegincodehash:this.pbegincodehash,this.nOpCount=void 0!==t.nOpCount?t.nOpCount:this.nOpCount,this.vfExec=t.vfExec||this.vfExec,this.errstr=t.errstr||this.errstr,this.flags=void 0!==t.flags?t.flags:this.flags},p.true=i.from([1]),p.false=i.from([]),p.MAX_SCRIPT_ELEMENT_SIZE=520,p.MAXIMUM_ELEMENT_SIZE=4,p.LOCKTIME_THRESHOLD_BN=new a(p.LOCKTIME_THRESHOLD=5e8),p.SCRIPT_VERIFY_NONE=0,p.SCRIPT_VERIFY_P2SH=1,p.SCRIPT_VERIFY_STRICTENC=2,p.SCRIPT_VERIFY_DERSIG=4,p.SCRIPT_VERIFY_LOW_S=8,p.SCRIPT_VERIFY_NULLDUMMY=16,p.SCRIPT_VERIFY_SIGPUSHONLY=32,p.SCRIPT_VERIFY_MINIMALDATA=64,p.SCRIPT_VERIFY_DISCOURAGE_UPGRADABLE_NOPS=128,p.SCRIPT_VERIFY_CLEANSTACK=256,p.SCRIPT_VERIFY_CHECKLOCKTIMEVERIFY=512,p.SCRIPT_VERIFY_CHECKSEQUENCEVERIFY=1024,p.SCRIPT_VERIFY_MINIMALIF=8192,p.SCRIPT_VERIFY_NULLFAIL=16384,p.SCRIPT_VERIFY_COMPRESSED_PUBKEYTYPE=32768,p.SCRIPT_ENABLE_SIGHASH_FORKID=65536,p.SCRIPT_ENABLE_REPLAY_PROTECTION=1<<17,p.SCRIPT_ENABLE_CHECKDATASIG=1<<18,p.SCRIPT_DISALLOW_SEGWIT_RECOVERY=1<<20,p.SCRIPT_ENABLE_SCHNORR_MULTISIG=1<<21,p.SEQUENCE_LOCKTIME_DISABLE_FLAG=1<<31,p.SEQUENCE_LOCKTIME_TYPE_FLAG=1<<22,p.SEQUENCE_LOCKTIME_MASK=65535,p.castToBool=function(t){for(var e=0;e<t.length;e++)if(0!==t[e])return e!==t.length-1||128!==t[e];return!1},p.isSchnorrSig=function(t){return(64===t.length||65===t.length)&&48!==t[0]},p.prototype.checkRawSignatureEncoding=function(t){return!!p.isSchnorrSig(t)||(this.flags&(p.SCRIPT_VERIFY_DERSIG|p.SCRIPT_VERIFY_LOW_S|p.SCRIPT_VERIFY_STRICTENC)&&!h.isDER(t)?(this.errstr="SCRIPT_ERR_SIG_DER_INVALID_FORMAT",!1):!(this.flags&p.SCRIPT_VERIFY_LOW_S&&!h.fromTxFormat(t).hasLowS())||(this.errstr="SCRIPT_ERR_SIG_DER_HIGH_S",!1))},p.prototype.checkSignatureEncoding=p.prototype.checkTxSignatureEncoding=function(t){if(0==t.length)return!0;if(!this.checkRawSignatureEncoding(t.slice(0,t.length-1)))return!1;if(this.flags&p.SCRIPT_VERIFY_STRICTENC){var e=h.fromTxFormat(t);if(!e.hasDefinedHashtype())return this.errstr="SCRIPT_ERR_SIG_HASHTYPE",!1;if(!(this.flags&p.SCRIPT_ENABLE_SIGHASH_FORKID)&&e.nhashtype&h.SIGHASH_FORKID)return this.errstr="SCRIPT_ERR_ILLEGAL_FORKID",!1;if(this.flags&p.SCRIPT_ENABLE_SIGHASH_FORKID&&!(e.nhashtype&h.SIGHASH_FORKID))return this.errstr="SCRIPT_ERR_MUST_USE_FORKID",!1}return!0},p.prototype.checkDataSignatureEncoding=function(t){return 0==t.length||this.checkRawSignatureEncoding(t)},p.prototype.checkPubkeyEncoding=function(t){return!(this.flags&p.SCRIPT_VERIFY_STRICTENC&&!f.isValid(t)&&!function IsCompressedOrUncompressedPubkey(t){switch(t.length){case 33:return 2===t[0]||3===t[0];case 64:return 4===t[0];default:return!1}}(t))||(this.errstr="SCRIPT_ERR_PUBKEYTYPE",!1)},p._isMinimallyEncoded=function(t,e){return e=e||p.MAXIMUM_ELEMENT_SIZE,!(t.length>e)&&!(t.length>0&&!(127&t[t.length-1]||!(t.length<=1)&&128&t[t.length-2]))},p._minimallyEncode=function(t){if(0==t.length)return t;var e=t[t.length-1];if(127&e)return t;if(1==t.length)return i.from("");if(128&t[t.length-2])return t;for(var r=t.length-1;r>0;r--)if(0!=t[r-1])return 128&t[r-1]?t[r++]=e:t[r-1]|=e,t.slice(0,r);return i.from("")},p.prototype.evaluate=function(){if(this.script.toBuffer().length>1e4)return this.errstr="SCRIPT_ERR_SCRIPT_SIZE",!1;try{for(;this.pc<this.script.chunks.length;){if(!this.step())return!1}if(this.stack.length+this.altstack.length>1e3)return this.errstr="SCRIPT_ERR_STACK_SIZE",!1}catch(t){return this.errstr="SCRIPT_ERR_UNKNOWN_ERROR: "+t,!1}return!(this.vfExec.length>0)||(this.errstr="SCRIPT_ERR_UNBALANCED_CONDITIONAL",!1)},p.prototype.checkLockTime=function(t){return!!(this.tx.nLockTime<p.LOCKTIME_THRESHOLD&&t.lt(p.LOCKTIME_THRESHOLD_BN)||this.tx.nLockTime>=p.LOCKTIME_THRESHOLD&&t.gte(p.LOCKTIME_THRESHOLD_BN))&&(!t.gt(new a(this.tx.nLockTime))&&!!this.tx.inputs[this.nin].isFinal())},p.prototype.checkSequence=function(t){var e=this.tx.inputs[this.nin].sequenceNumber;if(this.tx.version<2)return!1;if(e&SEQUENCE_LOCKTIME_DISABLE_FLAG)return!1;var r=p.SEQUENCE_LOCKTIME_TYPE_FLAG|p.SEQUENCE_LOCKTIME_MASK,i=new a(e&r),n=t.and(r),s=new a(p.SEQUENCE_LOCKTIME_TYPE_FLAG);return!!(i.lt(s)&&n.lt(s)||i.gte(s)&&n.gte(s))&&!n.gt(i)},p.prototype.step=function(){var t=this;function stacktop(e){return t.stack[t.stack.length+e]}var e,r,l,m,b,g,y,v,w,_,P,I,M,B,k,A,E,O,N=!!(this.flags&p.SCRIPT_VERIFY_MINIMALDATA),T=-1===this.vfExec.indexOf(!1),x=this.script.chunks[this.pc];this.pc++;var K=x.opcodenum;if(n.isUndefined(K))return this.errstr="SCRIPT_ERR_UNDEFINED_OPCODE",!1;if(x.buf&&x.buf.length>p.MAX_SCRIPT_ELEMENT_SIZE)return this.errstr="SCRIPT_ERR_PUSH_SIZE",!1;if(K>o.OP_16&&++this.nOpCount>201)return this.errstr="SCRIPT_ERR_OP_COUNT",!1;if(function isOpcodeDisabled(t){switch(t){case o.OP_INVERT:case o.OP_2MUL:case o.OP_2DIV:case o.OP_MUL:case o.OP_LSHIFT:case o.OP_RSHIFT:return!0;case o.OP_DIV:case o.OP_MOD:case o.OP_SPLIT:case o.OP_CAT:case o.OP_AND:case o.OP_OR:case o.OP_XOR:case o.OP_BIN2NUM:case o.OP_NUM2BIN:return!1}return!1}(K))return this.errstr="SCRIPT_ERR_DISABLED_OPCODE",!1;if(T&&0<=K&&K<=o.OP_PUSHDATA4){if(N&&!this.script.checkMinimalPush(this.pc-1))return this.errstr="SCRIPT_ERR_MINIMALDATA",!1;if(x.buf){if(x.len!==x.buf.length)throw new Error("Length of push value not equal to length of data");this.stack.push(x.buf)}else this.stack.push(p.false)}else if(T||o.OP_IF<=K&&K<=o.OP_ENDIF)switch(K){case o.OP_1NEGATE:case o.OP_1:case o.OP_2:case o.OP_3:case o.OP_4:case o.OP_5:case o.OP_6:case o.OP_7:case o.OP_8:case o.OP_9:case o.OP_10:case o.OP_11:case o.OP_12:case o.OP_13:case o.OP_14:case o.OP_15:case o.OP_16:b=K-(o.OP_1-1),e=new a(b).toScriptNumBuffer(),this.stack.push(e);break;case o.OP_NOP:break;case o.OP_NOP2:case o.OP_CHECKLOCKTIMEVERIFY:if(!(this.flags&p.SCRIPT_VERIFY_CHECKLOCKTIMEVERIFY)){if(this.flags&p.SCRIPT_VERIFY_DISCOURAGE_UPGRADABLE_NOPS)return this.errstr="SCRIPT_ERR_DISCOURAGE_UPGRADABLE_NOPS",!1;break}if(this.stack.length<1)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;var H=a.fromScriptNumBuffer(this.stack[this.stack.length-1],N,5);if(H.lt(new a(0)))return this.errstr="SCRIPT_ERR_NEGATIVE_LOCKTIME",!1;if(!this.checkLockTime(H))return this.errstr="SCRIPT_ERR_UNSATISFIED_LOCKTIME",!1;break;case o.OP_NOP3:case o.OP_CHECKSEQUENCEVERIFY:if(!(this.flags&p.SCRIPT_VERIFY_CHECKSEQUENCEVERIFY)){if(this.flags&p.SCRIPT_VERIFY_DISCOURAGE_UPGRADABLE_NOPS)return this.errstr="SCRIPT_ERR_DISCOURAGE_UPGRADABLE_NOPS",!1;break}if(this.stack.length<1)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;var C=a.fromScriptNumBuffer(stacktop(-1),N,5);if(C.lt(new a(0)))return this.errstr="SCRIPT_ERR_NEGATIVE_LOCKTIME",!1;if(C&p.SEQUENCE_LOCKTIME_DISABLE_FLAG)break;if(!this.checkSequence(C))return this.errstr="SCRIPT_ERR_UNSATISFIED_LOCKTIME",!1;break;case o.OP_NOP1:case o.OP_NOP4:case o.OP_NOP5:case o.OP_NOP6:case o.OP_NOP7:case o.OP_NOP8:case o.OP_NOP9:case o.OP_NOP10:if(this.flags&p.SCRIPT_VERIFY_DISCOURAGE_UPGRADABLE_NOPS)return this.errstr="SCRIPT_ERR_DISCOURAGE_UPGRADABLE_NOPS",!1;break;case o.OP_IF:case o.OP_NOTIF:if(E=!1,T){if(this.stack.length<1)return this.errstr="SCRIPT_ERR_UNBALANCED_CONDITIONAL",!1;if(e=stacktop(-1),this.flags&p.SCRIPT_VERIFY_MINIMALIF){if(e.length>1)return this.errstr="SCRIPT_ERR_MINIMALIF",!1;if(1==e.length&&1!=e[0])return this.errstr="SCRIPT_ERR_MINIMALIF",!1}E=p.castToBool(e),K===o.OP_NOTIF&&(E=!E),this.stack.pop()}this.vfExec.push(E);break;case o.OP_ELSE:if(0===this.vfExec.length)return this.errstr="SCRIPT_ERR_UNBALANCED_CONDITIONAL",!1;this.vfExec[this.vfExec.length-1]=!this.vfExec[this.vfExec.length-1];break;case o.OP_ENDIF:if(0===this.vfExec.length)return this.errstr="SCRIPT_ERR_UNBALANCED_CONDITIONAL",!1;this.vfExec.pop();break;case o.OP_VERIFY:if(this.stack.length<1)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;if(e=stacktop(-1),!(E=p.castToBool(e)))return this.errstr="SCRIPT_ERR_VERIFY",!1;this.stack.pop();break;case o.OP_RETURN:return this.errstr="SCRIPT_ERR_OP_RETURN",!1;case o.OP_TOALTSTACK:if(this.stack.length<1)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;this.altstack.push(this.stack.pop());break;case o.OP_FROMALTSTACK:if(this.altstack.length<1)return this.errstr="SCRIPT_ERR_INVALID_ALTSTACK_OPERATION",!1;this.stack.push(this.altstack.pop());break;case o.OP_2DROP:if(this.stack.length<2)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;this.stack.pop(),this.stack.pop();break;case o.OP_2DUP:if(this.stack.length<2)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;r=stacktop(-2),l=stacktop(-1),this.stack.push(r),this.stack.push(l);break;case o.OP_3DUP:if(this.stack.length<3)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;r=stacktop(-3),l=stacktop(-2);var D=stacktop(-1);this.stack.push(r),this.stack.push(l),this.stack.push(D);break;case o.OP_2OVER:if(this.stack.length<4)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;r=stacktop(-4),l=stacktop(-3),this.stack.push(r),this.stack.push(l);break;case o.OP_2ROT:if(this.stack.length<6)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;m=this.stack.splice(this.stack.length-6,2),this.stack.push(m[0]),this.stack.push(m[1]);break;case o.OP_2SWAP:if(this.stack.length<4)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;m=this.stack.splice(this.stack.length-4,2),this.stack.push(m[0]),this.stack.push(m[1]);break;case o.OP_IFDUP:if(this.stack.length<1)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;e=stacktop(-1),(E=p.castToBool(e))&&this.stack.push(e);break;case o.OP_DEPTH:e=new a(this.stack.length).toScriptNumBuffer(),this.stack.push(e);break;case o.OP_DROP:if(this.stack.length<1)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;this.stack.pop();break;case o.OP_DUP:if(this.stack.length<1)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;this.stack.push(stacktop(-1));break;case o.OP_NIP:if(this.stack.length<2)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;this.stack.splice(this.stack.length-2,1);break;case o.OP_OVER:if(this.stack.length<2)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;this.stack.push(stacktop(-2));break;case o.OP_PICK:case o.OP_ROLL:if(this.stack.length<2)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;if(e=stacktop(-1),b=(v=a.fromScriptNumBuffer(e,N)).toNumber(),this.stack.pop(),b<0||b>=this.stack.length)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;e=stacktop(-b-1),K===o.OP_ROLL&&this.stack.splice(this.stack.length-b-1,1),this.stack.push(e);break;case o.OP_ROT:if(this.stack.length<3)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;g=stacktop(-3),y=stacktop(-2);var F=stacktop(-1);this.stack[this.stack.length-3]=y,this.stack[this.stack.length-2]=F,this.stack[this.stack.length-1]=g;break;case o.OP_SWAP:if(this.stack.length<2)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;g=stacktop(-2),y=stacktop(-1),this.stack[this.stack.length-2]=y,this.stack[this.stack.length-1]=g;break;case o.OP_TUCK:if(this.stack.length<2)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;this.stack.splice(this.stack.length-2,0,stacktop(-1));break;case o.OP_SIZE:if(this.stack.length<1)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;v=new a(stacktop(-1).length),this.stack.push(v.toScriptNumBuffer());break;case o.OP_AND:case o.OP_OR:case o.OP_XOR:if(this.stack.length<2)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;if(r=stacktop(-2),l=stacktop(-1),r.length!==l.length)return this.errstr="SCRIPT_ERR_INVALID_OPERAND_SIZE",!1;switch(K){case o.OP_AND:for(var U=0;U<r.length;U++)r[U]&=l[U];break;case o.OP_OR:for(U=0;U<r.length;U++)r[U]|=l[U];break;case o.OP_XOR:for(U=0;U<r.length;U++)r[U]^=l[U]}this.stack.pop();break;case o.OP_EQUAL:case o.OP_EQUALVERIFY:if(this.stack.length<2)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;r=stacktop(-2),l=stacktop(-1);var L=r.toString("hex")===l.toString("hex");if(this.stack.pop(),this.stack.pop(),this.stack.push(L?p.true:p.false),K===o.OP_EQUALVERIFY){if(!L)return this.errstr="SCRIPT_ERR_EQUALVERIFY",!1;this.stack.pop()}break;case o.OP_1ADD:case o.OP_1SUB:case o.OP_NEGATE:case o.OP_ABS:case o.OP_NOT:case o.OP_0NOTEQUAL:if(this.stack.length<1)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;switch(e=stacktop(-1),v=a.fromScriptNumBuffer(e,N),K){case o.OP_1ADD:v=v.add(a.One);break;case o.OP_1SUB:v=v.sub(a.One);break;case o.OP_NEGATE:v=v.neg();break;case o.OP_ABS:v.cmp(a.Zero)<0&&(v=v.neg());break;case o.OP_NOT:v=new a((0===v.cmp(a.Zero))+0);break;case o.OP_0NOTEQUAL:v=new a((0!==v.cmp(a.Zero))+0)}this.stack.pop(),this.stack.push(v.toScriptNumBuffer());break;case o.OP_ADD:case o.OP_SUB:case o.OP_MOD:case o.OP_DIV:case o.OP_BOOLAND:case o.OP_BOOLOR:case o.OP_NUMEQUAL:case o.OP_NUMEQUALVERIFY:case o.OP_NUMNOTEQUAL:case o.OP_LESSTHAN:case o.OP_GREATERTHAN:case o.OP_LESSTHANOREQUAL:case o.OP_GREATERTHANOREQUAL:case o.OP_MIN:case o.OP_MAX:if(this.stack.length<2)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;switch(w=a.fromScriptNumBuffer(stacktop(-2),N),_=a.fromScriptNumBuffer(stacktop(-1),N),v=new a(0),K){case o.OP_ADD:v=w.add(_);break;case o.OP_SUB:v=w.sub(_);break;case o.OP_DIV:if(0==_)return this.errstr="SCRIPT_ERR_DIV_BY_ZERO",!1;v=w.div(_);break;case o.OP_MOD:if(0==_)return this.errstr="SCRIPT_ERR_DIV_BY_ZERO",!1;v=w.mod(_);break;case o.OP_BOOLAND:v=new a((0!==w.cmp(a.Zero)&&0!==_.cmp(a.Zero))+0);break;case o.OP_BOOLOR:v=new a((0!==w.cmp(a.Zero)||0!==_.cmp(a.Zero))+0);break;case o.OP_NUMEQUAL:case o.OP_NUMEQUALVERIFY:v=new a((0===w.cmp(_))+0);break;case o.OP_NUMNOTEQUAL:v=new a((0!==w.cmp(_))+0);break;case o.OP_LESSTHAN:v=new a((w.cmp(_)<0)+0);break;case o.OP_GREATERTHAN:v=new a((w.cmp(_)>0)+0);break;case o.OP_LESSTHANOREQUAL:v=new a((w.cmp(_)<=0)+0);break;case o.OP_GREATERTHANOREQUAL:v=new a((w.cmp(_)>=0)+0);break;case o.OP_MIN:v=w.cmp(_)<0?w:_;break;case o.OP_MAX:v=w.cmp(_)>0?w:_}if(this.stack.pop(),this.stack.pop(),this.stack.push(v.toScriptNumBuffer()),K===o.OP_NUMEQUALVERIFY){if(!p.castToBool(stacktop(-1)))return this.errstr="SCRIPT_ERR_NUMEQUALVERIFY",!1;this.stack.pop()}break;case o.OP_WITHIN:if(this.stack.length<3)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;w=a.fromScriptNumBuffer(stacktop(-3),N),_=a.fromScriptNumBuffer(stacktop(-2),N);var z=a.fromScriptNumBuffer(stacktop(-1),N);E=_.cmp(w)<=0&&w.cmp(z)<0,this.stack.pop(),this.stack.pop(),this.stack.pop(),this.stack.push(E?p.true:p.false);break;case o.OP_RIPEMD160:case o.OP_SHA1:case o.OP_SHA256:case o.OP_HASH160:case o.OP_HASH256:if(this.stack.length<1)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;var j;e=stacktop(-1),K===o.OP_RIPEMD160?j=u.ripemd160(e):K===o.OP_SHA1?j=u.sha1(e):K===o.OP_SHA256?j=u.sha256(e):K===o.OP_HASH160?j=u.sha256ripemd160(e):K===o.OP_HASH256&&(j=u.sha256sha256(e)),this.stack.pop(),this.stack.push(j);break;case o.OP_CODESEPARATOR:this.pbegincodehash=this.pc;break;case o.OP_CHECKSIG:case o.OP_CHECKSIGVERIFY:if(this.stack.length<2)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;if(P=stacktop(-2),I=stacktop(-1),!this.checkTxSignatureEncoding(P)||!this.checkPubkeyEncoding(I))return!1;B=(new s).set({chunks:this.script.chunks.slice(this.pbegincodehash)});var q=(new s).add(P);B.findAndDelete(q);try{k=h.fromTxFormat(P),A=f.fromBuffer(I,!1),O=k.isSchnorr?this.tx.verifySignature(k,A,this.nin,B,this.satoshisBN,this.flags,"schnorr"):this.tx.verifySignature(k,A,this.nin,B,this.satoshisBN,this.flags)}catch(t){O=!1}if(!O&&this.flags&p.SCRIPT_VERIFY_NULLFAIL&&P.length)return this.errstr="SCRIPT_ERR_NULLFAIL",!1;if(this.stack.pop(),this.stack.pop(),this.stack.push(O?p.true:p.false),K===o.OP_CHECKSIGVERIFY){if(!O)return this.errstr="SCRIPT_ERR_CHECKSIGVERIFY",!1;this.stack.pop()}break;case o.OP_CHECKDATASIG:case o.OP_CHECKDATASIGVERIFY:if(this.stack.length<3)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;if(P=stacktop(-3),M=stacktop(-2),I=stacktop(-1),!this.checkDataSignatureEncoding(P)||!this.checkPubkeyEncoding(I))return!1;O=!1;try{k=h.fromDataFormat(P),A=f.fromBuffer(I,!1),j=u.sha256(M),O=k.isSchnorr?d.verify(j,k,A,"big"):c.verify(j,k,A,"big")}catch(t){O=!1}if(!O&&this.flags&p.SCRIPT_VERIFY_NULLFAIL&&P.length)return this.errstr="SCRIPT_ERR_NULLFAIL",!1;if(this.stack.pop(),this.stack.pop(),this.stack.pop(),this.stack.push(O?p.true:p.false),K===o.OP_CHECKDATASIGVERIFY){if(!O)return this.errstr="SCRIPT_ERR_CHECKDATASIGVERIFY",!1;this.stack.pop()}break;case o.OP_REVERSEBYTES:if(this.stack.length<1)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;r=stacktop(-1);var V=i.from(r).reverse();this.stack.pop(),this.stack.push(V);break;case o.OP_CHECKMULTISIG:case o.OP_CHECKMULTISIGVERIFY:{let t=(U=1)+1;if(this.stack.length<U)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;var G=a.fromScriptNumBuffer(stacktop(-U),N).toNumber(),Y=t+G;if(G<0||G>20)return this.errstr="SCRIPT_ERR_PUBKEY_COUNT",!1;if(this.nOpCount+=G,this.nOpCount>201)return this.errstr="SCRIPT_ERR_OP_COUNT",!1;var Z=++U,W=Y+1;U+=G;var X=G+2;if(this.stack.length<U)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;var J=a.fromScriptNumBuffer(stacktop(-Y),N).toNumber(),Q=W+J;if(J<0||J>G)return this.errstr="SCRIPT_ERR_SIG_COUNT",!1;var $=++U;if(U+=J,this.stack.length<Q)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;if(B=(new s).set({chunks:this.script.chunks.slice(this.pbegincodehash)}),O=!0,this.flags&p.SCRIPT_ENABLE_SCHNORR_MULTISIG&&0!==stacktop(-Q).length){let e=function DecodeBitfield(t,e){if(e>32)return this.errstr="INVALID_BITFIELD_SIZE",{result:!1};let r=Math.floor((e+7)/8);if(t.length!==r)return this.errstr="INVALID_BITFIELD_SIZE",{result:!1};let i=0,n=Uint32Array.from(t);for(let t=0;t<r;t++)i|=n[t]<<8*t;return(i&(1<<e)-1)!=i?(this.errstr="INVALID_BIT_RANGE",{result:!1}):{result:!0,bitfield:i}}(stacktop(-Q),G);e.result||(O=!1);let r=new Uint8Array([J]),i=Uint32Array.from(r);(function countBits(t){return 16843009*((t=(858993459&(t-=t>>1&1431655765))+(t>>2&858993459))+(t>>4)&252645135)>>24})(e.bitfield)!==i[0]&&(this.errstr="INVALID_BIT_COUNT",O=!1);var tt=t+G-1,et=W+J-1;let n=0;for(let t=0;t<J;t++,n++){for(e.bitfield>>n||(this.errstr="INVALID_BIT_RANGE",O=!1);!(e.bitfield>>n&1);){if(n>=G){this.errstr="wrong",O=!1;break}n++}n>=G&&(this.errstr="PUBKEY_COUNT",O=!1);let r=stacktop(-et+t),i=stacktop(-tt+n);this.checkRawSignatureEncoding(r)&&this.checkPubkeyEncoding(i)||(O=!1);let s=h.fromTxFormat(r),o=f.fromBuffer(i,!1);this.tx.verifySignature(s,o,this.nin,B,this.satoshisBN,this.flags,"schnorr")||(this.errstr="SIG_NULLFAIL",O=!1)}e.bitfield>>n&&(this.errstr="INVALID_BIT_COUNT",O=!1)}else{for(var rt=0;rt<J;rt++)P=stacktop(-$-rt),B.findAndDelete((new s).add(P));for(;O&&J>0;){if(P=stacktop(-$),I=stacktop(-Z),!this.checkTxSignatureEncoding(P)||!this.checkPubkeyEncoding(I))return!1;var it;try{k=h.fromTxFormat(P),A=f.fromBuffer(I,!1),it=this.tx.verifySignature(k,A,this.nin,B,this.satoshisBN,this.flags)}catch(t){it=!1}it&&($++,J--),Z++,J>--G&&(O=!1)}}for(;U-- >1;){if(!O&&this.flags&p.SCRIPT_VERIFY_NULLFAIL&&!X&&stacktop(-1).length)return this.errstr="SCRIPT_ERR_NULLFAIL",!1;X>0&&X--,this.stack.pop()}if(this.stack.length<1)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;if(this.flags&p.SCRIPT_VERIFY_NULLDUMMY&&stacktop(-1).length)return this.errstr="SCRIPT_ERR_SIG_NULLDUMMY",!1;if(this.stack.pop(),this.stack.push(O?p.true:p.false),K===o.OP_CHECKMULTISIGVERIFY){if(!O)return this.errstr="SCRIPT_ERR_CHECKMULTISIGVERIFY",!1;this.stack.pop()}}break;case o.OP_CAT:if(this.stack.length<2)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;if(r=stacktop(-2),l=stacktop(-1),r.length+l.length>p.MAX_SCRIPT_ELEMENT_SIZE)return this.errstr="SCRIPT_ERR_PUSH_SIZE",!1;this.stack[this.stack.length-2]=i.concat([r,l]),this.stack.pop();break;case o.OP_SPLIT:if(this.stack.length<2)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;r=stacktop(-2);var nt=a.fromScriptNumBuffer(stacktop(-1),N).toNumber();if(nt<0||nt>r.length)return this.errstr="SCRIPT_ERR_INVALID_SPLIT_RANGE",!1;var st=i.from(r);this.stack[this.stack.length-2]=st.slice(0,nt),this.stack[this.stack.length-1]=st.slice(nt);break;case o.OP_NUM2BIN:if(this.stack.length<2)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;var ot=a.fromScriptNumBuffer(stacktop(-1),N).toNumber();if(ot>p.MAX_SCRIPT_ELEMENT_SIZE)return this.errstr="SCRIPT_ERR_PUSH_SIZE",!1;this.stack.pop();var at=stacktop(-1);if((at=p._minimallyEncode(at)).length>ot)return this.errstr="SCRIPT_ERR_IMPOSSIBLE_ENCODING",!1;if(at.length==ot){this.stack[this.stack.length-1]=at;break}var ut=0;at.length>0&&(ut=128&at[at.length-1],at[at.length-1]&=127);var ht=i.alloc(ot);at.copy(ht,0);for(var ft=at.length-1;ft++<ot-2;)ht[ft]=0;ht[ft]=ut,this.stack[this.stack.length-1]=ht;break;case o.OP_BIN2NUM:if(this.stack.length<1)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;if(r=stacktop(-1),l=p._minimallyEncode(r),this.stack[this.stack.length-1]=l,!p._isMinimallyEncoded(l))return this.errstr="SCRIPT_ERR_INVALID_NUMBER_RANGE",!1;break;default:return this.errstr="SCRIPT_ERR_BAD_OPCODE",!1}return!0}},762538:(t,e,r)=>{var i=r(901048).Buffer,n=r(61365),s=r(821722),o=r(111978),a=r(905079),u=r(938387),h=r(536061),f=r(918677),c=r(628658),d=r(198641),p=r(645250),l=r(669277),m=(r(901048),r(201146)),b=r(359983),g=function Script(t){return this instanceof Script?(this.chunks=[],m.isBuffer(t)?Script.fromBuffer(t):t instanceof n?Script.fromAddress(t):t instanceof Script?Script.fromBuffer(t.toBuffer()):p.isString(t)?Script.fromString(t):void(p.isObject(t)&&p.isArray(t.chunks)&&this.set(t))):new Script(t)};g.prototype.set=function(t){return d.checkArgument(p.isObject(t)),d.checkArgument(p.isArray(t.chunks)),this.chunks=t.chunks,this},g.fromBuffer=function(t){var e=new g;e.chunks=[];for(var r=new s(t);!r.finished();)try{var i,n,o=r.readUInt8();o>0&&o<u.OP_PUSHDATA1?(i=o,e.chunks.push({buf:r.read(i),len:i,opcodenum:o})):o===u.OP_PUSHDATA1?(i=r.readUInt8(),n=r.read(i),e.chunks.push({buf:n,len:i,opcodenum:o})):o===u.OP_PUSHDATA2?(i=r.readUInt16LE(),n=r.read(i),e.chunks.push({buf:n,len:i,opcodenum:o})):o===u.OP_PUSHDATA4?(i=r.readUInt32LE(),n=r.read(i),e.chunks.push({buf:n,len:i,opcodenum:o})):e.chunks.push({opcodenum:o})}catch(e){if(e instanceof RangeError)throw new l.Script.InvalidBuffer(t.toString("hex"));throw e}return e},g.prototype.toBuffer=function(){for(var t=new o,e=0;e<this.chunks.length;e++){var r=this.chunks[e],i=r.opcodenum;t.writeUInt8(r.opcodenum),r.buf&&(i<u.OP_PUSHDATA1?t.write(r.buf):i===u.OP_PUSHDATA1?(t.writeUInt8(r.len),t.write(r.buf)):i===u.OP_PUSHDATA2?(t.writeUInt16LE(r.len),t.write(r.buf)):i===u.OP_PUSHDATA4&&(t.writeUInt32LE(r.len),t.write(r.buf)))}return t.concat()},g.fromASM=function(t){var e=new g;e.chunks=[];for(var r=t.split(" "),n=0;n<r.length;){var s=r[n],o=u(s).toNumber();if(p.isUndefined(o)){var a=i.from(r[n],"hex"),h=a.length;h>=0&&h<u.OP_PUSHDATA1?o=h:h<Math.pow(2,8)?o=u.OP_PUSHDATA1:h<Math.pow(2,16)?o=u.OP_PUSHDATA2:h<Math.pow(2,32)&&(o=u.OP_PUSHDATA4),e.chunks.push({buf:a,len:a.length,opcodenum:o}),n+=1}else e.chunks.push({opcodenum:o}),n+=1}return e},g.fromHex=function(t){return new g(i.from(t,"hex"))},g.fromString=function(t){if(b.isHexa(t)||0===t.length)return new g(i.from(t,"hex"));var e=new g;e.chunks=[];for(var r=t.split(" "),n=0;n<r.length;){var s=r[n],o=u(s).toNumber();if(p.isUndefined(o)){if(!((o=parseInt(s))>0&&o<u.OP_PUSHDATA1))throw new Error("Invalid script: "+JSON.stringify(t));e.chunks.push({buf:i.from(r[n+1].slice(2),"hex"),len:o,opcodenum:o}),n+=2}else if(o===u.OP_PUSHDATA1||o===u.OP_PUSHDATA2||o===u.OP_PUSHDATA4){if("0x"!==r[n+2].slice(0,2))throw new Error("Pushdata data must start with 0x");e.chunks.push({buf:i.from(r[n+2].slice(2),"hex"),len:parseInt(r[n+1]),opcodenum:o}),n+=3}else e.chunks.push({opcodenum:o}),n+=1}return e},g.prototype._chunkToString=function(t,e){var r=t.opcodenum,i="asm"===e,n="";if(t.buf)i||r!==u.OP_PUSHDATA1&&r!==u.OP_PUSHDATA2&&r!==u.OP_PUSHDATA4||(n=n+" "+u(r).toString()),t.len>0&&(n=i?n+" "+t.buf.toString("hex"):n+" "+t.len+" 0x"+t.buf.toString("hex"));else if(void 0!==u.reverseMap[r])i?0===r?n+=" 0":79===r?n+=" -1":n=n+" "+u(r).toString():n=n+" "+u(r).toString();else{var s=r.toString(16);s.length%2!=0&&(s="0"+s),n=i?n+" "+s:n+" 0x"+s}return n},g.prototype.toASM=function(){for(var t="",e=0;e<this.chunks.length;e++){var r=this.chunks[e];t+=this._chunkToString(r,"asm")}return t.substr(1)},g.prototype.toString=function(){for(var t="",e=0;e<this.chunks.length;e++){var r=this.chunks[e];t+=this._chunkToString(r)}return t.substr(1)},g.prototype.toHex=function(){return this.toBuffer().toString("hex")},g.prototype.inspect=function(){return"<Script: "+this.toString()+">"},g.prototype.isPublicKeyHashOut=function(){return!(5!==this.chunks.length||this.chunks[0].opcodenum!==u.OP_DUP||this.chunks[1].opcodenum!==u.OP_HASH160||!this.chunks[2].buf||20!==this.chunks[2].buf.length||this.chunks[3].opcodenum!==u.OP_EQUALVERIFY||this.chunks[4].opcodenum!==u.OP_CHECKSIG)},g.prototype.isPublicKeyHashIn=function(){if(2===this.chunks.length){var t=this.chunks[0].buf,e=this.chunks[1].buf;if(t&&t.length&&e&&e.length){var r=e[0];if((4===r||6===r||7===r)&&65===e.length)return!0;if((3===r||2===r)&&33===e.length)return!0}}return!1},g.prototype.getPublicKey=function(){return d.checkState(this.isPublicKeyOut(),"Can't retrieve PublicKey from a non-PK output"),this.chunks[0].buf},g.prototype.getPublicKeyHash=function(){return d.checkState(this.isPublicKeyHashOut(),"Can't retrieve PublicKeyHash from a non-PKH output"),this.chunks[2].buf},g.prototype.isPublicKeyOut=function(){return!(2!==this.chunks.length||!this.chunks[0].buf||32!==this.chunks[0].buf.length||this.chunks[1].opcodenum!==u.OP_CHECKSIG)},g.prototype.isPublicKeyIn=function(){if(1===this.chunks.length){var t=this.chunks[0].buf;if(t&&t.length&&48===t[0])return!0}return!1},g.prototype.isScriptHashOut=function(){var t=this.toBuffer();return 23===t.length&&t[0]===u.OP_HASH160&&20===t[1]&&t[t.length-1]===u.OP_EQUAL},g.prototype.isScriptHashIn=function(){if(this.chunks.length<=1)return!1;var t,e=this.chunks[this.chunks.length-1].buf;if(!e)return!1;try{t=g.fromBuffer(e)}catch(t){if(t instanceof l.Script.InvalidBuffer)return!1;throw t}return t.classify()!==g.types.UNKNOWN},g.prototype.isMultisigOut=function(){return this.chunks.length>3&&u.isSmallIntOp(this.chunks[0].opcodenum)&&this.chunks.slice(1,this.chunks.length-2).every((function(t){return t.buf&&m.isBuffer(t.buf)}))&&u.isSmallIntOp(this.chunks[this.chunks.length-2].opcodenum)&&this.chunks[this.chunks.length-1].opcodenum===u.OP_CHECKMULTISIG},g.prototype.isMultisigIn=function(){return this.chunks.length>=2&&0===this.chunks[0].opcodenum&&this.chunks.slice(1,this.chunks.length).every((function(t){return t.buf&&m.isBuffer(t.buf)&&f.isTxDER(t.buf)}))},g.prototype.isDataOut=function(){if(!(this.chunks.length>=1&&this.chunks[0].opcodenum===u.OP_RETURN&&this.toBuffer().length<=223))return!1;var t=this.chunks.slice(1);return new g({chunks:t}).isPushOnly()},g.prototype.getData=function(){if(this.isDataOut()||this.isScriptHashOut())return p.isUndefined(this.chunks[1])?i.alloc(0):i.from(this.chunks[1].buf);if(this.isPublicKeyHashOut())return i.from(this.chunks[2].buf);throw new Error("Unrecognized script type to get data from")},g.prototype.isPushOnly=function(){return p.every(this.chunks,(function(t){return t.opcodenum<=u.OP_16||t.opcodenum===u.OP_PUSHDATA1||t.opcodenum===u.OP_PUSHDATA2||t.opcodenum===u.OP_PUSHDATA4}))},(g.types={}).UNKNOWN="Unknown",g.types.PUBKEY_OUT="Pay to public key",g.types.PUBKEY_IN="Spend from public key",g.types.PUBKEYHASH_OUT="Pay to public key hash",g.types.PUBKEYHASH_IN="Spend from public key hash",g.types.SCRIPTHASH_OUT="Pay to script hash",g.types.SCRIPTHASH_IN="Spend from script hash",g.types.MULTISIG_OUT="Pay to multisig",g.types.MULTISIG_IN="Spend from multisig",g.types.DATA_OUT="Data push",g.OP_RETURN_STANDARD_SIZE=220,g.prototype.classify=function(){if(this._isInput)return this.classifyInput();if(this._isOutput)return this.classifyOutput();var t=this.classifyOutput();return t!=g.types.UNKNOWN?t:this.classifyInput()},(g.outputIdentifiers={}).PUBKEY_OUT=g.prototype.isPublicKeyOut,g.outputIdentifiers.PUBKEYHASH_OUT=g.prototype.isPublicKeyHashOut,g.outputIdentifiers.MULTISIG_OUT=g.prototype.isMultisigOut,g.outputIdentifiers.SCRIPTHASH_OUT=g.prototype.isScriptHashOut,g.outputIdentifiers.DATA_OUT=g.prototype.isDataOut,g.prototype.classifyOutput=function(){for(var t in g.outputIdentifiers)if(g.outputIdentifiers[t].bind(this)())return g.types[t];return g.types.UNKNOWN},(g.inputIdentifiers={}).PUBKEY_IN=g.prototype.isPublicKeyIn,g.inputIdentifiers.PUBKEYHASH_IN=g.prototype.isPublicKeyHashIn,g.inputIdentifiers.MULTISIG_IN=g.prototype.isMultisigIn,g.inputIdentifiers.SCRIPTHASH_IN=g.prototype.isScriptHashIn,g.prototype.classifyInput=function(){for(var t in g.inputIdentifiers)if(g.inputIdentifiers[t].bind(this)())return g.types[t];return g.types.UNKNOWN},g.prototype.isStandard=function(){return this.classify()!==g.types.UNKNOWN},g.prototype.prepend=function(t){return this._addByType(t,!0),this},g.prototype.equals=function(t){if(d.checkState(t instanceof g,"Must provide another script"),this.chunks.length!==t.chunks.length)return!1;var e;for(e=0;e<this.chunks.length;e++){if(m.isBuffer(this.chunks[e].buf)&&!m.isBuffer(t.chunks[e].buf))return!1;if(m.isBuffer(this.chunks[e].buf)&&!m.equals(this.chunks[e].buf,t.chunks[e].buf))return!1;if(this.chunks[e].opcodenum!==t.chunks[e].opcodenum)return!1}return!0},g.prototype.add=function(t){return this._addByType(t,!1),this},g.prototype._addByType=function(t,e){if("string"==typeof t)this._addOpcode(t,e);else if("number"==typeof t)this._addOpcode(t,e);else if(t instanceof u)this._addOpcode(t,e);else if(m.isBuffer(t))this._addBuffer(t,e);else if(t instanceof g)this.chunks=this.chunks.concat(t.chunks);else{if("object"!=typeof t)throw new Error("Invalid script chunk");this._insertAtPosition(t,e)}},g.prototype._insertAtPosition=function(t,e){e?this.chunks.unshift(t):this.chunks.push(t)},g.prototype._addOpcode=function(t,e){var r;return r="number"==typeof t?t:t instanceof u?t.toNumber():u(t).toNumber(),this._insertAtPosition({opcodenum:r},e),this},g.prototype._addBuffer=function(t,e){var r,i=t.length;if(i>=0&&i<u.OP_PUSHDATA1)r=i;else if(i<Math.pow(2,8))r=u.OP_PUSHDATA1;else if(i<Math.pow(2,16))r=u.OP_PUSHDATA2;else{if(!(i<Math.pow(2,32)))throw new Error("You can't push that much data");r=u.OP_PUSHDATA4}return this._insertAtPosition({buf:t,len:i,opcodenum:r},e),this},g.prototype.removeCodeseparators=function(){for(var t=[],e=0;e<this.chunks.length;e++)this.chunks[e].opcodenum!==u.OP_CODESEPARATOR&&t.push(this.chunks[e]);return this.chunks=t,this},g.buildMultisigOut=function(t,e,r){d.checkArgument(e<=t.length,"Number of required signatures must be less than or equal to the number of public keys"),r=r||{};var i=new g;i.add(u.smallInt(e));var n=t=p.map(t,h);r.noSorting||(n=p.sortBy(t,(function(t){return t.toString("hex")})));for(var s=0;s<n.length;s++){var o=n[s];i.add(o.toBuffer())}return i.add(u.smallInt(t.length)),i.add(u.OP_CHECKMULTISIG),i},g.buildMultisigIn=function(t,e,r,n){d.checkArgument(p.isArray(t)),d.checkArgument(p.isNumber(e)),d.checkArgument(p.isArray(r)),n=n||{};var s=new g;if("schnorr"===n.signingMethod&&n.checkBits){let e=i.from(n.checkBits).reverse().join(""),r=parseInt(e,2),o=parseInt(r.toString(16),16),a=t.length;a>=1&&a<=4?s.add(u(o)):a>=5&&a<=8?129===o?s.add(u("OP_1NEGATE")):o>16?(s.add(1),s.add(o)):s.add(u(o)):a>=9&&a<=16?(s.add(2),s.add(o)):a>=17&&a<=20&&(s.add(3),s.add(o))}else s.add(u.OP_0);return p.each(r,(function(t){d.checkArgument(m.isBuffer(t),"Signatures must be an array of Buffers"),s.add(t)})),s},g.buildP2SHMultisigIn=function(t,e,r,n){d.checkArgument(p.isArray(t)),d.checkArgument(p.isNumber(e)),d.checkArgument(p.isArray(r)),n=n||{};var s=new g;if("schnorr"===n.signingMethod&&n.checkBits){let e=i.from(n.checkBits).reverse().join(""),r=parseInt(e,2),o=parseInt(r.toString(16),16),a=t.length;a>=1&&a<=4?s.add(u.smallInt(r)):a>=5&&a<=8?129===o?s.add(u("OP_1NEGATE")):o>16?(s.add(1),s.add(o)):s.add(u.smallInt(r)):a>=9&&a<=16?(s.add(2),s.add(o)):a>=17&&a<=20&&(s.add(3),s.add(o))}else s.add(u.OP_0);return p.each(r,(function(t){d.checkArgument(m.isBuffer(t),"Signatures must be an array of Buffers"),s.add(t)})),s.add((n.cachedMultisig||g.buildMultisigOut(t,e,n)).toBuffer()),s},g.buildPublicKeyHashOut=function(t){d.checkArgument(!p.isUndefined(t)),d.checkArgument(t instanceof h||t instanceof n||p.isString(t)),t instanceof h?t=t.toAddress():p.isString(t)&&(t=new n(t));let e=u.OP_CHECKSIG;33==t.hashBuffer.length&&(e=u.OP_CODESEPARATOR);var r=new g;return r.add(t.hashBuffer).add(e),r._network=t.network,r},g.buildPublicKeyOut=function(t){d.checkArgument(t instanceof h);var e=new g;return e.add(t.toBuffer()).add(u.OP_CHECKSIG),e},g.buildDataOut=function(t,e){d.checkArgument(p.isUndefined(t)||p.isString(t)||m.isBuffer(t)),p.isString(t)&&(t=i.from(t,e));var r=new g;return r.add(u.OP_RETURN),p.isUndefined(t)||r.add(t),r},g.buildScriptHashOut=function(t){d.checkArgument(t instanceof g||t instanceof n&&t.isPayToScriptHash());var e=new g;return e.add(u.OP_BLAKE2B).add(t instanceof n?t.hashBuffer:a.sha256ripemd160(t.toBuffer())).add(u.OP_EQUAL),e._network=t._network||t.network,e},g.buildPublicKeyIn=function(t,e){return d.checkArgument(t instanceof f||m.isBuffer(t)),d.checkArgument(p.isUndefined(e)||p.isNumber(e)),t instanceof f&&(t=t.toBuffer()),(new g).add(m.concat([t,m.integerAsSingleByteBuffer(e||f.SIGHASH_ALL)]))},g.buildPublicKeyHashIn=function(t,e,r){return d.checkArgument(e instanceof f||m.isBuffer(e)),d.checkArgument(p.isUndefined(r)||p.isNumber(r)),e instanceof f&&(e=e.toBuffer()),(new g).add(m.concat([e,m.integerAsSingleByteBuffer(r||f.SIGHASH_ALL)])).add(new h(t).toBuffer().slice(1))},g.empty=function(){return new g},g.prototype.toScriptHashOut=function(){return g.buildScriptHashOut(this)},g.fromAddress=function(t){if((t=n(t)).isPayToScriptHash())return g.buildScriptHashOut(t);if(t.isPayToPublicKey())return g.buildPublicKeyHashOut(t);throw new l.Script.UnrecognizedAddress(t)},g.prototype.getAddressInfo=function(t){if(this._isInput)return this._getInputAddressInfo();if(this._isOutput)return this._getOutputAddressInfo();var e=this._getOutputAddressInfo();return e||this._getInputAddressInfo()},g.prototype._getOutputAddressInfo=function(){var t={};if(this.isScriptHashOut())t.hashBuffer=this.getData(),t.type=n.PayToScriptHash;else{if(!this.isPublicKeyHashOut())return!1;t.hashBuffer=this.getData(),t.type=n.PayToPublicKey}return t},g.prototype._getInputAddressInfo=function(){var t={};if(this.isPublicKeyHashIn())t.hashBuffer=a.sha256ripemd160(this.chunks[1].buf),t.type=n.PayToPublicKey;else{if(!this.isScriptHashIn())return!1;t.hashBuffer=a.sha256ripemd160(this.chunks[this.chunks.length-1].buf),t.type=n.PayToScriptHash}return t},g.prototype.toAddress=function(t){var e=this.getAddressInfo();return!!e&&(e.network=c.get(t)||this._network||c.defaultNetwork,new n(e))},g.prototype.findAndDelete=function(t){for(var e=t.toBuffer().toString("hex"),r=0;r<this.chunks.length;r++){e===g({chunks:[this.chunks[r]]}).toBuffer().toString("hex")&&this.chunks.splice(r,1)}return this},g.prototype.checkMinimalPush=function(t){var e=this.chunks[t],r=e.buf,i=e.opcodenum;return!r||(0===r.length?i===u.OP_0:!(1===r.length&&r[0]>=1&&r[0]<=16)&&((1!==r.length||129!==r[0])&&(r.length<=75?i===r.length:r.length<=255?i===u.OP_PUSHDATA1:!(r.length<=65535)||i===u.OP_PUSHDATA2)))},g.prototype._decodeOP_N=function(t){if(t===u.OP_0)return 0;if(t>=u.OP_1&&t<=u.OP_16)return t-(u.OP_1-1);throw new Error("Invalid opcode: "+JSON.stringify(t))},g.prototype.getSignatureOperationsCount=function(t){t=!!p.isUndefined(t)||t;var e=this,r=0,i=u.OP_INVALIDOPCODE;return p.each(e.chunks,(function getChunk(n){var s=n.opcodenum;s==u.OP_CHECKSIG||s==u.OP_CHECKSIGVERIFY?r++:s!=u.OP_CHECKMULTISIG&&s!=u.OP_CHECKMULTISIGVERIFY||(t&&i>=u.OP_1&&i<=u.OP_16?r+=e._decodeOP_N(i):r+=20),i=s})),r},t.exports=g},470234:(t,e,r)=>{t.exports=r(480094),t.exports.Input=r(803281),t.exports.Output=r(422489),t.exports.UnspentOutput=r(937530),t.exports.Signature=r(737212),t.exports.Sighash=r(361763)},803281:(t,e,r)=>{t.exports=r(850513),t.exports.PublicKey=r(598357),t.exports.PublicKeyHash=r(217009),t.exports.MultiSig=r(795827),t.exports.MultiSigScriptHash=r(822316)},850513:(t,e,r)=>{"use strict";var i=r(901048).Buffer,n=r(645250),s=r(198641),o=r(669277),a=r(47495),u=r(111978),h=(r(821722),r(901048),r(201146)),f=r(359983);const{LogBuffer:c}=f;var d=r(526785),p=r(361763),l=r(422489),m=(r(111744).logLevels,4294967295),b=m-2,g=m,y=m-1;const v=Math.pow(2,31),w=Math.pow(2,22),_=65535,P=Math.pow(2,16)-1;function Input(t){return this instanceof Input?t?this._fromObject(t):void 0:new Input(t)}Input.MAXINT=m,Input.DEFAULT_SEQNUMBER=g,Input.DEFAULT_LOCKTIME_SEQNUMBER=y,Input.DEFAULT_RBF_SEQNUMBER=b,Input.SEQUENCE_LOCKTIME_TYPE_FLAG=w,Object.defineProperty(Input.prototype,"script",{configurable:!1,enumerable:!0,get:function(){return this.isNull()?null:(this._script||(this._script=new d(this._scriptBuffer),this._script._isInput=!0),this._script)}}),Input.fromObject=function(t){return s.checkArgument(n.isObject(t)),(new Input)._fromObject(t)},Input.prototype.version=0,Input.prototype._fromObject=function(t){var e;if(e=n.isString(t.prevTxId)&&f.isHexa(t.prevTxId)?i.from(t.prevTxId,"hex"):t.prevTxId,this.output=t.output?t.output instanceof l?t.output:new l(t.output):void 0,this.prevTxId=e||t.txidbuf,this.outputIndex=n.isUndefined(t.outputIndex)?t.txoutnum:t.outputIndex,this.sequenceNumber=n.isUndefined(t.sequenceNumber)?n.isUndefined(t.seqnum)?g:t.seqnum:t.sequenceNumber,n.isUndefined(t.script)&&n.isUndefined(t.scriptBuffer))throw new o.Transaction.Input.MissingScript;return this.setScript(t.scriptBuffer||t.script),void 0!==t.version&&(this.version=t.version),this},Input.prototype.toObject=Input.prototype.toJSON=function toObject(){var t={prevTxId:this.prevTxId.toString("hex"),outputIndex:this.outputIndex,sequenceNumber:this.sequenceNumber,script:this._scriptBuffer.toString("hex"),version:this.version};return this.script&&(t.scriptString=this.script.toString()),this.output&&(t.output=this.output.toObject()),t},Input.fromBufferReader=function(t){var e=new Input;e.prevTxId=t.read(32),e.outputIndex=t.readUInt32LE();let r=t.readUInt64LEBN().toNumber();return r&&(r-=2,e.version=t.readUInt16LE()),e._scriptBuffer=t.read(r),e.sequenceNumber=t.readUInt64LEBN().toNumber(),e};const I=a.fromNumber(0),M=a.fromNumber(1),B={0:I.toBuffer({endian:"little",size:2}),1:M.toBuffer({endian:"little",size:2})};Input.prototype.toBufferWriter=function(t){if(t||(t=new u),t.write(this.prevTxId),t.writeUInt32LE(this.outputIndex),this._scriptBuffer.length){let e=i.concat([B[this.version],this._scriptBuffer]);t.writeUInt64LEBN(a.fromNumber(e.length)),t.write(e)}else t.writeUInt64LEBN(I);return t.writeUInt64LEBN(a.fromNumber(this.sequenceNumber)),t},Input.prototype.setScript=function(t){if(this._script=null,t instanceof d)this._script=t,this._script._isInput=!0,this._scriptBuffer=t.toBuffer();else if(null===t)this._script=d.empty(),this._script._isInput=!0,this._scriptBuffer=this._script.toBuffer();else if(f.isHexa(t))this._scriptBuffer=i.from(t,"hex");else if(n.isString(t))this._script=new d(t),this._script._isInput=!0,this._scriptBuffer=this._script.toBuffer();else{if(!h.isBuffer(t))throw new TypeError("Invalid argument type: script");this._scriptBuffer=i.from(t)}return this},Input.prototype.getSignatures=function(){throw new o.AbstractMethodInvoked("Trying to sign unsupported output type (only P2PKH and P2SH multisig inputs are supported) for input: "+JSON.stringify(this))},Input.prototype.isFullySigned=function(){throw new o.AbstractMethodInvoked("Input#isFullySigned")},Input.prototype.isFinal=function(){return 4294967295!==this.sequenceNumber},Input.prototype.addSignature=function(){throw new o.AbstractMethodInvoked("Input#addSignature")},Input.prototype.clearSignatures=function(){throw new o.AbstractMethodInvoked("Input#clearSignatures")},Input.prototype.isValidSignature=function(t,e,r){return e.signature.nhashtype=e.sigtype,p.verify(t,e.signature,e.publicKey,e.inputIndex,this.output.script,this.output.satoshisBN,void 0,r)},Input.prototype.isNull=function(){return"0000000000000000000000000000000000000000000000000000000000000000"===this.prevTxId.toString("hex")&&4294967295===this.outputIndex},Input.prototype._estimateSize=function(){return this.toBufferWriter().toBuffer().length},Input.prototype.lockForSeconds=function(t){if(s.checkArgument(n.isNumber(t)),t<0||t>=33553920)throw new o.Transaction.Input.LockTimeRange;return t=parseInt(Math.floor(t/512)),this.sequenceNumber=t|w,this},Input.prototype.lockUntilBlockHeight=function(t){if(s.checkArgument(n.isNumber(t)),t<0||t>=P)throw new o.Transaction.Input.BlockHeightOutOfRange;return this.sequenceNumber=t,this},Input.prototype.getLockTime=function(){return this.sequenceNumber&v?null:this.sequenceNumber&w?512*(this.sequenceNumber&_):this.sequenceNumber&_},t.exports=Input},795827:(t,e,r)=>{"use strict";var i=r(645250),n=r(807374),s=(r(480094),r(850513)),o=r(422489),a=r(198641),u=r(526785),h=r(918677),f=r(361763),c=(r(536061),r(201146)),d=r(737212);function MultiSigInput(t,e,r,n,o){o=o||{},s.apply(this,arguments);var h=this;e=e||t.publicKeys,r=r||t.threshold,n=n||t.signatures,o.noSorting?this.publicKeys=e:this.publicKeys=i.sortBy(e,(function(t){return t.toString("hex")})),a.checkState(u.buildMultisigOut(this.publicKeys,r).equals(this.output.script),"Provided public keys don't match to the provided output script"),this.publicKeyIndex={},i.each(this.publicKeys,(function(t,e){h.publicKeyIndex[t.toString()]=e})),this.threshold=r,this.signatures=n?this._deserializeSignatures(n):new Array(this.publicKeys.length)}n(MultiSigInput,s),MultiSigInput.prototype.toObject=function(){var t=s.prototype.toObject.apply(this,arguments);return t.threshold=this.threshold,t.publicKeys=i.map(this.publicKeys,(function(t){return t.toString()})),t.signatures=this._serializeSignatures(),t},MultiSigInput.prototype._deserializeSignatures=function(t){return i.map(t,(function(t){if(t)return new d(t)}))},MultiSigInput.prototype._serializeSignatures=function(){return i.map(this.signatures,(function(t){if(t)return t.toObject()}))},MultiSigInput.prototype.getSignatures=function(t,e,r,n,s,u){a.checkState(this.output instanceof o),n=n||h.SIGHASH_ALL|h.SIGHASH_FORKID;var c=this,p=[];return i.each(this.publicKeys,(function(i){i.toString()===e.publicKey.toString()&&p.push(new d({publicKey:e.publicKey,prevTxId:c.prevTxId,outputIndex:c.outputIndex,inputIndex:r,signature:f.sign(t,e,n,r,c.output.script,c.output.satoshisBN,void 0,u),sigtype:n}))})),p},MultiSigInput.prototype.addSignature=function(t,e,r){return a.checkState(!this.isFullySigned(),"All needed signatures have already been added"),a.checkArgument(!i.isUndefined(this.publicKeyIndex[e.publicKey.toString()]),"Signature has no matching public key"),a.checkState(this.isValidSignature(t,e,r)),this.signatures[this.publicKeyIndex[e.publicKey.toString()]]=e,this._updateScript(r),this},MultiSigInput.prototype._updateScript=function(t){return this.setScript(u.buildMultisigIn(this.publicKeys,this.threshold,this._createSignatures(t))),this},MultiSigInput.prototype._createSignatures=function(t){return i.map(i.filter(this.signatures,(function(t){return!i.isUndefined(t)})),(function(e){return c.concat([e.signature.toDER(t),c.integerAsSingleByteBuffer(e.sigtype)])}))},MultiSigInput.prototype.clearSignatures=function(){this.signatures=new Array(this.publicKeys.length),this._updateScript()},MultiSigInput.prototype.isFullySigned=function(){return this.countSignatures()===this.threshold},MultiSigInput.prototype.countMissingSignatures=function(){return this.threshold-this.countSignatures()},MultiSigInput.prototype.countSignatures=function(){return i.reduce(this.signatures,(function(t,e){return t+!!e}),0)},MultiSigInput.prototype.publicKeysWithoutSignature=function(){var t=this;return i.filter(this.publicKeys,(function(e){return!t.signatures[t.publicKeyIndex[e.toString()]]}))},MultiSigInput.prototype.isValidSignature=function(t,e,r){return e.signature.nhashtype=e.sigtype,f.verify(t,e.signature,e.publicKey,e.inputIndex,this.output.script,this.output.satoshisBN,void 0,r)},MultiSigInput.normalizeSignatures=function(t,e,r,i,n,s){return n.map((function(n){var o=null;return i=i.filter((function(i){if(o)return!0;var a=new d({signature:h.fromTxFormat(i),publicKey:n,prevTxId:e.prevTxId,outputIndex:e.outputIndex,inputIndex:r,sigtype:h.SIGHASH_ALL});return a.signature.nhashtype=a.sigtype,!f.verify(t,a.signature,a.publicKey,a.inputIndex,e.output.script,void 0,s)||(o=a,!1)})),o||null}))},MultiSigInput.OPCODES_SIZE=1,MultiSigInput.SIGNATURE_SIZE=73,MultiSigInput.prototype._estimateSize=function(){return MultiSigInput.OPCODES_SIZE+this.threshold*MultiSigInput.SIGNATURE_SIZE},t.exports=MultiSigInput},822316:(t,e,r)=>{"use strict";var i=r(645250),n=r(807374),s=r(850513),o=r(422489),a=r(198641),u=r(526785),h=r(918677),f=r(361763),c=(r(536061),r(201146)),d=r(737212);function MultiSigScriptHashInput(t,e,r,n,o){o=o||{},s.apply(this,arguments);var h=this;e=e||t.publicKeys,r=r||t.threshold,n=n||t.signatures,o.noSorting?this.publicKeys=e:this.publicKeys=i.sortBy(e,(function(t){return t.toString("hex")})),this.redeemScript=u.buildMultisigOut(this.publicKeys,r,o),a.checkState(u.buildScriptHashOut(this.redeemScript).equals(this.output.script),"Provided public keys don't hash to the provided output"),this.publicKeyIndex={},i.each(this.publicKeys,(function(t,e){h.publicKeyIndex[t.toString()]=e})),this.threshold=r,this.signatures=n?this._deserializeSignatures(n):new Array(this.publicKeys.length),this.checkBitsField=new Uint8Array(this.publicKeys.length)}n(MultiSigScriptHashInput,s),MultiSigScriptHashInput.prototype.toObject=function(){var t=s.prototype.toObject.apply(this,arguments);return t.threshold=this.threshold,t.publicKeys=i.map(this.publicKeys,(function(t){return t.toString()})),t.signatures=this._serializeSignatures(),t},MultiSigScriptHashInput.prototype._deserializeSignatures=function(t){return i.map(t,(function(t){if(t)return new d(t)}))},MultiSigScriptHashInput.prototype._serializeSignatures=function(){return i.map(this.signatures,(function(t){if(t)return t.toObject()}))},MultiSigScriptHashInput.prototype.getSignatures=function(t,e,r,n,s,u){a.checkState(this.output instanceof o),n=n||h.SIGHASH_ALL|h.SIGHASH_FORKID;var c=this,p=[];return i.each(this.publicKeys,(function(i){i.toString()===e.publicKey.toString()&&p.push(new d({publicKey:e.publicKey,prevTxId:c.prevTxId,outputIndex:c.outputIndex,inputIndex:r,signature:f.sign(t,e,n,r,c.redeemScript,c.output.satoshisBN,void 0,u),sigtype:n}))})),p},MultiSigScriptHashInput.prototype.addSignature=function(t,e,r){return a.checkState(!this.isFullySigned(),"All needed signatures have already been added"),a.checkArgument(!i.isUndefined(this.publicKeyIndex[e.publicKey.toString()]),"Signature has no matching public key"),a.checkState(this.isValidSignature(t,e,r)),this.signatures[this.publicKeyIndex[e.publicKey.toString()]]=e,this.checkBitsField[this.publicKeyIndex[e.publicKey.toString()]]=void 0!==e?1:0,this._updateScript(r,this.checkBitsField),this},MultiSigScriptHashInput.prototype._updateScript=function(t,e){return this.setScript(u.buildP2SHMultisigIn(this.publicKeys,this.threshold,this._createSignatures(t),{cachedMultisig:this.redeemScript,checkBits:e,signingMethod:t})),this},MultiSigScriptHashInput.prototype._createSignatures=function(t){return i.map(i.filter(this.signatures,(function(t){return!i.isUndefined(t)})),(function(e){return c.concat([e.signature.toDER(t),c.integerAsSingleByteBuffer(e.sigtype)])}))},MultiSigScriptHashInput.prototype.clearSignatures=function(){this.signatures=new Array(this.publicKeys.length),this._updateScript()},MultiSigScriptHashInput.prototype.isFullySigned=function(){return this.countSignatures()===this.threshold},MultiSigScriptHashInput.prototype.countMissingSignatures=function(){return this.threshold-this.countSignatures()},MultiSigScriptHashInput.prototype.countSignatures=function(){return i.reduce(this.signatures,(function(t,e){return t+!!e}),0)},MultiSigScriptHashInput.prototype.publicKeysWithoutSignature=function(){var t=this;return i.filter(this.publicKeys,(function(e){return!t.signatures[t.publicKeyIndex[e.toString()]]}))},MultiSigScriptHashInput.prototype.isValidSignature=function(t,e,r){return r=r||"ecdsa",e.signature.nhashtype=e.sigtype,f.verify(t,e.signature,e.publicKey,e.inputIndex,this.redeemScript,this.output.satoshisBN,void 0,r)},MultiSigScriptHashInput.OPCODES_SIZE=7,MultiSigScriptHashInput.SIGNATURE_SIZE=74,MultiSigScriptHashInput.PUBKEY_SIZE=34,MultiSigScriptHashInput.prototype._estimateSize=function(){return MultiSigScriptHashInput.OPCODES_SIZE+this.threshold*MultiSigScriptHashInput.SIGNATURE_SIZE+this.publicKeys.length*MultiSigScriptHashInput.PUBKEY_SIZE},t.exports=MultiSigScriptHashInput},598357:(t,e,r)=>{"use strict";var i=r(807374),n=r(198641),s=(r(201146),r(850513)),o=r(422489),a=r(361763),u=r(526785),h=r(918677),f=r(737212);function PublicKeyInput(){s.apply(this,arguments)}i(PublicKeyInput,s),PublicKeyInput.prototype.getSignatures=function(t,e,r,i,s,u){n.checkState(this.output instanceof o),i=i||h.SIGHASH_ALL|h.SIGHASH_FORKID;var c=e.toPublicKey();return c.toString()===this.output.script.getPublicKey().toString("hex")?[new f({publicKey:c,prevTxId:this.prevTxId,outputIndex:this.outputIndex,inputIndex:r,signature:a.sign(t,e,i,r,this.output.script,this.output.satoshisBN,void 0,u),sigtype:i})]:[]},PublicKeyInput.prototype.addSignature=function(t,e,r){return n.checkState(this.isValidSignature(t,e,r),"Signature is invalid"),this.setScript(u.buildPublicKeyIn(e.signature.toDER(r),e.sigtype)),this},PublicKeyInput.prototype.clearSignatures=function(){return this.setScript(u.empty()),this},PublicKeyInput.prototype.isFullySigned=function(){return this.script.isPublicKeyIn()},PublicKeyInput.SCRIPT_MAX_SIZE=73,PublicKeyInput.prototype._estimateSize=function(){return PublicKeyInput.SCRIPT_MAX_SIZE},t.exports=PublicKeyInput},217009:(t,e,r)=>{"use strict";var i=r(807374),n=r(198641),s=(r(201146),r(905079)),o=r(850513),a=r(422489),u=r(361763),h=r(526785),f=r(918677),c=r(737212);function PublicKeyHashInput(){o.apply(this,arguments)}i(PublicKeyHashInput,o),PublicKeyHashInput.prototype.getSignatures=function(t,e,r,i,o,h){return n.checkState(this.output instanceof a),o=o||s.sha256ripemd160(e.publicKey.toBuffer()),i=i||f.SIGHASH_ALL|f.SIGHASH_FORKID,[new c({publicKey:e.publicKey,prevTxId:this.prevTxId,outputIndex:this.outputIndex,inputIndex:r,signature:u.sign(t,e,i,r,this.output.script,this.output.satoshisBN,void 0,h),sigtype:i})]},PublicKeyHashInput.prototype.addSignature=function(t,e,r){return n.checkState(this.isValidSignature(t,e,r),"Signature is invalid"),this.setScript(h.buildPublicKeyHashIn(e.publicKey,e.signature.toDER(r),e.sigtype)),this},PublicKeyHashInput.prototype.clearSignatures=function(){return this.setScript(h.empty()),this},PublicKeyHashInput.prototype.isFullySigned=function(){return this.script.isPublicKeyHashIn()},PublicKeyHashInput.SCRIPT_MAX_SIZE=107,PublicKeyHashInput.prototype._estimateSize=function(){return PublicKeyHashInput.SCRIPT_MAX_SIZE},t.exports=PublicKeyHashInput},422489:(t,e,r)=>{"use strict";var i=r(901048).Buffer,n=r(645250),s=r(47495),o=(r(901048),r(201146)),a=r(359983),u=r(111978),h=r(526785),f=r(198641),c=r(669277);function Output(t){if(!(this instanceof Output))return new Output(t);if(!n.isObject(t))throw new TypeError("Unrecognized argument for Output");var e;this.satoshis=t.satoshis,o.isBuffer(t.script)?this._scriptBuffer=t.script:(e=n.isString(t.script)&&a.isHexa(t.script)?i.from(t.script,"hex"):t.script,this.setScript(e))}Object.defineProperty(Output.prototype,"script",{configurable:!1,enumerable:!0,get:function(){return this._script||this.setScriptFromBuffer(this._scriptBuffer),this._script}}),Object.defineProperty(Output.prototype,"satoshis",{configurable:!1,enumerable:!0,get:function(){return this._satoshis},set:function(t){t instanceof s?(this._satoshisBN=t,this._satoshis=t.toString()):n.isString(t)?(this._satoshisBN=s.fromString(t),this._satoshis=t):(f.checkArgument(a.isNaturalNumber(t),"Output satoshis is not a natural number"),this._satoshisBN=s.fromNumber(t),this._satoshis=s.fromNumber(t).toString()),f.checkState(a.isNaturalNumber(this._satoshis),"Output satoshis is not a natural number")}}),Output.prototype.invalidSatoshis=function(){return s.fromString(this._satoshis).eq(this._satoshisBN)?!!s.fromString(this._satoshis).lt(s.Zero)&&"transaction txout negative":"transaction txout satoshis has corrupted value"},Object.defineProperty(Output.prototype,"satoshisBN",{configurable:!1,enumerable:!0,get:function(){return this._satoshisBN},set:function(t){this._satoshisBN=t,this._satoshis=t.toNumber(),f.checkState(a.isNaturalNumber(this._satoshis),"Output satoshis is not a natural number")}}),Output.prototype.toObject=Output.prototype.toJSON=function toObject(){var t={satoshis:this.satoshis};return t.script=this._scriptBuffer.toString("hex"),t},Output.fromObject=function(t){return new Output(t)},Output.prototype.setScriptFromBuffer=function(t){this._scriptBuffer=t;try{this._script=h.fromBuffer(this._scriptBuffer),this._script._isOutput=!0}catch(t){if(!(t instanceof c.Script.InvalidBuffer))throw t;this._script=null}},Output.prototype.setScript=function(t){if(t instanceof h)this._scriptBuffer=t.toBuffer(),this._script=t,this._script._isOutput=!0;else if(n.isString(t))this._script=h.fromString(t),this._scriptBuffer=this._script.toBuffer(),this._script._isOutput=!0;else{if(!o.isBuffer(t))throw new TypeError("Invalid argument type: script");this.setScriptFromBuffer(t)}return this},Output.prototype.inspect=function(){var t;return t=this.script?this.script.inspect():this._scriptBuffer.toString("hex"),"<Output ("+this.satoshis+" sats) "+t+">"},Output.fromBufferReader=function(t){var e={};e.satoshis=t.readUInt64LEBN().toString();t.readUInt16LE();var r=t.readUInt64LEBN().toNumber();return e.script=0!==r?t.read(r):i.from([]),new Output(e)},Output.prototype.toBufferWriter=function(t){t||(t=new u),t.writeUInt64LEBN(this._satoshisBN),t.writeUInt16LE(0);var e=this._scriptBuffer;let r=s.fromNumber(e.length);return t.writeUInt64LEBN(r),t.write(e),t},t.exports=Output},361763:(t,e,r)=>{"use strict";var i=r(901048).Buffer,n=(r(901048),r(918677)),s=(r(526785),r(422489),r(821722),r(111978)),o=r(47495),a=(r(905079),r(269575)),u=r(510682),h=r(198641),f=(r(201146),r(542675)),c=r(645250);r(359983);const{blake2b:d}=r(550355);f.SCRIPT_ENABLE_SIGHASH_FORKID;const p=i.from("TransactionSigningHash");function isSighashAnyoneCanPay(t){return(t&n.SIGHASH_ANYONECANPAY)===n.SIGHASH_ANYONECANPAY}function isSighashSingle(t){return(31&t)===n.SIGHASH_SINGLE}function isSighashNone(t){return(31&t)===n.SIGHASH_NONE}function HashWriter(){this.hash={hash:d.create({dkLen:32,key:p}),bw:new s,update:function(t){this.bw.write(t),this.hash.update(t)},digest:function(){return i.from(this.hash.digest())}}}function zeroHash(){return i.alloc(32)}function hashOutpoint(t,e){t.writeHash(e.prevTxId),t.writeUInt32LE(e.outputIndex)}function sighash(t,e,n,s,o,a,u={}){r(480094);const h=new HashWriter;h.writeUInt16LE(t.version),h.writeHash(function getPreviousOutputsHash(t,e,r){if(isSighashAnyoneCanPay(e))return zeroHash();if(c.isUndefined(r.previousOutputsHash)){const e=new HashWriter;t.inputs.forEach((t=>hashOutpoint(e,t))),r.previousOutputsHash=e.finalize()}return r.previousOutputsHash}(t,e,u)),h.writeHash(function getSequencesHash(t,e,r){if(isSighashSingle(e)||isSighashAnyoneCanPay(e)||isSighashNone(e))return zeroHash();if(c.isUndefined(r.sequencesHash)){const e=new HashWriter;t.inputs.forEach((t=>e.writeUInt64LE(t.sequenceNumber))),r.sequencesHash=e.finalize()}return r.sequencesHash}(t,e,u)),h.writeHash(function getSigOpCountsHash(t,e,r){if(isSighashAnyoneCanPay(e))return zeroHash();if(c.isUndefined(r.sigOpCountsHash)){const e=new HashWriter;t.inputs.forEach((t=>e.writeUInt8(1))),r.sigOpCountsHash=e.finalize()}return r.sigOpCountsHash}(t,e,u));const f=t.inputs[n];return hashOutpoint(h,f),h.writeUInt16LE(0),h.writeVarBytes(f.output.script.toBuffer()),h.writeUInt64LE(f.output.satoshis),h.writeUInt64LE(f.sequenceNumber),h.writeUInt8(1),h.writeHash(function getOutputsHash(t,e,r,i){if(isSighashNone(r))return zeroHash();if(isSighashSingle(r))return e>=t.outputs.length?zeroHash():(new HashWriter).finalize();if(c.isUndefined(i.outputsHash)){const e=new HashWriter;t.outputs.forEach((t=>function hashTxOut(t,e){t.writeUInt64LE(e.satoshis),t.writeUInt16LE(0),t.writeVarBytes(e.script.toBuffer())}(e,t))),i.outputsHash=e.finalize()}return i.outputsHash}(t,n,e,u)),h.writeUInt64LE(t.nLockTime),h.writeHash(function zeroSubnetworkID(){return i.alloc(20)}()),h.writeUInt64LE(0),h.writeHash(zeroHash()),h.writeUInt8(e),h.finalize()}HashWriter.prototype.writeUInt8=function(t){const e=new s;e.writeUInt8(t),this.hash.update(e.toBuffer())},HashWriter.prototype.writeUInt16LE=function(t){const e=new s;e.writeUInt16LE(t),this.hash.update(e.toBuffer())},HashWriter.prototype.writeUInt32LE=function(t){const e=new s;e.writeUInt32LE(t),this.hash.update(e.toBuffer())},HashWriter.prototype.writeUInt64LE=function(t){const e=new s;e.writeUInt64LEBN(o.fromNumber(t)),this.hash.update(e.toBuffer())},HashWriter.prototype.writeVarBytes=function(t){this.writeUInt64LE(t.length),this.hash.update(t)},HashWriter.prototype.writeHash=function(t){this.hash.update(t)},HashWriter.prototype.finalize=function(){return this.hash.digest()};t.exports={sighash,sign:function sign(t,e,r,i,n,s,o,h){var f=sighash(t,r,i);let c;return"schnorr"===(h=h||"ecdsa")?(c=u.sign(f,e,"little").set({nhashtype:r}),c):"ecdsa"===h?(c=a.sign(f,e,"little").set({nhashtype:r}),c):void 0},verify:function verify(t,e,r,i,n,s,o,f){h.checkArgument(!c.isUndefined(t)),h.checkArgument(!c.isUndefined(e)&&!c.isUndefined(e.nhashtype));var d=sighash(t,e.nhashtype,i);return"schnorr"===(f=f||"ecdsa")?u.verify(d,e,r,"little"):"ecdsa"===f?a.verify(d,e,r,"little"):void 0}}},737212:(t,e,r)=>{"use strict";var i=r(901048).Buffer,n=r(645250),s=r(198641),o=r(807374),a=r(201146),u=r(359983),h=r(536061),f=r(669277),c=r(918677);function TransactionSignature(t){if(!(this instanceof TransactionSignature))return new TransactionSignature(t);if(t instanceof TransactionSignature)return t;if(n.isObject(t))return this._fromObject(t);throw new f.InvalidArgument("TransactionSignatures must be instantiated from an object")}o(TransactionSignature,c),TransactionSignature.prototype._fromObject=function(t){return this._checkObjectArgs(t),this.publicKey=new h(t.publicKey),this.prevTxId=a.isBuffer(t.prevTxId)?t.prevTxId:i.from(t.prevTxId,"hex"),this.outputIndex=t.outputIndex,this.inputIndex=t.inputIndex,this.signature=t.signature instanceof c?t.signature:a.isBuffer(t.signature)?c.fromBuffer(t.signature):c.fromString(t.signature),this.sigtype=t.sigtype,this},TransactionSignature.prototype._checkObjectArgs=function(t){s.checkArgument(h(t.publicKey),"publicKey"),s.checkArgument(!n.isUndefined(t.inputIndex),"inputIndex"),s.checkArgument(!n.isUndefined(t.outputIndex),"outputIndex"),s.checkState(n.isNumber(t.inputIndex),"inputIndex must be a number"),s.checkState(n.isNumber(t.outputIndex),"outputIndex must be a number"),s.checkArgument(t.signature,"signature"),s.checkArgument(t.prevTxId,"prevTxId"),s.checkState(t.signature instanceof c||a.isBuffer(t.signature)||u.isHexa(t.signature),"signature must be a buffer or hexa value"),s.checkState(a.isBuffer(t.prevTxId)||u.isHexa(t.prevTxId),"prevTxId must be a buffer or hexa value"),s.checkArgument(t.sigtype,"sigtype"),s.checkState(n.isNumber(t.sigtype),"sigtype must be a number")},TransactionSignature.prototype.toObject=TransactionSignature.prototype.toJSON=function toObject(){return{publicKey:this.publicKey.toString(),prevTxId:this.prevTxId.toString("hex"),outputIndex:this.outputIndex,inputIndex:this.inputIndex,signature:this.signature.toString(),sigtype:this.sigtype}},TransactionSignature.fromObject=function(t){return s.checkArgument(t),new TransactionSignature(t)},t.exports=TransactionSignature},480094:(t,e,r)=>{"use strict";var i=r(901048).Buffer,n=r(645250),s=r(198641),o=r(901048),a=i.compare||r(142490),u=r(669277),h=r(201146),f=r(359983);const{LogBuffer:c}=f;var d=r(821722),p=r(111978),l=r(905079),m=r(918677),b=r(361763),g=r(61365),y=r(937530),v=r(803281),w=v.PublicKeyHash,_=v.PublicKey,P=v.MultiSigScriptHash,I=v.MultiSig,M=r(422489),B=r(526785),k=r(901487),A=r(47495),E=r(111744).logLevels;function Transaction(t){if(!(this instanceof Transaction))return new Transaction(t);if(this.inputMap=new Map,this.inputs=[],this.outputs=[],this._inputAmount=void 0,this._outputAmount=void 0,t){if(t instanceof Transaction)return Transaction.shallowCopy(t);if(f.isHexa(t))this.fromString(t);else if(h.isBuffer(t))this.fromBuffer(t);else{if(!n.isObject(t))throw new u.InvalidArgument("Must provide an object or string to deserialize a transaction");this.fromObject(t)}}else this._newTransaction()}Transaction.MassPerSigOp=1e3,Transaction.MassPerTxByte=1,Transaction.MassPerScriptPubKeyByte=10,Transaction.EstimatedOutputMass=27,Transaction.EstimatedStandaloneMassWithoutInputs=94+2*Transaction.EstimatedOutputMass,Transaction.DUST_AMOUNT=546,Transaction.FEE_SECURITY_MARGIN=150,Transaction.MAX_MONEY=21e14,Transaction.NLOCKTIME_BLOCKHEIGHT_LIMIT=5e8,Transaction.NLOCKTIME_MAX_VALUE=4294967295,Transaction.FEE_PER_KB=1e5,Transaction.STORAGE_MASS=new A(10).pow(new A(12)),Transaction.CHANGE_OUTPUT_MAX_SIZE=62,Transaction.MAXIMUM_EXTRA_SIZE=26,Transaction.shallowCopy=function(t){return new Transaction(t.toBuffer())};var O={configurable:!1,enumerable:!0,get:function(){return this._hash=new d(this._getHash()).readReverse().toString("hex"),this._hash}};Object.defineProperty(Transaction.prototype,"hash",O),Object.defineProperty(Transaction.prototype,"id",O);var N={configurable:!1,enumerable:!0,get:function(){return this._getInputAmount().toString()}};Object.defineProperty(Transaction.prototype,"inputAmount",N),N.get=function(){return this._getOutputAmount().toString()},Object.defineProperty(Transaction.prototype,"outputAmount",N),Transaction.prototype._getHash=function(){return l.sha256sha256(this.toBuffer())},Transaction.prototype.serialize=function(t){return!0===t||t&&t.disableAll?this.uncheckedSerialize():this.checkedSerialize(t)},Transaction.prototype.uncheckedSerialize=Transaction.prototype.toString=function(){return this.toBuffer().toString("hex")},Transaction.prototype.checkedSerialize=function(t){var e=this.getSerializationError(t);if(e)throw e.message+=" - For more information please see: https://kaspacore.io/api/lib/transaction#serialization-checks",e;return this.uncheckedSerialize()},Transaction.prototype.invalidSatoshis=function(){for(var t=!1,e=0;e<this.outputs.length;e++)this.outputs[e].invalidSatoshis()&&(t=!0);return t},Transaction.prototype.getSerializationError=function(t){if(t=t||{},this.invalidSatoshis())return new u.Transaction.InvalidSatoshis;var e,r=this._getUnspentValue();return r.lt(A.Zero)?t.disableMoreOutputThanInput||(e=new u.Transaction.InvalidOutputAmountSum):e=this._hasFeeError(t,r),e||this._hasDustOutputs(t)||this._isMissingSignatures(t)},Transaction.prototype._hasFeeError=function(t,e){if(!n.isUndefined(this._fee)&&this._fee!==e)return new u.Transaction.FeeError.Different("Unspent value is "+e+" but specified fee is "+this._fee);if(!t.disableLargeFees){var r=Math.floor(Transaction.FEE_SECURITY_MARGIN*this._estimateFee());if(e.gt(new A(r)))return this._missingChange()?new u.Transaction.ChangeAddressMissing("Fee is too large and no change address was provided"):new u.Transaction.FeeError.TooLarge("expected less than "+r+" but got "+e)}if(!t.disableSmallFees){var i=Math.ceil(this._estimateFee()/Transaction.FEE_SECURITY_MARGIN);if(e.lt(new A(i)))return new u.Transaction.FeeError.TooSmall("expected more than "+i+" but got "+e)}},Transaction.prototype._missingChange=function(){return!this._changeScript},Transaction.prototype._hasDustOutputs=function(t){var e,r;if(!t.disableDustOutputs)for(e in this.outputs)if((r=this.outputs[e]).satoshis<Transaction.DUST_AMOUNT&&!r.script.isDataOut())return new u.Transaction.DustOutputs},Transaction.prototype._isMissingSignatures=function(t){if(!t.disableIsFullySigned)return this.isFullySigned()?void 0:new u.Transaction.MissingSignatures},Transaction.prototype.inspect=function(){return"<Transaction: "+this.uncheckedSerialize()+">"},Transaction.prototype.toBuffer=function(t=!1){var e=new p;return this.toBufferWriter(e,{skipInputs:t}).toBuffer()};const T=i.from("0000000000000000000000000000000000000000","hex"),x=i.from("0000000000000000","hex"),K=i.from("0000000000000000000000000000000000000000000000000000000000000000","hex"),H=i.from("0000000000000000","hex");Transaction.prototype.toBufferWriter=function(t,e){t.writeUInt16LE(this.version);let r=A.fromNumber(this.inputs.length);t.writeUInt64LEBN(r);let{skipInputs:i=!1}=e||{};return i||n.each(this.inputs,(function(e){e.lockUntilBlockHeight(0),e.toBufferWriter(t)})),r=A.fromNumber(this.outputs.length),t.writeUInt64LEBN(r),n.each(this.outputs,(function(e){e.toBufferWriter(t)})),r=A.fromNumber(this.nLockTime),t.writeUInt64LEBN(r),t.write(T),t.write(x),t.write(K),t.write(H),t},Transaction.prototype.getStandaloneMass=function(){let t=this.toBuffer(!0).length;t+=151*this.inputs.length;let e=0;return this.outputs.forEach((t=>{e+=2,e+=t._scriptBuffer.length})),{txSize:t,mass:t*Transaction.MassPerTxByte+e*Transaction.MassPerScriptPubKeyByte}},Transaction.prototype.getMassAndSize=function(){let{txSize:t}=this.getStandaloneMass(),e=this.calcStorageMass(),r=this.calcComputeMass();return{txSize:t,mass:Math.max(e,r)}},Transaction.prototype.fromBuffer=function(t){var e=new d(t);return this.fromBufferReader(e)},Transaction.prototype.fromBufferReader=function(t){var e,r,i;for(s.checkArgument(!t.finished(),"No transaction data received"),this.version=t.readUInt16LE(),r=t.readUInt64LEBN().toNumber(),e=0;e<r;e++){var n=v.fromBufferReader(t);this.inputs.push(n)}for(i=t.readUInt64LEBN().toNumber(),e=0;e<i;e++)this.outputs.push(M.fromBufferReader(t));return this.nLockTime=t.readUInt32LE(),this},Transaction.prototype.toObject=Transaction.prototype.toJSON=function toObject(){var t=[];this.inputs.forEach((function(e){t.push(e.toObject())}));var e=[];this.outputs.forEach((function(t){e.push(t.toObject())}));var r={hash:this.hash,version:this.version,inputs:t,outputs:e,nLockTime:this.nLockTime};return this._changeScript&&(r.changeScript=this._changeScript.toString()),n.isUndefined(this._changeIndex)||(r.changeIndex=this._changeIndex),n.isUndefined(this._fee)||(r.fee=this._fee),r},Transaction.prototype.fromObject=function fromObject(t){s.checkArgument(n.isObject(t)||t instanceof Transaction);var e,r=this;return e=t instanceof Transaction?e.toObject():t,n.each(e.inputs,(function(t){if(t.output&&t.output.script){var e,i=new B(t.output.script);if(i.isPublicKeyHashOut())e=new v.PublicKeyHash(t);else if(i.isScriptHashOut()&&t.publicKeys&&t.threshold)e=new v.MultiSigScriptHash(t,t.publicKeys,t.threshold,t.signatures);else{if(!i.isPublicKeyOut())throw new u.Transaction.Input.UnsupportedScript(t.output.script);e=new v.PublicKey(t)}r.addInput(e)}else r.uncheckedAddInput(new v(t))})),n.each(e.outputs,(function(t){r.addOutput(new M(t))})),e.changeIndex&&(this._changeIndex=e.changeIndex),e.changeScript&&(this._changeScript=new B(e.changeScript)),e.fee&&(this._fee=e.fee),this.nLockTime=e.nLockTime,this.version=e.version,this._checkConsistency(t),this},Transaction.prototype._checkConsistency=function(t){n.isUndefined(this._changeIndex)||(s.checkState(this._changeScript,"Change script is expected."),s.checkState(this.outputs[this._changeIndex],"Change index points to undefined output."),s.checkState(this.outputs[this._changeIndex].script.toString()===this._changeScript.toString(),"Change output has an unexpected script.")),t&&t.hash&&s.checkState(t.hash===this.hash,"Hash in object does not match transaction hash.")},Transaction.prototype.lockUntilDate=function(t){if(s.checkArgument(t),n.isNumber(t)&&t<Transaction.NLOCKTIME_BLOCKHEIGHT_LIMIT)throw new u.Transaction.LockTimeTooEarly;n.isDate(t)&&(t=t.getTime()/1e3);for(var e=0;e<this.inputs.length;e++)this.inputs[e].sequenceNumber===v.DEFAULT_SEQNUMBER&&(this.inputs[e].sequenceNumber=v.DEFAULT_LOCKTIME_SEQNUMBER);return this.nLockTime=t,this},Transaction.prototype.lockUntilBlockHeight=function(t){if(s.checkArgument(n.isNumber(t)),t>=Transaction.NLOCKTIME_BLOCKHEIGHT_LIMIT)throw new u.Transaction.BlockHeightTooHigh;if(t<0)throw new u.Transaction.NLockTimeOutOfRange;for(var e=0;e<this.inputs.length;e++)this.inputs[e].sequenceNumber===v.DEFAULT_SEQNUMBER&&(this.inputs[e].sequenceNumber=v.DEFAULT_LOCKTIME_SEQNUMBER);return this.nLockTime=t,this},Transaction.prototype.getLockTime=function(){return this.nLockTime?this.nLockTime<Transaction.NLOCKTIME_BLOCKHEIGHT_LIMIT?this.nLockTime:new Date(1e3*this.nLockTime):null},Transaction.prototype.fromString=function(t){this.fromBuffer(o.Buffer.from(t,"hex"))},Transaction.prototype._newTransaction=function(){this.version=2,this.nLockTime=0},Transaction.prototype.from=function(t,e,r,i){if(f.debugLevel==E.debug&&console.log("Transaction:from utxo:",t),n.isArray(t)){var s=this;return n.each(t,(function(t){s.from(t,e,r,i)})),this}return n.some(this.inputs,(function(e){return e.prevTxId.toString("hex")===t.txId&&e.outputIndex===t.outputIndex}))||(e&&r?this._fromMultisigUtxo(t,e,r,i):this._fromNonP2SH(t)),this},Transaction.prototype._fromNonP2SH=function(t){var e;const{scriptPublicKeyVersion:r}=t;e=(t=new y(t)).script.isPublicKeyHashOut()?w:t.script.isPublicKeyOut()?_:v,this.addInput(new e({output:new M({script:t.script,satoshis:t.satoshis}),prevTxId:t.txId,outputIndex:t.outputIndex,script:B.empty(),version:r}))},Transaction.prototype._fromMultisigUtxo=function(t,e,r,i){var n;if(s.checkArgument(r<=e.length,"Number of required signatures must be greater than the number of public keys"),(t=new y(t)).script.isMultisigOut())n=I;else{if(!t.script.isScriptHashOut())throw new Error("@TODO");n=P}this.addInput(new n({output:new M({script:t.script,satoshis:t.satoshis}),prevTxId:t.txId,outputIndex:t.outputIndex,script:B.empty()},e,r,void 0,i))},Transaction.prototype.addInput=function(t,e,r){if(s.checkArgumentType(t,v,"input"),!t.output&&(n.isUndefined(e)||n.isUndefined(r)))throw new u.Transaction.NeedMoreInfo("Need information about the UTXO script and satoshis");return t.output||!e||n.isUndefined(r)||(e=e instanceof B?e:new B(e),s.checkArgumentType(r,"number","satoshis"),t.output=new M({script:e,satoshis:r})),this.uncheckedAddInput(t)},Transaction.prototype.uncheckedAddInput=function(t){return s.checkArgumentType(t,v,"input"),this.inputs.push(t),this._inputAmount=void 0,this._updateChangeOutput(),this},Transaction.prototype.hasAllUtxoInfo=function(){return n.every(this.inputs.map((function(t){return!!t.output})))},Transaction.prototype.fee=function(t){return s.checkArgument(n.isNumber(t),"amount must be a number"),this._fee=t,this._updateChangeOutput(),this},Transaction.prototype.feePerKb=function(t){return s.checkArgument(n.isNumber(t),"amount must be a number"),this._feePerKb=t,this._updateChangeOutput(),this},Transaction.prototype.feePerByte=function(t){return s.checkArgument(n.isNumber(t),"amount must be a number"),this._feePerByte=t,this._updateChangeOutput(),this},Transaction.prototype.change=function(t){return s.checkArgument(t,"address is required"),this._changeScript=B.fromAddress(t),this._updateChangeOutput(),this},Transaction.prototype.getChangeOutput=function(){return n.isUndefined(this._changeIndex)?null:this.outputs[this._changeIndex]},Transaction.prototype.to=function(t,e){if(n.isArray(t)){var r=this;return n.each(t,(function(t){r.to(t.address,t.amount||t.satoshis)})),this}return s.checkArgument(f.isNaturalNumber(e),"Amount is expected to be a positive integer"),this.addOutput(new M({script:B(new g(t)),satoshis:e})),this},Transaction.prototype.addData=function(t){return this.addOutput(new M({script:B.buildDataOut(t),satoshis:0})),this},Transaction.prototype.addOutput=function(t){return s.checkArgumentType(t,M,"output"),this._addOutput(t),this._updateChangeOutput(),this},Transaction.prototype.clearOutputs=function(){return this.outputs=[],this._clearSignatures(),this._outputAmount=void 0,this._changeIndex=void 0,this._updateChangeOutput(),this},Transaction.prototype._addOutput=function(t){this.outputs.push(t),this._outputAmount=void 0},Transaction.prototype._getOutputAmount=function(){return n.isUndefined(this._outputAmount)&&(this._outputAmount=this.outputs.reduce(((t,e)=>t.add(new A(e.satoshis))),new A(0))),this._outputAmount},Transaction.prototype._getInputAmount=function(){return n.isUndefined(this._inputAmount)&&(this._inputAmount=this.inputs.reduce(((t,e)=>{if(n.isUndefined(e.output))throw new u.Transaction.Input.MissingPreviousOutput;return t.add(new A(e.output.satoshis))}),new A(0))),this._inputAmount},Transaction.prototype._updateChangeOutput=function(){if(this._changeScript){this._clearSignatures(),n.isUndefined(this._changeIndex)||this._removeOutput(this._changeIndex);var t=this._getUnspentValue(),e=this.getFee(),r=t.sub(new A(e));r.gt(A.Zero)?(this._changeIndex=this.outputs.length,this._addOutput(new M({script:this._changeScript,satoshis:r}))):this._changeIndex=void 0}},Transaction.prototype.getFee=function(){return this.isCoinbase()?0:n.isUndefined(this._fee)?this._changeScript?this._estimateFee():this._getUnspentValue().toNumber():this._fee},Transaction.prototype._estimateFee=function(){var t=this._estimateSize(),e=this._getUnspentValue(),r=this._feePerByte||(this._feePerKb||Transaction.FEE_PER_KB)/1e3;function getFee(t){return t*r}var i=Math.ceil(getFee(t)),n=Math.ceil(getFee(t)+getFee(Transaction.CHANGE_OUTPUT_MAX_SIZE));return!this._changeScript||e.lte(A.fromNumber(n))?i:n},Transaction.prototype._getUnspentValue=function(){return this._getInputAmount().sub(this._getOutputAmount())},Transaction.prototype._clearSignatures=function(){n.each(this.inputs,(function(t){t.clearSignatures()}))},Transaction.prototype._estimateSize=function(){var t=0;return t+=2,t+=8,n.each(this.inputs,(function(e){0===e._scriptBuffer.length&&(t+=65),t+=e._estimateSize()})),t+=8,n.each(this.outputs,(function(e){t+=8,t+=2,t+=8,t+=e.script.toBuffer().length})),t+=8,t+=20,t+=8,t+=32,t+=8,t+=32},Transaction.prototype._removeOutput=function(t){var e=this.outputs[t];this.outputs=n.without(this.outputs,e),this._outputAmount=void 0},Transaction.prototype.removeOutput=function(t){this._removeOutput(t),this._updateChangeOutput()},Transaction.prototype.sort=function(){return this.sortInputs((function(t){var e=Array.prototype.concat.apply([],t);let r=0;return e.forEach((t=>{t.i=r++})),e.sort((function(t,e){return a(t.prevTxId,e.prevTxId)||t.outputIndex-e.outputIndex||t.i-e.i})),e})),this.sortOutputs((function(t){var e=Array.prototype.concat.apply([],t);let r=0;return e.forEach((t=>{t.i=r++})),e.sort((function(t,e){return t.satoshis-e.satoshis||a(t.script.toBuffer(),e.script.toBuffer())||t.i-e.i})),e})),this},Transaction.prototype.shuffleOutputs=function(){return this.sortOutputs(n.shuffle)},Transaction.prototype.sortOutputs=function(t){var e=t(this.outputs);return this._newOutputOrder(e)},Transaction.prototype.sortInputs=function(t){return this.inputs=t(this.inputs),this._clearSignatures(),this},Transaction.prototype._newOutputOrder=function(t){if(this.outputs.length!==t.length||0!==n.difference(this.outputs,t).length)throw new u.Transaction.InvalidSorting;if(!n.isUndefined(this._changeIndex)){var e=this.outputs[this._changeIndex];this._changeIndex=n.findIndex(t,e)}return this.outputs=t,this},Transaction.prototype.removeInput=function(t,e){var r;if(r=!e&&n.isNumber(t)?t:n.findIndex(this.inputs,(function(r){return r.prevTxId.toString("hex")===t&&r.outputIndex===e})),r<0||r>=this.inputs.length)throw new u.Transaction.InvalidIndex(r,this.inputs.length);var i=this.inputs[r];this.inputs=n.without(this.inputs,i),this._inputAmount=void 0,this._updateChangeOutput()},Transaction.prototype.sign=function(t,e,r){return this.inputMap=new Map,this.inputs.map(((t,e)=>{let r=t.output.script.getPublicKey().toString("hex"),i=this.inputMap.get(r);i||(i=[],this.inputMap.set(r,i)),i.push({input:t,index:e})})),this._sign(t,e,r),this},Transaction.prototype._sign=function(t,e,r){r=r||"ecdsa",s.checkState(this.hasAllUtxoInfo(),"Not all utxo information is available to sign the transaction.");var i=this;if(n.isArray(t))return t=n.uniq(t),n.each(t,(function(t){i._sign(t,e,r)})),this;return(this.getSignatures(t,e,r)||[]).map((t=>{this.applySignature(t,r)})),this},Transaction.prototype.getSignatures=function(t,e,r){t=new k(t),e=e||m.SIGHASH_ALL|m.SIGHASH_FORKID;let i,n=this,s=[],o=t.publicKey.toBuffer(),a=o.toString("hex");return(this.inputMap.get(a)||[]).map((({input:a,index:u})=>{i=a.getSignatures(n,t,u,e,o,r)||[],s.push(...i)})),s},Transaction.prototype.applySignature=function(t,e){return this.inputs[t.inputIndex].addSignature(this,t,e),this},Transaction.prototype.isFullySigned=function(){return n.each(this.inputs,(function(t){if(t.isFullySigned===v.prototype.isFullySigned)throw new u.Transaction.UnableToVerifySignature("Unrecognized script kind, or not enough information to execute script.This usually happens when creating a transaction from a serialized transaction")})),n.every(n.map(this.inputs,(function(t){return t.isFullySigned()})))},Transaction.prototype.isValidSignature=function(t){if(this.inputs[t.inputIndex].isValidSignature===v.prototype.isValidSignature)throw new u.Transaction.UnableToVerifySignature("Unrecognized script kind, or not enough information to execute script.This usually happens when creating a transaction from a serialized transaction");return this.inputs[t.inputIndex].isValidSignature(this,t)},Transaction.prototype.verifySignature=function(t,e,r,i,n,s,o){return b.verify(this,t,e,r,i,n,s,o)},Transaction.prototype.verify=function(){if(0===this.inputs.length)return"transaction txins empty";if(0===this.outputs.length)return"transaction txouts empty";for(var t=new A(0),e=0;e<this.outputs.length;e++){var r=this.outputs[e];if(r.invalidSatoshis())return"transaction txout "+e+" satoshis is invalid";if(r._satoshisBN.gt(new A(Transaction.MAX_MONEY,10)))return"transaction txout "+e+" greater than MAX_MONEY";if((t=t.add(r._satoshisBN)).gt(new A(Transaction.MAX_MONEY)))return"transaction txout "+e+" total output greater than MAX_MONEY"}if(this.toBuffer().length>1e6)return"transaction over the maximum block size";var i={};for(e=0;e<this.inputs.length;e++){var s=this.inputs[e],o=s.prevTxId+":"+s.outputIndex;if(!n.isUndefined(i[o]))return"transaction input "+e+" duplicate input";i[o]=!0}if(this.isCoinbase()){var a=this.inputs[0]._scriptBuffer;if(a.length<2||a.length>100)return"coinbase transaction script size invalid"}else for(e=0;e<this.inputs.length;e++)if(this.inputs[e].isNull())return"transaction input "+e+" has null input";return!0},Transaction.prototype.isCoinbase=function(){return 1===this.inputs.length&&this.inputs[0].isNull()},Transaction.prototype.setVersion=function(t){return s.checkArgument(f.isNaturalNumber(t)&&t<=2,"Wrong version number"),this.version=t,this},Transaction.prototype.calcStorageMass=function(){const t=function negativeMass(t,e){const r=t.length;if(1===e||1===r||2===e&&2===r)return t.reduce(((t,e)=>t.add(Transaction.STORAGE_MASS.div(A.fromNumber(e.output.satoshis)))),new A(0));const i=t.reduce(((t,e)=>t.add(A.fromNumber(e.output.satoshis))),new A(0)).div(new A(r));return new A(r).mul(Transaction.STORAGE_MASS.div(i))}(this.inputs,this.outputs.length),e=this.outputs.reduce(((t,e)=>t.add(Transaction.STORAGE_MASS.div(A.fromNumber(e.satoshis)))),new A(0));return A.max(e.sub(t),new A(0))},Transaction.prototype.calcComputeMass=function(){if(this.isCoinbase())return 0;let t=this._estimateSize()*Transaction.MassPerTxByte;const e=this.outputs.reduce(((t,e)=>t+2+e._scriptBuffer.length),0)*Transaction.MassPerScriptPubKeyByte,r=this.inputs.reduce(((t,e)=>t+e.output.script.getSignatureOperationsCount()),0)*Transaction.MassPerSigOp;return Math.floor(t+e+r)},t.exports=Transaction},937530:(t,e,r)=>{"use strict";var i=r(645250),n=r(198641),s=r(359983),o=r(526785),a=r(61365),u=r(397659),h=r(47495);function UnspentOutput(t){if(!(this instanceof UnspentOutput))return new UnspentOutput(t);n.checkArgument(i.isObject(t),"Must provide an object from where to extract data");var e=t.address?new a(t.address):void 0,r=t.txid?t.txid:t.txId;if(!r||!s.isHexaString(r)||r.length>64)throw new Error("Invalid TXID in object",t);var u=i.isUndefined(t.vout)?t.outputIndex:t.vout;if(!i.isNumber(u))throw new Error("Invalid outputIndex, received "+u);n.checkArgument(!i.isUndefined(t.scriptPubKey)||!i.isUndefined(t.script),"Must provide the scriptPubKey for that output!");var f,c=new o(t.scriptPubKey||t.script);n.checkArgument(!i.isUndefined(t.amount)||!i.isUndefined(t.satoshis),"Must provide an amount for the output"),f=i.isUndefined(t.amount)?h.fromNumber(t.satoshis).toString():(f=h.fromNumber(t.amount)).mul(new h(1e8)).toString(),n.checkArgument(!f.includes("."),"Amount must be a number"),s.defineImmutable(this,{address:e,txId:r,outputIndex:u,script:c,satoshis:f.toString()})}UnspentOutput.prototype.inspect=function(){return"<UnspentOutput: "+this.txId+":"+this.outputIndex+", satoshis: "+this.satoshis+", address: "+this.address+">"},UnspentOutput.prototype.toString=function(){return this.txId+":"+this.outputIndex},UnspentOutput.fromObject=function(t){return new UnspentOutput(t)},UnspentOutput.prototype.toObject=UnspentOutput.prototype.toJSON=function toObject(){return{address:this.address?this.address.toString():void 0,txid:this.txId,vout:this.outputIndex,scriptPubKey:this.script.toBuffer().toString("hex"),amount:u.fromSatoshis(this.satoshis).toBTC()}},t.exports=UnspentOutput},397659:(t,e,r)=>{"use strict";var i=r(645250),n=r(669277),s=r(198641),o={BTC:[1e8,8],mBTC:[1e5,5],uBTC:[100,2],bits:[100,2],satoshis:[1,0]};function Unit(t,e){if(!(this instanceof Unit))return new Unit(t,e);if(i.isNumber(e)){if(e<=0)throw new n.Unit.InvalidRate(e);t/=e,e=Unit.BTC}this._value=this._from(t,e);var r=this;Object.keys(o).forEach((function(t){Object.defineProperty(r,t,{get:function(){return r.to(t)},enumerable:!0})}))}Object.keys(o).forEach((function(t){Unit[t]=t})),Unit.fromObject=function fromObject(t){return s.checkArgument(i.isObject(t),"Argument is expected to be an object"),new Unit(t.amount,t.code)},Unit.fromBTC=function(t){return new Unit(t,Unit.BTC)},Unit.fromMillis=Unit.fromMilis=function(t){return new Unit(t,Unit.mBTC)},Unit.fromMicros=Unit.fromBits=function(t){return new Unit(t,Unit.bits)},Unit.fromSatoshis=function(t){return new Unit(t,Unit.satoshis)},Unit.fromFiat=function(t,e){return new Unit(t,e)},Unit.prototype._from=function(t,e){if(!o[e])throw new n.Unit.UnknownCode(e);return parseInt((t*o[e][0]).toFixed())},Unit.prototype.to=function(t){if(i.isNumber(t)){if(t<=0)throw new n.Unit.InvalidRate(t);return parseFloat((this.BTC*t).toFixed(2))}if(!o[t])throw new n.Unit.UnknownCode(t);var e=this._value/o[t][0];return parseFloat(e.toFixed(o[t][1]))},Unit.prototype.toBTC=function(){return this.to(Unit.BTC)},Unit.prototype.toMillis=Unit.prototype.toMilis=function(){return this.to(Unit.mBTC)},Unit.prototype.toMicros=Unit.prototype.toBits=function(){return this.to(Unit.bits)},Unit.prototype.toSatoshis=function(){return this.to(Unit.satoshis)},Unit.prototype.atRate=function(t){return this.to(t)},Unit.prototype.toString=function(){return this.satoshis+" satoshis"},Unit.prototype.toObject=Unit.prototype.toJSON=function toObject(){return{amount:this.BTC,code:Unit.BTC}},Unit.prototype.inspect=function(){return"<Unit: "+this.toString()+">"},t.exports=Unit},53763:(t,e,r)=>{"use strict";var i=r(645250),n=r(505303),s=r(61365),o=r(628658),a=r(397659),URI=function(t,e){if(!(this instanceof URI))return new URI(t,e);if(this.extras={},this.knownParams=e||[],this.address=this.network=this.amount=this.message=null,"string"==typeof t){var r=URI.parse(t);r.amount&&(r.amount=this._parseAmount(r.amount)),this._fromObject(r)}else{if("object"!=typeof t)throw new TypeError("Unrecognized data format.");this._fromObject(t)}};URI.fromString=function fromString(t){if("string"!=typeof t)throw new TypeError("Expected a string");return new URI(t)},URI.fromObject=function fromObject(t){return new URI(t)},URI.isValid=function(t,e){try{new URI(t,e)}catch(t){return!1}return!0},URI.parse=function(t){var e=n.parse(t,!0);if(o.get(e.protocol.replace(":",""),"prefix")){var r=/[^:]*:\/?\/?([^?]*)/.exec(t);return e.query.address=r&&r[1]||void 0,e.query}throw new TypeError("Invalid bitcoin URI")},URI.Members=["address","amount","message","label","r"],URI.prototype._fromObject=function(t){if(!s.isValid(t.address))throw new TypeError("Invalid bitcoin address");for(var e in this.address=new s(t.address),this.network=this.address.network,this.amount=t.amount,t)if("address"!==e&&"amount"!==e){if(/^req-/.exec(e)&&-1===this.knownParams.indexOf(e))throw Error("Unknown required argument "+e);(URI.Members.indexOf(e)>-1?this:this.extras)[e]=t[e]}},URI.prototype._parseAmount=function(t){if(t=Number(t),isNaN(t))throw new TypeError("Invalid amount");return a.fromBTC(t).toSatoshis()},URI.prototype.toObject=URI.prototype.toJSON=function toObject(){for(var t={},e=0;e<URI.Members.length;e++){var r=URI.Members[e];this.hasOwnProperty(r)&&void 0!==this[r]&&(t[r]=this[r].toString())}return i.extend(t,this.extras),t},URI.prototype.toString=function(){var t={};return this.amount&&(t.amount=a.fromSatoshis(this.amount).toBTC()),this.message&&(t.message=this.message),this.label&&(t.label=this.label),this.r&&(t.r=this.r),i.extend(t,this.extras),n.format({protocol:o.get(this.network,"name").prefix+":",host:this.address.toString(!0),query:t})},URI.prototype.inspect=function(){return"<URI: "+this.toString()+">"},t.exports=URI},596988:(t,e,r)=>{"use strict";var i=r(198641),n={q:0,p:1,z:2,r:3,y:4,9:5,x:6,8:7,g:8,f:9,2:10,t:11,v:12,d:13,w:14,0:15,s:16,3:17,j:18,n:19,5:20,4:21,k:22,h:23,c:24,e:25,6:26,m:27,u:28,a:29,7:30,l:31};t.exports={encode:function encode(t){i.checkArgument(t instanceof Array,"Must be Array");for(var e="",r=0;r<t.length;r++){var n=t[r];i.checkArgument(0<=n&&n<32,"value "+n),e+="qpzry9x8gf2tvdw0s3jn54khce6mua7l"[n]}return e},decode:function decode(t){i.checkArgument("string"==typeof t,"Must be base32-encoded string");for(var e=[],r=0;r<t.length;r++){var s=t[r];i.checkArgument(s in n,"value "+s),e.push(n[s])}return e}}},201146:(t,e,r)=>{"use strict";var i=r(901048).Buffer,n=r(901048),s=(r(626093),r(359983),r(198641));function equals(t,e){if(t.length!==e.length)return!1;for(var r=t.length,i=0;i<r;i++)if(t[i]!==e[i])return!1;return!0}t.exports={fill:function fill(t,e){s.checkArgumentType(t,"Buffer","buffer"),s.checkArgumentType(e,"number","value");for(var r=t.length,i=0;i<r;i++)t[i]=e;return t},copy:function(t){var e=i.alloc(t.length);return t.copy(e),e},isBuffer:function isBuffer(t){return n.Buffer.isBuffer(t)||t instanceof Uint8Array},emptyBuffer:function emptyBuffer(t){s.checkArgumentType(t,"number","bytes");for(var e=i.alloc(t),r=0;r<t;r++)e.write("\0",r);return e},concat:n.Buffer.concat,equals,equal:equals,integerAsSingleByteBuffer:function integerAsSingleByteBuffer(t){return s.checkArgumentType(t,"number","integer"),i.from([255&t])},integerAsBuffer:function integerAsBuffer(t){s.checkArgumentType(t,"number","integer");var e=[];return e.push(t>>24&255),e.push(t>>16&255),e.push(t>>8&255),e.push(255&t),i.from(e)},integerFromBuffer:function integerFromBuffer(t){return s.checkArgumentType(t,"Buffer","buffer"),t[0]<<24|t[1]<<16|t[2]<<8|t[3]},integerFromSingleByteBuffer:function integerFromBuffer(t){return s.checkArgumentType(t,"Buffer","buffer"),t[0]},bufferToHex:function bufferToHex(t){return s.checkArgumentType(t,"Buffer","buffer"),t.toString("hex")},reverse:function reverse(t){return i.from(t).reverse()}},t.exports.NULL_HASH=t.exports.fill(i.alloc(32),0),t.exports.EMPTY_BUFFER=i.alloc(0)},481225:(t,e,r)=>{"use strict";var i=r(198641);t.exports=function(t,e,r,n){n=n||!1;for(var s=0,o=0,a=[],u=(1<<r)-1,h=0;h<t.length;h++){var f=t[h];for(i.checkArgument(!(f<0||f>>e),"value "+f),s=s<<e|f,o+=e;o>=r;)o-=r,a.push(s>>o&u)}return n?i.checkState(!(o>=e||s<<r-o&u),"Conversion requires padding but strict mode was used"):o>0&&a.push(s<<r-o&u),a}},359983:(t,e,r)=>{"use strict";var i=r(645250),n=r(111744).logLevels,s=r(47495);const o=new s("18446744073709551615");var a=function isHexa(t){return!!i.isString(t)&&/^[0-9a-fA-F]+$/.test(t)};const u={debugLevel:0,LogBufferActive:!1,LogBuffer(...t){!u.LogBufferActive||u.debugLevel<n.debug||(t[t.length-1]=t[t.length-1].map((t=>t.toString("hex"))),console.log(...t))},isValidJSON:function isValidJSON(t){var e;if(!i.isString(t))return!1;try{e=JSON.parse(t)}catch(t){return!1}return"object"==typeof e},isHexa:a,isHexaString:a,cloneArray:function(t){return[].concat(t)},defineImmutable:function defineImmutable(t,e){return Object.keys(e).forEach((function(r){Object.defineProperty(t,r,{configurable:!1,enumerable:!0,value:e[r]})})),t},isNaturalNumber:function isNaturalNumber(t){if("string"==typeof t&&!/^\d*$/.test(t))return!1;if("number"==typeof t||"string"==typeof t)try{return s.fromNumber(t).lte(o)}catch(t){return!1}return!1}};t.exports=u},111744:t=>{t.exports={logLevels:{error:0,warn:1,info:2,verbose:3,debug:4}}},198641:(t,e,r)=>{"use strict";var i=r(669277),n=r(645250);t.exports={checkState:function(t,e){if(!t)throw new i.InvalidState(e)},checkArgument:function(t,e,r,n){if(!t)throw new i.InvalidArgument(e,r,n)},checkArgumentType:function(t,e,s){if(s=s||"(unknown name)",n.isString(e)){if("Buffer"===e){if(!r(901048).Buffer.isBuffer(t))throw new i.InvalidArgumentType(t,e,s)}else if(typeof t!==e)throw new i.InvalidArgumentType(t,e,s)}else if(!(t instanceof e))throw new i.InvalidArgumentType(t,e.name,s)}}},37281:(t,e)=>{"use strict";function number(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function bool(t){if("boolean"!=typeof t)throw new Error(`Expected boolean, not ${t}`)}function bytes(t,...e){if(!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new TypeError(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function hash(t){if("function"!=typeof t||"function"!=typeof t.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");number(t.outputLen),number(t.blockLen)}function exists(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function output(t,e){bytes(t);const r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}Object.defineProperty(e,"__esModule",{value:!0}),e.output=e.exists=e.hash=e.bytes=e.bool=e.number=void 0,e.number=number,e.bool=bool,e.bytes=bytes,e.hash=hash,e.exists=exists,e.output=output;const r={number,bool,bytes,hash,exists,output};e.default=r},957186:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BLAKE2=e.SIGMA=void 0;const i=r(37281),n=r(332771);e.SIGMA=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3]);class BLAKE2 extends n.Hash{constructor(t,e,r={},s,o,a){if(super(),this.blockLen=t,this.outputLen=e,this.length=0,this.pos=0,this.finished=!1,this.destroyed=!1,i.default.number(t),i.default.number(e),i.default.number(s),e<0||e>s)throw new Error("Blake2: outputLen bigger than keyLen");if(void 0!==r.key&&(r.key.length<1||r.key.length>s))throw new Error(`Key should be up 1..${s} byte long or undefined`);if(void 0!==r.salt&&r.salt.length!==o)throw new Error(`Salt should be ${o} byte long or undefined`);if(void 0!==r.personalization&&r.personalization.length!==a)throw new Error(`Personalization should be ${a} byte long or undefined`);this.buffer32=(0,n.u32)(this.buffer=new Uint8Array(t))}update(t){i.default.exists(this);const{blockLen:e,buffer:r,buffer32:s}=this,o=(t=(0,n.toBytes)(t)).length;for(let i=0;i<o;){this.pos===e&&(this.compress(s,0,!1),this.pos=0);const n=Math.min(e-this.pos,o-i),a=t.byteOffset+i;if(n!==e||a%4||!(i+n<o))r.set(t.subarray(i,i+n),this.pos),this.pos+=n,this.length+=n,i+=n;else{const r=new Uint32Array(t.buffer,a,Math.floor((o-i)/4));for(let t=0;i+e<o;t+=s.length,i+=e)this.length+=e,this.compress(r,t,!1)}}return this}digestInto(t){i.default.exists(this),i.default.output(t,this);const{pos:e,buffer32:r}=this;this.finished=!0,this.buffer.subarray(e).fill(0),this.compress(r,0,!0);const s=(0,n.u32)(t);this.get().forEach(((t,e)=>s[e]=t))}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const r=t.slice(0,e);return this.destroy(),r}_cloneInto(t){const{buffer:e,length:r,finished:i,destroyed:n,outputLen:s,pos:o}=this;return t||(t=new this.constructor({dkLen:s})),t.set(...this.get()),t.length=r,t.finished=i,t.destroyed=n,t.outputLen=s,t.buffer.set(e),t.pos=o,t}}e.BLAKE2=BLAKE2},762042:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.add=e.toBig=e.split=e.fromBig=void 0;const r=BigInt(2**32-1),i=BigInt(32);function fromBig(t,e=!1){return e?{h:Number(t&r),l:Number(t>>i&r)}:{h:0|Number(t>>i&r),l:0|Number(t&r)}}function split(t,e=!1){let r=new Uint32Array(t.length),i=new Uint32Array(t.length);for(let n=0;n<t.length;n++){const{h:s,l:o}=fromBig(t[n],e);[r[n],i[n]]=[s,o]}return[r,i]}e.fromBig=fromBig,e.split=split;e.toBig=(t,e)=>BigInt(t>>>0)<<i|BigInt(e>>>0);function add(t,e,r,i){const n=(e>>>0)+(i>>>0);return{h:t+r+(n/2**32|0)|0,l:0|n}}e.add=add;const n={fromBig,split,toBig:e.toBig,shrSH:(t,e,r)=>t>>>r,shrSL:(t,e,r)=>t<<32-r|e>>>r,rotrSH:(t,e,r)=>t>>>r|e<<32-r,rotrSL:(t,e,r)=>t<<32-r|e>>>r,rotrBH:(t,e,r)=>t<<64-r|e>>>r-32,rotrBL:(t,e,r)=>t>>>r-32|e<<64-r,rotr32H:(t,e)=>e,rotr32L:(t,e)=>t,rotlSH:(t,e,r)=>t<<r|e>>>32-r,rotlSL:(t,e,r)=>e<<r|t>>>32-r,rotlBH:(t,e,r)=>e<<r-32|t>>>64-r,rotlBL:(t,e,r)=>t<<r-32|e>>>64-r,add,add3L:(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),add3H:(t,e,r,i)=>e+r+i+(t/2**32|0)|0,add4L:(t,e,r,i)=>(t>>>0)+(e>>>0)+(r>>>0)+(i>>>0),add4H:(t,e,r,i,n)=>e+r+i+n+(t/2**32|0)|0,add5H:(t,e,r,i,n,s)=>e+r+i+n+s+(t/2**32|0)|0,add5L:(t,e,r,i,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(i>>>0)+(n>>>0)};e.default=n},550355:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.blake2b=void 0;const i=r(957186),n=r(762042),s=r(332771),o=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),a=new Uint32Array(32);function G1(t,e,r,i,s,o){const u=s[o],h=s[o+1];let f=a[2*t],c=a[2*t+1],d=a[2*e],p=a[2*e+1],l=a[2*r],m=a[2*r+1],b=a[2*i],g=a[2*i+1],y=n.default.add3L(f,d,u);c=n.default.add3H(y,c,p,h),f=0|y,({Dh:g,Dl:b}={Dh:g^c,Dl:b^f}),({Dh:g,Dl:b}={Dh:n.default.rotr32H(g,b),Dl:n.default.rotr32L(g,b)}),({h:m,l}=n.default.add(m,l,g,b)),({Bh:p,Bl:d}={Bh:p^m,Bl:d^l}),({Bh:p,Bl:d}={Bh:n.default.rotrSH(p,d,24),Bl:n.default.rotrSL(p,d,24)}),a[2*t]=f,a[2*t+1]=c,a[2*e]=d,a[2*e+1]=p,a[2*r]=l,a[2*r+1]=m,a[2*i]=b,a[2*i+1]=g}function G2(t,e,r,i,s,o){const u=s[o],h=s[o+1];let f=a[2*t],c=a[2*t+1],d=a[2*e],p=a[2*e+1],l=a[2*r],m=a[2*r+1],b=a[2*i],g=a[2*i+1],y=n.default.add3L(f,d,u);c=n.default.add3H(y,c,p,h),f=0|y,({Dh:g,Dl:b}={Dh:g^c,Dl:b^f}),({Dh:g,Dl:b}={Dh:n.default.rotrSH(g,b,16),Dl:n.default.rotrSL(g,b,16)}),({h:m,l}=n.default.add(m,l,g,b)),({Bh:p,Bl:d}={Bh:p^m,Bl:d^l}),({Bh:p,Bl:d}={Bh:n.default.rotrBH(p,d,63),Bl:n.default.rotrBL(p,d,63)}),a[2*t]=f,a[2*t+1]=c,a[2*e]=d,a[2*e+1]=p,a[2*r]=l,a[2*r+1]=m,a[2*i]=b,a[2*i+1]=g}class BLAKE2b extends i.BLAKE2{constructor(t={}){super(128,void 0===t.dkLen?64:t.dkLen,t,64,16,16),this.v0l=0|o[0],this.v0h=0|o[1],this.v1l=0|o[2],this.v1h=0|o[3],this.v2l=0|o[4],this.v2h=0|o[5],this.v3l=0|o[6],this.v3h=0|o[7],this.v4l=0|o[8],this.v4h=0|o[9],this.v5l=0|o[10],this.v5h=0|o[11],this.v6l=0|o[12],this.v6h=0|o[13],this.v7l=0|o[14],this.v7h=0|o[15];const e=t.key?t.key.length:0;if(this.v0l^=this.outputLen|e<<8|65536|1<<24,t.salt){const e=(0,s.u32)((0,s.toBytes)(t.salt));this.v4l^=e[0],this.v4h^=e[1],this.v5l^=e[2],this.v5h^=e[3]}if(t.personalization){const e=(0,s.u32)((0,s.toBytes)(t.personalization));this.v6l^=e[0],this.v6h^=e[1],this.v7l^=e[2],this.v7h^=e[3]}if(t.key){const e=new Uint8Array(this.blockLen);e.set((0,s.toBytes)(t.key)),this.update(e)}}get(){let{v0l:t,v0h:e,v1l:r,v1h:i,v2l:n,v2h:s,v3l:o,v3h:a,v4l:u,v4h:h,v5l:f,v5h:c,v6l:d,v6h:p,v7l:l,v7h:m}=this;return[t,e,r,i,n,s,o,a,u,h,f,c,d,p,l,m]}set(t,e,r,i,n,s,o,a,u,h,f,c,d,p,l,m){this.v0l=0|t,this.v0h=0|e,this.v1l=0|r,this.v1h=0|i,this.v2l=0|n,this.v2h=0|s,this.v3l=0|o,this.v3h=0|a,this.v4l=0|u,this.v4h=0|h,this.v5l=0|f,this.v5h=0|c,this.v6l=0|d,this.v6h=0|p,this.v7l=0|l,this.v7h=0|m}compress(t,e,r){this.get().forEach(((t,e)=>a[e]=t)),a.set(o,16);let{h:s,l:u}=n.default.fromBig(BigInt(this.length));a[24]=o[8]^u,a[25]=o[9]^s,r&&(a[28]=~a[28],a[29]=~a[29]);let h=0;const f=i.SIGMA;for(let r=0;r<12;r++)G1(0,4,8,12,t,e+2*f[h++]),G2(0,4,8,12,t,e+2*f[h++]),G1(1,5,9,13,t,e+2*f[h++]),G2(1,5,9,13,t,e+2*f[h++]),G1(2,6,10,14,t,e+2*f[h++]),G2(2,6,10,14,t,e+2*f[h++]),G1(3,7,11,15,t,e+2*f[h++]),G2(3,7,11,15,t,e+2*f[h++]),G1(0,5,10,15,t,e+2*f[h++]),G2(0,5,10,15,t,e+2*f[h++]),G1(1,6,11,12,t,e+2*f[h++]),G2(1,6,11,12,t,e+2*f[h++]),G1(2,7,8,13,t,e+2*f[h++]),G2(2,7,8,13,t,e+2*f[h++]),G1(3,4,9,14,t,e+2*f[h++]),G2(3,4,9,14,t,e+2*f[h++]);this.v0l^=a[0]^a[16],this.v0h^=a[1]^a[17],this.v1l^=a[2]^a[18],this.v1h^=a[3]^a[19],this.v2l^=a[4]^a[20],this.v2h^=a[5]^a[21],this.v3l^=a[6]^a[22],this.v3h^=a[7]^a[23],this.v4l^=a[8]^a[24],this.v4h^=a[9]^a[25],this.v5l^=a[10]^a[26],this.v5h^=a[11]^a[27],this.v6l^=a[12]^a[28],this.v6h^=a[13]^a[29],this.v7l^=a[14]^a[30],this.v7h^=a[15]^a[31],a.fill(0)}destroy(){this.destroyed=!0,this.buffer32.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}e.blake2b=(0,s.wrapConstructorWithOpts)((t=>new BLAKE2b(t)))},817:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.crypto=void 0,e.crypto={node:void 0,web:"object"==typeof self&&"crypto"in self?self.crypto:void 0}},332771:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.randomBytes=e.wrapConstructorWithOpts=e.wrapConstructor=e.checkOpts=e.Hash=e.concatBytes=e.toBytes=e.utf8ToBytes=e.asyncLoop=e.nextTick=e.hexToBytes=e.bytesToHex=e.isLE=e.rotr=e.createView=e.u32=e.u8=void 0;const i=r(817);e.u8=t=>new Uint8Array(t.buffer,t.byteOffset,t.byteLength);e.u32=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4));e.createView=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);if(e.rotr=(t,e)=>t<<32-e|t>>>e,e.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],!e.isLE)throw new Error("Non little-endian hardware is not supported");const n=Array.from({length:256},((t,e)=>e.toString(16).padStart(2,"0")));e.bytesToHex=function bytesToHex(t){if(!(t instanceof Uint8Array))throw new Error("Uint8Array expected");let e="";for(let r=0;r<t.length;r++)e+=n[t[r]];return e},e.hexToBytes=function hexToBytes(t){if("string"!=typeof t)throw new TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const e=new Uint8Array(t.length/2);for(let r=0;r<e.length;r++){const i=2*r,n=t.slice(i,i+2),s=Number.parseInt(n,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");e[r]=s}return e};function utf8ToBytes(t){if("string"!=typeof t)throw new TypeError("utf8ToBytes expected string, got "+typeof t);return(new TextEncoder).encode(t)}function toBytes(t){if("string"==typeof t&&(t=utf8ToBytes(t)),!(t instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof t})`);return t}e.nextTick=async()=>{},e.asyncLoop=async function asyncLoop(t,r,i){let n=Date.now();for(let s=0;s<t;s++){i(s);const t=Date.now()-n;t>=0&&t<r||(await(0,e.nextTick)(),n+=t)}},e.utf8ToBytes=utf8ToBytes,e.toBytes=toBytes,e.concatBytes=function concatBytes(...t){if(!t.every((t=>t instanceof Uint8Array)))throw new Error("Uint8Array list expected");if(1===t.length)return t[0];const e=t.reduce(((t,e)=>t+e.length),0),r=new Uint8Array(e);for(let e=0,i=0;e<t.length;e++){const n=t[e];r.set(n,i),i+=n.length}return r};e.Hash=class Hash{clone(){return this._cloneInto()}};e.checkOpts=function checkOpts(t,e){if(void 0!==e&&("object"!=typeof e||(r=e,"[object Object]"!==Object.prototype.toString.call(r)||r.constructor!==Object)))throw new TypeError("Options should be object or undefined");var r;return Object.assign(t,e)},e.wrapConstructor=function wrapConstructor(t){const hashC=e=>t().update(toBytes(e)).digest(),e=t();return hashC.outputLen=e.outputLen,hashC.blockLen=e.blockLen,hashC.create=()=>t(),hashC},e.wrapConstructorWithOpts=function wrapConstructorWithOpts(t){const hashC=(e,r)=>t(r).update(toBytes(e)).digest(),e=t({});return hashC.outputLen=e.outputLen,hashC.blockLen=e.blockLen,hashC.create=e=>t(e),hashC},e.randomBytes=function randomBytes(t=32){if(i.crypto.web)return i.crypto.web.getRandomValues(new Uint8Array(t));if(i.crypto.node)return new Uint8Array(i.crypto.node.randomBytes(t).buffer);throw new Error("The environment doesn't have randomBytes function")}},817328:function(t,e,r){!function(t,e){"use strict";function assert(t,e){if(!t)throw new Error(e||"Assertion failed")}function inherits(t,e){t.super_=e;var TempCtor=function(){};TempCtor.prototype=e.prototype,t.prototype=new TempCtor,t.prototype.constructor=t}function BN(t,e,r){if(BN.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(r=e,e=10),this._init(t||0,e||10,r||"be"))}var i;"object"==typeof t?t.exports=BN:e.BN=BN,BN.BN=BN,BN.wordSize=26;try{i=r(937130).Buffer}catch(t){}function parseHex(t,e,r){for(var i=0,n=Math.min(t.length,r),s=e;s<n;s++){var o=t.charCodeAt(s)-48;i<<=4,i|=o>=49&&o<=54?o-49+10:o>=17&&o<=22?o-17+10:15&o}return i}function parseBase(t,e,r,i){for(var n=0,s=Math.min(t.length,r),o=e;o<s;o++){var a=t.charCodeAt(o)-48;n*=i,n+=a>=49?a-49+10:a>=17?a-17+10:a}return n}BN.isBN=function isBN(t){return t instanceof BN||null!==t&&"object"==typeof t&&t.constructor.wordSize===BN.wordSize&&Array.isArray(t.words)},BN.max=function max(t,e){return t.cmp(e)>0?t:e},BN.min=function min(t,e){return t.cmp(e)<0?t:e},BN.prototype._init=function init(t,e,r){if("number"==typeof t)return this._initNumber(t,e,r);if("object"==typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),assert(e===(0|e)&&e>=2&&e<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&i++,16===e?this._parseHex(t,i):this._parseBase(t,e,i),"-"===t[0]&&(this.negative=1),this.strip(),"le"===r&&this._initArray(this.toArray(),e,r)},BN.prototype._initNumber=function _initNumber(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(assert(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},BN.prototype._initArray=function _initArray(t,e,r){if(assert("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var n,s,o=0;if("be"===r)for(i=t.length-1,n=0;i>=0;i-=3)s=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[n]|=s<<o&67108863,this.words[n+1]=s>>>26-o&67108863,(o+=24)>=26&&(o-=26,n++);else if("le"===r)for(i=0,n=0;i<t.length;i+=3)s=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[n]|=s<<o&67108863,this.words[n+1]=s>>>26-o&67108863,(o+=24)>=26&&(o-=26,n++);return this.strip()},BN.prototype._parseHex=function _parseHex(t,e){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var i,n,s=0;for(r=t.length-6,i=0;r>=e;r-=6)n=parseHex(t,r,r+6),this.words[i]|=n<<s&67108863,this.words[i+1]|=n>>>26-s&4194303,(s+=24)>=26&&(s-=26,i++);r+6!==e&&(n=parseHex(t,e,r+6),this.words[i]|=n<<s&67108863,this.words[i+1]|=n>>>26-s&4194303),this.strip()},BN.prototype._parseBase=function _parseBase(t,e,r){this.words=[0],this.length=1;for(var i=0,n=1;n<=67108863;n*=e)i++;i--,n=n/e|0;for(var s=t.length-r,o=s%i,a=Math.min(s,s-o)+r,u=0,h=r;h<a;h+=i)u=parseBase(t,h,h+i,e),this.imuln(n),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==o){var f=1;for(u=parseBase(t,h,t.length,e),h=0;h<o;h++)f*=e;this.imuln(f),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}},BN.prototype.copy=function copy(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},BN.prototype.clone=function clone(){var t=new BN(null);return this.copy(t),t},BN.prototype._expand=function _expand(t){for(;this.length<t;)this.words[this.length++]=0;return this},BN.prototype.strip=function strip(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},BN.prototype._normSign=function _normSign(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},BN.prototype.inspect=function inspect(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var n=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],s=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],o=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function smallMulTo(t,e,r){r.negative=e.negative^t.negative;var i=t.length+e.length|0;r.length=i,i=i-1|0;var n=0|t.words[0],s=0|e.words[0],o=n*s,a=67108863&o,u=o/67108864|0;r.words[0]=a;for(var h=1;h<i;h++){for(var f=u>>>26,c=67108863&u,d=Math.min(h,e.length-1),p=Math.max(0,h-t.length+1);p<=d;p++){var l=h-p|0;f+=(o=(n=0|t.words[l])*(s=0|e.words[p])+c)/67108864|0,c=67108863&o}r.words[h]=0|c,u=0|f}return 0!==u?r.words[h]=0|u:r.length--,r.strip()}BN.prototype.toString=function toString(t,e){var r;if(e=0|e||1,16===(t=t||10)||"hex"===t){r="";for(var i=0,a=0,u=0;u<this.length;u++){var h=this.words[u],f=(16777215&(h<<i|a)).toString(16);r=0!==(a=h>>>24-i&16777215)||u!==this.length-1?n[6-f.length]+f+r:f+r,(i+=2)>=26&&(i-=26,u--)}for(0!==a&&(r=a.toString(16)+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var c=s[t],d=o[t];r="";var p=this.clone();for(p.negative=0;!p.isZero();){var l=p.modn(d).toString(t);r=(p=p.idivn(d)).isZero()?l+r:n[c-l.length]+l+r}for(this.isZero()&&(r="0"+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}assert(!1,"Base should be between 2 and 36")},BN.prototype.toNumber=function toNumber(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&assert(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},BN.prototype.toJSON=function toJSON(){return this.toString(16)},BN.prototype.toBuffer=function toBuffer(t,e){return assert(void 0!==i),this.toArrayLike(i,t,e)},BN.prototype.toArray=function toArray(t,e){return this.toArrayLike(Array,t,e)},BN.prototype.toArrayLike=function toArrayLike(t,e,r){var i=this.byteLength(),n=r||Math.max(1,i);assert(i<=n,"byte array longer than desired length"),assert(n>0,"Requested array length <= 0"),this.strip();var s,o,a="le"===e,u=new t(n),h=this.clone();if(a){for(o=0;!h.isZero();o++)s=h.andln(255),h.iushrn(8),u[o]=s;for(;o<n;o++)u[o]=0}else{for(o=0;o<n-i;o++)u[o]=0;for(o=0;!h.isZero();o++)s=h.andln(255),h.iushrn(8),u[n-o-1]=s}return u},Math.clz32?BN.prototype._countBits=function _countBits(t){return 32-Math.clz32(t)}:BN.prototype._countBits=function _countBits(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},BN.prototype._zeroBits=function _zeroBits(t){if(0===t)return 26;var e=t,r=0;return 8191&e||(r+=13,e>>>=13),127&e||(r+=7,e>>>=7),15&e||(r+=4,e>>>=4),3&e||(r+=2,e>>>=2),1&e||r++,r},BN.prototype.bitLength=function bitLength(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},BN.prototype.zeroBits=function zeroBits(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},BN.prototype.byteLength=function byteLength(){return Math.ceil(this.bitLength()/8)},BN.prototype.toTwos=function toTwos(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},BN.prototype.fromTwos=function fromTwos(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},BN.prototype.isNeg=function isNeg(){return 0!==this.negative},BN.prototype.neg=function neg(){return this.clone().ineg()},BN.prototype.ineg=function ineg(){return this.isZero()||(this.negative^=1),this},BN.prototype.iuor=function iuor(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},BN.prototype.ior=function ior(t){return assert(!(this.negative|t.negative)),this.iuor(t)},BN.prototype.or=function or(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},BN.prototype.uor=function uor(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},BN.prototype.iuand=function iuand(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this.strip()},BN.prototype.iand=function iand(t){return assert(!(this.negative|t.negative)),this.iuand(t)},BN.prototype.and=function and(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},BN.prototype.uand=function uand(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},BN.prototype.iuxor=function iuxor(t){var e,r;this.length>t.length?(e=this,r=t):(e=t,r=this);for(var i=0;i<r.length;i++)this.words[i]=e.words[i]^r.words[i];if(this!==e)for(;i<e.length;i++)this.words[i]=e.words[i];return this.length=e.length,this.strip()},BN.prototype.ixor=function ixor(t){return assert(!(this.negative|t.negative)),this.iuxor(t)},BN.prototype.xor=function xor(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},BN.prototype.uxor=function uxor(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},BN.prototype.inotn=function inotn(t){assert("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this.strip()},BN.prototype.notn=function notn(t){return this.clone().inotn(t)},BN.prototype.setn=function setn(t,e){assert("number"==typeof t&&t>=0);var r=t/26|0,i=t%26;return this._expand(r+1),this.words[r]=e?this.words[r]|1<<i:this.words[r]&~(1<<i),this.strip()},BN.prototype.iadd=function iadd(t){var e,r,i;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,i=t):(r=t,i=this);for(var n=0,s=0;s<i.length;s++)e=(0|r.words[s])+(0|i.words[s])+n,this.words[s]=67108863&e,n=e>>>26;for(;0!==n&&s<r.length;s++)e=(0|r.words[s])+n,this.words[s]=67108863&e,n=e>>>26;if(this.length=r.length,0!==n)this.words[this.length]=n,this.length++;else if(r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this},BN.prototype.add=function add(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},BN.prototype.isub=function isub(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,i,n=this.cmp(t);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;n>0?(r=this,i=t):(r=t,i=this);for(var s=0,o=0;o<i.length;o++)s=(e=(0|r.words[o])-(0|i.words[o])+s)>>26,this.words[o]=67108863&e;for(;0!==s&&o<r.length;o++)s=(e=(0|r.words[o])+s)>>26,this.words[o]=67108863&e;if(0===s&&o<r.length&&r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this.length=Math.max(this.length,o),r!==this&&(this.negative=1),this.strip()},BN.prototype.sub=function sub(t){return this.clone().isub(t)};var a=function comb10MulTo(t,e,r){var i,n,s,o=t.words,a=e.words,u=r.words,h=0,f=0|o[0],c=8191&f,d=f>>>13,p=0|o[1],l=8191&p,m=p>>>13,b=0|o[2],g=8191&b,y=b>>>13,v=0|o[3],w=8191&v,_=v>>>13,P=0|o[4],I=8191&P,M=P>>>13,B=0|o[5],k=8191&B,A=B>>>13,E=0|o[6],O=8191&E,N=E>>>13,T=0|o[7],x=8191&T,K=T>>>13,H=0|o[8],C=8191&H,D=H>>>13,F=0|o[9],U=8191&F,L=F>>>13,z=0|a[0],j=8191&z,q=z>>>13,V=0|a[1],G=8191&V,Y=V>>>13,Z=0|a[2],W=8191&Z,X=Z>>>13,J=0|a[3],Q=8191&J,$=J>>>13,tt=0|a[4],et=8191&tt,rt=tt>>>13,it=0|a[5],nt=8191&it,st=it>>>13,ot=0|a[6],at=8191&ot,ut=ot>>>13,ht=0|a[7],ft=8191&ht,ct=ht>>>13,dt=0|a[8],pt=8191&dt,mt=dt>>>13,bt=0|a[9],yt=8191&bt,vt=bt>>>13;r.negative=t.negative^e.negative,r.length=19;var St=(h+(i=Math.imul(c,j))|0)+((8191&(n=(n=Math.imul(c,q))+Math.imul(d,j)|0))<<13)|0;h=((s=Math.imul(d,q))+(n>>>13)|0)+(St>>>26)|0,St&=67108863,i=Math.imul(l,j),n=(n=Math.imul(l,q))+Math.imul(m,j)|0,s=Math.imul(m,q);var wt=(h+(i=i+Math.imul(c,G)|0)|0)+((8191&(n=(n=n+Math.imul(c,Y)|0)+Math.imul(d,G)|0))<<13)|0;h=((s=s+Math.imul(d,Y)|0)+(n>>>13)|0)+(wt>>>26)|0,wt&=67108863,i=Math.imul(g,j),n=(n=Math.imul(g,q))+Math.imul(y,j)|0,s=Math.imul(y,q),i=i+Math.imul(l,G)|0,n=(n=n+Math.imul(l,Y)|0)+Math.imul(m,G)|0,s=s+Math.imul(m,Y)|0;var _t=(h+(i=i+Math.imul(c,W)|0)|0)+((8191&(n=(n=n+Math.imul(c,X)|0)+Math.imul(d,W)|0))<<13)|0;h=((s=s+Math.imul(d,X)|0)+(n>>>13)|0)+(_t>>>26)|0,_t&=67108863,i=Math.imul(w,j),n=(n=Math.imul(w,q))+Math.imul(_,j)|0,s=Math.imul(_,q),i=i+Math.imul(g,G)|0,n=(n=n+Math.imul(g,Y)|0)+Math.imul(y,G)|0,s=s+Math.imul(y,Y)|0,i=i+Math.imul(l,W)|0,n=(n=n+Math.imul(l,X)|0)+Math.imul(m,W)|0,s=s+Math.imul(m,X)|0;var Pt=(h+(i=i+Math.imul(c,Q)|0)|0)+((8191&(n=(n=n+Math.imul(c,$)|0)+Math.imul(d,Q)|0))<<13)|0;h=((s=s+Math.imul(d,$)|0)+(n>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,i=Math.imul(I,j),n=(n=Math.imul(I,q))+Math.imul(M,j)|0,s=Math.imul(M,q),i=i+Math.imul(w,G)|0,n=(n=n+Math.imul(w,Y)|0)+Math.imul(_,G)|0,s=s+Math.imul(_,Y)|0,i=i+Math.imul(g,W)|0,n=(n=n+Math.imul(g,X)|0)+Math.imul(y,W)|0,s=s+Math.imul(y,X)|0,i=i+Math.imul(l,Q)|0,n=(n=n+Math.imul(l,$)|0)+Math.imul(m,Q)|0,s=s+Math.imul(m,$)|0;var It=(h+(i=i+Math.imul(c,et)|0)|0)+((8191&(n=(n=n+Math.imul(c,rt)|0)+Math.imul(d,et)|0))<<13)|0;h=((s=s+Math.imul(d,rt)|0)+(n>>>13)|0)+(It>>>26)|0,It&=67108863,i=Math.imul(k,j),n=(n=Math.imul(k,q))+Math.imul(A,j)|0,s=Math.imul(A,q),i=i+Math.imul(I,G)|0,n=(n=n+Math.imul(I,Y)|0)+Math.imul(M,G)|0,s=s+Math.imul(M,Y)|0,i=i+Math.imul(w,W)|0,n=(n=n+Math.imul(w,X)|0)+Math.imul(_,W)|0,s=s+Math.imul(_,X)|0,i=i+Math.imul(g,Q)|0,n=(n=n+Math.imul(g,$)|0)+Math.imul(y,Q)|0,s=s+Math.imul(y,$)|0,i=i+Math.imul(l,et)|0,n=(n=n+Math.imul(l,rt)|0)+Math.imul(m,et)|0,s=s+Math.imul(m,rt)|0;var Mt=(h+(i=i+Math.imul(c,nt)|0)|0)+((8191&(n=(n=n+Math.imul(c,st)|0)+Math.imul(d,nt)|0))<<13)|0;h=((s=s+Math.imul(d,st)|0)+(n>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,i=Math.imul(O,j),n=(n=Math.imul(O,q))+Math.imul(N,j)|0,s=Math.imul(N,q),i=i+Math.imul(k,G)|0,n=(n=n+Math.imul(k,Y)|0)+Math.imul(A,G)|0,s=s+Math.imul(A,Y)|0,i=i+Math.imul(I,W)|0,n=(n=n+Math.imul(I,X)|0)+Math.imul(M,W)|0,s=s+Math.imul(M,X)|0,i=i+Math.imul(w,Q)|0,n=(n=n+Math.imul(w,$)|0)+Math.imul(_,Q)|0,s=s+Math.imul(_,$)|0,i=i+Math.imul(g,et)|0,n=(n=n+Math.imul(g,rt)|0)+Math.imul(y,et)|0,s=s+Math.imul(y,rt)|0,i=i+Math.imul(l,nt)|0,n=(n=n+Math.imul(l,st)|0)+Math.imul(m,nt)|0,s=s+Math.imul(m,st)|0;var Bt=(h+(i=i+Math.imul(c,at)|0)|0)+((8191&(n=(n=n+Math.imul(c,ut)|0)+Math.imul(d,at)|0))<<13)|0;h=((s=s+Math.imul(d,ut)|0)+(n>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,i=Math.imul(x,j),n=(n=Math.imul(x,q))+Math.imul(K,j)|0,s=Math.imul(K,q),i=i+Math.imul(O,G)|0,n=(n=n+Math.imul(O,Y)|0)+Math.imul(N,G)|0,s=s+Math.imul(N,Y)|0,i=i+Math.imul(k,W)|0,n=(n=n+Math.imul(k,X)|0)+Math.imul(A,W)|0,s=s+Math.imul(A,X)|0,i=i+Math.imul(I,Q)|0,n=(n=n+Math.imul(I,$)|0)+Math.imul(M,Q)|0,s=s+Math.imul(M,$)|0,i=i+Math.imul(w,et)|0,n=(n=n+Math.imul(w,rt)|0)+Math.imul(_,et)|0,s=s+Math.imul(_,rt)|0,i=i+Math.imul(g,nt)|0,n=(n=n+Math.imul(g,st)|0)+Math.imul(y,nt)|0,s=s+Math.imul(y,st)|0,i=i+Math.imul(l,at)|0,n=(n=n+Math.imul(l,ut)|0)+Math.imul(m,at)|0,s=s+Math.imul(m,ut)|0;var kt=(h+(i=i+Math.imul(c,ft)|0)|0)+((8191&(n=(n=n+Math.imul(c,ct)|0)+Math.imul(d,ft)|0))<<13)|0;h=((s=s+Math.imul(d,ct)|0)+(n>>>13)|0)+(kt>>>26)|0,kt&=67108863,i=Math.imul(C,j),n=(n=Math.imul(C,q))+Math.imul(D,j)|0,s=Math.imul(D,q),i=i+Math.imul(x,G)|0,n=(n=n+Math.imul(x,Y)|0)+Math.imul(K,G)|0,s=s+Math.imul(K,Y)|0,i=i+Math.imul(O,W)|0,n=(n=n+Math.imul(O,X)|0)+Math.imul(N,W)|0,s=s+Math.imul(N,X)|0,i=i+Math.imul(k,Q)|0,n=(n=n+Math.imul(k,$)|0)+Math.imul(A,Q)|0,s=s+Math.imul(A,$)|0,i=i+Math.imul(I,et)|0,n=(n=n+Math.imul(I,rt)|0)+Math.imul(M,et)|0,s=s+Math.imul(M,rt)|0,i=i+Math.imul(w,nt)|0,n=(n=n+Math.imul(w,st)|0)+Math.imul(_,nt)|0,s=s+Math.imul(_,st)|0,i=i+Math.imul(g,at)|0,n=(n=n+Math.imul(g,ut)|0)+Math.imul(y,at)|0,s=s+Math.imul(y,ut)|0,i=i+Math.imul(l,ft)|0,n=(n=n+Math.imul(l,ct)|0)+Math.imul(m,ft)|0,s=s+Math.imul(m,ct)|0;var At=(h+(i=i+Math.imul(c,pt)|0)|0)+((8191&(n=(n=n+Math.imul(c,mt)|0)+Math.imul(d,pt)|0))<<13)|0;h=((s=s+Math.imul(d,mt)|0)+(n>>>13)|0)+(At>>>26)|0,At&=67108863,i=Math.imul(U,j),n=(n=Math.imul(U,q))+Math.imul(L,j)|0,s=Math.imul(L,q),i=i+Math.imul(C,G)|0,n=(n=n+Math.imul(C,Y)|0)+Math.imul(D,G)|0,s=s+Math.imul(D,Y)|0,i=i+Math.imul(x,W)|0,n=(n=n+Math.imul(x,X)|0)+Math.imul(K,W)|0,s=s+Math.imul(K,X)|0,i=i+Math.imul(O,Q)|0,n=(n=n+Math.imul(O,$)|0)+Math.imul(N,Q)|0,s=s+Math.imul(N,$)|0,i=i+Math.imul(k,et)|0,n=(n=n+Math.imul(k,rt)|0)+Math.imul(A,et)|0,s=s+Math.imul(A,rt)|0,i=i+Math.imul(I,nt)|0,n=(n=n+Math.imul(I,st)|0)+Math.imul(M,nt)|0,s=s+Math.imul(M,st)|0,i=i+Math.imul(w,at)|0,n=(n=n+Math.imul(w,ut)|0)+Math.imul(_,at)|0,s=s+Math.imul(_,ut)|0,i=i+Math.imul(g,ft)|0,n=(n=n+Math.imul(g,ct)|0)+Math.imul(y,ft)|0,s=s+Math.imul(y,ct)|0,i=i+Math.imul(l,pt)|0,n=(n=n+Math.imul(l,mt)|0)+Math.imul(m,pt)|0,s=s+Math.imul(m,mt)|0;var Et=(h+(i=i+Math.imul(c,yt)|0)|0)+((8191&(n=(n=n+Math.imul(c,vt)|0)+Math.imul(d,yt)|0))<<13)|0;h=((s=s+Math.imul(d,vt)|0)+(n>>>13)|0)+(Et>>>26)|0,Et&=67108863,i=Math.imul(U,G),n=(n=Math.imul(U,Y))+Math.imul(L,G)|0,s=Math.imul(L,Y),i=i+Math.imul(C,W)|0,n=(n=n+Math.imul(C,X)|0)+Math.imul(D,W)|0,s=s+Math.imul(D,X)|0,i=i+Math.imul(x,Q)|0,n=(n=n+Math.imul(x,$)|0)+Math.imul(K,Q)|0,s=s+Math.imul(K,$)|0,i=i+Math.imul(O,et)|0,n=(n=n+Math.imul(O,rt)|0)+Math.imul(N,et)|0,s=s+Math.imul(N,rt)|0,i=i+Math.imul(k,nt)|0,n=(n=n+Math.imul(k,st)|0)+Math.imul(A,nt)|0,s=s+Math.imul(A,st)|0,i=i+Math.imul(I,at)|0,n=(n=n+Math.imul(I,ut)|0)+Math.imul(M,at)|0,s=s+Math.imul(M,ut)|0,i=i+Math.imul(w,ft)|0,n=(n=n+Math.imul(w,ct)|0)+Math.imul(_,ft)|0,s=s+Math.imul(_,ct)|0,i=i+Math.imul(g,pt)|0,n=(n=n+Math.imul(g,mt)|0)+Math.imul(y,pt)|0,s=s+Math.imul(y,mt)|0;var Ot=(h+(i=i+Math.imul(l,yt)|0)|0)+((8191&(n=(n=n+Math.imul(l,vt)|0)+Math.imul(m,yt)|0))<<13)|0;h=((s=s+Math.imul(m,vt)|0)+(n>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,i=Math.imul(U,W),n=(n=Math.imul(U,X))+Math.imul(L,W)|0,s=Math.imul(L,X),i=i+Math.imul(C,Q)|0,n=(n=n+Math.imul(C,$)|0)+Math.imul(D,Q)|0,s=s+Math.imul(D,$)|0,i=i+Math.imul(x,et)|0,n=(n=n+Math.imul(x,rt)|0)+Math.imul(K,et)|0,s=s+Math.imul(K,rt)|0,i=i+Math.imul(O,nt)|0,n=(n=n+Math.imul(O,st)|0)+Math.imul(N,nt)|0,s=s+Math.imul(N,st)|0,i=i+Math.imul(k,at)|0,n=(n=n+Math.imul(k,ut)|0)+Math.imul(A,at)|0,s=s+Math.imul(A,ut)|0,i=i+Math.imul(I,ft)|0,n=(n=n+Math.imul(I,ct)|0)+Math.imul(M,ft)|0,s=s+Math.imul(M,ct)|0,i=i+Math.imul(w,pt)|0,n=(n=n+Math.imul(w,mt)|0)+Math.imul(_,pt)|0,s=s+Math.imul(_,mt)|0;var Nt=(h+(i=i+Math.imul(g,yt)|0)|0)+((8191&(n=(n=n+Math.imul(g,vt)|0)+Math.imul(y,yt)|0))<<13)|0;h=((s=s+Math.imul(y,vt)|0)+(n>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,i=Math.imul(U,Q),n=(n=Math.imul(U,$))+Math.imul(L,Q)|0,s=Math.imul(L,$),i=i+Math.imul(C,et)|0,n=(n=n+Math.imul(C,rt)|0)+Math.imul(D,et)|0,s=s+Math.imul(D,rt)|0,i=i+Math.imul(x,nt)|0,n=(n=n+Math.imul(x,st)|0)+Math.imul(K,nt)|0,s=s+Math.imul(K,st)|0,i=i+Math.imul(O,at)|0,n=(n=n+Math.imul(O,ut)|0)+Math.imul(N,at)|0,s=s+Math.imul(N,ut)|0,i=i+Math.imul(k,ft)|0,n=(n=n+Math.imul(k,ct)|0)+Math.imul(A,ft)|0,s=s+Math.imul(A,ct)|0,i=i+Math.imul(I,pt)|0,n=(n=n+Math.imul(I,mt)|0)+Math.imul(M,pt)|0,s=s+Math.imul(M,mt)|0;var Tt=(h+(i=i+Math.imul(w,yt)|0)|0)+((8191&(n=(n=n+Math.imul(w,vt)|0)+Math.imul(_,yt)|0))<<13)|0;h=((s=s+Math.imul(_,vt)|0)+(n>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,i=Math.imul(U,et),n=(n=Math.imul(U,rt))+Math.imul(L,et)|0,s=Math.imul(L,rt),i=i+Math.imul(C,nt)|0,n=(n=n+Math.imul(C,st)|0)+Math.imul(D,nt)|0,s=s+Math.imul(D,st)|0,i=i+Math.imul(x,at)|0,n=(n=n+Math.imul(x,ut)|0)+Math.imul(K,at)|0,s=s+Math.imul(K,ut)|0,i=i+Math.imul(O,ft)|0,n=(n=n+Math.imul(O,ct)|0)+Math.imul(N,ft)|0,s=s+Math.imul(N,ct)|0,i=i+Math.imul(k,pt)|0,n=(n=n+Math.imul(k,mt)|0)+Math.imul(A,pt)|0,s=s+Math.imul(A,mt)|0;var Rt=(h+(i=i+Math.imul(I,yt)|0)|0)+((8191&(n=(n=n+Math.imul(I,vt)|0)+Math.imul(M,yt)|0))<<13)|0;h=((s=s+Math.imul(M,vt)|0)+(n>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,i=Math.imul(U,nt),n=(n=Math.imul(U,st))+Math.imul(L,nt)|0,s=Math.imul(L,st),i=i+Math.imul(C,at)|0,n=(n=n+Math.imul(C,ut)|0)+Math.imul(D,at)|0,s=s+Math.imul(D,ut)|0,i=i+Math.imul(x,ft)|0,n=(n=n+Math.imul(x,ct)|0)+Math.imul(K,ft)|0,s=s+Math.imul(K,ct)|0,i=i+Math.imul(O,pt)|0,n=(n=n+Math.imul(O,mt)|0)+Math.imul(N,pt)|0,s=s+Math.imul(N,mt)|0;var xt=(h+(i=i+Math.imul(k,yt)|0)|0)+((8191&(n=(n=n+Math.imul(k,vt)|0)+Math.imul(A,yt)|0))<<13)|0;h=((s=s+Math.imul(A,vt)|0)+(n>>>13)|0)+(xt>>>26)|0,xt&=67108863,i=Math.imul(U,at),n=(n=Math.imul(U,ut))+Math.imul(L,at)|0,s=Math.imul(L,ut),i=i+Math.imul(C,ft)|0,n=(n=n+Math.imul(C,ct)|0)+Math.imul(D,ft)|0,s=s+Math.imul(D,ct)|0,i=i+Math.imul(x,pt)|0,n=(n=n+Math.imul(x,mt)|0)+Math.imul(K,pt)|0,s=s+Math.imul(K,mt)|0;var Kt=(h+(i=i+Math.imul(O,yt)|0)|0)+((8191&(n=(n=n+Math.imul(O,vt)|0)+Math.imul(N,yt)|0))<<13)|0;h=((s=s+Math.imul(N,vt)|0)+(n>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,i=Math.imul(U,ft),n=(n=Math.imul(U,ct))+Math.imul(L,ft)|0,s=Math.imul(L,ct),i=i+Math.imul(C,pt)|0,n=(n=n+Math.imul(C,mt)|0)+Math.imul(D,pt)|0,s=s+Math.imul(D,mt)|0;var Ht=(h+(i=i+Math.imul(x,yt)|0)|0)+((8191&(n=(n=n+Math.imul(x,vt)|0)+Math.imul(K,yt)|0))<<13)|0;h=((s=s+Math.imul(K,vt)|0)+(n>>>13)|0)+(Ht>>>26)|0,Ht&=67108863,i=Math.imul(U,pt),n=(n=Math.imul(U,mt))+Math.imul(L,pt)|0,s=Math.imul(L,mt);var Ct=(h+(i=i+Math.imul(C,yt)|0)|0)+((8191&(n=(n=n+Math.imul(C,vt)|0)+Math.imul(D,yt)|0))<<13)|0;h=((s=s+Math.imul(D,vt)|0)+(n>>>13)|0)+(Ct>>>26)|0,Ct&=67108863;var Dt=(h+(i=Math.imul(U,yt))|0)+((8191&(n=(n=Math.imul(U,vt))+Math.imul(L,yt)|0))<<13)|0;return h=((s=Math.imul(L,vt))+(n>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,u[0]=St,u[1]=wt,u[2]=_t,u[3]=Pt,u[4]=It,u[5]=Mt,u[6]=Bt,u[7]=kt,u[8]=At,u[9]=Et,u[10]=Ot,u[11]=Nt,u[12]=Tt,u[13]=Rt,u[14]=xt,u[15]=Kt,u[16]=Ht,u[17]=Ct,u[18]=Dt,0!==h&&(u[19]=h,r.length++),r};function jumboMulTo(t,e,r){return(new FFTM).mulp(t,e,r)}function FFTM(t,e){this.x=t,this.y=e}Math.imul||(a=smallMulTo),BN.prototype.mulTo=function mulTo(t,e){var r,i=this.length+t.length;return r=10===this.length&&10===t.length?a(this,t,e):i<63?smallMulTo(this,t,e):i<1024?function bigMulTo(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var i=0,n=0,s=0;s<r.length-1;s++){var o=n;n=0;for(var a=67108863&i,u=Math.min(s,e.length-1),h=Math.max(0,s-t.length+1);h<=u;h++){var f=s-h,c=(0|t.words[f])*(0|e.words[h]),d=67108863&c;a=67108863&(d=d+a|0),n+=(o=(o=o+(c/67108864|0)|0)+(d>>>26)|0)>>>26,o&=67108863}r.words[s]=a,i=o,o=n}return 0!==i?r.words[s]=i:r.length--,r.strip()}(this,t,e):jumboMulTo(this,t,e),r},FFTM.prototype.makeRBT=function makeRBT(t){for(var e=new Array(t),r=BN.prototype._countBits(t)-1,i=0;i<t;i++)e[i]=this.revBin(i,r,t);return e},FFTM.prototype.revBin=function revBin(t,e,r){if(0===t||t===r-1)return t;for(var i=0,n=0;n<e;n++)i|=(1&t)<<e-n-1,t>>=1;return i},FFTM.prototype.permute=function permute(t,e,r,i,n,s){for(var o=0;o<s;o++)i[o]=e[t[o]],n[o]=r[t[o]]},FFTM.prototype.transform=function transform(t,e,r,i,n,s){this.permute(s,t,e,r,i,n);for(var o=1;o<n;o<<=1)for(var a=o<<1,u=Math.cos(2*Math.PI/a),h=Math.sin(2*Math.PI/a),f=0;f<n;f+=a)for(var c=u,d=h,p=0;p<o;p++){var l=r[f+p],m=i[f+p],b=r[f+p+o],g=i[f+p+o],y=c*b-d*g;g=c*g+d*b,b=y,r[f+p]=l+b,i[f+p]=m+g,r[f+p+o]=l-b,i[f+p+o]=m-g,p!==a&&(y=u*c-h*d,d=u*d+h*c,c=y)}},FFTM.prototype.guessLen13b=function guessLen13b(t,e){var r=1|Math.max(e,t),i=1&r,n=0;for(r=r/2|0;r;r>>>=1)n++;return 1<<n+1+i},FFTM.prototype.conjugate=function conjugate(t,e,r){if(!(r<=1))for(var i=0;i<r/2;i++){var n=t[i];t[i]=t[r-i-1],t[r-i-1]=n,n=e[i],e[i]=-e[r-i-1],e[r-i-1]=-n}},FFTM.prototype.normalize13b=function normalize13b(t,e){for(var r=0,i=0;i<e/2;i++){var n=8192*Math.round(t[2*i+1]/e)+Math.round(t[2*i]/e)+r;t[i]=67108863&n,r=n<67108864?0:n/67108864|0}return t},FFTM.prototype.convert13b=function convert13b(t,e,r,i){for(var n=0,s=0;s<e;s++)n+=0|t[s],r[2*s]=8191&n,n>>>=13,r[2*s+1]=8191&n,n>>>=13;for(s=2*e;s<i;++s)r[s]=0;assert(0===n),assert(!(-8192&n))},FFTM.prototype.stub=function stub(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=0;return e},FFTM.prototype.mulp=function mulp(t,e,r){var i=2*this.guessLen13b(t.length,e.length),n=this.makeRBT(i),s=this.stub(i),o=new Array(i),a=new Array(i),u=new Array(i),h=new Array(i),f=new Array(i),c=new Array(i),d=r.words;d.length=i,this.convert13b(t.words,t.length,o,i),this.convert13b(e.words,e.length,h,i),this.transform(o,s,a,u,i,n),this.transform(h,s,f,c,i,n);for(var p=0;p<i;p++){var l=a[p]*f[p]-u[p]*c[p];u[p]=a[p]*c[p]+u[p]*f[p],a[p]=l}return this.conjugate(a,u,i),this.transform(a,u,d,s,i,n),this.conjugate(d,s,i),this.normalize13b(d,i),r.negative=t.negative^e.negative,r.length=t.length+e.length,r.strip()},BN.prototype.mul=function mul(t){var e=new BN(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},BN.prototype.mulf=function mulf(t){var e=new BN(null);return e.words=new Array(this.length+t.length),jumboMulTo(this,t,e)},BN.prototype.imul=function imul(t){return this.clone().mulTo(t,this)},BN.prototype.imuln=function imuln(t){assert("number"==typeof t),assert(t<67108864);for(var e=0,r=0;r<this.length;r++){var i=(0|this.words[r])*t,n=(67108863&i)+(67108863&e);e>>=26,e+=i/67108864|0,e+=n>>>26,this.words[r]=67108863&n}return 0!==e&&(this.words[r]=e,this.length++),this},BN.prototype.muln=function muln(t){return this.clone().imuln(t)},BN.prototype.sqr=function sqr(){return this.mul(this)},BN.prototype.isqr=function isqr(){return this.imul(this.clone())},BN.prototype.pow=function pow(t){var e=function toBitArray(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var i=r/26|0,n=r%26;e[r]=(t.words[i]&1<<n)>>>n}return e}(t);if(0===e.length)return new BN(1);for(var r=this,i=0;i<e.length&&0===e[i];i++,r=r.sqr());if(++i<e.length)for(var n=r.sqr();i<e.length;i++,n=n.sqr())0!==e[i]&&(r=r.mul(n));return r},BN.prototype.iushln=function iushln(t){assert("number"==typeof t&&t>=0);var e,r=t%26,i=(t-r)/26,n=67108863>>>26-r<<26-r;if(0!==r){var s=0;for(e=0;e<this.length;e++){var o=this.words[e]&n,a=(0|this.words[e])-o<<r;this.words[e]=a|s,s=o>>>26-r}s&&(this.words[e]=s,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this.strip()},BN.prototype.ishln=function ishln(t){return assert(0===this.negative),this.iushln(t)},BN.prototype.iushrn=function iushrn(t,e,r){var i;assert("number"==typeof t&&t>=0),i=e?(e-e%26)/26:0;var n=t%26,s=Math.min((t-n)/26,this.length),o=67108863^67108863>>>n<<n,a=r;if(i-=s,i=Math.max(0,i),a){for(var u=0;u<s;u++)a.words[u]=this.words[u];a.length=s}if(0===s);else if(this.length>s)for(this.length-=s,u=0;u<this.length;u++)this.words[u]=this.words[u+s];else this.words[0]=0,this.length=1;var h=0;for(u=this.length-1;u>=0&&(0!==h||u>=i);u--){var f=0|this.words[u];this.words[u]=h<<26-n|f>>>n,h=f&o}return a&&0!==h&&(a.words[a.length++]=h),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},BN.prototype.ishrn=function ishrn(t,e,r){return assert(0===this.negative),this.iushrn(t,e,r)},BN.prototype.shln=function shln(t){return this.clone().ishln(t)},BN.prototype.ushln=function ushln(t){return this.clone().iushln(t)},BN.prototype.shrn=function shrn(t){return this.clone().ishrn(t)},BN.prototype.ushrn=function ushrn(t){return this.clone().iushrn(t)},BN.prototype.testn=function testn(t){assert("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26,i=1<<e;return!(this.length<=r)&&!!(this.words[r]&i)},BN.prototype.imaskn=function imaskn(t){assert("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26;if(assert(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==e&&r++,this.length=Math.min(r,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this.strip()},BN.prototype.maskn=function maskn(t){return this.clone().imaskn(t)},BN.prototype.iaddn=function iaddn(t){return assert("number"==typeof t),assert(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},BN.prototype._iaddn=function _iaddn(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},BN.prototype.isubn=function isubn(t){if(assert("number"==typeof t),assert(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},BN.prototype.addn=function addn(t){return this.clone().iaddn(t)},BN.prototype.subn=function subn(t){return this.clone().isubn(t)},BN.prototype.iabs=function iabs(){return this.negative=0,this},BN.prototype.abs=function abs(){return this.clone().iabs()},BN.prototype._ishlnsubmul=function _ishlnsubmul(t,e,r){var i,n,s=t.length+r;this._expand(s);var o=0;for(i=0;i<t.length;i++){n=(0|this.words[i+r])+o;var a=(0|t.words[i])*e;o=((n-=67108863&a)>>26)-(a/67108864|0),this.words[i+r]=67108863&n}for(;i<this.length-r;i++)o=(n=(0|this.words[i+r])+o)>>26,this.words[i+r]=67108863&n;if(0===o)return this.strip();for(assert(-1===o),o=0,i=0;i<this.length;i++)o=(n=-(0|this.words[i])+o)>>26,this.words[i]=67108863&n;return this.negative=1,this.strip()},BN.prototype._wordDiv=function _wordDiv(t,e){var r=(this.length,t.length),i=this.clone(),n=t,s=0|n.words[n.length-1];0!==(r=26-this._countBits(s))&&(n=n.ushln(r),i.iushln(r),s=0|n.words[n.length-1]);var o,a=i.length-n.length;if("mod"!==e){(o=new BN(null)).length=a+1,o.words=new Array(o.length);for(var u=0;u<o.length;u++)o.words[u]=0}var h=i.clone()._ishlnsubmul(n,1,a);0===h.negative&&(i=h,o&&(o.words[a]=1));for(var f=a-1;f>=0;f--){var c=67108864*(0|i.words[n.length+f])+(0|i.words[n.length+f-1]);for(c=Math.min(c/s|0,67108863),i._ishlnsubmul(n,c,f);0!==i.negative;)c--,i.negative=0,i._ishlnsubmul(n,1,f),i.isZero()||(i.negative^=1);o&&(o.words[f]=c)}return o&&o.strip(),i.strip(),"div"!==e&&0!==r&&i.iushrn(r),{div:o||null,mod:i}},BN.prototype.divmod=function divmod(t,e,r){return assert(!t.isZero()),this.isZero()?{div:new BN(0),mod:new BN(0)}:0!==this.negative&&0===t.negative?(s=this.neg().divmod(t,e),"mod"!==e&&(i=s.div.neg()),"div"!==e&&(n=s.mod.neg(),r&&0!==n.negative&&n.iadd(t)),{div:i,mod:n}):0===this.negative&&0!==t.negative?(s=this.divmod(t.neg(),e),"mod"!==e&&(i=s.div.neg()),{div:i,mod:s.mod}):this.negative&t.negative?(s=this.neg().divmod(t.neg(),e),"div"!==e&&(n=s.mod.neg(),r&&0!==n.negative&&n.isub(t)),{div:s.div,mod:n}):t.length>this.length||this.cmp(t)<0?{div:new BN(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new BN(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new BN(this.modn(t.words[0]))}:this._wordDiv(t,e);var i,n,s},BN.prototype.div=function div(t){return this.divmod(t,"div",!1).div},BN.prototype.mod=function mod(t){return this.divmod(t,"mod",!1).mod},BN.prototype.umod=function umod(t){return this.divmod(t,"mod",!0).mod},BN.prototype.divRound=function divRound(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,i=t.ushrn(1),n=t.andln(1),s=r.cmp(i);return s<0||1===n&&0===s?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},BN.prototype.modn=function modn(t){assert(t<=67108863);for(var e=(1<<26)%t,r=0,i=this.length-1;i>=0;i--)r=(e*r+(0|this.words[i]))%t;return r},BN.prototype.idivn=function idivn(t){assert(t<=67108863);for(var e=0,r=this.length-1;r>=0;r--){var i=(0|this.words[r])+67108864*e;this.words[r]=i/t|0,e=i%t}return this.strip()},BN.prototype.divn=function divn(t){return this.clone().idivn(t)},BN.prototype.egcd=function egcd(t){assert(0===t.negative),assert(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i=new BN(1),n=new BN(0),s=new BN(0),o=new BN(1),a=0;e.isEven()&&r.isEven();)e.iushrn(1),r.iushrn(1),++a;for(var u=r.clone(),h=e.clone();!e.isZero();){for(var f=0,c=1;!(e.words[0]&c)&&f<26;++f,c<<=1);if(f>0)for(e.iushrn(f);f-- >0;)(i.isOdd()||n.isOdd())&&(i.iadd(u),n.isub(h)),i.iushrn(1),n.iushrn(1);for(var d=0,p=1;!(r.words[0]&p)&&d<26;++d,p<<=1);if(d>0)for(r.iushrn(d);d-- >0;)(s.isOdd()||o.isOdd())&&(s.iadd(u),o.isub(h)),s.iushrn(1),o.iushrn(1);e.cmp(r)>=0?(e.isub(r),i.isub(s),n.isub(o)):(r.isub(e),s.isub(i),o.isub(n))}return{a:s,b:o,gcd:r.iushln(a)}},BN.prototype._invmp=function _invmp(t){assert(0===t.negative),assert(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i,n=new BN(1),s=new BN(0),o=r.clone();e.cmpn(1)>0&&r.cmpn(1)>0;){for(var a=0,u=1;!(e.words[0]&u)&&a<26;++a,u<<=1);if(a>0)for(e.iushrn(a);a-- >0;)n.isOdd()&&n.iadd(o),n.iushrn(1);for(var h=0,f=1;!(r.words[0]&f)&&h<26;++h,f<<=1);if(h>0)for(r.iushrn(h);h-- >0;)s.isOdd()&&s.iadd(o),s.iushrn(1);e.cmp(r)>=0?(e.isub(r),n.isub(s)):(r.isub(e),s.isub(n))}return(i=0===e.cmpn(1)?n:s).cmpn(0)<0&&i.iadd(t),i},BN.prototype.gcd=function gcd(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var i=0;e.isEven()&&r.isEven();i++)e.iushrn(1),r.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;r.isEven();)r.iushrn(1);var n=e.cmp(r);if(n<0){var s=e;e=r,r=s}else if(0===n||0===r.cmpn(1))break;e.isub(r)}return r.iushln(i)},BN.prototype.invm=function invm(t){return this.egcd(t).a.umod(t)},BN.prototype.isEven=function isEven(){return!(1&this.words[0])},BN.prototype.isOdd=function isOdd(){return!(1&~this.words[0])},BN.prototype.andln=function andln(t){return this.words[0]&t},BN.prototype.bincn=function bincn(t){assert("number"==typeof t);var e=t%26,r=(t-e)/26,i=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var n=i,s=r;0!==n&&s<this.length;s++){var o=0|this.words[s];n=(o+=n)>>>26,o&=67108863,this.words[s]=o}return 0!==n&&(this.words[s]=n,this.length++),this},BN.prototype.isZero=function isZero(){return 1===this.length&&0===this.words[0]},BN.prototype.cmpn=function cmpn(t){var e,r=t<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)e=1;else{r&&(t=-t),assert(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},BN.prototype.cmp=function cmp(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},BN.prototype.ucmp=function ucmp(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,r=this.length-1;r>=0;r--){var i=0|this.words[r],n=0|t.words[r];if(i!==n){i<n?e=-1:i>n&&(e=1);break}}return e},BN.prototype.gtn=function gtn(t){return 1===this.cmpn(t)},BN.prototype.gt=function gt(t){return 1===this.cmp(t)},BN.prototype.gten=function gten(t){return this.cmpn(t)>=0},BN.prototype.gte=function gte(t){return this.cmp(t)>=0},BN.prototype.ltn=function ltn(t){return-1===this.cmpn(t)},BN.prototype.lt=function lt(t){return-1===this.cmp(t)},BN.prototype.lten=function lten(t){return this.cmpn(t)<=0},BN.prototype.lte=function lte(t){return this.cmp(t)<=0},BN.prototype.eqn=function eqn(t){return 0===this.cmpn(t)},BN.prototype.eq=function eq(t){return 0===this.cmp(t)},BN.red=function red(t){return new Red(t)},BN.prototype.toRed=function toRed(t){return assert(!this.red,"Already a number in reduction context"),assert(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},BN.prototype.fromRed=function fromRed(){return assert(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},BN.prototype._forceRed=function _forceRed(t){return this.red=t,this},BN.prototype.forceRed=function forceRed(t){return assert(!this.red,"Already a number in reduction context"),this._forceRed(t)},BN.prototype.redAdd=function redAdd(t){return assert(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},BN.prototype.redIAdd=function redIAdd(t){return assert(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},BN.prototype.redSub=function redSub(t){return assert(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},BN.prototype.redISub=function redISub(t){return assert(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},BN.prototype.redShl=function redShl(t){return assert(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},BN.prototype.redMul=function redMul(t){return assert(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},BN.prototype.redIMul=function redIMul(t){return assert(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},BN.prototype.redSqr=function redSqr(){return assert(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},BN.prototype.redISqr=function redISqr(){return assert(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},BN.prototype.redSqrt=function redSqrt(){return assert(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},BN.prototype.redInvm=function redInvm(){return assert(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},BN.prototype.redNeg=function redNeg(){return assert(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},BN.prototype.redPow=function redPow(t){return assert(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var u={k256:null,p224:null,p192:null,p25519:null};function MPrime(t,e){this.name=t,this.p=new BN(e,16),this.n=this.p.bitLength(),this.k=new BN(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function K256(){MPrime.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function P224(){MPrime.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function P192(){MPrime.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function P25519(){MPrime.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function Red(t){if("string"==typeof t){var e=BN._prime(t);this.m=e.p,this.prime=e}else assert(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function Mont(t){Red.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new BN(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}MPrime.prototype._tmp=function _tmp(){var t=new BN(null);return t.words=new Array(Math.ceil(this.n/13)),t},MPrime.prototype.ireduce=function ireduce(t){var e,r=t;do{this.split(r,this.tmp),e=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(e>this.n);var i=e<this.n?-1:r.ucmp(this.p);return 0===i?(r.words[0]=0,r.length=1):i>0?r.isub(this.p):r.strip(),r},MPrime.prototype.split=function split(t,e){t.iushrn(this.n,0,e)},MPrime.prototype.imulK=function imulK(t){return t.imul(this.k)},inherits(K256,MPrime),K256.prototype.split=function split(t,e){for(var r=4194303,i=Math.min(t.length,9),n=0;n<i;n++)e.words[n]=t.words[n];if(e.length=i,t.length<=9)return t.words[0]=0,void(t.length=1);var s=t.words[9];for(e.words[e.length++]=s&r,n=10;n<t.length;n++){var o=0|t.words[n];t.words[n-10]=(o&r)<<4|s>>>22,s=o}s>>>=22,t.words[n-10]=s,0===s&&t.length>10?t.length-=10:t.length-=9},K256.prototype.imulK=function imulK(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var i=0|t.words[r];e+=977*i,t.words[r]=67108863&e,e=64*i+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},inherits(P224,MPrime),inherits(P192,MPrime),inherits(P25519,MPrime),P25519.prototype.imulK=function imulK(t){for(var e=0,r=0;r<t.length;r++){var i=19*(0|t.words[r])+e,n=67108863&i;i>>>=26,t.words[r]=n,e=i}return 0!==e&&(t.words[t.length++]=e),t},BN._prime=function prime(t){if(u[t])return u[t];var prime;if("k256"===t)prime=new K256;else if("p224"===t)prime=new P224;else if("p192"===t)prime=new P192;else{if("p25519"!==t)throw new Error("Unknown prime "+t);prime=new P25519}return u[t]=prime,prime},Red.prototype._verify1=function _verify1(t){assert(0===t.negative,"red works only with positives"),assert(t.red,"red works only with red numbers")},Red.prototype._verify2=function _verify2(t,e){assert(!(t.negative|e.negative),"red works only with positives"),assert(t.red&&t.red===e.red,"red works only with red numbers")},Red.prototype.imod=function imod(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},Red.prototype.neg=function neg(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},Red.prototype.add=function add(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},Red.prototype.iadd=function iadd(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},Red.prototype.sub=function sub(t,e){this._verify2(t,e);var r=t.sub(e);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},Red.prototype.isub=function isub(t,e){this._verify2(t,e);var r=t.isub(e);return r.cmpn(0)<0&&r.iadd(this.m),r},Red.prototype.shl=function shl(t,e){return this._verify1(t),this.imod(t.ushln(e))},Red.prototype.imul=function imul(t,e){return this._verify2(t,e),this.imod(t.imul(e))},Red.prototype.mul=function mul(t,e){return this._verify2(t,e),this.imod(t.mul(e))},Red.prototype.isqr=function isqr(t){return this.imul(t,t.clone())},Red.prototype.sqr=function sqr(t){return this.mul(t,t)},Red.prototype.sqrt=function sqrt(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(assert(e%2==1),3===e){var r=this.m.add(new BN(1)).iushrn(2);return this.pow(t,r)}for(var i=this.m.subn(1),n=0;!i.isZero()&&0===i.andln(1);)n++,i.iushrn(1);assert(!i.isZero());var s=new BN(1).toRed(this),o=s.redNeg(),a=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new BN(2*u*u).toRed(this);0!==this.pow(u,a).cmp(o);)u.redIAdd(o);for(var h=this.pow(u,i),f=this.pow(t,i.addn(1).iushrn(1)),c=this.pow(t,i),d=n;0!==c.cmp(s);){for(var p=c,l=0;0!==p.cmp(s);l++)p=p.redSqr();assert(l<d);var m=this.pow(h,new BN(1).iushln(d-l-1));f=f.redMul(m),h=m.redSqr(),c=c.redMul(h),d=l}return f},Red.prototype.invm=function invm(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},Red.prototype.pow=function pow(t,e){if(e.isZero())return new BN(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=new Array(16);r[0]=new BN(1).toRed(this),r[1]=t;for(var i=2;i<r.length;i++)r[i]=this.mul(r[i-1],t);var n=r[0],s=0,o=0,a=e.bitLength()%26;for(0===a&&(a=26),i=e.length-1;i>=0;i--){for(var u=e.words[i],h=a-1;h>=0;h--){var f=u>>h&1;n!==r[0]&&(n=this.sqr(n)),0!==f||0!==s?(s<<=1,s|=f,(4===++o||0===i&&0===h)&&(n=this.mul(n,r[s]),o=0,s=0)):o=0}a=26}return n},Red.prototype.convertTo=function convertTo(t){var e=t.umod(this.m);return e===t?e.clone():e},Red.prototype.convertFrom=function convertFrom(t){var e=t.clone();return e.red=null,e},BN.mont=function mont(t){return new Mont(t)},inherits(Mont,Red),Mont.prototype.convertTo=function convertTo(t){return this.imod(t.ushln(this.shift))},Mont.prototype.convertFrom=function convertFrom(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},Mont.prototype.imul=function imul(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),i=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=r.isub(i).iushrn(this.shift),s=n;return n.cmp(this.m)>=0?s=n.isub(this.m):n.cmpn(0)<0&&(s=n.iadd(this.m)),s._forceRed(this)},Mont.prototype.mul=function mul(t,e){if(t.isZero()||e.isZero())return new BN(0)._forceRed(this);var r=t.mul(e),i=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=r.isub(i).iushrn(this.shift),s=n;return n.cmp(this.m)>=0?s=n.isub(this.m):n.cmpn(0)<0&&(s=n.iadd(this.m)),s._forceRed(this)},Mont.prototype.invm=function invm(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t=r.nmd(t),this)},590653:(t,e,r)=>{"use strict";var i=e;i.version=r(131664).rE,i.utils=r(17671),i.rand=r(247048),i.curve=r(203442),i.curves=r(361468),i.ec=r(697891),i.eddsa=r(714798)},110193:(t,e,r)=>{"use strict";var i=r(956054),n=r(17671),s=n.getNAF,o=n.getJSF,a=n.assert;function BaseCurve(t,e){this.type=t,this.p=new i(e.p,16),this.red=e.prime?i.red(e.prime):i.mont(this.p),this.zero=new i(0).toRed(this.red),this.one=new i(1).toRed(this.red),this.two=new i(2).toRed(this.red),this.n=e.n&&new i(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function BasePoint(t,e){this.curve=t,this.type=e,this.precomputed=null}t.exports=BaseCurve,BaseCurve.prototype.point=function point(){throw new Error("Not implemented")},BaseCurve.prototype.validate=function validate(){throw new Error("Not implemented")},BaseCurve.prototype._fixedNafMul=function _fixedNafMul(t,e){a(t.precomputed);var r=t._getDoubles(),i=s(e,1,this._bitLength),n=(1<<r.step+1)-(r.step%2==0?2:1);n/=3;var o,u,h=[];for(o=0;o<i.length;o+=r.step){u=0;for(var f=o+r.step-1;f>=o;f--)u=(u<<1)+i[f];h.push(u)}for(var c=this.jpoint(null,null,null),d=this.jpoint(null,null,null),p=n;p>0;p--){for(o=0;o<h.length;o++)(u=h[o])===p?d=d.mixedAdd(r.points[o]):u===-p&&(d=d.mixedAdd(r.points[o].neg()));c=c.add(d)}return c.toP()},BaseCurve.prototype._wnafMul=function _wnafMul(t,e){var r=4,i=t._getNAFPoints(r);r=i.wnd;for(var n=i.points,o=s(e,r,this._bitLength),u=this.jpoint(null,null,null),h=o.length-1;h>=0;h--){for(var f=0;h>=0&&0===o[h];h--)f++;if(h>=0&&f++,u=u.dblp(f),h<0)break;var c=o[h];a(0!==c),u="affine"===t.type?c>0?u.mixedAdd(n[c-1>>1]):u.mixedAdd(n[-c-1>>1].neg()):c>0?u.add(n[c-1>>1]):u.add(n[-c-1>>1].neg())}return"affine"===t.type?u.toP():u},BaseCurve.prototype._wnafMulAdd=function _wnafMulAdd(t,e,r,i,n){var a,u,h,f=this._wnafT1,c=this._wnafT2,d=this._wnafT3,p=0;for(a=0;a<i;a++){var l=(h=e[a])._getNAFPoints(t);f[a]=l.wnd,c[a]=l.points}for(a=i-1;a>=1;a-=2){var m=a-1,b=a;if(1===f[m]&&1===f[b]){var g=[e[m],null,null,e[b]];0===e[m].y.cmp(e[b].y)?(g[1]=e[m].add(e[b]),g[2]=e[m].toJ().mixedAdd(e[b].neg())):0===e[m].y.cmp(e[b].y.redNeg())?(g[1]=e[m].toJ().mixedAdd(e[b]),g[2]=e[m].add(e[b].neg())):(g[1]=e[m].toJ().mixedAdd(e[b]),g[2]=e[m].toJ().mixedAdd(e[b].neg()));var y=[-3,-1,-5,-7,0,7,5,1,3],v=o(r[m],r[b]);for(p=Math.max(v[0].length,p),d[m]=new Array(p),d[b]=new Array(p),u=0;u<p;u++){var w=0|v[0][u],_=0|v[1][u];d[m][u]=y[3*(w+1)+(_+1)],d[b][u]=0,c[m]=g}}else d[m]=s(r[m],f[m],this._bitLength),d[b]=s(r[b],f[b],this._bitLength),p=Math.max(d[m].length,p),p=Math.max(d[b].length,p)}var P=this.jpoint(null,null,null),I=this._wnafT4;for(a=p;a>=0;a--){for(var M=0;a>=0;){var B=!0;for(u=0;u<i;u++)I[u]=0|d[u][a],0!==I[u]&&(B=!1);if(!B)break;M++,a--}if(a>=0&&M++,P=P.dblp(M),a<0)break;for(u=0;u<i;u++){var k=I[u];0!==k&&(k>0?h=c[u][k-1>>1]:k<0&&(h=c[u][-k-1>>1].neg()),P="affine"===h.type?P.mixedAdd(h):P.add(h))}}for(a=0;a<i;a++)c[a]=null;return n?P:P.toP()},BaseCurve.BasePoint=BasePoint,BasePoint.prototype.eq=function eq(){throw new Error("Not implemented")},BasePoint.prototype.validate=function validate(){return this.curve.validate(this)},BaseCurve.prototype.decodePoint=function decodePoint(t,e){t=n.toArray(t,e);var r=this.p.byteLength();if((4===t[0]||6===t[0]||7===t[0])&&t.length-1==2*r)return 6===t[0]?a(t[t.length-1]%2==0):7===t[0]&&a(t[t.length-1]%2==1),this.point(t.slice(1,1+r),t.slice(1+r,1+2*r));if((2===t[0]||3===t[0])&&t.length-1===r)return this.pointFromX(t.slice(1,1+r),3===t[0]);throw new Error("Unknown point format")},BasePoint.prototype.encodeCompressed=function encodeCompressed(t){return this.encode(t,!0)},BasePoint.prototype._encode=function _encode(t){var e=this.curve.p.byteLength(),r=this.getX().toArray("be",e);return t?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",e))},BasePoint.prototype.encode=function encode(t,e){return n.encode(this._encode(e),t)},BasePoint.prototype.precompute=function precompute(t){if(this.precomputed)return this;var e={doubles:null,naf:null,beta:null};return e.naf=this._getNAFPoints(8),e.doubles=this._getDoubles(4,t),e.beta=this._getBeta(),this.precomputed=e,this},BasePoint.prototype._hasDoubles=function _hasDoubles(t){if(!this.precomputed)return!1;var e=this.precomputed.doubles;return!!e&&e.points.length>=Math.ceil((t.bitLength()+1)/e.step)},BasePoint.prototype._getDoubles=function _getDoubles(t,e){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],i=this,n=0;n<e;n+=t){for(var s=0;s<t;s++)i=i.dbl();r.push(i)}return{step:t,points:r}},BasePoint.prototype._getNAFPoints=function _getNAFPoints(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var e=[this],r=(1<<t)-1,i=1===r?null:this.dbl(),n=1;n<r;n++)e[n]=e[n-1].add(i);return{wnd:t,points:e}},BasePoint.prototype._getBeta=function _getBeta(){return null},BasePoint.prototype.dblp=function dblp(t){for(var e=this,r=0;r<t;r++)e=e.dbl();return e}},182318:(t,e,r)=>{"use strict";var i=r(17671),n=r(956054),s=r(633472),o=r(110193),a=i.assert;function EdwardsCurve(t){this.twisted=1!=(0|t.a),this.mOneA=this.twisted&&-1==(0|t.a),this.extended=this.mOneA,o.call(this,"edwards",t),this.a=new n(t.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new n(t.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new n(t.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),a(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==(0|t.c)}function Point(t,e,r,i,s){o.BasePoint.call(this,t,"projective"),null===e&&null===r&&null===i?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new n(e,16),this.y=new n(r,16),this.z=i?new n(i,16):this.curve.one,this.t=s&&new n(s,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}s(EdwardsCurve,o),t.exports=EdwardsCurve,EdwardsCurve.prototype._mulA=function _mulA(t){return this.mOneA?t.redNeg():this.a.redMul(t)},EdwardsCurve.prototype._mulC=function _mulC(t){return this.oneC?t:this.c.redMul(t)},EdwardsCurve.prototype.jpoint=function jpoint(t,e,r,i){return this.point(t,e,r,i)},EdwardsCurve.prototype.pointFromX=function pointFromX(t,e){(t=new n(t,16)).red||(t=t.toRed(this.red));var r=t.redSqr(),i=this.c2.redSub(this.a.redMul(r)),s=this.one.redSub(this.c2.redMul(this.d).redMul(r)),o=i.redMul(s.redInvm()),a=o.redSqrt();if(0!==a.redSqr().redSub(o).cmp(this.zero))throw new Error("invalid point");var u=a.fromRed().isOdd();return(e&&!u||!e&&u)&&(a=a.redNeg()),this.point(t,a)},EdwardsCurve.prototype.pointFromY=function pointFromY(t,e){(t=new n(t,16)).red||(t=t.toRed(this.red));var r=t.redSqr(),i=r.redSub(this.c2),s=r.redMul(this.d).redMul(this.c2).redSub(this.a),o=i.redMul(s.redInvm());if(0===o.cmp(this.zero)){if(e)throw new Error("invalid point");return this.point(this.zero,t)}var a=o.redSqrt();if(0!==a.redSqr().redSub(o).cmp(this.zero))throw new Error("invalid point");return a.fromRed().isOdd()!==e&&(a=a.redNeg()),this.point(a,t)},EdwardsCurve.prototype.validate=function validate(t){if(t.isInfinity())return!0;t.normalize();var e=t.x.redSqr(),r=t.y.redSqr(),i=e.redMul(this.a).redAdd(r),n=this.c2.redMul(this.one.redAdd(this.d.redMul(e).redMul(r)));return 0===i.cmp(n)},s(Point,o.BasePoint),EdwardsCurve.prototype.pointFromJSON=function pointFromJSON(t){return Point.fromJSON(this,t)},EdwardsCurve.prototype.point=function point(t,e,r,i){return new Point(this,t,e,r,i)},Point.fromJSON=function fromJSON(t,e){return new Point(t,e[0],e[1],e[2])},Point.prototype.inspect=function inspect(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},Point.prototype.isInfinity=function isInfinity(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},Point.prototype._extDbl=function _extDbl(){var t=this.x.redSqr(),e=this.y.redSqr(),r=this.z.redSqr();r=r.redIAdd(r);var i=this.curve._mulA(t),n=this.x.redAdd(this.y).redSqr().redISub(t).redISub(e),s=i.redAdd(e),o=s.redSub(r),a=i.redSub(e),u=n.redMul(o),h=s.redMul(a),f=n.redMul(a),c=o.redMul(s);return this.curve.point(u,h,c,f)},Point.prototype._projDbl=function _projDbl(){var t,e,r,i,n,s,o=this.x.redAdd(this.y).redSqr(),a=this.x.redSqr(),u=this.y.redSqr();if(this.curve.twisted){var h=(i=this.curve._mulA(a)).redAdd(u);this.zOne?(t=o.redSub(a).redSub(u).redMul(h.redSub(this.curve.two)),e=h.redMul(i.redSub(u)),r=h.redSqr().redSub(h).redSub(h)):(n=this.z.redSqr(),s=h.redSub(n).redISub(n),t=o.redSub(a).redISub(u).redMul(s),e=h.redMul(i.redSub(u)),r=h.redMul(s))}else i=a.redAdd(u),n=this.curve._mulC(this.z).redSqr(),s=i.redSub(n).redSub(n),t=this.curve._mulC(o.redISub(i)).redMul(s),e=this.curve._mulC(i).redMul(a.redISub(u)),r=i.redMul(s);return this.curve.point(t,e,r)},Point.prototype.dbl=function dbl(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},Point.prototype._extAdd=function _extAdd(t){var e=this.y.redSub(this.x).redMul(t.y.redSub(t.x)),r=this.y.redAdd(this.x).redMul(t.y.redAdd(t.x)),i=this.t.redMul(this.curve.dd).redMul(t.t),n=this.z.redMul(t.z.redAdd(t.z)),s=r.redSub(e),o=n.redSub(i),a=n.redAdd(i),u=r.redAdd(e),h=s.redMul(o),f=a.redMul(u),c=s.redMul(u),d=o.redMul(a);return this.curve.point(h,f,d,c)},Point.prototype._projAdd=function _projAdd(t){var e,r,i=this.z.redMul(t.z),n=i.redSqr(),s=this.x.redMul(t.x),o=this.y.redMul(t.y),a=this.curve.d.redMul(s).redMul(o),u=n.redSub(a),h=n.redAdd(a),f=this.x.redAdd(this.y).redMul(t.x.redAdd(t.y)).redISub(s).redISub(o),c=i.redMul(u).redMul(f);return this.curve.twisted?(e=i.redMul(h).redMul(o.redSub(this.curve._mulA(s))),r=u.redMul(h)):(e=i.redMul(h).redMul(o.redSub(s)),r=this.curve._mulC(u).redMul(h)),this.curve.point(c,e,r)},Point.prototype.add=function add(t){return this.isInfinity()?t:t.isInfinity()?this:this.curve.extended?this._extAdd(t):this._projAdd(t)},Point.prototype.mul=function mul(t){return this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve._wnafMul(this,t)},Point.prototype.mulAdd=function mulAdd(t,e,r){return this.curve._wnafMulAdd(1,[this,e],[t,r],2,!1)},Point.prototype.jmulAdd=function jmulAdd(t,e,r){return this.curve._wnafMulAdd(1,[this,e],[t,r],2,!0)},Point.prototype.normalize=function normalize(){if(this.zOne)return this;var t=this.z.redInvm();return this.x=this.x.redMul(t),this.y=this.y.redMul(t),this.t&&(this.t=this.t.redMul(t)),this.z=this.curve.one,this.zOne=!0,this},Point.prototype.neg=function neg(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},Point.prototype.getX=function getX(){return this.normalize(),this.x.fromRed()},Point.prototype.getY=function getY(){return this.normalize(),this.y.fromRed()},Point.prototype.eq=function eq(t){return this===t||0===this.getX().cmp(t.getX())&&0===this.getY().cmp(t.getY())},Point.prototype.eqXToP=function eqXToP(t){var e=t.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(e))return!0;for(var r=t.clone(),i=this.curve.redN.redMul(this.z);;){if(r.iadd(this.curve.n),r.cmp(this.curve.p)>=0)return!1;if(e.redIAdd(i),0===this.x.cmp(e))return!0}},Point.prototype.toP=Point.prototype.normalize,Point.prototype.mixedAdd=Point.prototype.add},203442:(t,e,r)=>{"use strict";var i=e;i.base=r(110193),i.short=r(964448),i.mont=r(112025),i.edwards=r(182318)},112025:(t,e,r)=>{"use strict";var i=r(956054),n=r(633472),s=r(110193),o=r(17671);function MontCurve(t){s.call(this,"mont",t),this.a=new i(t.a,16).toRed(this.red),this.b=new i(t.b,16).toRed(this.red),this.i4=new i(4).toRed(this.red).redInvm(),this.two=new i(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function Point(t,e,r){s.BasePoint.call(this,t,"projective"),null===e&&null===r?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new i(e,16),this.z=new i(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}n(MontCurve,s),t.exports=MontCurve,MontCurve.prototype.validate=function validate(t){var e=t.normalize().x,r=e.redSqr(),i=r.redMul(e).redAdd(r.redMul(this.a)).redAdd(e);return 0===i.redSqrt().redSqr().cmp(i)},n(Point,s.BasePoint),MontCurve.prototype.decodePoint=function decodePoint(t,e){return this.point(o.toArray(t,e),1)},MontCurve.prototype.point=function point(t,e){return new Point(this,t,e)},MontCurve.prototype.pointFromJSON=function pointFromJSON(t){return Point.fromJSON(this,t)},Point.prototype.precompute=function precompute(){},Point.prototype._encode=function _encode(){return this.getX().toArray("be",this.curve.p.byteLength())},Point.fromJSON=function fromJSON(t,e){return new Point(t,e[0],e[1]||t.one)},Point.prototype.inspect=function inspect(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},Point.prototype.isInfinity=function isInfinity(){return 0===this.z.cmpn(0)},Point.prototype.dbl=function dbl(){var t=this.x.redAdd(this.z).redSqr(),e=this.x.redSub(this.z).redSqr(),r=t.redSub(e),i=t.redMul(e),n=r.redMul(e.redAdd(this.curve.a24.redMul(r)));return this.curve.point(i,n)},Point.prototype.add=function add(){throw new Error("Not supported on Montgomery curve")},Point.prototype.diffAdd=function diffAdd(t,e){var r=this.x.redAdd(this.z),i=this.x.redSub(this.z),n=t.x.redAdd(t.z),s=t.x.redSub(t.z).redMul(r),o=n.redMul(i),a=e.z.redMul(s.redAdd(o).redSqr()),u=e.x.redMul(s.redISub(o).redSqr());return this.curve.point(a,u)},Point.prototype.mul=function mul(t){for(var e=t.clone(),r=this,i=this.curve.point(null,null),n=[];0!==e.cmpn(0);e.iushrn(1))n.push(e.andln(1));for(var s=n.length-1;s>=0;s--)0===n[s]?(r=r.diffAdd(i,this),i=i.dbl()):(i=r.diffAdd(i,this),r=r.dbl());return i},Point.prototype.mulAdd=function mulAdd(){throw new Error("Not supported on Montgomery curve")},Point.prototype.jumlAdd=function jumlAdd(){throw new Error("Not supported on Montgomery curve")},Point.prototype.eq=function eq(t){return 0===this.getX().cmp(t.getX())},Point.prototype.normalize=function normalize(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},Point.prototype.getX=function getX(){return this.normalize(),this.x.fromRed()}},964448:(t,e,r)=>{"use strict";var i=r(17671),n=r(956054),s=r(633472),o=r(110193),a=i.assert;function ShortCurve(t){o.call(this,"short",t),this.a=new n(t.a,16).toRed(this.red),this.b=new n(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function Point(t,e,r,i){o.BasePoint.call(this,t,"affine"),null===e&&null===r?(this.x=null,this.y=null,this.inf=!0):(this.x=new n(e,16),this.y=new n(r,16),i&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function JPoint(t,e,r,i){o.BasePoint.call(this,t,"jacobian"),null===e&&null===r&&null===i?(this.x=this.curve.one,this.y=this.curve.one,this.z=new n(0)):(this.x=new n(e,16),this.y=new n(r,16),this.z=new n(i,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}s(ShortCurve,o),t.exports=ShortCurve,ShortCurve.prototype._getEndomorphism=function _getEndomorphism(t){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var e,r;if(t.beta)e=new n(t.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);e=(e=i[0].cmp(i[1])<0?i[0]:i[1]).toRed(this.red)}if(t.lambda)r=new n(t.lambda,16);else{var s=this._getEndoRoots(this.n);0===this.g.mul(s[0]).x.cmp(this.g.x.redMul(e))?r=s[0]:(r=s[1],a(0===this.g.mul(r).x.cmp(this.g.x.redMul(e))))}return{beta:e,lambda:r,basis:t.basis?t.basis.map((function(t){return{a:new n(t.a,16),b:new n(t.b,16)}})):this._getEndoBasis(r)}}},ShortCurve.prototype._getEndoRoots=function _getEndoRoots(t){var e=t===this.p?this.red:n.mont(t),r=new n(2).toRed(e).redInvm(),i=r.redNeg(),s=new n(3).toRed(e).redNeg().redSqrt().redMul(r);return[i.redAdd(s).fromRed(),i.redSub(s).fromRed()]},ShortCurve.prototype._getEndoBasis=function _getEndoBasis(t){for(var e,r,i,s,o,a,u,h,f,c=this.n.ushrn(Math.floor(this.n.bitLength()/2)),d=t,p=this.n.clone(),l=new n(1),m=new n(0),b=new n(0),g=new n(1),y=0;0!==d.cmpn(0);){var v=p.div(d);h=p.sub(v.mul(d)),f=b.sub(v.mul(l));var w=g.sub(v.mul(m));if(!i&&h.cmp(c)<0)e=u.neg(),r=l,i=h.neg(),s=f;else if(i&&2==++y)break;u=h,p=d,d=h,b=l,l=f,g=m,m=w}o=h.neg(),a=f;var _=i.sqr().add(s.sqr());return o.sqr().add(a.sqr()).cmp(_)>=0&&(o=e,a=r),i.negative&&(i=i.neg(),s=s.neg()),o.negative&&(o=o.neg(),a=a.neg()),[{a:i,b:s},{a:o,b:a}]},ShortCurve.prototype._endoSplit=function _endoSplit(t){var e=this.endo.basis,r=e[0],i=e[1],n=i.b.mul(t).divRound(this.n),s=r.b.neg().mul(t).divRound(this.n),o=n.mul(r.a),a=s.mul(i.a),u=n.mul(r.b),h=s.mul(i.b);return{k1:t.sub(o).sub(a),k2:u.add(h).neg()}},ShortCurve.prototype.pointFromX=function pointFromX(t,e){(t=new n(t,16)).red||(t=t.toRed(this.red));var r=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b),i=r.redSqrt();if(0!==i.redSqr().redSub(r).cmp(this.zero))throw new Error("invalid point");var s=i.fromRed().isOdd();return(e&&!s||!e&&s)&&(i=i.redNeg()),this.point(t,i)},ShortCurve.prototype.validate=function validate(t){if(t.inf)return!0;var e=t.x,r=t.y,i=this.a.redMul(e),n=e.redSqr().redMul(e).redIAdd(i).redIAdd(this.b);return 0===r.redSqr().redISub(n).cmpn(0)},ShortCurve.prototype._endoWnafMulAdd=function _endoWnafMulAdd(t,e,r){for(var i=this._endoWnafT1,n=this._endoWnafT2,s=0;s<t.length;s++){var o=this._endoSplit(e[s]),a=t[s],u=a._getBeta();o.k1.negative&&(o.k1.ineg(),a=a.neg(!0)),o.k2.negative&&(o.k2.ineg(),u=u.neg(!0)),i[2*s]=a,i[2*s+1]=u,n[2*s]=o.k1,n[2*s+1]=o.k2}for(var h=this._wnafMulAdd(1,i,n,2*s,r),f=0;f<2*s;f++)i[f]=null,n[f]=null;return h},s(Point,o.BasePoint),ShortCurve.prototype.point=function point(t,e,r){return new Point(this,t,e,r)},ShortCurve.prototype.pointFromJSON=function pointFromJSON(t,e){return Point.fromJSON(this,t,e)},Point.prototype._getBeta=function _getBeta(){if(this.curve.endo){var t=this.precomputed;if(t&&t.beta)return t.beta;var e=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){var r=this.curve,endoMul=function(t){return r.point(t.x.redMul(r.endo.beta),t.y)};t.beta=e,e.precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(endoMul)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(endoMul)}}}return e}},Point.prototype.toJSON=function toJSON(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},Point.fromJSON=function fromJSON(t,e,r){"string"==typeof e&&(e=JSON.parse(e));var i=t.point(e[0],e[1],r);if(!e[2])return i;function obj2point(e){return t.point(e[0],e[1],r)}var n=e[2];return i.precomputed={beta:null,doubles:n.doubles&&{step:n.doubles.step,points:[i].concat(n.doubles.points.map(obj2point))},naf:n.naf&&{wnd:n.naf.wnd,points:[i].concat(n.naf.points.map(obj2point))}},i},Point.prototype.inspect=function inspect(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},Point.prototype.isInfinity=function isInfinity(){return this.inf},Point.prototype.add=function add(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(0===this.x.cmp(t.x))return this.curve.point(null,null);var e=this.y.redSub(t.y);0!==e.cmpn(0)&&(e=e.redMul(this.x.redSub(t.x).redInvm()));var r=e.redSqr().redISub(this.x).redISub(t.x),i=e.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,i)},Point.prototype.dbl=function dbl(){if(this.inf)return this;var t=this.y.redAdd(this.y);if(0===t.cmpn(0))return this.curve.point(null,null);var e=this.curve.a,r=this.x.redSqr(),i=t.redInvm(),n=r.redAdd(r).redIAdd(r).redIAdd(e).redMul(i),s=n.redSqr().redISub(this.x.redAdd(this.x)),o=n.redMul(this.x.redSub(s)).redISub(this.y);return this.curve.point(s,o)},Point.prototype.getX=function getX(){return this.x.fromRed()},Point.prototype.getY=function getY(){return this.y.fromRed()},Point.prototype.mul=function mul(t){return t=new n(t,16),this.isInfinity()?this:this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve.endo?this.curve._endoWnafMulAdd([this],[t]):this.curve._wnafMul(this,t)},Point.prototype.mulAdd=function mulAdd(t,e,r){var i=[this,e],n=[t,r];return this.curve.endo?this.curve._endoWnafMulAdd(i,n):this.curve._wnafMulAdd(1,i,n,2)},Point.prototype.jmulAdd=function jmulAdd(t,e,r){var i=[this,e],n=[t,r];return this.curve.endo?this.curve._endoWnafMulAdd(i,n,!0):this.curve._wnafMulAdd(1,i,n,2,!0)},Point.prototype.eq=function eq(t){return this===t||this.inf===t.inf&&(this.inf||0===this.x.cmp(t.x)&&0===this.y.cmp(t.y))},Point.prototype.neg=function neg(t){if(this.inf)return this;var e=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){var r=this.precomputed,negate=function(t){return t.neg()};e.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(negate)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(negate)}}}return e},Point.prototype.toJ=function toJ(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},s(JPoint,o.BasePoint),ShortCurve.prototype.jpoint=function jpoint(t,e,r){return new JPoint(this,t,e,r)},JPoint.prototype.toP=function toP(){if(this.isInfinity())return this.curve.point(null,null);var t=this.z.redInvm(),e=t.redSqr(),r=this.x.redMul(e),i=this.y.redMul(e).redMul(t);return this.curve.point(r,i)},JPoint.prototype.neg=function neg(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},JPoint.prototype.add=function add(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var e=t.z.redSqr(),r=this.z.redSqr(),i=this.x.redMul(e),n=t.x.redMul(r),s=this.y.redMul(e.redMul(t.z)),o=t.y.redMul(r.redMul(this.z)),a=i.redSub(n),u=s.redSub(o);if(0===a.cmpn(0))return 0!==u.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var h=a.redSqr(),f=h.redMul(a),c=i.redMul(h),d=u.redSqr().redIAdd(f).redISub(c).redISub(c),p=u.redMul(c.redISub(d)).redISub(s.redMul(f)),l=this.z.redMul(t.z).redMul(a);return this.curve.jpoint(d,p,l)},JPoint.prototype.mixedAdd=function mixedAdd(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;var e=this.z.redSqr(),r=this.x,i=t.x.redMul(e),n=this.y,s=t.y.redMul(e).redMul(this.z),o=r.redSub(i),a=n.redSub(s);if(0===o.cmpn(0))return 0!==a.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var u=o.redSqr(),h=u.redMul(o),f=r.redMul(u),c=a.redSqr().redIAdd(h).redISub(f).redISub(f),d=a.redMul(f.redISub(c)).redISub(n.redMul(h)),p=this.z.redMul(o);return this.curve.jpoint(c,d,p)},JPoint.prototype.dblp=function dblp(t){if(0===t)return this;if(this.isInfinity())return this;if(!t)return this.dbl();var e;if(this.curve.zeroA||this.curve.threeA){var r=this;for(e=0;e<t;e++)r=r.dbl();return r}var i=this.curve.a,n=this.curve.tinv,s=this.x,o=this.y,a=this.z,u=a.redSqr().redSqr(),h=o.redAdd(o);for(e=0;e<t;e++){var f=s.redSqr(),c=h.redSqr(),d=c.redSqr(),p=f.redAdd(f).redIAdd(f).redIAdd(i.redMul(u)),l=s.redMul(c),m=p.redSqr().redISub(l.redAdd(l)),b=l.redISub(m),g=p.redMul(b);g=g.redIAdd(g).redISub(d);var y=h.redMul(a);e+1<t&&(u=u.redMul(d)),s=m,a=y,h=g}return this.curve.jpoint(s,h.redMul(n),a)},JPoint.prototype.dbl=function dbl(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},JPoint.prototype._zeroDbl=function _zeroDbl(){var t,e,r;if(this.zOne){var i=this.x.redSqr(),n=this.y.redSqr(),s=n.redSqr(),o=this.x.redAdd(n).redSqr().redISub(i).redISub(s);o=o.redIAdd(o);var a=i.redAdd(i).redIAdd(i),u=a.redSqr().redISub(o).redISub(o),h=s.redIAdd(s);h=(h=h.redIAdd(h)).redIAdd(h),t=u,e=a.redMul(o.redISub(u)).redISub(h),r=this.y.redAdd(this.y)}else{var f=this.x.redSqr(),c=this.y.redSqr(),d=c.redSqr(),p=this.x.redAdd(c).redSqr().redISub(f).redISub(d);p=p.redIAdd(p);var l=f.redAdd(f).redIAdd(f),m=l.redSqr(),b=d.redIAdd(d);b=(b=b.redIAdd(b)).redIAdd(b),t=m.redISub(p).redISub(p),e=l.redMul(p.redISub(t)).redISub(b),r=(r=this.y.redMul(this.z)).redIAdd(r)}return this.curve.jpoint(t,e,r)},JPoint.prototype._threeDbl=function _threeDbl(){var t,e,r;if(this.zOne){var i=this.x.redSqr(),n=this.y.redSqr(),s=n.redSqr(),o=this.x.redAdd(n).redSqr().redISub(i).redISub(s);o=o.redIAdd(o);var a=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),u=a.redSqr().redISub(o).redISub(o);t=u;var h=s.redIAdd(s);h=(h=h.redIAdd(h)).redIAdd(h),e=a.redMul(o.redISub(u)).redISub(h),r=this.y.redAdd(this.y)}else{var f=this.z.redSqr(),c=this.y.redSqr(),d=this.x.redMul(c),p=this.x.redSub(f).redMul(this.x.redAdd(f));p=p.redAdd(p).redIAdd(p);var l=d.redIAdd(d),m=(l=l.redIAdd(l)).redAdd(l);t=p.redSqr().redISub(m),r=this.y.redAdd(this.z).redSqr().redISub(c).redISub(f);var b=c.redSqr();b=(b=(b=b.redIAdd(b)).redIAdd(b)).redIAdd(b),e=p.redMul(l.redISub(t)).redISub(b)}return this.curve.jpoint(t,e,r)},JPoint.prototype._dbl=function _dbl(){var t=this.curve.a,e=this.x,r=this.y,i=this.z,n=i.redSqr().redSqr(),s=e.redSqr(),o=r.redSqr(),a=s.redAdd(s).redIAdd(s).redIAdd(t.redMul(n)),u=e.redAdd(e),h=(u=u.redIAdd(u)).redMul(o),f=a.redSqr().redISub(h.redAdd(h)),c=h.redISub(f),d=o.redSqr();d=(d=(d=d.redIAdd(d)).redIAdd(d)).redIAdd(d);var p=a.redMul(c).redISub(d),l=r.redAdd(r).redMul(i);return this.curve.jpoint(f,p,l)},JPoint.prototype.trpl=function trpl(){if(!this.curve.zeroA)return this.dbl().add(this);var t=this.x.redSqr(),e=this.y.redSqr(),r=this.z.redSqr(),i=e.redSqr(),n=t.redAdd(t).redIAdd(t),s=n.redSqr(),o=this.x.redAdd(e).redSqr().redISub(t).redISub(i),a=(o=(o=(o=o.redIAdd(o)).redAdd(o).redIAdd(o)).redISub(s)).redSqr(),u=i.redIAdd(i);u=(u=(u=u.redIAdd(u)).redIAdd(u)).redIAdd(u);var h=n.redIAdd(o).redSqr().redISub(s).redISub(a).redISub(u),f=e.redMul(h);f=(f=f.redIAdd(f)).redIAdd(f);var c=this.x.redMul(a).redISub(f);c=(c=c.redIAdd(c)).redIAdd(c);var d=this.y.redMul(h.redMul(u.redISub(h)).redISub(o.redMul(a)));d=(d=(d=d.redIAdd(d)).redIAdd(d)).redIAdd(d);var p=this.z.redAdd(o).redSqr().redISub(r).redISub(a);return this.curve.jpoint(c,d,p)},JPoint.prototype.mul=function mul(t,e){return t=new n(t,e),this.curve._wnafMul(this,t)},JPoint.prototype.eq=function eq(t){if("affine"===t.type)return this.eq(t.toJ());if(this===t)return!0;var e=this.z.redSqr(),r=t.z.redSqr();if(0!==this.x.redMul(r).redISub(t.x.redMul(e)).cmpn(0))return!1;var i=e.redMul(this.z),n=r.redMul(t.z);return 0===this.y.redMul(n).redISub(t.y.redMul(i)).cmpn(0)},JPoint.prototype.eqXToP=function eqXToP(t){var e=this.z.redSqr(),r=t.toRed(this.curve.red).redMul(e);if(0===this.x.cmp(r))return!0;for(var i=t.clone(),n=this.curve.redN.redMul(e);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(n),0===this.x.cmp(r))return!0}},JPoint.prototype.inspect=function inspect(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},JPoint.prototype.isInfinity=function isInfinity(){return 0===this.z.cmpn(0)}},361468:(t,e,r)=>{"use strict";var i,n=e,s=r(499499),o=r(203442),a=r(17671).assert;function PresetCurve(t){"short"===t.type?this.curve=new o.short(t):"edwards"===t.type?this.curve=new o.edwards(t):this.curve=new o.mont(t),this.g=this.curve.g,this.n=this.curve.n,this.hash=t.hash,a(this.g.validate(),"Invalid curve"),a(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function defineCurve(t,e){Object.defineProperty(n,t,{configurable:!0,enumerable:!0,get:function(){var r=new PresetCurve(e);return Object.defineProperty(n,t,{configurable:!0,enumerable:!0,value:r}),r}})}n.PresetCurve=PresetCurve,defineCurve("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:s.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),defineCurve("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:s.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),defineCurve("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:s.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),defineCurve("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:s.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),defineCurve("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:s.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),defineCurve("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:s.sha256,gRed:!1,g:["9"]}),defineCurve("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:s.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{i=r(799327)}catch(t){i=void 0}defineCurve("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:s.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",i]})},697891:(t,e,r)=>{"use strict";var i=r(956054),n=r(684742),s=r(17671),o=r(361468),a=r(247048),u=s.assert,h=r(880732),f=r(798669);function EC(t){if(!(this instanceof EC))return new EC(t);"string"==typeof t&&(u(Object.prototype.hasOwnProperty.call(o,t),"Unknown curve "+t),t=o[t]),t instanceof o.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}t.exports=EC,EC.prototype.keyPair=function keyPair(t){return new h(this,t)},EC.prototype.keyFromPrivate=function keyFromPrivate(t,e){return h.fromPrivate(this,t,e)},EC.prototype.keyFromPublic=function keyFromPublic(t,e){return h.fromPublic(this,t,e)},EC.prototype.genKeyPair=function genKeyPair(t){t||(t={});for(var e=new n({hash:this.hash,pers:t.pers,persEnc:t.persEnc||"utf8",entropy:t.entropy||a(this.hash.hmacStrength),entropyEnc:t.entropy&&t.entropyEnc||"utf8",nonce:this.n.toArray()}),r=this.n.byteLength(),s=this.n.sub(new i(2));;){var o=new i(e.generate(r));if(!(o.cmp(s)>0))return o.iaddn(1),this.keyFromPrivate(o)}},EC.prototype._truncateToN=function _truncateToN(t,e){var r=8*t.byteLength()-this.n.bitLength();return r>0&&(t=t.ushrn(r)),!e&&t.cmp(this.n)>=0?t.sub(this.n):t},EC.prototype.sign=function sign(t,e,r,s){"object"==typeof r&&(s=r,r=null),s||(s={}),e=this.keyFromPrivate(e,r),t=this._truncateToN(new i(t,16));for(var o=this.n.byteLength(),a=e.getPrivate().toArray("be",o),u=t.toArray("be",o),h=new n({hash:this.hash,entropy:a,nonce:u,pers:s.pers,persEnc:s.persEnc||"utf8"}),c=this.n.sub(new i(1)),d=0;;d++){var p=s.k?s.k(d):new i(h.generate(this.n.byteLength()));if(!((p=this._truncateToN(p,!0)).cmpn(1)<=0||p.cmp(c)>=0)){var l=this.g.mul(p);if(!l.isInfinity()){var m=l.getX(),b=m.umod(this.n);if(0!==b.cmpn(0)){var g=p.invm(this.n).mul(b.mul(e.getPrivate()).iadd(t));if(0!==(g=g.umod(this.n)).cmpn(0)){var y=(l.getY().isOdd()?1:0)|(0!==m.cmp(b)?2:0);return s.canonical&&g.cmp(this.nh)>0&&(g=this.n.sub(g),y^=1),new f({r:b,s:g,recoveryParam:y})}}}}}},EC.prototype.verify=function verify(t,e,r,n){t=this._truncateToN(new i(t,16)),r=this.keyFromPublic(r,n);var s=(e=new f(e,"hex")).r,o=e.s;if(s.cmpn(1)<0||s.cmp(this.n)>=0)return!1;if(o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var a,u=o.invm(this.n),h=u.mul(t).umod(this.n),c=u.mul(s).umod(this.n);return this.curve._maxwellTrick?!(a=this.g.jmulAdd(h,r.getPublic(),c)).isInfinity()&&a.eqXToP(s):!(a=this.g.mulAdd(h,r.getPublic(),c)).isInfinity()&&0===a.getX().umod(this.n).cmp(s)},EC.prototype.recoverPubKey=function(t,e,r,n){u((3&r)===r,"The recovery param is more than two bits"),e=new f(e,n);var s=this.n,o=new i(t),a=e.r,h=e.s,c=1&r,d=r>>1;if(a.cmp(this.curve.p.umod(this.curve.n))>=0&&d)throw new Error("Unable to find sencond key candinate");a=d?this.curve.pointFromX(a.add(this.curve.n),c):this.curve.pointFromX(a,c);var p=e.r.invm(s),l=s.sub(o).mul(p).umod(s),m=h.mul(p).umod(s);return this.g.mulAdd(l,a,m)},EC.prototype.getKeyRecoveryParam=function(t,e,r,i){if(null!==(e=new f(e,i)).recoveryParam)return e.recoveryParam;for(var n=0;n<4;n++){var s;try{s=this.recoverPubKey(t,e,n)}catch(t){continue}if(s.eq(r))return n}throw new Error("Unable to find valid recovery factor")}},880732:(t,e,r)=>{"use strict";var i=r(956054),n=r(17671).assert;function KeyPair(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}t.exports=KeyPair,KeyPair.fromPublic=function fromPublic(t,e,r){return e instanceof KeyPair?e:new KeyPair(t,{pub:e,pubEnc:r})},KeyPair.fromPrivate=function fromPrivate(t,e,r){return e instanceof KeyPair?e:new KeyPair(t,{priv:e,privEnc:r})},KeyPair.prototype.validate=function validate(){var t=this.getPublic();return t.isInfinity()?{result:!1,reason:"Invalid public key"}:t.validate()?t.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},KeyPair.prototype.getPublic=function getPublic(t,e){return"string"==typeof t&&(e=t,t=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),e?this.pub.encode(e,t):this.pub},KeyPair.prototype.getPrivate=function getPrivate(t){return"hex"===t?this.priv.toString(16,2):this.priv},KeyPair.prototype._importPrivate=function _importPrivate(t,e){this.priv=new i(t,e||16),this.priv=this.priv.umod(this.ec.curve.n)},KeyPair.prototype._importPublic=function _importPublic(t,e){if(t.x||t.y)return"mont"===this.ec.curve.type?n(t.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||n(t.x&&t.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(t.x,t.y));this.pub=this.ec.curve.decodePoint(t,e)},KeyPair.prototype.derive=function derive(t){return t.validate()||n(t.validate(),"public point not validated"),t.mul(this.priv).getX()},KeyPair.prototype.sign=function sign(t,e,r){return this.ec.sign(t,this,e,r)},KeyPair.prototype.verify=function verify(t,e){return this.ec.verify(t,e,this)},KeyPair.prototype.inspect=function inspect(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},798669:(t,e,r)=>{"use strict";var i=r(956054),n=r(17671),s=n.assert;function Signature(t,e){if(t instanceof Signature)return t;this._importDER(t,e)||(s(t.r&&t.s,"Signature without r or s"),this.r=new i(t.r,16),this.s=new i(t.s,16),void 0===t.recoveryParam?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}function Position(){this.place=0}function getLength(t,e){var r=t[e.place++];if(!(128&r))return r;var i=15&r;if(0===i||i>4)return!1;for(var n=0,s=0,o=e.place;s<i;s++,o++)n<<=8,n|=t[o],n>>>=0;return!(n<=127)&&(e.place=o,n)}function rmPadding(t){for(var e=0,r=t.length-1;!t[e]&&!(128&t[e+1])&&e<r;)e++;return 0===e?t:t.slice(e)}function constructLength(t,e){if(e<128)t.push(e);else{var r=1+(Math.log(e)/Math.LN2>>>3);for(t.push(128|r);--r;)t.push(e>>>(r<<3)&255);t.push(e)}}t.exports=Signature,Signature.prototype._importDER=function _importDER(t,e){t=n.toArray(t,e);var r=new Position;if(48!==t[r.place++])return!1;var s=getLength(t,r);if(!1===s)return!1;if(s+r.place!==t.length)return!1;if(2!==t[r.place++])return!1;var o=getLength(t,r);if(!1===o)return!1;var a=t.slice(r.place,o+r.place);if(r.place+=o,2!==t[r.place++])return!1;var u=getLength(t,r);if(!1===u)return!1;if(t.length!==u+r.place)return!1;var h=t.slice(r.place,u+r.place);if(0===a[0]){if(!(128&a[1]))return!1;a=a.slice(1)}if(0===h[0]){if(!(128&h[1]))return!1;h=h.slice(1)}return this.r=new i(a),this.s=new i(h),this.recoveryParam=null,!0},Signature.prototype.toDER=function toDER(t){var e=this.r.toArray(),r=this.s.toArray();for(128&e[0]&&(e=[0].concat(e)),128&r[0]&&(r=[0].concat(r)),e=rmPadding(e),r=rmPadding(r);!(r[0]||128&r[1]);)r=r.slice(1);var i=[2];constructLength(i,e.length),(i=i.concat(e)).push(2),constructLength(i,r.length);var s=i.concat(r),o=[48];return constructLength(o,s.length),o=o.concat(s),n.encode(o,t)}},714798:(t,e,r)=>{"use strict";var i=r(499499),n=r(361468),s=r(17671),o=s.assert,a=s.parseBytes,u=r(575513),h=r(155648);function EDDSA(t){if(o("ed25519"===t,"only tested with ed25519 so far"),!(this instanceof EDDSA))return new EDDSA(t);t=n[t].curve,this.curve=t,this.g=t.g,this.g.precompute(t.n.bitLength()+1),this.pointClass=t.point().constructor,this.encodingLength=Math.ceil(t.n.bitLength()/8),this.hash=i.sha512}t.exports=EDDSA,EDDSA.prototype.sign=function sign(t,e){t=a(t);var r=this.keyFromSecret(e),i=this.hashInt(r.messagePrefix(),t),n=this.g.mul(i),s=this.encodePoint(n),o=this.hashInt(s,r.pubBytes(),t).mul(r.priv()),u=i.add(o).umod(this.curve.n);return this.makeSignature({R:n,S:u,Rencoded:s})},EDDSA.prototype.verify=function verify(t,e,r){t=a(t),e=this.makeSignature(e);var i=this.keyFromPublic(r),n=this.hashInt(e.Rencoded(),i.pubBytes(),t),s=this.g.mul(e.S());return e.R().add(i.pub().mul(n)).eq(s)},EDDSA.prototype.hashInt=function hashInt(){for(var t=this.hash(),e=0;e<arguments.length;e++)t.update(arguments[e]);return s.intFromLE(t.digest()).umod(this.curve.n)},EDDSA.prototype.keyFromPublic=function keyFromPublic(t){return u.fromPublic(this,t)},EDDSA.prototype.keyFromSecret=function keyFromSecret(t){return u.fromSecret(this,t)},EDDSA.prototype.makeSignature=function makeSignature(t){return t instanceof h?t:new h(this,t)},EDDSA.prototype.encodePoint=function encodePoint(t){var e=t.getY().toArray("le",this.encodingLength);return e[this.encodingLength-1]|=t.getX().isOdd()?128:0,e},EDDSA.prototype.decodePoint=function decodePoint(t){var e=(t=s.parseBytes(t)).length-1,r=t.slice(0,e).concat(-129&t[e]),i=!!(128&t[e]),n=s.intFromLE(r);return this.curve.pointFromY(n,i)},EDDSA.prototype.encodeInt=function encodeInt(t){return t.toArray("le",this.encodingLength)},EDDSA.prototype.decodeInt=function decodeInt(t){return s.intFromLE(t)},EDDSA.prototype.isPoint=function isPoint(t){return t instanceof this.pointClass}},575513:(t,e,r)=>{"use strict";var i=r(17671),n=i.assert,s=i.parseBytes,o=i.cachedProperty;function KeyPair(t,e){this.eddsa=t,this._secret=s(e.secret),t.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=s(e.pub)}KeyPair.fromPublic=function fromPublic(t,e){return e instanceof KeyPair?e:new KeyPair(t,{pub:e})},KeyPair.fromSecret=function fromSecret(t,e){return e instanceof KeyPair?e:new KeyPair(t,{secret:e})},KeyPair.prototype.secret=function secret(){return this._secret},o(KeyPair,"pubBytes",(function pubBytes(){return this.eddsa.encodePoint(this.pub())})),o(KeyPair,"pub",(function pub(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())})),o(KeyPair,"privBytes",(function privBytes(){var t=this.eddsa,e=this.hash(),r=t.encodingLength-1,i=e.slice(0,t.encodingLength);return i[0]&=248,i[r]&=127,i[r]|=64,i})),o(KeyPair,"priv",(function priv(){return this.eddsa.decodeInt(this.privBytes())})),o(KeyPair,"hash",(function hash(){return this.eddsa.hash().update(this.secret()).digest()})),o(KeyPair,"messagePrefix",(function messagePrefix(){return this.hash().slice(this.eddsa.encodingLength)})),KeyPair.prototype.sign=function sign(t){return n(this._secret,"KeyPair can only verify"),this.eddsa.sign(t,this)},KeyPair.prototype.verify=function verify(t,e){return this.eddsa.verify(t,e,this)},KeyPair.prototype.getSecret=function getSecret(t){return n(this._secret,"KeyPair is public only"),i.encode(this.secret(),t)},KeyPair.prototype.getPublic=function getPublic(t){return i.encode(this.pubBytes(),t)},t.exports=KeyPair},155648:(t,e,r)=>{"use strict";var i=r(956054),n=r(17671),s=n.assert,o=n.cachedProperty,a=n.parseBytes;function Signature(t,e){this.eddsa=t,"object"!=typeof e&&(e=a(e)),Array.isArray(e)&&(e={R:e.slice(0,t.encodingLength),S:e.slice(t.encodingLength)}),s(e.R&&e.S,"Signature without R or S"),t.isPoint(e.R)&&(this._R=e.R),e.S instanceof i&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}o(Signature,"S",(function S(){return this.eddsa.decodeInt(this.Sencoded())})),o(Signature,"R",(function R(){return this.eddsa.decodePoint(this.Rencoded())})),o(Signature,"Rencoded",(function Rencoded(){return this.eddsa.encodePoint(this.R())})),o(Signature,"Sencoded",(function Sencoded(){return this.eddsa.encodeInt(this.S())})),Signature.prototype.toBytes=function toBytes(){return this.Rencoded().concat(this.Sencoded())},Signature.prototype.toHex=function toHex(){return n.encode(this.toBytes(),"hex").toUpperCase()},t.exports=Signature},799327:t=>{t.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},17671:(t,e,r)=>{"use strict";var i=e,n=r(956054),s=r(807784),o=r(589042);i.assert=s,i.toArray=o.toArray,i.zero2=o.zero2,i.toHex=o.toHex,i.encode=o.encode,i.getNAF=function getNAF(t,e,r){var i=new Array(Math.max(t.bitLength(),r)+1);i.fill(0);for(var n=1<<e+1,s=t.clone(),o=0;o<i.length;o++){var a,u=s.andln(n-1);s.isOdd()?(a=u>(n>>1)-1?(n>>1)-u:u,s.isubn(a)):a=0,i[o]=a,s.iushrn(1)}return i},i.getJSF=function getJSF(t,e){var r=[[],[]];t=t.clone(),e=e.clone();for(var i,n=0,s=0;t.cmpn(-n)>0||e.cmpn(-s)>0;){var o,a,u=t.andln(3)+n&3,h=e.andln(3)+s&3;3===u&&(u=-1),3===h&&(h=-1),o=1&u?3!==(i=t.andln(7)+n&7)&&5!==i||2!==h?u:-u:0,r[0].push(o),a=1&h?3!==(i=e.andln(7)+s&7)&&5!==i||2!==u?h:-h:0,r[1].push(a),2*n===o+1&&(n=1-n),2*s===a+1&&(s=1-s),t.iushrn(1),e.iushrn(1)}return r},i.cachedProperty=function cachedProperty(t,e,r){var i="_"+e;t.prototype[e]=function cachedProperty(){return void 0!==this[i]?this[i]:this[i]=r.call(this)}},i.parseBytes=function parseBytes(t){return"string"==typeof t?i.toArray(t,"hex"):t},i.intFromLE=function intFromLE(t){return new n(t,"hex","le")}},956054:function(t,e,r){!function(t,e){"use strict";function assert(t,e){if(!t)throw new Error(e||"Assertion failed")}function inherits(t,e){t.super_=e;var TempCtor=function(){};TempCtor.prototype=e.prototype,t.prototype=new TempCtor,t.prototype.constructor=t}function BN(t,e,r){if(BN.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(r=e,e=10),this._init(t||0,e||10,r||"be"))}var i;"object"==typeof t?t.exports=BN:e.BN=BN,BN.BN=BN,BN.wordSize=26;try{i="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:r(527852).Buffer}catch(t){}function parseHex4Bits(t,e){var r=t.charCodeAt(e);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function parseHexByte(t,e,r){var i=parseHex4Bits(t,r);return r-1>=e&&(i|=parseHex4Bits(t,r-1)<<4),i}function parseBase(t,e,r,i){for(var n=0,s=Math.min(t.length,r),o=e;o<s;o++){var a=t.charCodeAt(o)-48;n*=i,n+=a>=49?a-49+10:a>=17?a-17+10:a}return n}BN.isBN=function isBN(t){return t instanceof BN||null!==t&&"object"==typeof t&&t.constructor.wordSize===BN.wordSize&&Array.isArray(t.words)},BN.max=function max(t,e){return t.cmp(e)>0?t:e},BN.min=function min(t,e){return t.cmp(e)<0?t:e},BN.prototype._init=function init(t,e,r){if("number"==typeof t)return this._initNumber(t,e,r);if("object"==typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),assert(e===(0|e)&&e>=2&&e<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<t.length&&(16===e?this._parseHex(t,i,r):(this._parseBase(t,e,i),"le"===r&&this._initArray(this.toArray(),e,r)))},BN.prototype._initNumber=function _initNumber(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(assert(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},BN.prototype._initArray=function _initArray(t,e,r){if(assert("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var n,s,o=0;if("be"===r)for(i=t.length-1,n=0;i>=0;i-=3)s=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[n]|=s<<o&67108863,this.words[n+1]=s>>>26-o&67108863,(o+=24)>=26&&(o-=26,n++);else if("le"===r)for(i=0,n=0;i<t.length;i+=3)s=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[n]|=s<<o&67108863,this.words[n+1]=s>>>26-o&67108863,(o+=24)>=26&&(o-=26,n++);return this.strip()},BN.prototype._parseHex=function _parseHex(t,e,r){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var n,s=0,o=0;if("be"===r)for(i=t.length-1;i>=e;i-=2)n=parseHexByte(t,e,i)<<s,this.words[o]|=67108863&n,s>=18?(s-=18,o+=1,this.words[o]|=n>>>26):s+=8;else for(i=(t.length-e)%2==0?e+1:e;i<t.length;i+=2)n=parseHexByte(t,e,i)<<s,this.words[o]|=67108863&n,s>=18?(s-=18,o+=1,this.words[o]|=n>>>26):s+=8;this.strip()},BN.prototype._parseBase=function _parseBase(t,e,r){this.words=[0],this.length=1;for(var i=0,n=1;n<=67108863;n*=e)i++;i--,n=n/e|0;for(var s=t.length-r,o=s%i,a=Math.min(s,s-o)+r,u=0,h=r;h<a;h+=i)u=parseBase(t,h,h+i,e),this.imuln(n),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==o){var f=1;for(u=parseBase(t,h,t.length,e),h=0;h<o;h++)f*=e;this.imuln(f),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this.strip()},BN.prototype.copy=function copy(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},BN.prototype.clone=function clone(){var t=new BN(null);return this.copy(t),t},BN.prototype._expand=function _expand(t){for(;this.length<t;)this.words[this.length++]=0;return this},BN.prototype.strip=function strip(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},BN.prototype._normSign=function _normSign(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},BN.prototype.inspect=function inspect(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var n=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],s=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],o=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function smallMulTo(t,e,r){r.negative=e.negative^t.negative;var i=t.length+e.length|0;r.length=i,i=i-1|0;var n=0|t.words[0],s=0|e.words[0],o=n*s,a=67108863&o,u=o/67108864|0;r.words[0]=a;for(var h=1;h<i;h++){for(var f=u>>>26,c=67108863&u,d=Math.min(h,e.length-1),p=Math.max(0,h-t.length+1);p<=d;p++){var l=h-p|0;f+=(o=(n=0|t.words[l])*(s=0|e.words[p])+c)/67108864|0,c=67108863&o}r.words[h]=0|c,u=0|f}return 0!==u?r.words[h]=0|u:r.length--,r.strip()}BN.prototype.toString=function toString(t,e){var r;if(e=0|e||1,16===(t=t||10)||"hex"===t){r="";for(var i=0,a=0,u=0;u<this.length;u++){var h=this.words[u],f=(16777215&(h<<i|a)).toString(16);r=0!==(a=h>>>24-i&16777215)||u!==this.length-1?n[6-f.length]+f+r:f+r,(i+=2)>=26&&(i-=26,u--)}for(0!==a&&(r=a.toString(16)+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var c=s[t],d=o[t];r="";var p=this.clone();for(p.negative=0;!p.isZero();){var l=p.modn(d).toString(t);r=(p=p.idivn(d)).isZero()?l+r:n[c-l.length]+l+r}for(this.isZero()&&(r="0"+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}assert(!1,"Base should be between 2 and 36")},BN.prototype.toNumber=function toNumber(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&assert(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},BN.prototype.toJSON=function toJSON(){return this.toString(16)},BN.prototype.toBuffer=function toBuffer(t,e){return assert(void 0!==i),this.toArrayLike(i,t,e)},BN.prototype.toArray=function toArray(t,e){return this.toArrayLike(Array,t,e)},BN.prototype.toArrayLike=function toArrayLike(t,e,r){var i=this.byteLength(),n=r||Math.max(1,i);assert(i<=n,"byte array longer than desired length"),assert(n>0,"Requested array length <= 0"),this.strip();var s,o,a="le"===e,u=new t(n),h=this.clone();if(a){for(o=0;!h.isZero();o++)s=h.andln(255),h.iushrn(8),u[o]=s;for(;o<n;o++)u[o]=0}else{for(o=0;o<n-i;o++)u[o]=0;for(o=0;!h.isZero();o++)s=h.andln(255),h.iushrn(8),u[n-o-1]=s}return u},Math.clz32?BN.prototype._countBits=function _countBits(t){return 32-Math.clz32(t)}:BN.prototype._countBits=function _countBits(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},BN.prototype._zeroBits=function _zeroBits(t){if(0===t)return 26;var e=t,r=0;return 8191&e||(r+=13,e>>>=13),127&e||(r+=7,e>>>=7),15&e||(r+=4,e>>>=4),3&e||(r+=2,e>>>=2),1&e||r++,r},BN.prototype.bitLength=function bitLength(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},BN.prototype.zeroBits=function zeroBits(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},BN.prototype.byteLength=function byteLength(){return Math.ceil(this.bitLength()/8)},BN.prototype.toTwos=function toTwos(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},BN.prototype.fromTwos=function fromTwos(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},BN.prototype.isNeg=function isNeg(){return 0!==this.negative},BN.prototype.neg=function neg(){return this.clone().ineg()},BN.prototype.ineg=function ineg(){return this.isZero()||(this.negative^=1),this},BN.prototype.iuor=function iuor(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},BN.prototype.ior=function ior(t){return assert(!(this.negative|t.negative)),this.iuor(t)},BN.prototype.or=function or(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},BN.prototype.uor=function uor(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},BN.prototype.iuand=function iuand(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this.strip()},BN.prototype.iand=function iand(t){return assert(!(this.negative|t.negative)),this.iuand(t)},BN.prototype.and=function and(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},BN.prototype.uand=function uand(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},BN.prototype.iuxor=function iuxor(t){var e,r;this.length>t.length?(e=this,r=t):(e=t,r=this);for(var i=0;i<r.length;i++)this.words[i]=e.words[i]^r.words[i];if(this!==e)for(;i<e.length;i++)this.words[i]=e.words[i];return this.length=e.length,this.strip()},BN.prototype.ixor=function ixor(t){return assert(!(this.negative|t.negative)),this.iuxor(t)},BN.prototype.xor=function xor(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},BN.prototype.uxor=function uxor(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},BN.prototype.inotn=function inotn(t){assert("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this.strip()},BN.prototype.notn=function notn(t){return this.clone().inotn(t)},BN.prototype.setn=function setn(t,e){assert("number"==typeof t&&t>=0);var r=t/26|0,i=t%26;return this._expand(r+1),this.words[r]=e?this.words[r]|1<<i:this.words[r]&~(1<<i),this.strip()},BN.prototype.iadd=function iadd(t){var e,r,i;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,i=t):(r=t,i=this);for(var n=0,s=0;s<i.length;s++)e=(0|r.words[s])+(0|i.words[s])+n,this.words[s]=67108863&e,n=e>>>26;for(;0!==n&&s<r.length;s++)e=(0|r.words[s])+n,this.words[s]=67108863&e,n=e>>>26;if(this.length=r.length,0!==n)this.words[this.length]=n,this.length++;else if(r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this},BN.prototype.add=function add(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},BN.prototype.isub=function isub(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,i,n=this.cmp(t);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;n>0?(r=this,i=t):(r=t,i=this);for(var s=0,o=0;o<i.length;o++)s=(e=(0|r.words[o])-(0|i.words[o])+s)>>26,this.words[o]=67108863&e;for(;0!==s&&o<r.length;o++)s=(e=(0|r.words[o])+s)>>26,this.words[o]=67108863&e;if(0===s&&o<r.length&&r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this.length=Math.max(this.length,o),r!==this&&(this.negative=1),this.strip()},BN.prototype.sub=function sub(t){return this.clone().isub(t)};var a=function comb10MulTo(t,e,r){var i,n,s,o=t.words,a=e.words,u=r.words,h=0,f=0|o[0],c=8191&f,d=f>>>13,p=0|o[1],l=8191&p,m=p>>>13,b=0|o[2],g=8191&b,y=b>>>13,v=0|o[3],w=8191&v,_=v>>>13,P=0|o[4],I=8191&P,M=P>>>13,B=0|o[5],k=8191&B,A=B>>>13,E=0|o[6],O=8191&E,N=E>>>13,T=0|o[7],x=8191&T,K=T>>>13,H=0|o[8],C=8191&H,D=H>>>13,F=0|o[9],U=8191&F,L=F>>>13,z=0|a[0],j=8191&z,q=z>>>13,V=0|a[1],G=8191&V,Y=V>>>13,Z=0|a[2],W=8191&Z,X=Z>>>13,J=0|a[3],Q=8191&J,$=J>>>13,tt=0|a[4],et=8191&tt,rt=tt>>>13,it=0|a[5],nt=8191&it,st=it>>>13,ot=0|a[6],at=8191&ot,ut=ot>>>13,ht=0|a[7],ft=8191&ht,ct=ht>>>13,dt=0|a[8],pt=8191&dt,mt=dt>>>13,bt=0|a[9],yt=8191&bt,vt=bt>>>13;r.negative=t.negative^e.negative,r.length=19;var St=(h+(i=Math.imul(c,j))|0)+((8191&(n=(n=Math.imul(c,q))+Math.imul(d,j)|0))<<13)|0;h=((s=Math.imul(d,q))+(n>>>13)|0)+(St>>>26)|0,St&=67108863,i=Math.imul(l,j),n=(n=Math.imul(l,q))+Math.imul(m,j)|0,s=Math.imul(m,q);var wt=(h+(i=i+Math.imul(c,G)|0)|0)+((8191&(n=(n=n+Math.imul(c,Y)|0)+Math.imul(d,G)|0))<<13)|0;h=((s=s+Math.imul(d,Y)|0)+(n>>>13)|0)+(wt>>>26)|0,wt&=67108863,i=Math.imul(g,j),n=(n=Math.imul(g,q))+Math.imul(y,j)|0,s=Math.imul(y,q),i=i+Math.imul(l,G)|0,n=(n=n+Math.imul(l,Y)|0)+Math.imul(m,G)|0,s=s+Math.imul(m,Y)|0;var _t=(h+(i=i+Math.imul(c,W)|0)|0)+((8191&(n=(n=n+Math.imul(c,X)|0)+Math.imul(d,W)|0))<<13)|0;h=((s=s+Math.imul(d,X)|0)+(n>>>13)|0)+(_t>>>26)|0,_t&=67108863,i=Math.imul(w,j),n=(n=Math.imul(w,q))+Math.imul(_,j)|0,s=Math.imul(_,q),i=i+Math.imul(g,G)|0,n=(n=n+Math.imul(g,Y)|0)+Math.imul(y,G)|0,s=s+Math.imul(y,Y)|0,i=i+Math.imul(l,W)|0,n=(n=n+Math.imul(l,X)|0)+Math.imul(m,W)|0,s=s+Math.imul(m,X)|0;var Pt=(h+(i=i+Math.imul(c,Q)|0)|0)+((8191&(n=(n=n+Math.imul(c,$)|0)+Math.imul(d,Q)|0))<<13)|0;h=((s=s+Math.imul(d,$)|0)+(n>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,i=Math.imul(I,j),n=(n=Math.imul(I,q))+Math.imul(M,j)|0,s=Math.imul(M,q),i=i+Math.imul(w,G)|0,n=(n=n+Math.imul(w,Y)|0)+Math.imul(_,G)|0,s=s+Math.imul(_,Y)|0,i=i+Math.imul(g,W)|0,n=(n=n+Math.imul(g,X)|0)+Math.imul(y,W)|0,s=s+Math.imul(y,X)|0,i=i+Math.imul(l,Q)|0,n=(n=n+Math.imul(l,$)|0)+Math.imul(m,Q)|0,s=s+Math.imul(m,$)|0;var It=(h+(i=i+Math.imul(c,et)|0)|0)+((8191&(n=(n=n+Math.imul(c,rt)|0)+Math.imul(d,et)|0))<<13)|0;h=((s=s+Math.imul(d,rt)|0)+(n>>>13)|0)+(It>>>26)|0,It&=67108863,i=Math.imul(k,j),n=(n=Math.imul(k,q))+Math.imul(A,j)|0,s=Math.imul(A,q),i=i+Math.imul(I,G)|0,n=(n=n+Math.imul(I,Y)|0)+Math.imul(M,G)|0,s=s+Math.imul(M,Y)|0,i=i+Math.imul(w,W)|0,n=(n=n+Math.imul(w,X)|0)+Math.imul(_,W)|0,s=s+Math.imul(_,X)|0,i=i+Math.imul(g,Q)|0,n=(n=n+Math.imul(g,$)|0)+Math.imul(y,Q)|0,s=s+Math.imul(y,$)|0,i=i+Math.imul(l,et)|0,n=(n=n+Math.imul(l,rt)|0)+Math.imul(m,et)|0,s=s+Math.imul(m,rt)|0;var Mt=(h+(i=i+Math.imul(c,nt)|0)|0)+((8191&(n=(n=n+Math.imul(c,st)|0)+Math.imul(d,nt)|0))<<13)|0;h=((s=s+Math.imul(d,st)|0)+(n>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,i=Math.imul(O,j),n=(n=Math.imul(O,q))+Math.imul(N,j)|0,s=Math.imul(N,q),i=i+Math.imul(k,G)|0,n=(n=n+Math.imul(k,Y)|0)+Math.imul(A,G)|0,s=s+Math.imul(A,Y)|0,i=i+Math.imul(I,W)|0,n=(n=n+Math.imul(I,X)|0)+Math.imul(M,W)|0,s=s+Math.imul(M,X)|0,i=i+Math.imul(w,Q)|0,n=(n=n+Math.imul(w,$)|0)+Math.imul(_,Q)|0,s=s+Math.imul(_,$)|0,i=i+Math.imul(g,et)|0,n=(n=n+Math.imul(g,rt)|0)+Math.imul(y,et)|0,s=s+Math.imul(y,rt)|0,i=i+Math.imul(l,nt)|0,n=(n=n+Math.imul(l,st)|0)+Math.imul(m,nt)|0,s=s+Math.imul(m,st)|0;var Bt=(h+(i=i+Math.imul(c,at)|0)|0)+((8191&(n=(n=n+Math.imul(c,ut)|0)+Math.imul(d,at)|0))<<13)|0;h=((s=s+Math.imul(d,ut)|0)+(n>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,i=Math.imul(x,j),n=(n=Math.imul(x,q))+Math.imul(K,j)|0,s=Math.imul(K,q),i=i+Math.imul(O,G)|0,n=(n=n+Math.imul(O,Y)|0)+Math.imul(N,G)|0,s=s+Math.imul(N,Y)|0,i=i+Math.imul(k,W)|0,n=(n=n+Math.imul(k,X)|0)+Math.imul(A,W)|0,s=s+Math.imul(A,X)|0,i=i+Math.imul(I,Q)|0,n=(n=n+Math.imul(I,$)|0)+Math.imul(M,Q)|0,s=s+Math.imul(M,$)|0,i=i+Math.imul(w,et)|0,n=(n=n+Math.imul(w,rt)|0)+Math.imul(_,et)|0,s=s+Math.imul(_,rt)|0,i=i+Math.imul(g,nt)|0,n=(n=n+Math.imul(g,st)|0)+Math.imul(y,nt)|0,s=s+Math.imul(y,st)|0,i=i+Math.imul(l,at)|0,n=(n=n+Math.imul(l,ut)|0)+Math.imul(m,at)|0,s=s+Math.imul(m,ut)|0;var kt=(h+(i=i+Math.imul(c,ft)|0)|0)+((8191&(n=(n=n+Math.imul(c,ct)|0)+Math.imul(d,ft)|0))<<13)|0;h=((s=s+Math.imul(d,ct)|0)+(n>>>13)|0)+(kt>>>26)|0,kt&=67108863,i=Math.imul(C,j),n=(n=Math.imul(C,q))+Math.imul(D,j)|0,s=Math.imul(D,q),i=i+Math.imul(x,G)|0,n=(n=n+Math.imul(x,Y)|0)+Math.imul(K,G)|0,s=s+Math.imul(K,Y)|0,i=i+Math.imul(O,W)|0,n=(n=n+Math.imul(O,X)|0)+Math.imul(N,W)|0,s=s+Math.imul(N,X)|0,i=i+Math.imul(k,Q)|0,n=(n=n+Math.imul(k,$)|0)+Math.imul(A,Q)|0,s=s+Math.imul(A,$)|0,i=i+Math.imul(I,et)|0,n=(n=n+Math.imul(I,rt)|0)+Math.imul(M,et)|0,s=s+Math.imul(M,rt)|0,i=i+Math.imul(w,nt)|0,n=(n=n+Math.imul(w,st)|0)+Math.imul(_,nt)|0,s=s+Math.imul(_,st)|0,i=i+Math.imul(g,at)|0,n=(n=n+Math.imul(g,ut)|0)+Math.imul(y,at)|0,s=s+Math.imul(y,ut)|0,i=i+Math.imul(l,ft)|0,n=(n=n+Math.imul(l,ct)|0)+Math.imul(m,ft)|0,s=s+Math.imul(m,ct)|0;var At=(h+(i=i+Math.imul(c,pt)|0)|0)+((8191&(n=(n=n+Math.imul(c,mt)|0)+Math.imul(d,pt)|0))<<13)|0;h=((s=s+Math.imul(d,mt)|0)+(n>>>13)|0)+(At>>>26)|0,At&=67108863,i=Math.imul(U,j),n=(n=Math.imul(U,q))+Math.imul(L,j)|0,s=Math.imul(L,q),i=i+Math.imul(C,G)|0,n=(n=n+Math.imul(C,Y)|0)+Math.imul(D,G)|0,s=s+Math.imul(D,Y)|0,i=i+Math.imul(x,W)|0,n=(n=n+Math.imul(x,X)|0)+Math.imul(K,W)|0,s=s+Math.imul(K,X)|0,i=i+Math.imul(O,Q)|0,n=(n=n+Math.imul(O,$)|0)+Math.imul(N,Q)|0,s=s+Math.imul(N,$)|0,i=i+Math.imul(k,et)|0,n=(n=n+Math.imul(k,rt)|0)+Math.imul(A,et)|0,s=s+Math.imul(A,rt)|0,i=i+Math.imul(I,nt)|0,n=(n=n+Math.imul(I,st)|0)+Math.imul(M,nt)|0,s=s+Math.imul(M,st)|0,i=i+Math.imul(w,at)|0,n=(n=n+Math.imul(w,ut)|0)+Math.imul(_,at)|0,s=s+Math.imul(_,ut)|0,i=i+Math.imul(g,ft)|0,n=(n=n+Math.imul(g,ct)|0)+Math.imul(y,ft)|0,s=s+Math.imul(y,ct)|0,i=i+Math.imul(l,pt)|0,n=(n=n+Math.imul(l,mt)|0)+Math.imul(m,pt)|0,s=s+Math.imul(m,mt)|0;var Et=(h+(i=i+Math.imul(c,yt)|0)|0)+((8191&(n=(n=n+Math.imul(c,vt)|0)+Math.imul(d,yt)|0))<<13)|0;h=((s=s+Math.imul(d,vt)|0)+(n>>>13)|0)+(Et>>>26)|0,Et&=67108863,i=Math.imul(U,G),n=(n=Math.imul(U,Y))+Math.imul(L,G)|0,s=Math.imul(L,Y),i=i+Math.imul(C,W)|0,n=(n=n+Math.imul(C,X)|0)+Math.imul(D,W)|0,s=s+Math.imul(D,X)|0,i=i+Math.imul(x,Q)|0,n=(n=n+Math.imul(x,$)|0)+Math.imul(K,Q)|0,s=s+Math.imul(K,$)|0,i=i+Math.imul(O,et)|0,n=(n=n+Math.imul(O,rt)|0)+Math.imul(N,et)|0,s=s+Math.imul(N,rt)|0,i=i+Math.imul(k,nt)|0,n=(n=n+Math.imul(k,st)|0)+Math.imul(A,nt)|0,s=s+Math.imul(A,st)|0,i=i+Math.imul(I,at)|0,n=(n=n+Math.imul(I,ut)|0)+Math.imul(M,at)|0,s=s+Math.imul(M,ut)|0,i=i+Math.imul(w,ft)|0,n=(n=n+Math.imul(w,ct)|0)+Math.imul(_,ft)|0,s=s+Math.imul(_,ct)|0,i=i+Math.imul(g,pt)|0,n=(n=n+Math.imul(g,mt)|0)+Math.imul(y,pt)|0,s=s+Math.imul(y,mt)|0;var Ot=(h+(i=i+Math.imul(l,yt)|0)|0)+((8191&(n=(n=n+Math.imul(l,vt)|0)+Math.imul(m,yt)|0))<<13)|0;h=((s=s+Math.imul(m,vt)|0)+(n>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,i=Math.imul(U,W),n=(n=Math.imul(U,X))+Math.imul(L,W)|0,s=Math.imul(L,X),i=i+Math.imul(C,Q)|0,n=(n=n+Math.imul(C,$)|0)+Math.imul(D,Q)|0,s=s+Math.imul(D,$)|0,i=i+Math.imul(x,et)|0,n=(n=n+Math.imul(x,rt)|0)+Math.imul(K,et)|0,s=s+Math.imul(K,rt)|0,i=i+Math.imul(O,nt)|0,n=(n=n+Math.imul(O,st)|0)+Math.imul(N,nt)|0,s=s+Math.imul(N,st)|0,i=i+Math.imul(k,at)|0,n=(n=n+Math.imul(k,ut)|0)+Math.imul(A,at)|0,s=s+Math.imul(A,ut)|0,i=i+Math.imul(I,ft)|0,n=(n=n+Math.imul(I,ct)|0)+Math.imul(M,ft)|0,s=s+Math.imul(M,ct)|0,i=i+Math.imul(w,pt)|0,n=(n=n+Math.imul(w,mt)|0)+Math.imul(_,pt)|0,s=s+Math.imul(_,mt)|0;var Nt=(h+(i=i+Math.imul(g,yt)|0)|0)+((8191&(n=(n=n+Math.imul(g,vt)|0)+Math.imul(y,yt)|0))<<13)|0;h=((s=s+Math.imul(y,vt)|0)+(n>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,i=Math.imul(U,Q),n=(n=Math.imul(U,$))+Math.imul(L,Q)|0,s=Math.imul(L,$),i=i+Math.imul(C,et)|0,n=(n=n+Math.imul(C,rt)|0)+Math.imul(D,et)|0,s=s+Math.imul(D,rt)|0,i=i+Math.imul(x,nt)|0,n=(n=n+Math.imul(x,st)|0)+Math.imul(K,nt)|0,s=s+Math.imul(K,st)|0,i=i+Math.imul(O,at)|0,n=(n=n+Math.imul(O,ut)|0)+Math.imul(N,at)|0,s=s+Math.imul(N,ut)|0,i=i+Math.imul(k,ft)|0,n=(n=n+Math.imul(k,ct)|0)+Math.imul(A,ft)|0,s=s+Math.imul(A,ct)|0,i=i+Math.imul(I,pt)|0,n=(n=n+Math.imul(I,mt)|0)+Math.imul(M,pt)|0,s=s+Math.imul(M,mt)|0;var Tt=(h+(i=i+Math.imul(w,yt)|0)|0)+((8191&(n=(n=n+Math.imul(w,vt)|0)+Math.imul(_,yt)|0))<<13)|0;h=((s=s+Math.imul(_,vt)|0)+(n>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,i=Math.imul(U,et),n=(n=Math.imul(U,rt))+Math.imul(L,et)|0,s=Math.imul(L,rt),i=i+Math.imul(C,nt)|0,n=(n=n+Math.imul(C,st)|0)+Math.imul(D,nt)|0,s=s+Math.imul(D,st)|0,i=i+Math.imul(x,at)|0,n=(n=n+Math.imul(x,ut)|0)+Math.imul(K,at)|0,s=s+Math.imul(K,ut)|0,i=i+Math.imul(O,ft)|0,n=(n=n+Math.imul(O,ct)|0)+Math.imul(N,ft)|0,s=s+Math.imul(N,ct)|0,i=i+Math.imul(k,pt)|0,n=(n=n+Math.imul(k,mt)|0)+Math.imul(A,pt)|0,s=s+Math.imul(A,mt)|0;var Rt=(h+(i=i+Math.imul(I,yt)|0)|0)+((8191&(n=(n=n+Math.imul(I,vt)|0)+Math.imul(M,yt)|0))<<13)|0;h=((s=s+Math.imul(M,vt)|0)+(n>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,i=Math.imul(U,nt),n=(n=Math.imul(U,st))+Math.imul(L,nt)|0,s=Math.imul(L,st),i=i+Math.imul(C,at)|0,n=(n=n+Math.imul(C,ut)|0)+Math.imul(D,at)|0,s=s+Math.imul(D,ut)|0,i=i+Math.imul(x,ft)|0,n=(n=n+Math.imul(x,ct)|0)+Math.imul(K,ft)|0,s=s+Math.imul(K,ct)|0,i=i+Math.imul(O,pt)|0,n=(n=n+Math.imul(O,mt)|0)+Math.imul(N,pt)|0,s=s+Math.imul(N,mt)|0;var xt=(h+(i=i+Math.imul(k,yt)|0)|0)+((8191&(n=(n=n+Math.imul(k,vt)|0)+Math.imul(A,yt)|0))<<13)|0;h=((s=s+Math.imul(A,vt)|0)+(n>>>13)|0)+(xt>>>26)|0,xt&=67108863,i=Math.imul(U,at),n=(n=Math.imul(U,ut))+Math.imul(L,at)|0,s=Math.imul(L,ut),i=i+Math.imul(C,ft)|0,n=(n=n+Math.imul(C,ct)|0)+Math.imul(D,ft)|0,s=s+Math.imul(D,ct)|0,i=i+Math.imul(x,pt)|0,n=(n=n+Math.imul(x,mt)|0)+Math.imul(K,pt)|0,s=s+Math.imul(K,mt)|0;var Kt=(h+(i=i+Math.imul(O,yt)|0)|0)+((8191&(n=(n=n+Math.imul(O,vt)|0)+Math.imul(N,yt)|0))<<13)|0;h=((s=s+Math.imul(N,vt)|0)+(n>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,i=Math.imul(U,ft),n=(n=Math.imul(U,ct))+Math.imul(L,ft)|0,s=Math.imul(L,ct),i=i+Math.imul(C,pt)|0,n=(n=n+Math.imul(C,mt)|0)+Math.imul(D,pt)|0,s=s+Math.imul(D,mt)|0;var Ht=(h+(i=i+Math.imul(x,yt)|0)|0)+((8191&(n=(n=n+Math.imul(x,vt)|0)+Math.imul(K,yt)|0))<<13)|0;h=((s=s+Math.imul(K,vt)|0)+(n>>>13)|0)+(Ht>>>26)|0,Ht&=67108863,i=Math.imul(U,pt),n=(n=Math.imul(U,mt))+Math.imul(L,pt)|0,s=Math.imul(L,mt);var Ct=(h+(i=i+Math.imul(C,yt)|0)|0)+((8191&(n=(n=n+Math.imul(C,vt)|0)+Math.imul(D,yt)|0))<<13)|0;h=((s=s+Math.imul(D,vt)|0)+(n>>>13)|0)+(Ct>>>26)|0,Ct&=67108863;var Dt=(h+(i=Math.imul(U,yt))|0)+((8191&(n=(n=Math.imul(U,vt))+Math.imul(L,yt)|0))<<13)|0;return h=((s=Math.imul(L,vt))+(n>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,u[0]=St,u[1]=wt,u[2]=_t,u[3]=Pt,u[4]=It,u[5]=Mt,u[6]=Bt,u[7]=kt,u[8]=At,u[9]=Et,u[10]=Ot,u[11]=Nt,u[12]=Tt,u[13]=Rt,u[14]=xt,u[15]=Kt,u[16]=Ht,u[17]=Ct,u[18]=Dt,0!==h&&(u[19]=h,r.length++),r};function jumboMulTo(t,e,r){return(new FFTM).mulp(t,e,r)}function FFTM(t,e){this.x=t,this.y=e}Math.imul||(a=smallMulTo),BN.prototype.mulTo=function mulTo(t,e){var r,i=this.length+t.length;return r=10===this.length&&10===t.length?a(this,t,e):i<63?smallMulTo(this,t,e):i<1024?function bigMulTo(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var i=0,n=0,s=0;s<r.length-1;s++){var o=n;n=0;for(var a=67108863&i,u=Math.min(s,e.length-1),h=Math.max(0,s-t.length+1);h<=u;h++){var f=s-h,c=(0|t.words[f])*(0|e.words[h]),d=67108863&c;a=67108863&(d=d+a|0),n+=(o=(o=o+(c/67108864|0)|0)+(d>>>26)|0)>>>26,o&=67108863}r.words[s]=a,i=o,o=n}return 0!==i?r.words[s]=i:r.length--,r.strip()}(this,t,e):jumboMulTo(this,t,e),r},FFTM.prototype.makeRBT=function makeRBT(t){for(var e=new Array(t),r=BN.prototype._countBits(t)-1,i=0;i<t;i++)e[i]=this.revBin(i,r,t);return e},FFTM.prototype.revBin=function revBin(t,e,r){if(0===t||t===r-1)return t;for(var i=0,n=0;n<e;n++)i|=(1&t)<<e-n-1,t>>=1;return i},FFTM.prototype.permute=function permute(t,e,r,i,n,s){for(var o=0;o<s;o++)i[o]=e[t[o]],n[o]=r[t[o]]},FFTM.prototype.transform=function transform(t,e,r,i,n,s){this.permute(s,t,e,r,i,n);for(var o=1;o<n;o<<=1)for(var a=o<<1,u=Math.cos(2*Math.PI/a),h=Math.sin(2*Math.PI/a),f=0;f<n;f+=a)for(var c=u,d=h,p=0;p<o;p++){var l=r[f+p],m=i[f+p],b=r[f+p+o],g=i[f+p+o],y=c*b-d*g;g=c*g+d*b,b=y,r[f+p]=l+b,i[f+p]=m+g,r[f+p+o]=l-b,i[f+p+o]=m-g,p!==a&&(y=u*c-h*d,d=u*d+h*c,c=y)}},FFTM.prototype.guessLen13b=function guessLen13b(t,e){var r=1|Math.max(e,t),i=1&r,n=0;for(r=r/2|0;r;r>>>=1)n++;return 1<<n+1+i},FFTM.prototype.conjugate=function conjugate(t,e,r){if(!(r<=1))for(var i=0;i<r/2;i++){var n=t[i];t[i]=t[r-i-1],t[r-i-1]=n,n=e[i],e[i]=-e[r-i-1],e[r-i-1]=-n}},FFTM.prototype.normalize13b=function normalize13b(t,e){for(var r=0,i=0;i<e/2;i++){var n=8192*Math.round(t[2*i+1]/e)+Math.round(t[2*i]/e)+r;t[i]=67108863&n,r=n<67108864?0:n/67108864|0}return t},FFTM.prototype.convert13b=function convert13b(t,e,r,i){for(var n=0,s=0;s<e;s++)n+=0|t[s],r[2*s]=8191&n,n>>>=13,r[2*s+1]=8191&n,n>>>=13;for(s=2*e;s<i;++s)r[s]=0;assert(0===n),assert(!(-8192&n))},FFTM.prototype.stub=function stub(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=0;return e},FFTM.prototype.mulp=function mulp(t,e,r){var i=2*this.guessLen13b(t.length,e.length),n=this.makeRBT(i),s=this.stub(i),o=new Array(i),a=new Array(i),u=new Array(i),h=new Array(i),f=new Array(i),c=new Array(i),d=r.words;d.length=i,this.convert13b(t.words,t.length,o,i),this.convert13b(e.words,e.length,h,i),this.transform(o,s,a,u,i,n),this.transform(h,s,f,c,i,n);for(var p=0;p<i;p++){var l=a[p]*f[p]-u[p]*c[p];u[p]=a[p]*c[p]+u[p]*f[p],a[p]=l}return this.conjugate(a,u,i),this.transform(a,u,d,s,i,n),this.conjugate(d,s,i),this.normalize13b(d,i),r.negative=t.negative^e.negative,r.length=t.length+e.length,r.strip()},BN.prototype.mul=function mul(t){var e=new BN(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},BN.prototype.mulf=function mulf(t){var e=new BN(null);return e.words=new Array(this.length+t.length),jumboMulTo(this,t,e)},BN.prototype.imul=function imul(t){return this.clone().mulTo(t,this)},BN.prototype.imuln=function imuln(t){assert("number"==typeof t),assert(t<67108864);for(var e=0,r=0;r<this.length;r++){var i=(0|this.words[r])*t,n=(67108863&i)+(67108863&e);e>>=26,e+=i/67108864|0,e+=n>>>26,this.words[r]=67108863&n}return 0!==e&&(this.words[r]=e,this.length++),this},BN.prototype.muln=function muln(t){return this.clone().imuln(t)},BN.prototype.sqr=function sqr(){return this.mul(this)},BN.prototype.isqr=function isqr(){return this.imul(this.clone())},BN.prototype.pow=function pow(t){var e=function toBitArray(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var i=r/26|0,n=r%26;e[r]=(t.words[i]&1<<n)>>>n}return e}(t);if(0===e.length)return new BN(1);for(var r=this,i=0;i<e.length&&0===e[i];i++,r=r.sqr());if(++i<e.length)for(var n=r.sqr();i<e.length;i++,n=n.sqr())0!==e[i]&&(r=r.mul(n));return r},BN.prototype.iushln=function iushln(t){assert("number"==typeof t&&t>=0);var e,r=t%26,i=(t-r)/26,n=67108863>>>26-r<<26-r;if(0!==r){var s=0;for(e=0;e<this.length;e++){var o=this.words[e]&n,a=(0|this.words[e])-o<<r;this.words[e]=a|s,s=o>>>26-r}s&&(this.words[e]=s,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this.strip()},BN.prototype.ishln=function ishln(t){return assert(0===this.negative),this.iushln(t)},BN.prototype.iushrn=function iushrn(t,e,r){var i;assert("number"==typeof t&&t>=0),i=e?(e-e%26)/26:0;var n=t%26,s=Math.min((t-n)/26,this.length),o=67108863^67108863>>>n<<n,a=r;if(i-=s,i=Math.max(0,i),a){for(var u=0;u<s;u++)a.words[u]=this.words[u];a.length=s}if(0===s);else if(this.length>s)for(this.length-=s,u=0;u<this.length;u++)this.words[u]=this.words[u+s];else this.words[0]=0,this.length=1;var h=0;for(u=this.length-1;u>=0&&(0!==h||u>=i);u--){var f=0|this.words[u];this.words[u]=h<<26-n|f>>>n,h=f&o}return a&&0!==h&&(a.words[a.length++]=h),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},BN.prototype.ishrn=function ishrn(t,e,r){return assert(0===this.negative),this.iushrn(t,e,r)},BN.prototype.shln=function shln(t){return this.clone().ishln(t)},BN.prototype.ushln=function ushln(t){return this.clone().iushln(t)},BN.prototype.shrn=function shrn(t){return this.clone().ishrn(t)},BN.prototype.ushrn=function ushrn(t){return this.clone().iushrn(t)},BN.prototype.testn=function testn(t){assert("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26,i=1<<e;return!(this.length<=r)&&!!(this.words[r]&i)},BN.prototype.imaskn=function imaskn(t){assert("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26;if(assert(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==e&&r++,this.length=Math.min(r,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this.strip()},BN.prototype.maskn=function maskn(t){return this.clone().imaskn(t)},BN.prototype.iaddn=function iaddn(t){return assert("number"==typeof t),assert(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},BN.prototype._iaddn=function _iaddn(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},BN.prototype.isubn=function isubn(t){if(assert("number"==typeof t),assert(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},BN.prototype.addn=function addn(t){return this.clone().iaddn(t)},BN.prototype.subn=function subn(t){return this.clone().isubn(t)},BN.prototype.iabs=function iabs(){return this.negative=0,this},BN.prototype.abs=function abs(){return this.clone().iabs()},BN.prototype._ishlnsubmul=function _ishlnsubmul(t,e,r){var i,n,s=t.length+r;this._expand(s);var o=0;for(i=0;i<t.length;i++){n=(0|this.words[i+r])+o;var a=(0|t.words[i])*e;o=((n-=67108863&a)>>26)-(a/67108864|0),this.words[i+r]=67108863&n}for(;i<this.length-r;i++)o=(n=(0|this.words[i+r])+o)>>26,this.words[i+r]=67108863&n;if(0===o)return this.strip();for(assert(-1===o),o=0,i=0;i<this.length;i++)o=(n=-(0|this.words[i])+o)>>26,this.words[i]=67108863&n;return this.negative=1,this.strip()},BN.prototype._wordDiv=function _wordDiv(t,e){var r=(this.length,t.length),i=this.clone(),n=t,s=0|n.words[n.length-1];0!==(r=26-this._countBits(s))&&(n=n.ushln(r),i.iushln(r),s=0|n.words[n.length-1]);var o,a=i.length-n.length;if("mod"!==e){(o=new BN(null)).length=a+1,o.words=new Array(o.length);for(var u=0;u<o.length;u++)o.words[u]=0}var h=i.clone()._ishlnsubmul(n,1,a);0===h.negative&&(i=h,o&&(o.words[a]=1));for(var f=a-1;f>=0;f--){var c=67108864*(0|i.words[n.length+f])+(0|i.words[n.length+f-1]);for(c=Math.min(c/s|0,67108863),i._ishlnsubmul(n,c,f);0!==i.negative;)c--,i.negative=0,i._ishlnsubmul(n,1,f),i.isZero()||(i.negative^=1);o&&(o.words[f]=c)}return o&&o.strip(),i.strip(),"div"!==e&&0!==r&&i.iushrn(r),{div:o||null,mod:i}},BN.prototype.divmod=function divmod(t,e,r){return assert(!t.isZero()),this.isZero()?{div:new BN(0),mod:new BN(0)}:0!==this.negative&&0===t.negative?(s=this.neg().divmod(t,e),"mod"!==e&&(i=s.div.neg()),"div"!==e&&(n=s.mod.neg(),r&&0!==n.negative&&n.iadd(t)),{div:i,mod:n}):0===this.negative&&0!==t.negative?(s=this.divmod(t.neg(),e),"mod"!==e&&(i=s.div.neg()),{div:i,mod:s.mod}):this.negative&t.negative?(s=this.neg().divmod(t.neg(),e),"div"!==e&&(n=s.mod.neg(),r&&0!==n.negative&&n.isub(t)),{div:s.div,mod:n}):t.length>this.length||this.cmp(t)<0?{div:new BN(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new BN(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new BN(this.modn(t.words[0]))}:this._wordDiv(t,e);var i,n,s},BN.prototype.div=function div(t){return this.divmod(t,"div",!1).div},BN.prototype.mod=function mod(t){return this.divmod(t,"mod",!1).mod},BN.prototype.umod=function umod(t){return this.divmod(t,"mod",!0).mod},BN.prototype.divRound=function divRound(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,i=t.ushrn(1),n=t.andln(1),s=r.cmp(i);return s<0||1===n&&0===s?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},BN.prototype.modn=function modn(t){assert(t<=67108863);for(var e=(1<<26)%t,r=0,i=this.length-1;i>=0;i--)r=(e*r+(0|this.words[i]))%t;return r},BN.prototype.idivn=function idivn(t){assert(t<=67108863);for(var e=0,r=this.length-1;r>=0;r--){var i=(0|this.words[r])+67108864*e;this.words[r]=i/t|0,e=i%t}return this.strip()},BN.prototype.divn=function divn(t){return this.clone().idivn(t)},BN.prototype.egcd=function egcd(t){assert(0===t.negative),assert(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i=new BN(1),n=new BN(0),s=new BN(0),o=new BN(1),a=0;e.isEven()&&r.isEven();)e.iushrn(1),r.iushrn(1),++a;for(var u=r.clone(),h=e.clone();!e.isZero();){for(var f=0,c=1;!(e.words[0]&c)&&f<26;++f,c<<=1);if(f>0)for(e.iushrn(f);f-- >0;)(i.isOdd()||n.isOdd())&&(i.iadd(u),n.isub(h)),i.iushrn(1),n.iushrn(1);for(var d=0,p=1;!(r.words[0]&p)&&d<26;++d,p<<=1);if(d>0)for(r.iushrn(d);d-- >0;)(s.isOdd()||o.isOdd())&&(s.iadd(u),o.isub(h)),s.iushrn(1),o.iushrn(1);e.cmp(r)>=0?(e.isub(r),i.isub(s),n.isub(o)):(r.isub(e),s.isub(i),o.isub(n))}return{a:s,b:o,gcd:r.iushln(a)}},BN.prototype._invmp=function _invmp(t){assert(0===t.negative),assert(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i,n=new BN(1),s=new BN(0),o=r.clone();e.cmpn(1)>0&&r.cmpn(1)>0;){for(var a=0,u=1;!(e.words[0]&u)&&a<26;++a,u<<=1);if(a>0)for(e.iushrn(a);a-- >0;)n.isOdd()&&n.iadd(o),n.iushrn(1);for(var h=0,f=1;!(r.words[0]&f)&&h<26;++h,f<<=1);if(h>0)for(r.iushrn(h);h-- >0;)s.isOdd()&&s.iadd(o),s.iushrn(1);e.cmp(r)>=0?(e.isub(r),n.isub(s)):(r.isub(e),s.isub(n))}return(i=0===e.cmpn(1)?n:s).cmpn(0)<0&&i.iadd(t),i},BN.prototype.gcd=function gcd(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var i=0;e.isEven()&&r.isEven();i++)e.iushrn(1),r.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;r.isEven();)r.iushrn(1);var n=e.cmp(r);if(n<0){var s=e;e=r,r=s}else if(0===n||0===r.cmpn(1))break;e.isub(r)}return r.iushln(i)},BN.prototype.invm=function invm(t){return this.egcd(t).a.umod(t)},BN.prototype.isEven=function isEven(){return!(1&this.words[0])},BN.prototype.isOdd=function isOdd(){return!(1&~this.words[0])},BN.prototype.andln=function andln(t){return this.words[0]&t},BN.prototype.bincn=function bincn(t){assert("number"==typeof t);var e=t%26,r=(t-e)/26,i=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var n=i,s=r;0!==n&&s<this.length;s++){var o=0|this.words[s];n=(o+=n)>>>26,o&=67108863,this.words[s]=o}return 0!==n&&(this.words[s]=n,this.length++),this},BN.prototype.isZero=function isZero(){return 1===this.length&&0===this.words[0]},BN.prototype.cmpn=function cmpn(t){var e,r=t<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)e=1;else{r&&(t=-t),assert(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},BN.prototype.cmp=function cmp(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},BN.prototype.ucmp=function ucmp(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,r=this.length-1;r>=0;r--){var i=0|this.words[r],n=0|t.words[r];if(i!==n){i<n?e=-1:i>n&&(e=1);break}}return e},BN.prototype.gtn=function gtn(t){return 1===this.cmpn(t)},BN.prototype.gt=function gt(t){return 1===this.cmp(t)},BN.prototype.gten=function gten(t){return this.cmpn(t)>=0},BN.prototype.gte=function gte(t){return this.cmp(t)>=0},BN.prototype.ltn=function ltn(t){return-1===this.cmpn(t)},BN.prototype.lt=function lt(t){return-1===this.cmp(t)},BN.prototype.lten=function lten(t){return this.cmpn(t)<=0},BN.prototype.lte=function lte(t){return this.cmp(t)<=0},BN.prototype.eqn=function eqn(t){return 0===this.cmpn(t)},BN.prototype.eq=function eq(t){return 0===this.cmp(t)},BN.red=function red(t){return new Red(t)},BN.prototype.toRed=function toRed(t){return assert(!this.red,"Already a number in reduction context"),assert(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},BN.prototype.fromRed=function fromRed(){return assert(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},BN.prototype._forceRed=function _forceRed(t){return this.red=t,this},BN.prototype.forceRed=function forceRed(t){return assert(!this.red,"Already a number in reduction context"),this._forceRed(t)},BN.prototype.redAdd=function redAdd(t){return assert(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},BN.prototype.redIAdd=function redIAdd(t){return assert(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},BN.prototype.redSub=function redSub(t){return assert(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},BN.prototype.redISub=function redISub(t){return assert(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},BN.prototype.redShl=function redShl(t){return assert(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},BN.prototype.redMul=function redMul(t){return assert(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},BN.prototype.redIMul=function redIMul(t){return assert(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},BN.prototype.redSqr=function redSqr(){return assert(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},BN.prototype.redISqr=function redISqr(){return assert(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},BN.prototype.redSqrt=function redSqrt(){return assert(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},BN.prototype.redInvm=function redInvm(){return assert(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},BN.prototype.redNeg=function redNeg(){return assert(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},BN.prototype.redPow=function redPow(t){return assert(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var u={k256:null,p224:null,p192:null,p25519:null};function MPrime(t,e){this.name=t,this.p=new BN(e,16),this.n=this.p.bitLength(),this.k=new BN(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function K256(){MPrime.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function P224(){MPrime.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function P192(){MPrime.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function P25519(){MPrime.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function Red(t){if("string"==typeof t){var e=BN._prime(t);this.m=e.p,this.prime=e}else assert(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function Mont(t){Red.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new BN(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}MPrime.prototype._tmp=function _tmp(){var t=new BN(null);return t.words=new Array(Math.ceil(this.n/13)),t},MPrime.prototype.ireduce=function ireduce(t){var e,r=t;do{this.split(r,this.tmp),e=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(e>this.n);var i=e<this.n?-1:r.ucmp(this.p);return 0===i?(r.words[0]=0,r.length=1):i>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},MPrime.prototype.split=function split(t,e){t.iushrn(this.n,0,e)},MPrime.prototype.imulK=function imulK(t){return t.imul(this.k)},inherits(K256,MPrime),K256.prototype.split=function split(t,e){for(var r=4194303,i=Math.min(t.length,9),n=0;n<i;n++)e.words[n]=t.words[n];if(e.length=i,t.length<=9)return t.words[0]=0,void(t.length=1);var s=t.words[9];for(e.words[e.length++]=s&r,n=10;n<t.length;n++){var o=0|t.words[n];t.words[n-10]=(o&r)<<4|s>>>22,s=o}s>>>=22,t.words[n-10]=s,0===s&&t.length>10?t.length-=10:t.length-=9},K256.prototype.imulK=function imulK(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var i=0|t.words[r];e+=977*i,t.words[r]=67108863&e,e=64*i+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},inherits(P224,MPrime),inherits(P192,MPrime),inherits(P25519,MPrime),P25519.prototype.imulK=function imulK(t){for(var e=0,r=0;r<t.length;r++){var i=19*(0|t.words[r])+e,n=67108863&i;i>>>=26,t.words[r]=n,e=i}return 0!==e&&(t.words[t.length++]=e),t},BN._prime=function prime(t){if(u[t])return u[t];var prime;if("k256"===t)prime=new K256;else if("p224"===t)prime=new P224;else if("p192"===t)prime=new P192;else{if("p25519"!==t)throw new Error("Unknown prime "+t);prime=new P25519}return u[t]=prime,prime},Red.prototype._verify1=function _verify1(t){assert(0===t.negative,"red works only with positives"),assert(t.red,"red works only with red numbers")},Red.prototype._verify2=function _verify2(t,e){assert(!(t.negative|e.negative),"red works only with positives"),assert(t.red&&t.red===e.red,"red works only with red numbers")},Red.prototype.imod=function imod(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},Red.prototype.neg=function neg(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},Red.prototype.add=function add(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},Red.prototype.iadd=function iadd(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},Red.prototype.sub=function sub(t,e){this._verify2(t,e);var r=t.sub(e);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},Red.prototype.isub=function isub(t,e){this._verify2(t,e);var r=t.isub(e);return r.cmpn(0)<0&&r.iadd(this.m),r},Red.prototype.shl=function shl(t,e){return this._verify1(t),this.imod(t.ushln(e))},Red.prototype.imul=function imul(t,e){return this._verify2(t,e),this.imod(t.imul(e))},Red.prototype.mul=function mul(t,e){return this._verify2(t,e),this.imod(t.mul(e))},Red.prototype.isqr=function isqr(t){return this.imul(t,t.clone())},Red.prototype.sqr=function sqr(t){return this.mul(t,t)},Red.prototype.sqrt=function sqrt(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(assert(e%2==1),3===e){var r=this.m.add(new BN(1)).iushrn(2);return this.pow(t,r)}for(var i=this.m.subn(1),n=0;!i.isZero()&&0===i.andln(1);)n++,i.iushrn(1);assert(!i.isZero());var s=new BN(1).toRed(this),o=s.redNeg(),a=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new BN(2*u*u).toRed(this);0!==this.pow(u,a).cmp(o);)u.redIAdd(o);for(var h=this.pow(u,i),f=this.pow(t,i.addn(1).iushrn(1)),c=this.pow(t,i),d=n;0!==c.cmp(s);){for(var p=c,l=0;0!==p.cmp(s);l++)p=p.redSqr();assert(l<d);var m=this.pow(h,new BN(1).iushln(d-l-1));f=f.redMul(m),h=m.redSqr(),c=c.redMul(h),d=l}return f},Red.prototype.invm=function invm(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},Red.prototype.pow=function pow(t,e){if(e.isZero())return new BN(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=new Array(16);r[0]=new BN(1).toRed(this),r[1]=t;for(var i=2;i<r.length;i++)r[i]=this.mul(r[i-1],t);var n=r[0],s=0,o=0,a=e.bitLength()%26;for(0===a&&(a=26),i=e.length-1;i>=0;i--){for(var u=e.words[i],h=a-1;h>=0;h--){var f=u>>h&1;n!==r[0]&&(n=this.sqr(n)),0!==f||0!==s?(s<<=1,s|=f,(4===++o||0===i&&0===h)&&(n=this.mul(n,r[s]),o=0,s=0)):o=0}a=26}return n},Red.prototype.convertTo=function convertTo(t){var e=t.umod(this.m);return e===t?e.clone():e},Red.prototype.convertFrom=function convertFrom(t){var e=t.clone();return e.red=null,e},BN.mont=function mont(t){return new Mont(t)},inherits(Mont,Red),Mont.prototype.convertTo=function convertTo(t){return this.imod(t.ushln(this.shift))},Mont.prototype.convertFrom=function convertFrom(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},Mont.prototype.imul=function imul(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),i=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=r.isub(i).iushrn(this.shift),s=n;return n.cmp(this.m)>=0?s=n.isub(this.m):n.cmpn(0)<0&&(s=n.iadd(this.m)),s._forceRed(this)},Mont.prototype.mul=function mul(t,e){if(t.isZero()||e.isZero())return new BN(0)._forceRed(this);var r=t.mul(e),i=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=r.isub(i).iushrn(this.shift),s=n;return n.cmp(this.m)>=0?s=n.isub(this.m):n.cmpn(0)<0&&(s=n.iadd(this.m)),s._forceRed(this)},Mont.prototype.invm=function invm(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t=r.nmd(t),this)},633472:t=>{"function"==typeof Object.create?t.exports=function inherits(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function inherits(t,e){if(e){t.super_=e;var TempCtor=function(){};TempCtor.prototype=e.prototype,t.prototype=new TempCtor,t.prototype.constructor=t}}},807374:t=>{"function"==typeof Object.create?t.exports=function inherits(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function inherits(t,e){t.super_=e;var TempCtor=function(){};TempCtor.prototype=e.prototype,t.prototype=new TempCtor,t.prototype.constructor=t}},70491:function(t,e,r){var i;t=r.nmd(t),function(n){e&&e.nodeType,t&&t.nodeType;var s="object"==typeof r.g&&r.g;s.global!==s&&s.window!==s&&s.self;var o,a=2147483647,u=36,h=1,f=26,c=38,d=700,p=72,l=128,m="-",b=/^xn--/,g=/[^\x20-\x7E]/,y=/[\x2E\u3002\uFF0E\uFF61]/g,v={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},w=u-h,_=Math.floor,P=String.fromCharCode;function error(t){throw new RangeError(v[t])}function map(t,e){for(var r=t.length,i=[];r--;)i[r]=e(t[r]);return i}function mapDomain(t,e){var r=t.split("@"),i="";return r.length>1&&(i=r[0]+"@",t=r[1]),i+map((t=t.replace(y,".")).split("."),e).join(".")}function ucs2decode(t){for(var e,r,i=[],n=0,s=t.length;n<s;)(e=t.charCodeAt(n++))>=55296&&e<=56319&&n<s?56320==(64512&(r=t.charCodeAt(n++)))?i.push(((1023&e)<<10)+(1023&r)+65536):(i.push(e),n--):i.push(e);return i}function ucs2encode(t){return map(t,(function(t){var e="";return t>65535&&(e+=P((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=P(t)})).join("")}function digitToBasic(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function adapt(t,e,r){var i=0;for(t=r?_(t/d):t>>1,t+=_(t/e);t>w*f>>1;i+=u)t=_(t/w);return _(i+(w+1)*t/(t+c))}function decode(t){var e,r,i,n,s,o,c,d,b,g,y,v=[],w=t.length,P=0,I=l,M=p;for((r=t.lastIndexOf(m))<0&&(r=0),i=0;i<r;++i)t.charCodeAt(i)>=128&&error("not-basic"),v.push(t.charCodeAt(i));for(n=r>0?r+1:0;n<w;){for(s=P,o=1,c=u;n>=w&&error("invalid-input"),((d=(y=t.charCodeAt(n++))-48<10?y-22:y-65<26?y-65:y-97<26?y-97:u)>=u||d>_((a-P)/o))&&error("overflow"),P+=d*o,!(d<(b=c<=M?h:c>=M+f?f:c-M));c+=u)o>_(a/(g=u-b))&&error("overflow"),o*=g;M=adapt(P-s,e=v.length+1,0==s),_(P/e)>a-I&&error("overflow"),I+=_(P/e),P%=e,v.splice(P++,0,I)}return ucs2encode(v)}function encode(t){var e,r,i,n,s,o,c,d,b,g,y,v,w,I,M,B=[];for(v=(t=ucs2decode(t)).length,e=l,r=0,s=p,o=0;o<v;++o)(y=t[o])<128&&B.push(P(y));for(i=n=B.length,n&&B.push(m);i<v;){for(c=a,o=0;o<v;++o)(y=t[o])>=e&&y<c&&(c=y);for(c-e>_((a-r)/(w=i+1))&&error("overflow"),r+=(c-e)*w,e=c,o=0;o<v;++o)if((y=t[o])<e&&++r>a&&error("overflow"),y==e){for(d=r,b=u;!(d<(g=b<=s?h:b>=s+f?f:b-s));b+=u)M=d-g,I=u-g,B.push(P(digitToBasic(g+M%I,0))),d=_(M/I);B.push(P(digitToBasic(d,0))),s=adapt(r,w,i==n),r=0,++i}++r,++e}return B.join("")}o={version:"1.4.1",ucs2:{decode:ucs2decode,encode:ucs2encode},decode,encode,toASCII:function toASCII(t){return mapDomain(t,(function(t){return g.test(t)?"xn--"+encode(t):t}))},toUnicode:function toUnicode(t){return mapDomain(t,(function(t){return b.test(t)?decode(t.slice(4).toLowerCase()):t}))}},void 0===(i=function(){return o}.call(e,r,e,t))||(t.exports=i)}()},505303:(t,e,r)=>{"use strict";var i=r(70491);function Url(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var n=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,o=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,a=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),u=["'"].concat(a),h=["%","/","?",";","#"].concat(u),f=["/","?","#"],c=/^[+a-z0-9A-Z_-]{0,63}$/,d=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,p={javascript:!0,"javascript:":!0},l={javascript:!0,"javascript:":!0},m={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},b=r(145810);function urlParse(t,e,r){if(t&&"object"==typeof t&&t instanceof Url)return t;var i=new Url;return i.parse(t,e,r),i}Url.prototype.parse=function(t,e,r){if("string"!=typeof t)throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var s=t.indexOf("?"),a=-1!==s&&s<t.indexOf("#")?"?":"#",g=t.split(a);g[0]=g[0].replace(/\\/g,"/");var y=t=g.join(a);if(y=y.trim(),!r&&1===t.split("#").length){var v=o.exec(y);if(v)return this.path=y,this.href=y,this.pathname=v[1],v[2]?(this.search=v[2],this.query=e?b.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var w=n.exec(y);if(w){var _=(w=w[0]).toLowerCase();this.protocol=_,y=y.substr(w.length)}if(r||w||y.match(/^\/\/[^@/]+@[^@/]+/)){var P="//"===y.substr(0,2);!P||w&&l[w]||(y=y.substr(2),this.slashes=!0)}if(!l[w]&&(P||w&&!m[w])){for(var I,M,B=-1,k=0;k<f.length;k++){-1!==(A=y.indexOf(f[k]))&&(-1===B||A<B)&&(B=A)}-1!==(M=-1===B?y.lastIndexOf("@"):y.lastIndexOf("@",B))&&(I=y.slice(0,M),y=y.slice(M+1),this.auth=decodeURIComponent(I)),B=-1;for(k=0;k<h.length;k++){var A;-1!==(A=y.indexOf(h[k]))&&(-1===B||A<B)&&(B=A)}-1===B&&(B=y.length),this.host=y.slice(0,B),y=y.slice(B),this.parseHost(),this.hostname=this.hostname||"";var E="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!E)for(var O=this.hostname.split(/\./),N=(k=0,O.length);k<N;k++){var T=O[k];if(T&&!T.match(c)){for(var x="",K=0,H=T.length;K<H;K++)T.charCodeAt(K)>127?x+="x":x+=T[K];if(!x.match(c)){var C=O.slice(0,k),D=O.slice(k+1),F=T.match(d);F&&(C.push(F[1]),D.unshift(F[2])),D.length&&(y="/"+D.join(".")+y),this.hostname=C.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),E||(this.hostname=i.toASCII(this.hostname));var U=this.port?":"+this.port:"",L=this.hostname||"";this.host=L+U,this.href+=this.host,E&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==y[0]&&(y="/"+y))}if(!p[_])for(k=0,N=u.length;k<N;k++){var z=u[k];if(-1!==y.indexOf(z)){var j=encodeURIComponent(z);j===z&&(j=escape(z)),y=y.split(z).join(j)}}var q=y.indexOf("#");-1!==q&&(this.hash=y.substr(q),y=y.slice(0,q));var V=y.indexOf("?");if(-1!==V?(this.search=y.substr(V),this.query=y.substr(V+1),e&&(this.query=b.parse(this.query)),y=y.slice(0,V)):e&&(this.search="",this.query={}),y&&(this.pathname=y),m[_]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){U=this.pathname||"";var G=this.search||"";this.path=U+G}return this.href=this.format(),this},Url.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",i=this.hash||"",n=!1,s="";this.host?n=t+this.host:this.hostname&&(n=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(n+=":"+this.port)),this.query&&"object"==typeof this.query&&Object.keys(this.query).length&&(s=b.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var o=this.search||s&&"?"+s||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||m[e])&&!1!==n?(n="//"+(n||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):n||(n=""),i&&"#"!==i.charAt(0)&&(i="#"+i),o&&"?"!==o.charAt(0)&&(o="?"+o),e+n+(r=r.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(o=o.replace("#","%23"))+i},Url.prototype.resolve=function(t){return this.resolveObject(urlParse(t,!1,!0)).format()},Url.prototype.resolveObject=function(t){if("string"==typeof t){var e=new Url;e.parse(t,!1,!0),t=e}for(var r=new Url,i=Object.keys(this),n=0;n<i.length;n++){var s=i[n];r[s]=this[s]}if(r.hash=t.hash,""===t.href)return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var o=Object.keys(t),a=0;a<o.length;a++){var u=o[a];"protocol"!==u&&(r[u]=t[u])}return m[r.protocol]&&r.hostname&&!r.pathname&&(r.pathname="/",r.path=r.pathname),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!m[t.protocol]){for(var h=Object.keys(t),f=0;f<h.length;f++){var c=h[f];r[c]=t[c]}return r.href=r.format(),r}if(r.protocol=t.protocol,t.host||l[t.protocol])r.pathname=t.pathname;else{for(var d=(t.pathname||"").split("/");d.length&&!(t.host=d.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),r.pathname=d.join("/")}if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var p=r.pathname||"",b=r.search||"";r.path=p+b}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var g=r.pathname&&"/"===r.pathname.charAt(0),y=t.host||t.pathname&&"/"===t.pathname.charAt(0),v=y||g||r.host&&t.pathname,w=v,_=r.pathname&&r.pathname.split("/")||[],P=(d=t.pathname&&t.pathname.split("/")||[],r.protocol&&!m[r.protocol]);if(P&&(r.hostname="",r.port=null,r.host&&(""===_[0]?_[0]=r.host:_.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===d[0]?d[0]=t.host:d.unshift(t.host)),t.host=null),v=v&&(""===d[0]||""===_[0])),y)r.host=t.host||""===t.host?t.host:r.host,r.hostname=t.hostname||""===t.hostname?t.hostname:r.hostname,r.search=t.search,r.query=t.query,_=d;else if(d.length)_||(_=[]),_.pop(),_=_.concat(d),r.search=t.search,r.query=t.query;else if(null!=t.search){if(P)r.host=_.shift(),r.hostname=r.host,(A=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=A.shift(),r.hostname=A.shift(),r.host=r.hostname);return r.search=t.search,r.query=t.query,null===r.pathname&&null===r.search||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!_.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var I=_.slice(-1)[0],M=(r.host||t.host||_.length>1)&&("."===I||".."===I)||""===I,B=0,k=_.length;k>=0;k--)"."===(I=_[k])?_.splice(k,1):".."===I?(_.splice(k,1),B++):B&&(_.splice(k,1),B--);if(!v&&!w)for(;B--;B)_.unshift("..");!v||""===_[0]||_[0]&&"/"===_[0].charAt(0)||_.unshift(""),M&&"/"!==_.join("/").substr(-1)&&_.push("");var A,E=""===_[0]||_[0]&&"/"===_[0].charAt(0);P&&(r.hostname=E?"":_.length?_.shift():"",r.host=r.hostname,(A=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=A.shift(),r.hostname=A.shift(),r.host=r.hostname));return(v=v||r.host&&_.length)&&!E&&_.unshift(""),_.length>0?r.pathname=_.join("/"):(r.pathname=null,r.path=null),null===r.pathname&&null===r.search||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r},Url.prototype.parseHost=function(){var t=this.host,e=s.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)},e.parse=urlParse,e.resolve=function urlResolve(t,e){return urlParse(t,!1,!0).resolve(e)},e.resolveObject=function urlResolveObject(t,e){return t?urlParse(t,!1,!0).resolveObject(e):e},e.format=function urlFormat(t){return"string"==typeof t&&(t=urlParse(t)),t instanceof Url?t.format():Url.prototype.format.call(t)},e.Url=Url},142490:t=>{t.exports=function(t,e){if("function"==typeof t.compare)return t.compare(e);if(t===e)return 0;for(var r=t.length,i=e.length,n=0,s=Math.min(r,i);n<s&&t[n]===e[n];)++n;return n!==s&&(r=t[n],i=e[n]),r<i?-1:i<r?1:0}},131664:t=>{"use strict";t.exports={rE:"6.5.4"}},178830:t=>{"use strict";t.exports={rE:"1.0.1"}}}]);