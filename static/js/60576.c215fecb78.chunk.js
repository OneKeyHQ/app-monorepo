"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[60576],{326745:(e,r,n)=>{n.d(r,{u:()=>useAppRoute});var t=n(654266);function useAppRoute(){return(0,t.lq)()}},138584:(e,r,n)=>{n.d(r,{Py:()=>SimpleSpinnerSkeleton,am:()=>isLoadingState,bU:()=>PageFrame,o0:()=>isErrorState});var t=n(908867),i=n(490343),o=n(791088),a=n(334439),s=n(831085),PageErrOccurred=function({onPress:e}){var r=(0,t.A)();return(0,s.jsx)(i.Empty,{pt:"$32",icon:"ErrorOutline",title:r.formatMessage({id:a.ETranslations.global_an_error_occurred}),description:r.formatMessage({id:a.ETranslations.global_an_error_occurred_desc}),buttonProps:{onPress:e,children:r.formatMessage({id:a.ETranslations.global_refresh})}})},SimpleSpinnerSkeleton=function(){return(0,s.jsxs)(i.Stack,{children:[(0,s.jsx)(i.Stack,{px:"$5",py:"$2",children:(0,s.jsx)(i.Skeleton.HeadingSm,{})}),Array.from({length:3}).map((function(e,r){return(0,s.jsxs)(o.c,{children:[(0,s.jsx)(i.Skeleton,{h:"$10",w:"$10",radius:"round"}),(0,s.jsxs)(i.Stack,{children:[(0,s.jsx)(i.Skeleton.BodyLg,{}),(0,s.jsx)(i.Skeleton.BodyMd,{})]})]},r)}))]})},isLoadingState=function({result:e,isLoading:r}){return Boolean(void 0===e&&(void 0===r||!0===r))},isErrorState=function({result:e,isLoading:r}){return Boolean(void 0===e&&!1===r)},PageFrame=function({children:e,loading:r,LoadingSkeleton:n,error:t,onRefresh:i}){return r?n?(0,s.jsx)(n,{}):null:t?(0,s.jsx)(PageErrOccurred,{onPress:i}):(0,s.jsx)(s.Fragment,{children:e})}},960576:(e,r,n)=>{n.r(r),n.d(r,{default:()=>pages_AssetProtocolList});var t=n(514041),i=n(241440),o=n(908867),a=n(490343),s=n(610421),l=n(791088),d=n(391944),c=n(498356),u=n(326745),x=n(911998),g=n(153763),p=n(259227),f=n(334439),k=n(948675),m=n(392097),h=n(138584),b=n(905817),j=n(831085),AssetProtocolContent=function({providerTypes:e}){var r=(0,o.A)(),n=!0,t=!0;return e&&e.length>0&&(n=e.includes("native"),t=e.includes("liquid")),(0,j.jsx)(a.YStack,{flex:1,children:(0,j.jsx)(a.ScrollView,{maxHeight:560,children:(0,j.jsx)(a.YStack,{children:(0,j.jsx)(a.Stack,{children:(0,j.jsxs)(a.YStack,{gap:"$5",children:[n?(0,j.jsxs)(a.YStack,{gap:6,children:[(0,j.jsx)(a.SizableText,{size:"$bodyLgMedium",children:r.formatMessage({id:f.ETranslations.earn_what_is_native_staking})}),(0,j.jsx)(a.SizableText,{size:"$bodyMd",color:"$textSubdued",children:r.formatMessage({id:f.ETranslations.earn_what_is_native_staking_desc})})]}):null,t?(0,j.jsxs)(a.YStack,{gap:6,children:[(0,j.jsx)(a.SizableText,{size:"$bodyLgMedium",children:r.formatMessage({id:f.ETranslations.earn_what_is_liquid_staking})}),(0,j.jsx)(a.SizableText,{size:"$bodyMd",color:"$textSubdued",children:r.formatMessage({id:f.ETranslations.earn_what_is_liquid_staking_desc})})]}):null]})})})})})};function StakeTypeBadge({stakeType:e,label:r}){var{bg:n,color:t}=function(e){switch(e){case"liquid":return{bg:"$purple3",color:"$purple11"};case"locked":return{bg:"$pink3",color:"$pink11"};default:return{bg:"$blue3",color:"$blue11"}}}(e);return(0,j.jsx)(a.Stack,{backgroundColor:n,borderRadius:"$1",borderCurve:"continuous",px:"$2",py:"$0.5",my:"$0.5",children:(0,j.jsx)(a.SizableText,{size:"$bodySmMedium",color:t,children:r})})}var AssetProtocolIntroButton=function({providerTypes:e}){var r=(0,o.A)(),n=(0,t.useCallback)((function(){a.Dialog.show({icon:"InfoCircleOutline",title:r.formatMessage({id:f.ETranslations.earn_staking_methods}),renderContent:(0,j.jsx)(AssetProtocolContent,{providerTypes:e}),showConfirmButton:!1,onCancelText:r.formatMessage({id:f.ETranslations.global_got_it})})}),[r,e]);return e&&e.length>0?(0,j.jsx)(a.IconButton,{icon:"InfoCircleOutline",variant:"tertiary",onPress:n}):null},ProviderTypeBadge=function({type:e}){var r=(0,o.A)();if(!e)return null;var n="native"===e?"locked":"liquid",t="native"===e?r.formatMessage({id:f.ETranslations.earn_native_staking}):r.formatMessage({id:f.ETranslations.earn_liquid_staking});return(0,j.jsx)(StakeTypeBadge,{stakeType:n,label:t})},AssetProtocolListContent=function({items:e}){var r=(0,u.u)(),n=(0,o.A)(),{accountId:s,indexedAccountId:x,symbol:g}=r.params,h=(0,c.A)(),y=(0,t.useCallback)((function({item:e}){k.U.staking.page.selectProvider({network:e.network.networkId,stakeProvider:e.provider.name}),h.navigate(m.Ax.ProtocolDetails,{accountId:s,networkId:e.network.networkId,indexedAccountId:x,symbol:g.toUpperCase(),provider:e.provider.name})}),[h,s,x,g]),[{currencyInfo:{symbol:v}}]=(0,p.useSettingsPersistAtom)();return(0,j.jsx)(a.ListView,{estimatedItemSize:60,data:e,renderItem:function({item:e}){var r,t;return(0,j.jsxs)(l.c,{userSelect:"none",onPress:function(){return y?.({item:e})},children:[(0,j.jsx)(d.o,{size:"lg",borderRadius:"$2",tokenImageUri:e.provider.logoURI,networkImageUri:e.network.logoURI}),(0,j.jsx)(l.c.Text,{flex:1,primary:(0,j.jsxs)(a.XStack,{gap:"$1.5",ai:"center",children:[(0,j.jsx)(a.SizableText,{children:(0,b.c)(e.provider.name)}),(0,j.jsx)(ProviderTypeBadge,{type:e.provider.type})]}),secondary:`TVL ${v}${t=Number(e.provider.totalFiatValue),t>=1e9?`${(t/1e9).toFixed(1).replace(/\.0$/,"")}B`:t>=1e6?`${(t/1e6).toFixed(1).replace(/\.0$/,"")}M`:t>=1e3?`${(t/1e3).toFixed(1).replace(/\.0$/,"")}K`:t.toFixed(2)}`,secondaryTextProps:{color:"$textSubdued",size:"$bodyMd"}}),(0,j.jsx)(l.c.Text,{align:"right",primary:Number(e.provider.apr)>0?`${(0,i.A)(null!=(r=e.provider.apr)?r:0).toFixed(2)}% APR`:null,secondary:e.provider.isStaking?n.formatMessage({id:f.ETranslations.earn_currently_staking}):void 0,secondaryTextProps:{color:"$textInfo",size:"$bodyMd"}})]})}})},LoadingSkeleton=function(){return(0,j.jsx)(a.Stack,{children:Array.from({length:3}).map((function(e,r){return(0,j.jsxs)(l.c,{children:[(0,j.jsx)(a.Skeleton,{w:"$10",h:"$10",borderRadius:"$2"}),(0,j.jsxs)(a.YStack,{children:[(0,j.jsx)(a.YStack,{py:"$1",children:(0,j.jsx)(a.Skeleton,{h:"$4",w:120,borderRadius:"$2"})}),(0,j.jsx)(a.YStack,{py:"$1",children:(0,j.jsx)(a.Skeleton,{h:"$3",w:80,borderRadius:"$2"})})]})]},r)}))})};const pages_AssetProtocolList=function(){var e=(0,u.u)(),{filter:r,symbol:n,networkId:i,accountId:l,indexedAccountId:d}=e.params,{result:c,isLoading:p,run:k}=(0,x.yk)((function(){return s.A.serviceStaking.getProtocolList({symbol:n,accountId:l,indexedAccountId:d,networkId:i,filter:r})}),[r,n,i,l,d],{watchLoading:!0}),m=(0,o.A)(),b=(0,t.useCallback)((function(){return(0,j.jsx)(AssetProtocolIntroButton,{providerTypes:c?.map((function(e){return e.provider.type})).filter(Boolean)})}),[c]),y=(0,g.E)();return(0,t.useEffect)((function(){y&&k()}),[y,k]),(0,j.jsxs)(a.Page,{scrollEnabled:!0,children:[(0,j.jsx)(a.Page.Header,{title:m.formatMessage({id:n?f.ETranslations.earn_symbol_staking_provider:f.ETranslations.provider_title},{symbol:n}),headerRight:b}),(0,j.jsx)(a.Page.Body,{children:(0,j.jsx)(h.bU,{LoadingSkeleton,loading:(0,h.am)({result:c,isLoading:p}),error:(0,h.o0)({result:c,isLoading:p}),onRefresh:k,children:(0,j.jsx)(a.Stack,{children:c?(0,j.jsx)(AssetProtocolListContent,{items:c}):null})})})]})}},905817:(e,r,n)=>{n.d(r,{FZ:()=>countDecimalPlaces,Y:()=>buildLocalTxStatusSyncId,c:()=>capitalizeString});var t=n(241440),buildLocalTxStatusSyncId=function(e){return`${e.provider.name.toLowerCase()}-${e.token.info.symbol.toLowerCase()}`};function capitalizeString(e){return e?e.charAt(0).toUpperCase()+e.slice(1):e}function countDecimalPlaces(e){var r="string"==typeof e?Number(e):e;if(Number.isNaN(r))return 0;var n="string"==typeof e?e:(0,t.A)(e).toFixed(),i=n.indexOf(".");return-1===i?0:n.length-i-1}}}]);