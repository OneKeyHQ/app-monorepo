"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[56491],{656491:(e,n,t)=>{t.r(n),t.d(n,{default:()=>g});var r=t(514041),i=t(654266),a=t(908867),o=t(17617),c=t(490343),s=t(334439),l=t(584186),u=t(610421),d=t(298254),h=t(498356),f=t(831085);const g=function ReceiveInvoice(){var e=(0,a.A)(),n=(0,i.lq)(),{networkId:t,accountId:g,paymentRequest:b,paymentHash:p}=n.params,{account:m,network:x}=(0,d.b)({accountId:g,networkId:t}),k=(0,h.A)(),v=(0,r.useRef)();(0,r.useEffect)((function(){if(p&&t&&g){var{serviceLightning:n}=u.A;return v.current=setInterval((function(){n.fetchSpecialInvoice({paymentHash:p,accountId:g,networkId:t}).then((function(n){n.is_paid&&(c.Toast.success({title:e.formatMessage({id:s.ETranslations.ln_payment_received_label})}),clearInterval(v.current),setTimeout((function(){k.popStack(),k.popStack()}),500))})).catch((function(e){}))}),l.A.getTimeDurationMs({seconds:5})),function(){v.current&&clearInterval(v.current)}}}),[p,t,g,e,k]);var{copyText:I}=(0,c.useClipboard)(),y=(0,r.useCallback)((function(){I(b)}),[I,b]),C=(0,r.useCallback)((function(){return m&&x&&b?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(c.Stack,{borderRadius:"$3",borderWidth:o.A.hairlineWidth,borderColor:"$borderSubdued",p:"$4",children:(0,f.jsx)(c.QRCode,{value:b,logo:{uri:x.logoURI},logoSize:40,size:240})}),(0,f.jsx)(c.ConfirmHighlighter,{maxWidth:"$96",highlight:!1,mt:"$5",px:"$3",borderRadius:"$3",borderCurve:"continuous",children:(0,f.jsx)(c.SizableText,{numberOfLines:3,textAlign:"center",size:"$bodyLg",style:{wordBreak:"break-all"},children:b})}),(0,f.jsx)(c.Button,{mt:"$5",icon:"Copy3Outline",onPress:y,children:e.formatMessage({id:s.ETranslations.global_copy})})]}):null}),[m,y,e,x,b]);return(0,f.jsxs)(c.Page,{children:[(0,f.jsx)(c.Page.Header,{title:e.formatMessage({id:s.ETranslations.lighting_invoice})}),(0,f.jsx)(c.Page.Body,{flex:1,justifyContent:"center",alignItems:"center",px:"$5",pb:"$5",children:C()})]})}}}]);