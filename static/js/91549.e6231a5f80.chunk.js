"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[91549],{768417:(e,t,r)=>{r.d(t,{r:()=>d});var n=r(324586),o=r(514041),s=r(2577),c=r(597102),i=r(405730),a=r(812452),l=r(831085);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var d=(0,o.memo)((function(e){var{children:t,storeName:r}=e,n=(0,a.Y)(r),o=s.A.getOrCreateStore(n);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(c.H,_objectSpread({},n)),(0,l.jsx)(i.o1,{store:o,children:t})]})}));d.displayName="EarnProviderMirror"},91549:(e,t,r)=>{r.r(t),r.d(t,{default:()=>InvestmentDetails});var n=r(324586),o=r(514041),s=r(241440),c=r(908867),i=r(490343),a=r(610421),l=r(325809),d=r(791088),u=r(498356),m=r(911998),b=r(162616),p=r(405730),j=r(259227),f=r(334439),g=r(392097),y=r(714191),x=r(768417),h=r(831085);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ListSkeletonItem(){return(0,h.jsxs)(d.c,{children:[(0,h.jsx)(i.Skeleton,{w:"$10",h:"$10",radius:"round"}),(0,h.jsxs)(i.YStack,{children:[(0,h.jsx)(i.YStack,{py:"$1",children:(0,h.jsx)(i.Skeleton,{h:"$4",w:120,borderRadius:"$2"})}),(0,h.jsx)(i.YStack,{py:"$1",children:(0,h.jsx)(i.Skeleton,{h:"$3",w:80,borderRadius:"$2"})})]})]})}var isTrue=function(e){return Number(e)>0};function BasicInvestmentDetails(){var e=(0,b.LH)({num:0}),t=(0,p.Vm)(),[{earnAccount:r}]=(0,p.vQ)(),[n]=(0,j.useSettingsPersistAtom)(),l=(0,u.A)(),y=(0,c.A)(),{result:x=[],isLoading:S}=(0,m.yk)((function(){var n=t.current.buildEarnAccountsKey(e.activeAccount?.account?.id,e.activeAccount?.network?.id),o=r?.[n]?.accounts||[];return o.length?a.A.serviceStaking.fetchInvestmentDetail(o.map((function({networkId:e,accountAddress:t,publicKey:r}){return{networkId:e,accountAddress:t,publicKey:r}}))):new Promise((function(e){setTimeout((function(){return e([])}),1500)}))}),[e.activeAccount?.account?.id,e.activeAccount?.network?.id,t,r],{watchLoading:!0}),k=x.map((function(e){return{title:e.name,logoURI:e.logoURI,data:e.investment.map((function(t){return _objectSpread(_objectSpread({},t),{},{providerName:e.name})})).filter((function(e){return!new s.A(e.staked).isZero()}))}})).filter((function(e){return e.data.length>0})),w=(0,o.useCallback)((function({item:{tokenInfo:t,staked:r,stakedFiatValue:o,claimable:s,overflow:c,providerName:a}}){return(0,h.jsx)(d.c,{userSelect:"none",drillIn:!0,onPress:function(){var r,{activeAccount:{account:n,indexedAccount:o}}=e;n&&t&&l.push(g.Ax.ProtocolDetails,{indexedAccountId:o?.id,accountId:null!=(r=n?.id)?r:"",networkId:t.networkId,symbol:t.symbol.toUpperCase(),provider:a})},avatarProps:{src:t.logoURI,networkId:t.networkId},renderItemText:(0,h.jsxs)(i.XStack,{justifyContent:"space-between",flex:1,children:[(0,h.jsxs)(i.YStack,{children:[(0,h.jsx)(i.NumberSizeableText,{size:"$bodyLgMedium",formatter:"balance",formatterOptions:{tokenSymbol:t.symbol},children:r}),(0,h.jsx)(i.NumberSizeableText,{size:"$bodyMd",color:"$textSubdued",formatter:"balance",formatterOptions:{currency:n.currencyInfo.symbol},children:o})]}),(0,h.jsxs)(i.Stack,{$gtMd:{flexDirection:"row"},gap:"$1.5",children:[isTrue(s)?(0,h.jsx)(i.Badge,{badgeType:"info",badgeSize:"sm",userSelect:"none",my:"auto",children:(0,h.jsx)(i.Badge.Text,{children:y.formatMessage({id:f.ETranslations.earn_claimable})})}):null,isTrue(c)?(0,h.jsx)(i.Badge,{badgeType:"critical",badgeSize:"sm",userSelect:"none",my:"auto",children:(0,h.jsx)(i.Badge.Text,{children:y.formatMessage({id:f.ETranslations.earn_overflow})})}):null]})]})})}),[e,y,l,n.currencyInfo.symbol]);return(0,h.jsxs)(i.Page,{scrollEnabled:!0,children:[(0,h.jsx)(i.Page.Header,{title:y.formatMessage({id:f.ETranslations.earn_investment_details})}),(0,h.jsx)(i.Page.Body,{children:(0,h.jsx)(i.SectionList,{ListEmptyComponent:S?(0,h.jsxs)(i.YStack,{children:[(0,h.jsxs)(i.XStack,{px:"$5",gap:"$3",py:"$3",children:[(0,h.jsx)(i.Skeleton,{width:"$6",height:"$6",radius:"round"}),(0,h.jsx)(i.YStack,{py:"$1",children:(0,h.jsx)(i.Skeleton,{h:"$3",w:80,borderRadius:"$2"})})]}),(0,h.jsx)(ListSkeletonItem,{}),(0,h.jsx)(ListSkeletonItem,{}),(0,h.jsx)(ListSkeletonItem,{})]}):(0,h.jsx)(i.Empty,{pt:180,icon:"ClockTimeHistoryOutline",title:y.formatMessage({id:f.ETranslations.earn_no_orders}),description:y.formatMessage({id:f.ETranslations.earn_no_orders_desc})}),renderItem:w,sections:k,renderSectionHeader:function({section:{title:e,logoURI:t}}){return(0,h.jsxs)(i.XStack,{px:"$5",gap:"$3",py:"$3",alignItems:"center",children:[(0,h.jsxs)(i.Image,{height:"$6",width:"$6",borderRadius:"$1",children:[(0,h.jsx)(i.Image.Source,{source:{uri:t}}),(0,h.jsx)(i.Image.Fallback,{alignItems:"center",justifyContent:"center",bg:"$bgStrong",delayMs:1e3,children:(0,h.jsx)(i.Icon,{size:"$5",name:"CoinOutline",color:"$iconDisabled"})})]}),(0,h.jsx)(i.Heading,{color:"$textSubdued",size:"$headingSm",children:`${e.charAt(0).toUpperCase()}${e.slice(1)}`})]})},estimatedItemSize:60})})]})}function InvestmentDetails(){return(0,h.jsx)(l.b8,{config:{sceneName:y.Zs.home,sceneUrl:""},enabledNum:[0],children:(0,h.jsx)(x.r,{storeName:j.EJotaiContextStoreNames.earn,children:(0,h.jsx)(BasicInvestmentDetails,{})})})}}}]);