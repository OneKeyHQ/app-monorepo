/*! For license information please see 9647.d408451f0d.chunk.js.LICENSE.txt */
(self.webpackChunkweb=self.webpackChunkweb||[]).push([[9647],{970742:(e,t,r)=>{"use strict";var n=r(939216),i=r(825636).Buffer;e.exports=function(e){function decodeRaw(t){var r=t.slice(0,-4),n=t.slice(-4),i=e(r);if(!(n[0]^i[0]|n[1]^i[1]|n[2]^i[2]|n[3]^i[3]))return r}return{encode:function encode(t){var r=e(t);return n.encode(i.concat([t,r],t.length+4))},decode:function decode(e){var t=decodeRaw(n.decode(e));if(!t)throw new Error("Invalid checksum");return t},decodeUnsafe:function decodeUnsafe(e){var t=n.decodeUnsafe(e);if(t)return decodeRaw(t)}}}},222747:(e,t,r)=>{"use strict";var n=r(213257),i=r(970742);e.exports=i((function sha256x2(e){var t=n("sha256").update(e).digest();return n("sha256").update(t).digest()}))},335344:(e,t,r)=>{var n=r(222747),i=r(850630),s=r(901048).Buffer,o={Legacy:"legacy",Bitpay:"bitpay",Cashaddr:"cashaddr"},a={Mainnet:"mainnet",Testnet:"testnet"},u={};function detectAddressFormat(e){return decodeAddress(e).format}function detectAddressNetwork(e){return decodeAddress(e).network}function detectAddressType(e){return decodeAddress(e).type}u.P2PKH="p2pkh",u.P2SH="p2sh";var c={};function decodeAddress(e){try{return function decodeBase58Address(e){try{var t=n.decode(e);if(t.length!==p)throw new InvalidAddressError;var r=t[0],i=Array.prototype.slice.call(t,1);switch(r){case c[o.Legacy][a.Mainnet][u.P2PKH]:return{hash:i,format:o.Legacy,network:a.Mainnet,type:u.P2PKH};case c[o.Legacy][a.Mainnet][u.P2SH]:return{hash:i,format:o.Legacy,network:a.Mainnet,type:u.P2SH};case c[o.Legacy][a.Testnet][u.P2PKH]:return{hash:i,format:o.Legacy,network:a.Testnet,type:u.P2PKH};case c[o.Legacy][a.Testnet][u.P2SH]:return{hash:i,format:o.Legacy,network:a.Testnet,type:u.P2SH};case c[o.Bitpay][a.Mainnet][u.P2PKH]:return{hash:i,format:o.Bitpay,network:a.Mainnet,type:u.P2PKH};case c[o.Bitpay][a.Mainnet][u.P2SH]:return{hash:i,format:o.Bitpay,network:a.Mainnet,type:u.P2SH}}}catch(e){}throw new InvalidAddressError}(e)}catch(e){}try{return function decodeCashAddress(e){if(-1!==e.indexOf(":"))try{return decodeCashAddressWithPrefix(e)}catch(e){}else for(var t=["bitcoincash","bchtest","bchreg"],r=0;r<t.length;++r)try{return decodeCashAddressWithPrefix(t[r]+":"+e)}catch(e){}throw new InvalidAddressError}(e)}catch(e){}throw new InvalidAddressError}c[o.Legacy]={},c[o.Legacy][a.Mainnet]={},c[o.Legacy][a.Mainnet][u.P2PKH]=0,c[o.Legacy][a.Mainnet][u.P2SH]=5,c[o.Legacy][a.Testnet]={},c[o.Legacy][a.Testnet][u.P2PKH]=111,c[o.Legacy][a.Testnet][u.P2SH]=196,c[o.Bitpay]={},c[o.Bitpay][a.Mainnet]={},c[o.Bitpay][a.Mainnet][u.P2PKH]=28,c[o.Bitpay][a.Mainnet][u.P2SH]=40,c[o.Bitpay][a.Testnet]={},c[o.Bitpay][a.Testnet][u.P2PKH]=111,c[o.Bitpay][a.Testnet][u.P2SH]=196;var p=21;function decodeCashAddressWithPrefix(e){try{var t=i.decode(e),r=Array.prototype.slice.call(t.hash,0),n="P2PKH"===t.type?u.P2PKH:u.P2SH;switch(t.prefix){case"bitcoincash":return{hash:r,format:o.Cashaddr,network:a.Mainnet,type:n};case"bchtest":case"bchreg":return{hash:r,format:o.Cashaddr,network:a.Testnet,type:n}}}catch(e){}throw new InvalidAddressError}function InvalidAddressError(){var e=new Error;this.name=e.name="InvalidAddressError",this.message=e.message="Received an invalid Bitcoin Cash address as input.",this.stack=e.stack}InvalidAddressError.prototype=Object.create(Error.prototype),e.exports={Format:o,Network:a,Type:u,isValidAddress:function isValidAddress(e){try{return decodeAddress(e),!0}catch(e){return!1}},detectAddressFormat,detectAddressNetwork,detectAddressType,toLegacyAddress:function toLegacyAddress(e){var t=decodeAddress(e);return t.format===o.Legacy?e:function encodeAsLegacy(e){var t=c[o.Legacy][e.network][e.type],r=s.alloc(1+e.hash.length);return r[0]=t,r.set(e.hash,1),n.encode(r)}(t)},toBitpayAddress:function toBitpayAddress(e){var t=decodeAddress(e);return t.format===o.Bitpay?e:function encodeAsBitpay(e){var t=c[o.Bitpay][e.network][e.type],r=s.alloc(1+e.hash.length);return r[0]=t,r.set(e.hash,1),n.encode(r)}(t)},toCashAddress:function toCashAddress(e){return function encodeAsCashaddr(e){var t=e.network===a.Mainnet?"bitcoincash":"bchtest",r=e.type===u.P2PKH?"P2PKH":"P2SH",n=new Uint8Array(e.hash);return i.encode(t,r,n)}(decodeAddress(e))},isLegacyAddress:function isLegacyAddress(e){return detectAddressFormat(e)===o.Legacy},isBitpayAddress:function isBitpayAddress(e){return detectAddressFormat(e)===o.Bitpay},isCashAddress:function isCashAddress(e){return detectAddressFormat(e)===o.Cashaddr},isMainnetAddress:function isMainnetAddress(e){return detectAddressNetwork(e)===a.Mainnet},isTestnetAddress:function isTestnetAddress(e){return detectAddressNetwork(e)===a.Testnet},isP2PKHAddress:function isP2PKHAddress(e){return detectAddressType(e)===u.P2PKH},isP2SHAddress:function isP2SHAddress(e){return detectAddressType(e)===u.P2SH},InvalidAddressError}},626355:(e,t,r)=>{var n=r(253610),i={};for(var s in n){i[n[s]]=s}e.exports=i},786360:e=>{"use strict";for(var t="qpzry9x8gf2tvdw0s3jn54khce6mua7l",r={},n=0;n<32;n++){var i=t.charAt(n);if(void 0!==r[i])throw new TypeError(i+" is ambiguous");r[i]=n}function polymodStep(e){var t=e>>25;return(33554431&e)<<5^996825010&-(1&t)^642813549&-(t>>1&1)^513874426&-(t>>2&1)^1027748829&-(t>>3&1)^705979059&-(t>>4&1)}function prefixChk(e){for(var t=1,r=0;r<e.length;++r){var n=e.charCodeAt(r);if(n<33||n>126)return"Invalid prefix ("+e+")";t=polymodStep(t)^n>>5}for(t=polymodStep(t),r=0;r<e.length;++r){var i=e.charCodeAt(r);t=polymodStep(t)^31&i}return t}function __decode(e,t){if(t=t||90,e.length<8)return e+" too short";if(e.length>t)return"Exceeds length limit";var n=e.toLowerCase(),i=e.toUpperCase();if(e!==n&&e!==i)return"Mixed-case string "+e;var s=(e=n).lastIndexOf("1");if(-1===s)return"No separator character for "+e;if(0===s)return"Missing prefix for "+e;var o=e.slice(0,s),a=e.slice(s+1);if(a.length<6)return"Data too short";var u=prefixChk(o);if("string"==typeof u)return u;for(var c=[],p=0;p<a.length;++p){var h=a.charAt(p),l=r[h];if(void 0===l)return"Unknown character "+h;u=polymodStep(u)^l,p+6>=a.length||c.push(l)}return 1!==u?"Invalid checksum for "+e:{prefix:o,words:c}}function convert(e,t,r,n){for(var i=0,s=0,o=(1<<r)-1,a=[],u=0;u<e.length;++u)for(i=i<<t|e[u],s+=t;s>=r;)s-=r,a.push(i>>s&o);if(n)s>0&&a.push(i<<r-s&o);else{if(s>=t)return"Excess padding";if(i<<r-s&o)return"Non-zero padding"}return a}e.exports={decodeUnsafe:function decodeUnsafe(){var e=__decode.apply(null,arguments);if("object"==typeof e)return e},decode:function decode(e){var t=__decode.apply(null,arguments);if("object"==typeof t)return t;throw new Error(t)},encode:function encode(e,r,n){if(n=n||90,e.length+7+r.length>n)throw new TypeError("Exceeds length limit");var i=prefixChk(e=e.toLowerCase());if("string"==typeof i)throw new Error(i);for(var s=e+"1",o=0;o<r.length;++o){var a=r[o];if(a>>5)throw new Error("Non 5-bit word");i=polymodStep(i)^a,s+=t.charAt(a)}for(o=0;o<6;++o)i=polymodStep(i);for(i^=1,o=0;o<6;++o){s+=t.charAt(i>>5*(5-o)&31)}return s},toWordsUnsafe:function toWordsUnsafe(e){var t=convert(e,8,5,!0);if(Array.isArray(t))return t},toWords:function toWords(e){var t=convert(e,8,5,!0);if(Array.isArray(t))return t;throw new Error(t)},fromWordsUnsafe:function fromWordsUnsafe(e){var t=convert(e,5,8,!1);if(Array.isArray(t))return t},fromWords:function fromWords(e){var t=convert(e,5,8,!1);if(Array.isArray(t))return t;throw new Error(t)}}},295720:(e,t,r)=>{"use strict";var n=r(901048).Buffer;Object.defineProperty(t,"__esModule",{value:!0});const i=r(744229),s=r(990807),o=r(345586),a=r(420973),u=r(546952),c=a.BufferN(32),p=a.compile({wif:a.UInt8,bip32:{public:a.UInt32,private:a.UInt32}}),h={messagePrefix:"Bitcoin Signed Message:\n",bech32:"bc",bip32:{public:76067358,private:76066276},pubKeyHash:0,scriptHash:5,wif:128},l=2147483648,f=Math.pow(2,31)-1;function BIP32Path(e){return a.String(e)&&null!==e.match(/^(m\/)?(\d+'?\/)*\d+'?$/)}function UInt31(e){return a.UInt32(e)&&e<=f}class BIP32{constructor(e,t,r,n,i=0,s=0,o=0){this.__D=e,this.__Q=t,this.chainCode=r,this.network=n,this.__DEPTH=i,this.__INDEX=s,this.__PARENT_FINGERPRINT=o,a(p,n),this.lowR=!1}get depth(){return this.__DEPTH}get index(){return this.__INDEX}get parentFingerprint(){return this.__PARENT_FINGERPRINT}get publicKey(){return void 0===this.__Q&&(this.__Q=o.pointFromScalar(this.__D,!0)),this.__Q}get privateKey(){return this.__D}get identifier(){return i.hash160(this.publicKey)}get fingerprint(){return this.identifier.slice(0,4)}get compressed(){return!0}isNeutered(){return void 0===this.__D}neutered(){return fromPublicKeyLocal(this.publicKey,this.chainCode,this.network,this.depth,this.index,this.parentFingerprint)}toBase58(){const e=this.network,t=this.isNeutered()?e.bip32.public:e.bip32.private,r=n.allocUnsafe(78);return r.writeUInt32BE(t,0),r.writeUInt8(this.depth,4),r.writeUInt32BE(this.parentFingerprint,5),r.writeUInt32BE(this.index,9),this.chainCode.copy(r,13),this.isNeutered()?this.publicKey.copy(r,45):(r.writeUInt8(0,45),this.privateKey.copy(r,46)),s.encode(r)}toWIF(){if(!this.privateKey)throw new TypeError("Missing private key");return u.encode(this.network.wif,this.privateKey,!0)}derive(e){a(a.UInt32,e);const t=e>=l,r=n.allocUnsafe(37);if(t){if(this.isNeutered())throw new TypeError("Missing private key for hardened child key");r[0]=0,this.privateKey.copy(r,1),r.writeUInt32BE(e,33)}else this.publicKey.copy(r,0),r.writeUInt32BE(e,33);const s=i.hmacSHA512(this.chainCode,r),u=s.slice(0,32),c=s.slice(32);if(!o.isPrivate(u))return this.derive(e+1);let p;if(this.isNeutered()){const t=o.pointAddScalar(this.publicKey,u,!0);if(null===t)return this.derive(e+1);p=fromPublicKeyLocal(t,c,this.network,this.depth+1,e,this.fingerprint.readUInt32BE(0))}else{const t=o.privateAdd(this.privateKey,u);if(null==t)return this.derive(e+1);p=fromPrivateKeyLocal(t,c,this.network,this.depth+1,e,this.fingerprint.readUInt32BE(0))}return p}deriveHardened(e){return a(UInt31,e),this.derive(e+l)}derivePath(e){a(BIP32Path,e);let t=e.split("/");if("m"===t[0]){if(this.parentFingerprint)throw new TypeError("Expected master, got child");t=t.slice(1)}return t.reduce(((e,t)=>{let r;return"'"===t.slice(-1)?(r=parseInt(t.slice(0,-1),10),e.deriveHardened(r)):(r=parseInt(t,10),e.derive(r))}),this)}sign(e,t){if(!this.privateKey)throw new Error("Missing private key");if(void 0===t&&(t=this.lowR),!1===t)return o.sign(e,this.privateKey);{let t=o.sign(e,this.privateKey);const r=n.alloc(32,0);let i=0;for(;t[0]>127;)i++,r.writeUIntLE(i,0,6),t=o.signWithEntropy(e,this.privateKey,r);return t}}verify(e,t){return o.verify(e,this.publicKey,t)}}function fromPrivateKey(e,t,r){return fromPrivateKeyLocal(e,t,r)}function fromPrivateKeyLocal(e,t,r,n,i,s){if(a({privateKey:c,chainCode:c},{privateKey:e,chainCode:t}),r=r||h,!o.isPrivate(e))throw new TypeError("Private key not in range [1, n)");return new BIP32(e,void 0,t,r,n,i,s)}function fromPublicKeyLocal(e,t,r,n,i,s){if(a({publicKey:a.BufferN(33),chainCode:c},{publicKey:e,chainCode:t}),r=r||h,!o.isPoint(e))throw new TypeError("Point is not on the curve");return new BIP32(void 0,e,t,r,n,i,s)}t.fromBase58=function fromBase58(e,t){const r=s.decode(e);if(78!==r.length)throw new TypeError("Invalid buffer length");t=t||h;const n=r.readUInt32BE(0);if(n!==t.bip32.private&&n!==t.bip32.public)throw new TypeError("Invalid network version");const i=r[4],o=r.readUInt32BE(5);if(0===i&&0!==o)throw new TypeError("Invalid parent fingerprint");const a=r.readUInt32BE(9);if(0===i&&0!==a)throw new TypeError("Invalid index");const u=r.slice(13,45);let c;if(n===t.bip32.private){if(0!==r.readUInt8(45))throw new TypeError("Invalid private key");c=fromPrivateKeyLocal(r.slice(46,78),u,t,i,a,o)}else{c=fromPublicKeyLocal(r.slice(45,78),u,t,i,a,o)}return c},t.fromPrivateKey=fromPrivateKey,t.fromPublicKey=function fromPublicKey(e,t,r){return fromPublicKeyLocal(e,t,r)},t.fromSeed=function fromSeed(e,t){if(a(a.Buffer,e),e.length<16)throw new TypeError("Seed should be at least 128 bits");if(e.length>64)throw new TypeError("Seed should be at most 512 bits");t=t||h;const r=i.hmacSHA512(n.from("Bitcoin seed","utf8"),e);return fromPrivateKey(r.slice(0,32),r.slice(32),t)}},744229:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(213257),i=r(745262);t.hash160=function hash160(e){const t=n("sha256").update(e).digest();try{return n("rmd160").update(t).digest()}catch(e){return n("ripemd160").update(t).digest()}},t.hmacSHA512=function hmacSHA512(e,t){return i("sha512",e).update(t).digest()}},408930:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(295720);t.fromSeed=n.fromSeed,t.fromBase58=n.fromBase58,t.fromPublicKey=n.fromPublicKey,t.fromPrivateKey=n.fromPrivateKey},254330:(e,t,r)=>{"use strict";var n=r(939216),i=r(825636).Buffer;e.exports=function(e){function decodeRaw(t){var r=t.slice(0,-4),n=t.slice(-4),i=e(r);if(!(n[0]^i[0]|n[1]^i[1]|n[2]^i[2]|n[3]^i[3]))return r}return{encode:function encode(t){var r=e(t);return n.encode(i.concat([t,r],t.length+4))},decode:function decode(e){var t=decodeRaw(n.decode(e));if(!t)throw new Error("Invalid checksum");return t},decodeUnsafe:function decodeUnsafe(e){var t=n.decodeUnsafe(e);if(t)return decodeRaw(t)}}}},990807:(e,t,r)=>{"use strict";var n=r(213257),i=r(254330);e.exports=i((function sha256x2(e){var t=n("sha256").update(e).digest();return n("sha256").update(t).digest()}))},910150:(e,t,r)=>{"use strict";var n=r(901048).Buffer;Object.defineProperty(t,"__esModule",{value:!0});const i=r(644931),s=r(5491),o=r(385320),a=r(962119),u=r(701763),c=r(786360),p=r(990807),h=r(420973);function fromBase58Check(e){if(i.VALID_PREFIXES.indexOf(e.split(":")[0])>-1){const t=i.decode(e);let r,o;switch(t.prefix){case"bitcoincash":r=s.bitcoin;break;case"bchtest":r=s.testnet;break;case"bchreg":r=s.regtest}switch(t.type){case"P2PKH":o=r.pubKeyHash;break;case"P2SH":o=r.scriptHash}if(t.hash.length<20)throw new TypeError(e+" is too short");if(t.hash.length>20)throw new TypeError(e+" is too long");return{version:o,hash:n.from(t.hash)}}{const t=p.decode(e);if(t.length<21)throw new TypeError(e+" is too short");if(t.length>21)throw new TypeError(e+" is too long");return{version:t.readUInt8(0),hash:t.slice(1)}}}function fromBech32(e){const t=c.decode(e),r=c.fromWords(t.words.slice(1));return{version:t.words[0],prefix:t.prefix,data:n.from(r)}}t.fromBase58Check=fromBase58Check,t.fromBech32=fromBech32,t.toBase58Check=function toBase58Check(e,t){h(u.tuple(u.Hash160bit,u.UInt8),arguments);const r=n.allocUnsafe(21);return r.writeUInt8(t,0),e.copy(r,1),p.encode(r)},t.toBech32=function toBech32(e,t,r){const n=c.toWords(e);return n.unshift(t),c.encode(r,n)},t.fromOutputScript=function fromOutputScript(e,t){t=t||s.bitcoin;try{return o.p2pkh({output:e,network:t}).address}catch(e){}try{return o.p2sh({output:e,network:t}).address}catch(e){}try{return o.p2wpkh({output:e,network:t}).address}catch(e){}try{return o.p2wsh({output:e,network:t}).address}catch(e){}throw new Error(a.toASM(e)+" has no matching Address")},t.toOutputScript=function toOutputScript(e,t){let r,n;t=t||s.bitcoin;try{r=fromBase58Check(e)}catch(e){}if(r){if(r.version===t.pubKeyHash)return o.p2pkh({hash:r.hash}).output;if(r.version===t.scriptHash)return o.p2sh({hash:r.hash}).output}else{try{n=fromBech32(e)}catch(e){}if(n){if(n.prefix!==t.bech32)throw new Error(e+" has an invalid prefix");if(0===n.version){if(20===n.data.length)return o.p2wpkh({hash:n.data}).output;if(32===n.data.length)return o.p2wsh({hash:n.data}).output}}}throw new Error(e+" has no matching Script")}},288127:(e,t,r)=>{"use strict";var n=r(901048).Buffer;Object.defineProperty(t,"__esModule",{value:!0});const i=r(165649),s=r(604033),o=r(432082),a=r(701763),u=r(28158),c=r(420973),p=r(377820),h=new TypeError("Cannot compute merkle root for zero transactions"),l=new TypeError("Cannot compute witness commit for non-segwit block");class Block{constructor(){this.version=1,this.prevHash=void 0,this.merkleRoot=void 0,this.timestamp=0,this.witnessCommit=void 0,this.bits=0,this.nonce=0,this.transactions=void 0}static fromBuffer(e){if(e.length<80)throw new Error("Buffer too small (< 80 bytes)");const t=new i.BufferReader(e),r=new Block;if(r.version=t.readInt32(),r.prevHash=t.readSlice(32),r.merkleRoot=t.readSlice(32),r.timestamp=t.readUInt32(),r.bits=t.readUInt32(),r.nonce=t.readUInt32(),80===e.length)return r;const readTransaction=()=>{const e=o.Transaction.fromBuffer(t.buffer.slice(t.offset),!0);return t.offset+=e.byteLength(),e},n=t.readVarInt();r.transactions=[];for(let e=0;e<n;++e){const e=readTransaction();r.transactions.push(e)}const s=r.getWitnessCommit();return s&&(r.witnessCommit=s),r}static fromHex(e){return Block.fromBuffer(n.from(e,"hex"))}static calculateTarget(e){const t=((4278190080&e)>>24)-3,r=8388607&e,i=n.alloc(32,0);return i.writeUIntBE(r,29-t,3),i}static calculateMerkleRoot(e,t){if(c([{getHash:a.Function}],e),0===e.length)throw h;if(t&&!txesHaveWitnessCommit(e))throw l;const r=e.map((e=>e.getHash(t))),i=u(r,s.hash256);return t?s.hash256(n.concat([i,e[0].ins[0].witness[0]])):i}getWitnessCommit(){if(!txesHaveWitnessCommit(this.transactions))return null;const e=this.transactions[0].outs.filter((e=>e.script.slice(0,6).equals(n.from("6a24aa21a9ed","hex")))).map((e=>e.script.slice(6,38)));if(0===e.length)return null;const t=e[e.length-1];return t instanceof n&&32===t.length?t:null}hasWitnessCommit(){return this.witnessCommit instanceof n&&32===this.witnessCommit.length||null!==this.getWitnessCommit()}hasWitness(){return function anyTxHasWitness(e){return e instanceof Array&&e.some((e=>"object"==typeof e&&e.ins instanceof Array&&e.ins.some((e=>"object"==typeof e&&e.witness instanceof Array&&e.witness.length>0))))}(this.transactions)}weight(){return 3*this.byteLength(!1,!1)+this.byteLength(!1,!0)}byteLength(e,t=!0){return e||!this.transactions?80:80+p.encodingLength(this.transactions.length)+this.transactions.reduce(((e,r)=>e+r.byteLength(t)),0)}getHash(){return s.hash256(this.toBuffer(!0))}getId(){return i.reverseBuffer(this.getHash()).toString("hex")}getUTCDate(){const e=new Date(0);return e.setUTCSeconds(this.timestamp),e}toBuffer(e){const t=n.allocUnsafe(this.byteLength(e)),r=new i.BufferWriter(t);return r.writeInt32(this.version),r.writeSlice(this.prevHash),r.writeSlice(this.merkleRoot),r.writeUInt32(this.timestamp),r.writeUInt32(this.bits),r.writeUInt32(this.nonce),e||!this.transactions||(p.encode(this.transactions.length,t,r.offset),r.offset+=p.encode.bytes,this.transactions.forEach((e=>{const n=e.byteLength();e.toBuffer(t,r.offset),r.offset+=n}))),t}toHex(e){return this.toBuffer(e).toString("hex")}checkTxRoots(){const e=this.hasWitnessCommit();return!(!e&&this.hasWitness())&&(this.__checkMerkleRoot()&&(!e||this.__checkWitnessCommit()))}checkProofOfWork(){const e=i.reverseBuffer(this.getHash()),t=Block.calculateTarget(this.bits);return e.compare(t)<=0}__checkMerkleRoot(){if(!this.transactions)throw h;const e=Block.calculateMerkleRoot(this.transactions);return 0===this.merkleRoot.compare(e)}__checkWitnessCommit(){if(!this.transactions)throw h;if(!this.hasWitnessCommit())throw l;const e=Block.calculateMerkleRoot(this.transactions,!0);return 0===this.witnessCommit.compare(e)}}function txesHaveWitnessCommit(e){return e instanceof Array&&e[0]&&e[0].ins&&e[0].ins instanceof Array&&e[0].ins[0]&&e[0].ins[0].witness&&e[0].ins[0].witness instanceof Array&&e[0].ins[0].witness.length>0}t.Block=Block},165649:(e,t,r)=>{"use strict";var n=r(901048).Buffer;Object.defineProperty(t,"__esModule",{value:!0});const i=r(701763),s=r(420973),o=r(377820);function verifuint(e,t){if("number"!=typeof e)throw new Error("cannot write a non-number as a number");if(e<0)throw new Error("specified a negative value for writing an unsigned value");if(e>t)throw new Error("RangeError: value out of range");if(Math.floor(e)!==e)throw new Error("value has a fractional component")}function readUInt64LE(e,t){const r=e.readUInt32LE(t);let n=e.readUInt32LE(t+4);return n*=4294967296,verifuint(n+r,9007199254740991),n+r}function writeUInt64LE(e,t,r){return verifuint(t,9007199254740991),e.writeInt32LE(-1&t,r),e.writeUInt32LE(Math.floor(t/4294967296),r+4),r+8}t.readUInt64LE=readUInt64LE,t.writeUInt64LE=writeUInt64LE,t.reverseBuffer=function reverseBuffer(e){if(e.length<1)return e;let t=e.length-1,r=0;for(let n=0;n<e.length/2;n++)r=e[n],e[n]=e[t],e[t]=r,t--;return e},t.cloneBuffer=function cloneBuffer(e){const t=n.allocUnsafe(e.length);return e.copy(t),t};t.BufferWriter=class BufferWriter{constructor(e,t=0){this.buffer=e,this.offset=t,s(i.tuple(i.Buffer,i.UInt32),[e,t])}writeUInt8(e){this.offset=this.buffer.writeUInt8(e,this.offset)}writeInt32(e){this.offset=this.buffer.writeInt32LE(e,this.offset)}writeUInt32(e){this.offset=this.buffer.writeUInt32LE(e,this.offset)}writeUInt64(e){this.offset=writeUInt64LE(this.buffer,e,this.offset)}writeVarInt(e){o.encode(e,this.buffer,this.offset),this.offset+=o.encode.bytes}writeSlice(e){if(this.buffer.length<this.offset+e.length)throw new Error("Cannot write slice out of bounds");this.offset+=e.copy(this.buffer,this.offset)}writeVarSlice(e){this.writeVarInt(e.length),this.writeSlice(e)}writeVector(e){this.writeVarInt(e.length),e.forEach((e=>this.writeVarSlice(e)))}};t.BufferReader=class BufferReader{constructor(e,t=0){this.buffer=e,this.offset=t,s(i.tuple(i.Buffer,i.UInt32),[e,t])}readUInt8(){const e=this.buffer.readUInt8(this.offset);return this.offset++,e}readInt32(){const e=this.buffer.readInt32LE(this.offset);return this.offset+=4,e}readUInt32(){const e=this.buffer.readUInt32LE(this.offset);return this.offset+=4,e}readUInt64(){const e=readUInt64LE(this.buffer,this.offset);return this.offset+=8,e}readVarInt(){const e=o.decode(this.buffer,this.offset);return this.offset+=o.decode.bytes,e}readSlice(e){if(this.buffer.length<this.offset+e)throw new Error("Cannot read slice out of bounds");const t=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}readVarSlice(){return this.readSlice(this.readVarInt())}readVector(){const e=this.readVarInt(),t=[];for(let r=0;r<e;r++)t.push(this.readVarSlice());return t}}},614199:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(555624),i={q:0,p:1,z:2,r:3,y:4,9:5,x:6,8:7,g:8,f:9,2:10,t:11,v:12,d:13,w:14,0:15,s:16,3:17,j:18,n:19,5:20,4:21,k:22,h:23,c:24,e:25,6:26,m:27,u:28,a:29,7:30,l:31};t.encode=function encode(e){n.validate(e instanceof Uint8Array,"Invalid data: "+e+".");let t="";for(const r of e)n.validate(0<=r&&r<32,"Invalid value: "+r+"."),t+="qpzry9x8gf2tvdw0s3jn54khce6mua7l"[r];return t},t.decode=function decode(e){n.validate("string"==typeof e,"Invalid base32-encoded string: "+e+".");const t=new Uint8Array(e.length);for(let r=0;r<e.length;++r){const s=e[r];n.validate(s in i,"Invalid value: "+s+"."),t[r]=i[s]}return t}},331224:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(555624);t.convertBits=function convertBits(e,t,r,i){const s=i?Math.floor(e.length*t/r):Math.ceil(e.length*t/r),o=(1<<r)-1,a=new Uint8Array(s);let u=0,c=0,p=0;for(const i of e)for(n.validate(0<=i&&!(i>>t),"Invalid value: "+i+"."),c=c<<t|i,p+=t;p>=r;)p-=r,a[u]=c>>p&o,++u;return i?n.validate(p<t&&!(c<<r-p&o),"Input cannot be converted to "+r+" bits without padding, but strict mode was used."):p>0&&(a[u]=c<<r-p&o,++u),a}},644931:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(396599),i=r(614199),s=r(331224),o=r(555624),a=o.validate;function prefixToUint5Array(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;++r)t[r]=31&e[r].charCodeAt(0);return t}function concat(e,t){const r=new Uint8Array(e.length+t.length);return r.set(e),r.set(t,e.length),r}function polymod(e){const t=[656907472481,522768456162,0xf33e5fb3c4,748107326120,130178868336];let r=n(1);for(const n of e){const e=r.shiftRight(35);r=r.and(34359738367).shiftLeft(5).xor(n);for(let n=0;n<t.length;++n)e.shiftRight(n).and(1).equals(1)&&(r=r.xor(t[n]))}return r.xor(1)}function hasSingleCase(e){return e===e.toLowerCase()||e===e.toUpperCase()}t.encode=function encode(e,r,n){a("string"==typeof e&&function isValidPrefix(e){return hasSingleCase(e)&&-1!==t.VALID_PREFIXES.indexOf(e.toLowerCase())}(e),"Invalid prefix: "+e+"."),a("string"==typeof r,"Invalid type: "+r+"."),a(n instanceof Uint8Array,"Invalid hash: "+n+".");const o=concat(prefixToUint5Array(e),new Uint8Array(1)),u=function getTypeBits(e){switch(e){case"P2PKH":return 0;case"P2SH":return 8;default:throw new t.ValidationError("Invalid type: "+e+".")}}(r)+function getHashSizeBits(e){switch(8*e.length){case 160:return 0;case 192:return 1;case 224:return 2;case 256:return 3;case 320:return 4;case 384:return 5;case 448:return 6;case 512:return 7;default:throw new t.ValidationError("Invalid hash size: "+e.length+".")}}(n),c=function toUint5Array(e){return s.convertBits(e,8,5)}(concat(new Uint8Array([u]),n)),p=concat(concat(o,c),new Uint8Array(8)),h=concat(c,function checksumToUint5Array(e){const t=new Uint8Array(8);for(let r=0;r<8;++r)t[7-r]=e.and(31).toJSNumber(),e=e.shiftRight(5);return t}(polymod(p)));return e+":"+i.encode(h)},t.decode=function decode(e){a("string"==typeof e&&hasSingleCase(e),"Invalid address: "+e+".");const r=e.toLowerCase().split(":");a(2===r.length,"Missing prefix: "+e+".");const n=r[0],o=i.decode(r[1]);a(function validChecksum(e,t){const r=concat(prefixToUint5Array(e),new Uint8Array(1)),n=concat(r,t);return polymod(n).equals(0)}(n,o),"Invalid checksum: "+e+".");const u=function fromUint5Array(e){return s.convertBits(e,5,8,!0)}(o.subarray(0,-8)),c=u[0],p=u.subarray(1);a(function getHashSize(e){switch(7&e){case 0:return 160;case 1:return 192;case 2:return 224;case 3:return 256;case 4:return 320;case 5:return 384;case 6:return 448;case 7:return 512;default:throw new t.ValidationError("Invalid versionByte: "+(7&e)+".")}}(c)===8*p.length,"Invalid hash size: "+e+".");const h=function getType(e){switch(120&e){case 0:return"P2PKH";case 8:return"P2SH";default:throw new t.ValidationError("Invalid address type in version byte: "+e+".")}}(c);return{prefix:n,type:h,hash:p}},t.ValidationError=o.ValidationError,t.VALID_PREFIXES=["bitcoincash","bchtest","bchreg"]},555624:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class ValidationError extends Error{constructor(e){super(e),this.name="ValidationError",Object.setPrototypeOf(this,ValidationError.prototype)}}t.ValidationError=ValidationError,t.validate=function validate(e,t){if(!e)throw new ValidationError(t)}},91034:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(962119),i=r(670645),s=r(188213),o=r(312213),a=r(532569),u=r(970520),c=r(741775),p=r(773408),h=r(637165),l={P2MS:"multisig",NONSTANDARD:"nonstandard",NULLDATA:"nulldata",P2PK:"pubkey",P2PKH:"pubkeyhash",P2SH:"scripthash",P2WPKH:"witnesspubkeyhash",P2WSH:"witnessscripthash",WITNESS_COMMITMENT:"witnesscommitment"};t.types=l,t.output=function classifyOutput(e){if(p.output.check(e))return l.P2WPKH;if(h.output.check(e))return l.P2WSH;if(a.output.check(e))return l.P2PKH;if(u.output.check(e))return l.P2SH;const t=n.decompile(e);if(!t)throw new TypeError("Invalid script");return i.output.check(t)?l.P2MS:o.output.check(t)?l.P2PK:c.output.check(t)?l.WITNESS_COMMITMENT:s.output.check(t)?l.NULLDATA:l.NONSTANDARD},t.input=function classifyInput(e,t){const r=n.decompile(e);if(!r)throw new TypeError("Invalid script");return a.input.check(r)?l.P2PKH:u.input.check(r,t)?l.P2SH:i.input.check(r,t)?l.P2MS:o.input.check(r)?l.P2PK:l.NONSTANDARD},t.witness=function classifyWitness(e,t){const r=n.decompile(e);if(!r)throw new TypeError("Invalid script");return p.input.check(r)?l.P2WPKH:h.input.check(r,t)?l.P2WSH:l.NONSTANDARD}},604033:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(213257);function ripemd160(e){try{return n("rmd160").update(e).digest()}catch(t){return n("ripemd160").update(e).digest()}}function sha256(e){return n("sha256").update(e).digest()}t.ripemd160=ripemd160,t.sha1=function sha1(e){return n("sha1").update(e).digest()},t.sha256=sha256,t.hash160=function hash160(e){return ripemd160(sha256(e))},t.hash256=function hash256(e){return sha256(sha256(e))}},628596:(e,t,r)=>{"use strict";var n=r(901048).Buffer;Object.defineProperty(t,"__esModule",{value:!0});const i=r(5491),s=r(701763),o=r(345586),a=r(222644),u=r(420973),c=r(546952),p=u.maybe(u.compile({compressed:s.maybe(s.Boolean),network:s.maybe(s.Network)}));class ECPair{constructor(e,t,r){this.__D=e,this.__Q=t,this.lowR=!1,void 0===r&&(r={}),this.compressed=void 0===r.compressed||r.compressed,this.network=r.network||i.bitcoin,void 0!==t&&(this.__Q=o.pointCompress(t,this.compressed))}get privateKey(){return this.__D}get publicKey(){return this.__Q||(this.__Q=o.pointFromScalar(this.__D,this.compressed)),this.__Q}toWIF(){if(!this.__D)throw new Error("Missing private key");return c.encode(this.network.wif,this.__D,this.compressed)}sign(e,t){if(!this.__D)throw new Error("Missing private key");if(void 0===t&&(t=this.lowR),!1===t)return o.sign(e,this.__D);{let t=o.sign(e,this.__D);const r=n.alloc(32,0);let i=0;for(;t[0]>127;)i++,r.writeUIntLE(i,0,6),t=o.signWithEntropy(e,this.__D,r);return t}}verify(e,t){return o.verify(e,this.publicKey,t)}}function fromPrivateKey(e,t){if(u(s.Buffer256bit,e),!o.isPrivate(e))throw new TypeError("Private key not in range [1, n)");return u(p,t),new ECPair(e,void 0,t)}t.fromPrivateKey=fromPrivateKey,t.fromPublicKey=function fromPublicKey(e,t){return u(o.isPoint,e),u(p,t),new ECPair(void 0,e,t)},t.fromWIF=function fromWIF(e,t){const r=c.decode(e),n=r.version;if(s.Array(t)){if(!(t=t.filter((e=>n===e.wif)).pop()))throw new Error("Unknown network version")}else if(t=t||i.bitcoin,n!==t.wif)throw new Error("Invalid network version");return fromPrivateKey(r.privateKey,{compressed:r.compressed,network:t})},t.makeRandom=function makeRandom(e){u(p,e),void 0===e&&(e={});const t=e.rng||a;let r;do{r=t(32),u(s.Buffer256bit,r)}while(!o.isPrivate(r));return fromPrivateKey(r,e)}},610638:(e,t,r)=>{"use strict";r(408930);r(910150);r(604033);r(628596);r(5491);r(385320);r(962119),r(288127).Block;var n=r(675355);t.iL=n.Psbt,r(962119).OPS,r(432082).Transaction,r(497318).TransactionBuilder},5491:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bitcoingold={messagePrefix:"Bitcoin Gold Signed Message:\n",bech32:"btg",bip32:{public:76067358,private:76066276},pubKeyHash:38,scriptHash:23,wif:128},t.bitcoin={messagePrefix:"Bitcoin Signed Message:\n",bech32:"bc",bip32:{public:76067358,private:76066276},pubKeyHash:0,scriptHash:5,wif:128},t.regtest={messagePrefix:"Bitcoin Signed Message:\n",bech32:"bcrt",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239},t.testnet={messagePrefix:"Bitcoin Signed Message:\n",bech32:"tb",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239}},655993:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(5491),i=r(962119),s=r(298332),o=r(420973),a=i.OPS;t.p2data=function p2data(e,t){if(!e.data&&!e.output)throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),o({network:o.maybe(o.Object),output:o.maybe(o.Buffer),data:o.maybe(o.arrayOf(o.Buffer))},e);const r={name:"embed",network:e.network||n.bitcoin};if(s.prop(r,"output",(()=>{if(e.data)return i.compile([a.OP_RETURN].concat(e.data))})),s.prop(r,"data",(()=>{if(e.output)return i.decompile(e.output).slice(1)})),t.validate&&e.output){const t=i.decompile(e.output);if(t[0]!==a.OP_RETURN)throw new TypeError("Output is invalid");if(!t.slice(1).every(o.Buffer))throw new TypeError("Output is invalid");if(e.data&&!function stacksEqual(e,t){return e.length===t.length&&e.every(((e,r)=>e.equals(t[r])))}(e.data,r.data))throw new TypeError("Data mismatch")}return Object.assign(r,e)}},385320:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(655993);t.embed=n.p2data;const i=r(657524);t.p2ms=i.p2ms;const s=r(529141);t.p2pk=s.p2pk;const o=r(6033);t.p2pkh=o.p2pkh;const a=r(276283);t.p2sh=a.p2sh;const u=r(499904);t.p2wpkh=u.p2wpkh;const c=r(813728);t.p2wsh=c.p2wsh},298332:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.prop=function prop(e,t,r){Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get(){const e=r.call(this);return this[t]=e,e},set(e){Object.defineProperty(this,t,{configurable:!0,enumerable:!0,value:e,writable:!0})}})},t.value=function value(e){let t;return()=>(void 0!==t||(t=e()),t)}},657524:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(5491),i=r(962119),s=r(298332),o=i.OPS,a=r(420973),u=r(345586),c=o.OP_RESERVED;function stacksEqual(e,t){return e.length===t.length&&e.every(((e,r)=>e.equals(t[r])))}t.p2ms=function p2ms(e,t){if(!(e.input||e.output||e.pubkeys&&void 0!==e.m||e.signatures))throw new TypeError("Not enough data");function isAcceptableSignature(e){return i.isCanonicalScriptSignature(e)||void 0!==(t.allowIncomplete&&e===o.OP_0)}t=Object.assign({validate:!0},t||{}),a({network:a.maybe(a.Object),m:a.maybe(a.Number),n:a.maybe(a.Number),output:a.maybe(a.Buffer),pubkeys:a.maybe(a.arrayOf(u.isPoint)),signatures:a.maybe(a.arrayOf(isAcceptableSignature)),input:a.maybe(a.Buffer)},e);const r={network:e.network||n.bitcoin};let p=[],h=!1;function decode(e){h||(h=!0,p=i.decompile(e),r.m=p[0]-c,r.n=p[p.length-2]-c,r.pubkeys=p.slice(1,-2))}if(s.prop(r,"output",(()=>{if(e.m&&r.n&&e.pubkeys)return i.compile([].concat(c+e.m,e.pubkeys,c+r.n,o.OP_CHECKMULTISIG))})),s.prop(r,"m",(()=>{if(r.output)return decode(r.output),r.m})),s.prop(r,"n",(()=>{if(r.pubkeys)return r.pubkeys.length})),s.prop(r,"pubkeys",(()=>{if(e.output)return decode(e.output),r.pubkeys})),s.prop(r,"signatures",(()=>{if(e.input)return i.decompile(e.input).slice(1)})),s.prop(r,"input",(()=>{if(e.signatures)return i.compile([o.OP_0].concat(e.signatures))})),s.prop(r,"witness",(()=>{if(r.input)return[]})),s.prop(r,"name",(()=>{if(r.m&&r.n)return`p2ms(${r.m} of ${r.n})`})),t.validate){if(e.output){if(decode(e.output),!a.Number(p[0]))throw new TypeError("Output is invalid");if(!a.Number(p[p.length-2]))throw new TypeError("Output is invalid");if(p[p.length-1]!==o.OP_CHECKMULTISIG)throw new TypeError("Output is invalid");if(r.m<=0||r.n>16||r.m>r.n||r.n!==p.length-3)throw new TypeError("Output is invalid");if(!r.pubkeys.every((e=>u.isPoint(e))))throw new TypeError("Output is invalid");if(void 0!==e.m&&e.m!==r.m)throw new TypeError("m mismatch");if(void 0!==e.n&&e.n!==r.n)throw new TypeError("n mismatch");if(e.pubkeys&&!stacksEqual(e.pubkeys,r.pubkeys))throw new TypeError("Pubkeys mismatch")}if(e.pubkeys){if(void 0!==e.n&&e.n!==e.pubkeys.length)throw new TypeError("Pubkey count mismatch");if(r.n=e.pubkeys.length,r.n<r.m)throw new TypeError("Pubkey count cannot be less than m")}if(e.signatures){if(e.signatures.length<r.m)throw new TypeError("Not enough signatures provided");if(e.signatures.length>r.m)throw new TypeError("Too many signatures provided")}if(e.input){if(e.input[0]!==o.OP_0)throw new TypeError("Input is invalid");if(0===r.signatures.length||!r.signatures.every(isAcceptableSignature))throw new TypeError("Input has invalid signature(s)");if(e.signatures&&!stacksEqual(e.signatures,r.signatures))throw new TypeError("Signature mismatch");if(void 0!==e.m&&e.m!==e.signatures.length)throw new TypeError("Signature count mismatch")}}return Object.assign(r,e)}},529141:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(5491),i=r(962119),s=r(298332),o=r(420973),a=i.OPS,u=r(345586);t.p2pk=function p2pk(e,t){if(!(e.input||e.output||e.pubkey||e.input||e.signature))throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),o({network:o.maybe(o.Object),output:o.maybe(o.Buffer),pubkey:o.maybe(u.isPoint),signature:o.maybe(i.isCanonicalScriptSignature),input:o.maybe(o.Buffer)},e);const r=s.value((()=>i.decompile(e.input))),c={name:"p2pk",network:e.network||n.bitcoin};if(s.prop(c,"output",(()=>{if(e.pubkey)return i.compile([e.pubkey,a.OP_CHECKSIG])})),s.prop(c,"pubkey",(()=>{if(e.output)return e.output.slice(1,-1)})),s.prop(c,"signature",(()=>{if(e.input)return r()[0]})),s.prop(c,"input",(()=>{if(e.signature)return i.compile([e.signature])})),s.prop(c,"witness",(()=>{if(c.input)return[]})),t.validate){if(e.output){if(e.output[e.output.length-1]!==a.OP_CHECKSIG)throw new TypeError("Output is invalid");if(!u.isPoint(c.pubkey))throw new TypeError("Output pubkey is invalid");if(e.pubkey&&!e.pubkey.equals(c.pubkey))throw new TypeError("Pubkey mismatch")}if(e.signature&&e.input&&!e.input.equals(c.input))throw new TypeError("Signature mismatch");if(e.input){if(1!==r().length)throw new TypeError("Input is invalid");if(!i.isCanonicalScriptSignature(c.signature))throw new TypeError("Input has invalid signature")}}return Object.assign(c,e)}},6033:(e,t,r)=>{"use strict";var n=r(901048).Buffer;Object.defineProperty(t,"__esModule",{value:!0});const i=r(604033),s=r(5491),o=r(962119),a=r(298332),u=r(420973),c=o.OPS,p=r(345586),h=r(990807);t.p2pkh=function p2pkh(e,t){if(!(e.address||e.hash||e.output||e.pubkey||e.input))throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),u({network:u.maybe(u.Object),address:u.maybe(u.String),hash:u.maybe(u.BufferN(20)),output:u.maybe(u.BufferN(25)),pubkey:u.maybe(p.isPoint),signature:u.maybe(o.isCanonicalScriptSignature),input:u.maybe(u.Buffer)},e);const r=a.value((()=>{const t=h.decode(e.address);return{version:t.readUInt8(0),hash:t.slice(1)}})),l=a.value((()=>o.decompile(e.input))),f=e.network||s.bitcoin,d={name:"p2pkh",network:f};if(a.prop(d,"address",(()=>{if(!d.hash)return;const e=n.allocUnsafe(21);return e.writeUInt8(f.pubKeyHash,0),d.hash.copy(e,1),h.encode(e)})),a.prop(d,"hash",(()=>e.output?e.output.slice(3,23):e.address?r().hash:e.pubkey||d.pubkey?i.hash160(e.pubkey||d.pubkey):void 0)),a.prop(d,"output",(()=>{if(d.hash)return o.compile([c.OP_DUP,c.OP_HASH160,d.hash,c.OP_EQUALVERIFY,c.OP_CHECKSIG])})),a.prop(d,"pubkey",(()=>{if(e.input)return l()[1]})),a.prop(d,"signature",(()=>{if(e.input)return l()[0]})),a.prop(d,"input",(()=>{if(e.pubkey&&e.signature)return o.compile([e.signature,e.pubkey])})),a.prop(d,"witness",(()=>{if(d.input)return[]})),t.validate){let t=n.from([]);if(e.address){if(r().version!==f.pubKeyHash)throw new TypeError("Invalid version or Network mismatch");if(20!==r().hash.length)throw new TypeError("Invalid address");t=r().hash}if(e.hash){if(t.length>0&&!t.equals(e.hash))throw new TypeError("Hash mismatch");t=e.hash}if(e.output){if(25!==e.output.length||e.output[0]!==c.OP_DUP||e.output[1]!==c.OP_HASH160||20!==e.output[2]||e.output[23]!==c.OP_EQUALVERIFY||e.output[24]!==c.OP_CHECKSIG)throw new TypeError("Output is invalid");const r=e.output.slice(3,23);if(t.length>0&&!t.equals(r))throw new TypeError("Hash mismatch");t=r}if(e.pubkey){const r=i.hash160(e.pubkey);if(t.length>0&&!t.equals(r))throw new TypeError("Hash mismatch");t=r}if(e.input){const r=l();if(2!==r.length)throw new TypeError("Input is invalid");if(!o.isCanonicalScriptSignature(r[0]))throw new TypeError("Input has invalid signature");if(!p.isPoint(r[1]))throw new TypeError("Input has invalid pubkey");if(e.signature&&!e.signature.equals(r[0]))throw new TypeError("Signature mismatch");if(e.pubkey&&!e.pubkey.equals(r[1]))throw new TypeError("Pubkey mismatch");const n=i.hash160(r[1]);if(t.length>0&&!t.equals(n))throw new TypeError("Hash mismatch")}}return Object.assign(d,e)}},276283:(e,t,r)=>{"use strict";var n=r(901048).Buffer;Object.defineProperty(t,"__esModule",{value:!0});const i=r(604033),s=r(5491),o=r(962119),a=r(298332),u=r(420973),c=o.OPS,p=r(990807);t.p2sh=function p2sh(e,t){if(!(e.address||e.hash||e.output||e.redeem||e.input))throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),u({network:u.maybe(u.Object),address:u.maybe(u.String),hash:u.maybe(u.BufferN(20)),output:u.maybe(u.BufferN(23)),redeem:u.maybe({network:u.maybe(u.Object),output:u.maybe(u.Buffer),input:u.maybe(u.Buffer),witness:u.maybe(u.arrayOf(u.Buffer))}),input:u.maybe(u.Buffer),witness:u.maybe(u.arrayOf(u.Buffer))},e);let r=e.network;r||(r=e.redeem&&e.redeem.network||s.bitcoin);const h={network:r},l=a.value((()=>{const t=p.decode(e.address);return{version:t.readUInt8(0),hash:t.slice(1)}})),f=a.value((()=>o.decompile(e.input))),d=a.value((()=>{const t=f();return{network:r,output:t[t.length-1],input:o.compile(t.slice(0,-1)),witness:e.witness||[]}}));if(a.prop(h,"address",(()=>{if(!h.hash)return;const e=n.allocUnsafe(21);return e.writeUInt8(h.network.scriptHash,0),h.hash.copy(e,1),p.encode(e)})),a.prop(h,"hash",(()=>e.output?e.output.slice(2,22):e.address?l().hash:h.redeem&&h.redeem.output?i.hash160(h.redeem.output):void 0)),a.prop(h,"output",(()=>{if(h.hash)return o.compile([c.OP_HASH160,h.hash,c.OP_EQUAL])})),a.prop(h,"redeem",(()=>{if(e.input)return d()})),a.prop(h,"input",(()=>{if(e.redeem&&e.redeem.input&&e.redeem.output)return o.compile([].concat(o.decompile(e.redeem.input),e.redeem.output))})),a.prop(h,"witness",(()=>h.redeem&&h.redeem.witness?h.redeem.witness:h.input?[]:void 0)),a.prop(h,"name",(()=>{const e=["p2sh"];return void 0!==h.redeem&&e.push(h.redeem.name),e.join("-")})),t.validate){let t=n.from([]);if(e.address){if(l().version!==r.scriptHash)throw new TypeError("Invalid version or Network mismatch");if(20!==l().hash.length)throw new TypeError("Invalid address");t=l().hash}if(e.hash){if(t.length>0&&!t.equals(e.hash))throw new TypeError("Hash mismatch");t=e.hash}if(e.output){if(23!==e.output.length||e.output[0]!==c.OP_HASH160||20!==e.output[1]||e.output[22]!==c.OP_EQUAL)throw new TypeError("Output is invalid");const r=e.output.slice(2,22);if(t.length>0&&!t.equals(r))throw new TypeError("Hash mismatch");t=r}const checkRedeem=e=>{if(e.output){const r=o.decompile(e.output);if(!r||r.length<1)throw new TypeError("Redeem.output too short");const n=i.hash160(e.output);if(t.length>0&&!t.equals(n))throw new TypeError("Hash mismatch");t=n}if(e.input){const t=e.input.length>0,r=e.witness&&e.witness.length>0;if(!t&&!r)throw new TypeError("Empty input");if(t&&r)throw new TypeError("Input and witness provided");if(t){const t=o.decompile(e.input);if(!o.isPushOnly(t))throw new TypeError("Non push-only scriptSig")}}};if(e.input){const e=f();if(!e||e.length<1)throw new TypeError("Input too short");if(!n.isBuffer(d().output))throw new TypeError("Input is invalid");checkRedeem(d())}if(e.redeem){if(e.redeem.network&&e.redeem.network!==r)throw new TypeError("Network mismatch");if(e.input){const t=d();if(e.redeem.output&&!e.redeem.output.equals(t.output))throw new TypeError("Redeem.output mismatch");if(e.redeem.input&&!e.redeem.input.equals(t.input))throw new TypeError("Redeem.input mismatch")}checkRedeem(e.redeem)}if(e.witness&&e.redeem&&e.redeem.witness&&!function stacksEqual(e,t){return e.length===t.length&&e.every(((e,r)=>e.equals(t[r])))}(e.redeem.witness,e.witness))throw new TypeError("Witness and redeem.witness mismatch")}return Object.assign(h,e)}},499904:(e,t,r)=>{"use strict";var n=r(901048).Buffer;Object.defineProperty(t,"__esModule",{value:!0});const i=r(604033),s=r(5491),o=r(962119),a=r(298332),u=r(420973),c=o.OPS,p=r(345586),h=r(786360),l=n.alloc(0);t.p2wpkh=function p2wpkh(e,t){if(!(e.address||e.hash||e.output||e.pubkey||e.witness))throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),u({address:u.maybe(u.String),hash:u.maybe(u.BufferN(20)),input:u.maybe(u.BufferN(0)),network:u.maybe(u.Object),output:u.maybe(u.BufferN(22)),pubkey:u.maybe(p.isPoint),signature:u.maybe(o.isCanonicalScriptSignature),witness:u.maybe(u.arrayOf(u.Buffer))},e);const r=a.value((()=>{const t=h.decode(e.address),r=t.words.shift(),i=h.fromWords(t.words);return{version:r,prefix:t.prefix,data:n.from(i)}})),f=e.network||s.bitcoin,d={name:"p2wpkh",network:f};if(a.prop(d,"address",(()=>{if(!d.hash)return;const e=h.toWords(d.hash);return e.unshift(0),h.encode(f.bech32,e)})),a.prop(d,"hash",(()=>e.output?e.output.slice(2,22):e.address?r().data:e.pubkey||d.pubkey?i.hash160(e.pubkey||d.pubkey):void 0)),a.prop(d,"output",(()=>{if(d.hash)return o.compile([c.OP_0,d.hash])})),a.prop(d,"pubkey",(()=>e.pubkey?e.pubkey:e.witness?e.witness[1]:void 0)),a.prop(d,"signature",(()=>{if(e.witness)return e.witness[0]})),a.prop(d,"input",(()=>{if(d.witness)return l})),a.prop(d,"witness",(()=>{if(e.pubkey&&e.signature)return[e.signature,e.pubkey]})),t.validate){let t=n.from([]);if(e.address){if(f&&f.bech32!==r().prefix)throw new TypeError("Invalid prefix or Network mismatch");if(0!==r().version)throw new TypeError("Invalid address version");if(20!==r().data.length)throw new TypeError("Invalid address data");t=r().data}if(e.hash){if(t.length>0&&!t.equals(e.hash))throw new TypeError("Hash mismatch");t=e.hash}if(e.output){if(22!==e.output.length||e.output[0]!==c.OP_0||20!==e.output[1])throw new TypeError("Output is invalid");if(t.length>0&&!t.equals(e.output.slice(2)))throw new TypeError("Hash mismatch");t=e.output.slice(2)}if(e.pubkey){const r=i.hash160(e.pubkey);if(t.length>0&&!t.equals(r))throw new TypeError("Hash mismatch");if(t=r,!p.isPoint(e.pubkey)||33!==e.pubkey.length)throw new TypeError("Invalid pubkey for p2wpkh")}if(e.witness){if(2!==e.witness.length)throw new TypeError("Witness is invalid");if(!o.isCanonicalScriptSignature(e.witness[0]))throw new TypeError("Witness has invalid signature");if(!p.isPoint(e.witness[1])||33!==e.witness[1].length)throw new TypeError("Witness has invalid pubkey");if(e.signature&&!e.signature.equals(e.witness[0]))throw new TypeError("Signature mismatch");if(e.pubkey&&!e.pubkey.equals(e.witness[1]))throw new TypeError("Pubkey mismatch");const r=i.hash160(e.witness[1]);if(t.length>0&&!t.equals(r))throw new TypeError("Hash mismatch")}}return Object.assign(d,e)}},813728:(e,t,r)=>{"use strict";var n=r(901048).Buffer;Object.defineProperty(t,"__esModule",{value:!0});const i=r(604033),s=r(5491),o=r(962119),a=r(298332),u=r(420973),c=o.OPS,p=r(345586),h=r(786360),l=n.alloc(0);function chunkHasUncompressedPubkey(e){return!(!n.isBuffer(e)||65!==e.length||4!==e[0]||!p.isPoint(e))}t.p2wsh=function p2wsh(e,t){if(!(e.address||e.hash||e.output||e.redeem||e.witness))throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),u({network:u.maybe(u.Object),address:u.maybe(u.String),hash:u.maybe(u.BufferN(32)),output:u.maybe(u.BufferN(34)),redeem:u.maybe({input:u.maybe(u.Buffer),network:u.maybe(u.Object),output:u.maybe(u.Buffer),witness:u.maybe(u.arrayOf(u.Buffer))}),input:u.maybe(u.BufferN(0)),witness:u.maybe(u.arrayOf(u.Buffer))},e);const r=a.value((()=>{const t=h.decode(e.address),r=t.words.shift(),i=h.fromWords(t.words);return{version:r,prefix:t.prefix,data:n.from(i)}})),p=a.value((()=>o.decompile(e.redeem.input)));let f=e.network;f||(f=e.redeem&&e.redeem.network||s.bitcoin);const d={network:f};if(a.prop(d,"address",(()=>{if(!d.hash)return;const e=h.toWords(d.hash);return e.unshift(0),h.encode(f.bech32,e)})),a.prop(d,"hash",(()=>e.output?e.output.slice(2):e.address?r().data:d.redeem&&d.redeem.output?i.sha256(d.redeem.output):void 0)),a.prop(d,"output",(()=>{if(d.hash)return o.compile([c.OP_0,d.hash])})),a.prop(d,"redeem",(()=>{if(e.witness)return{output:e.witness[e.witness.length-1],input:l,witness:e.witness.slice(0,-1)}})),a.prop(d,"input",(()=>{if(d.witness)return l})),a.prop(d,"witness",(()=>{if(e.redeem&&e.redeem.input&&e.redeem.input.length>0&&e.redeem.output&&e.redeem.output.length>0){const t=o.toStack(p());return d.redeem=Object.assign({witness:t},e.redeem),d.redeem.input=l,[].concat(t,e.redeem.output)}if(e.redeem&&e.redeem.output&&e.redeem.witness)return[].concat(e.redeem.witness,e.redeem.output)})),a.prop(d,"name",(()=>{const e=["p2wsh"];return void 0!==d.redeem&&e.push(d.redeem.name),e.join("-")})),t.validate){let t=n.from([]);if(e.address){if(r().prefix!==f.bech32)throw new TypeError("Invalid prefix or Network mismatch");if(0!==r().version)throw new TypeError("Invalid address version");if(32!==r().data.length)throw new TypeError("Invalid address data");t=r().data}if(e.hash){if(t.length>0&&!t.equals(e.hash))throw new TypeError("Hash mismatch");t=e.hash}if(e.output){if(34!==e.output.length||e.output[0]!==c.OP_0||32!==e.output[1])throw new TypeError("Output is invalid");const r=e.output.slice(2);if(t.length>0&&!t.equals(r))throw new TypeError("Hash mismatch");t=r}if(e.redeem){if(e.redeem.network&&e.redeem.network!==f)throw new TypeError("Network mismatch");if(e.redeem.input&&e.redeem.input.length>0&&e.redeem.witness&&e.redeem.witness.length>0)throw new TypeError("Ambiguous witness source");if(e.redeem.output){if(0===o.decompile(e.redeem.output).length)throw new TypeError("Redeem.output is invalid");const r=i.sha256(e.redeem.output);if(t.length>0&&!t.equals(r))throw new TypeError("Hash mismatch");t=r}if(e.redeem.input&&!o.isPushOnly(p()))throw new TypeError("Non push-only scriptSig");if(e.witness&&e.redeem.witness&&!function stacksEqual(e,t){return e.length===t.length&&e.every(((e,r)=>e.equals(t[r])))}(e.witness,e.redeem.witness))throw new TypeError("Witness and redeem.witness mismatch");if(e.redeem.input&&p().some(chunkHasUncompressedPubkey)||e.redeem.output&&(o.decompile(e.redeem.output)||[]).some(chunkHasUncompressedPubkey))throw new TypeError("redeem.input or redeem.output contains uncompressed pubkey")}if(e.witness&&e.witness.length>0){const t=e.witness[e.witness.length-1];if(e.redeem&&e.redeem.output&&!e.redeem.output.equals(t))throw new TypeError("Witness and redeem.output mismatch");if(e.witness.some(chunkHasUncompressedPubkey)||(o.decompile(t)||[]).some(chunkHasUncompressedPubkey))throw new TypeError("Witness contains uncompressed pubkey")}}return Object.assign(d,e)}},675355:(e,t,r)=>{"use strict";var n=r(901048).Buffer;Object.defineProperty(t,"__esModule",{value:!0});const i=r(937003),s=r(592715),o=r(674812),a=r(910150),u=r(165649),c=r(604033),p=r(628596),h=r(5491),l=r(385320),f=r(962119),d=r(432082),g=d.Transaction.SIGHASH_ALL|d.Transaction.SIGHASH_BITCOINCASHBIP143,y=d.Transaction.SIGHASH_ALL|d.Transaction.SIGHASH_BITCOINCASHBIP143|d.Transaction.FORKID_BTG<<8,m=[d.Transaction.SIGHASH_ALL,g,y],w={network:h.bitcoin,maximumFeeRate:5e3,forkCoin:"none"};class Psbt{constructor(e={},t=new i.Psbt(new PsbtTransaction)){this.data=t,this.opts=Object.assign({},w,e),this.__CACHE={__NON_WITNESS_UTXO_TX_CACHE:[],__NON_WITNESS_UTXO_BUF_CACHE:[],__TX_IN_CACHE:{},__TX:this.data.globalMap.unsignedTx.tx,__UNSAFE_SIGN_NONSEGWIT:!1},0===this.data.inputs.length&&this.setVersion(2);const dpew=(e,t,r,n)=>Object.defineProperty(e,t,{enumerable:r,writable:n});dpew(this,"__CACHE",!1,!0),dpew(this,"opts",!1,!0)}static fromBase64(e,t={}){const r=n.from(e,"base64");return this.fromBuffer(r,t)}static fromHex(e,t={}){const r=n.from(e,"hex");return this.fromBuffer(r,t)}static fromBuffer(e,t={}){const r=i.Psbt.fromBuffer(e,transactionFromBuffer),n=new Psbt(t,r);return function checkTxForDupeIns(e,t){e.ins.forEach((e=>{checkTxInputCache(t,e)}))}(n.__CACHE.__TX,n.__CACHE),n}get inputCount(){return this.data.inputs.length}get version(){return this.__CACHE.__TX.version}set version(e){this.setVersion(e)}get locktime(){return this.__CACHE.__TX.locktime}set locktime(e){this.setLocktime(e)}get txInputs(){return this.__CACHE.__TX.ins.map((e=>({hash:u.cloneBuffer(e.hash),index:e.index,sequence:e.sequence})))}get txOutputs(){return this.__CACHE.__TX.outs.map((e=>{let t;try{t=a.fromOutputScript(e.script,this.opts.network)}catch(e){}return{script:u.cloneBuffer(e.script),value:e.value,address:t}}))}combine(...e){return this.data.combine(...e.map((e=>e.data))),this}clone(){const e=Psbt.fromBuffer(this.data.toBuffer());return e.opts=JSON.parse(JSON.stringify(this.opts)),e}setMaximumFeeRate(e){check32Bit(e),this.opts.maximumFeeRate=e}setVersion(e){check32Bit(e),checkInputsForPartialSig(this.data.inputs,"setVersion");const t=this.__CACHE;return t.__TX.version=e,t.__EXTRACTED_TX=void 0,this}setLocktime(e){check32Bit(e),checkInputsForPartialSig(this.data.inputs,"setLocktime");const t=this.__CACHE;return t.__TX.locktime=e,t.__EXTRACTED_TX=void 0,this}setInputSequence(e,t){check32Bit(t),checkInputsForPartialSig(this.data.inputs,"setInputSequence");const r=this.__CACHE;if(r.__TX.ins.length<=e)throw new Error("Input index too high");return r.__TX.ins[e].sequence=t,r.__EXTRACTED_TX=void 0,this}addInputs(e){return e.forEach((e=>this.addInput(e))),this}addInput(e){if(arguments.length>1||!e||void 0===e.hash||void 0===e.index)throw new Error("Invalid arguments for Psbt.addInput. Requires single object with at least [hash] and [index]");checkInputsForPartialSig(this.data.inputs,"addInput"),e.witnessScript&&checkInvalidP2WSH(e.witnessScript);const t=this.__CACHE;this.data.addInput(e);checkTxInputCache(t,t.__TX.ins[t.__TX.ins.length-1]);const r=this.data.inputs.length-1,n=this.data.inputs[r];return n.nonWitnessUtxo&&addNonWitnessTxCache(this.__CACHE,n,r),t.__FEE=void 0,t.__FEE_RATE=void 0,t.__EXTRACTED_TX=void 0,this}addOutputs(e){return e.forEach((e=>this.addOutput(e))),this}addOutput(e){if(arguments.length>1||!e||void 0===e.value||void 0===e.address&&void 0===e.script)throw new Error("Invalid arguments for Psbt.addOutput. Requires single object with at least [script or address] and [value]");checkInputsForPartialSig(this.data.inputs,"addOutput");const{address:t}=e;if("string"==typeof t){const{network:r}=this.opts,n=a.toOutputScript(t,r);e=Object.assign(e,{script:n})}const r=this.__CACHE;return this.data.addOutput(e),r.__FEE=void 0,r.__FEE_RATE=void 0,r.__EXTRACTED_TX=void 0,this}extractTransaction(e){if(!this.data.inputs.every(isFinalized))throw new Error("Not finalized");const t=this.__CACHE;if(e||function checkFees(e,t,r){const n=t.__FEE_RATE||e.getFeeRate(),i=t.__EXTRACTED_TX.virtualSize(),s=n*i;if(n>=r.maximumFeeRate)throw new Error(`Warning: You are paying around ${(s/1e8).toFixed(8)} in fees, which is ${n} satoshi per byte for a transaction with a VSize of ${i} bytes (segwit counted as 0.25 byte per byte). Use setMaximumFeeRate method to raise your threshold, or pass true to the first arg of extractTransaction.`)}(this,t,this.opts),t.__EXTRACTED_TX)return t.__EXTRACTED_TX;const r=t.__TX.clone();return inputFinalizeGetAmts(this.data.inputs,r,t,!0),r}getFeeRate(){return getTxCacheValue("__FEE_RATE","fee rate",this.data.inputs,this.__CACHE)}getFee(){return getTxCacheValue("__FEE","fee",this.data.inputs,this.__CACHE)}finalizeAllInputs(){return o.checkForInput(this.data.inputs,0),range(this.data.inputs.length).forEach((e=>this.finalizeInput(e))),this}finalizeInput(e,t=getFinalScripts){const r=o.checkForInput(this.data.inputs,e),{script:n,isP2SH:i,isP2WSH:s,isSegwit:a}=function getScriptFromInput(e,t,r){const n=r.__TX,i={script:null,isSegwit:!1,isP2SH:!1,isP2WSH:!1};if(i.isP2SH=!!t.redeemScript,i.isP2WSH=!!t.witnessScript,t.witnessScript)i.script=t.witnessScript;else if(t.redeemScript)i.script=t.redeemScript;else if(t.nonWitnessUtxo){const s=nonWitnessUtxoTxFromCache(r,t,e),o=n.ins[e].index;i.script=s.outs[o].script}else t.witnessUtxo&&(i.script=t.witnessUtxo.script);(t.witnessScript||I(i.script))&&(i.isSegwit=!0);return i}(e,r,this.__CACHE);if(!n)throw new Error(`No script found for input #${e}`);!function checkPartialSigSighashes(e){if(!e.sighashType||!e.partialSig)return;const{partialSig:t,sighashType:r}=e;t.forEach((e=>{const{hashType:t}=f.signature.decode(e.signature);if((255&r)!==t)throw new Error("Signature sighash does not match input sighash type")}))}(r);const{finalScriptSig:u,finalScriptWitness:c}=t(e,r,n,a,i,s);if(u&&this.data.updateInput(e,{finalScriptSig:u}),c&&this.data.updateInput(e,{finalScriptWitness:c}),!u&&!c)throw new Error(`Unknown error finalizing input #${e}`);return this.data.clearFinalizedInput(e),this}getInputType(e){const t=o.checkForInput(this.data.inputs,e),r=getMeaningfulScript(getScriptFromUtxo(e,t,this.__CACHE),e,"input",t.redeemScript||function redeemFromFinalScriptSig(e){if(!e)return;const t=f.decompile(e);if(!t)return;const r=t[t.length-1];if(!n.isBuffer(r)||isPubkeyLike(r)||function isSigLike(e){return f.isCanonicalScriptSignature(e)}(r))return;if(!f.decompile(r))return;return r}(t.finalScriptSig),t.witnessScript||function redeemFromFinalWitnessScript(e){if(!e)return;const t=scriptWitnessToWitnessStack(e),r=t[t.length-1];if(isPubkeyLike(r))return;if(!f.decompile(r))return;return r}(t.finalScriptWitness));return("raw"===r.type?"":r.type+"-")+classifyScript(r.meaningfulScript)}inputHasPubkey(e,t){return function pubkeyInInput(e,t,r,n){const i=getScriptFromUtxo(r,t,n),{meaningfulScript:s}=getMeaningfulScript(i,r,"input",t.redeemScript,t.witnessScript);return pubkeyInScript(e,s)}(t,o.checkForInput(this.data.inputs,e),e,this.__CACHE)}inputHasHDKey(e,t){const r=o.checkForInput(this.data.inputs,e),n=bip32DerivationIsMine(t);return!!r.bip32Derivation&&r.bip32Derivation.some(n)}outputHasPubkey(e,t){return function pubkeyInOutput(e,t,r,n){const i=n.__TX.outs[r].script,{meaningfulScript:s}=getMeaningfulScript(i,r,"output",t.redeemScript,t.witnessScript);return pubkeyInScript(e,s)}(t,o.checkForOutput(this.data.outputs,e),e,this.__CACHE)}outputHasHDKey(e,t){const r=o.checkForOutput(this.data.outputs,e),n=bip32DerivationIsMine(t);return!!r.bip32Derivation&&r.bip32Derivation.some(n)}validateSignaturesOfAllInputs(){o.checkForInput(this.data.inputs,0);return range(this.data.inputs.length).map((e=>this.validateSignaturesOfInput(e))).reduce(((e,t)=>!0===t&&e),!0)}validateSignaturesOfInput(e,t){const r=this.data.inputs[e],n=(r||{}).partialSig;if(!r||!n||n.length<1)throw new Error("No signatures to validate");const i=t?n.filter((e=>e.pubkey.equals(t))):n;if(i.length<1)throw new Error("No signatures for this pubkey");const s=[];let o,a,u;for(const t of i){const n=f.signature.decode(t.signature),{hash:i,script:c}=u!==n.hashType?getHashForSig(e,Object.assign({},r,{sighashType:n.hashType}),this.__CACHE,!0,this.opts.forkCoin):{hash:o,script:a};u=n.hashType,o=i,a=c,checkScriptForPubkey(t.pubkey,c,"verify");const h=p.fromPublicKey(t.pubkey);s.push(h.verify(i,n.signature))}return s.every((e=>!0===e))}signAllInputsHD(e,t=m){if(!e||!e.publicKey||!e.fingerprint)throw new Error("Need HDSigner to sign input");const r=[];for(const n of range(this.data.inputs.length))try{this.signInputHD(n,e,t),r.push(!0)}catch(e){r.push(!1)}if(r.every((e=>!1===e)))throw new Error("No inputs were signed");return this}signAllInputsHDAsync(e,t=m){return new Promise(((r,n)=>{if(!e||!e.publicKey||!e.fingerprint)return n(new Error("Need HDSigner to sign input"));const i=[],s=[];for(const r of range(this.data.inputs.length))s.push(this.signInputHDAsync(r,e,t).then((()=>{i.push(!0)}),(()=>{i.push(!1)})));return Promise.all(s).then((()=>{if(i.every((e=>!1===e)))return n(new Error("No inputs were signed"));r()}))}))}signInputHD(e,t,r=m){if(!t||!t.publicKey||!t.fingerprint)throw new Error("Need HDSigner to sign input");return getSignersFromHD(e,this.data.inputs,t).forEach((t=>this.signInput(e,t,r))),this}signInputHDAsync(e,t,r=m){return new Promise(((n,i)=>{if(!t||!t.publicKey||!t.fingerprint)return i(new Error("Need HDSigner to sign input"));const s=getSignersFromHD(e,this.data.inputs,t).map((t=>this.signInputAsync(e,t,r)));return Promise.all(s).then((()=>{n()})).catch(i)}))}signAllInputs(e,t=m){if(!e||!e.publicKey)throw new Error("Need Signer to sign input");const r=[];for(const n of range(this.data.inputs.length))try{this.signInput(n,e,t),r.push(!0)}catch(e){r.push(!1)}if(r.every((e=>!1===e)))throw new Error("No inputs were signed");return this}signAllInputsAsync(e,t=m){return new Promise(((r,n)=>{if(!e||!e.publicKey)return n(new Error("Need Signer to sign input"));const i=[],s=[];for(const[r]of this.data.inputs.entries())s.push(this.signInputAsync(r,e,t).then((()=>{i.push(!0)}),(()=>{i.push(!1)})));return Promise.all(s).then((()=>{if(i.every((e=>!1===e)))return n(new Error("No inputs were signed"));r()}))}))}signInput(e,t,r=m){if(!t||!t.publicKey)throw new Error("Need Signer to sign input");const{hash:n,sighashType:i}=getHashAndSighashType(this.data.inputs,e,t.publicKey,this.__CACHE,r,this.opts.forkCoin),s=[{pubkey:t.publicKey,signature:f.signature.encode(t.sign(n),255&i)}];return this.data.updateInput(e,{partialSig:s}),this}signInputAsync(e,t,r=m){return Promise.resolve().then((()=>{if(!t||!t.publicKey)throw new Error("Need Signer to sign input");const{hash:n,sighashType:i}=getHashAndSighashType(this.data.inputs,e,t.publicKey,this.__CACHE,r,this.opts.forkCoin);return Promise.resolve(t.sign(n)).then((r=>{const n=[{pubkey:t.publicKey,signature:f.signature.encode(r,255&i)}];this.data.updateInput(e,{partialSig:n})}))}))}toBuffer(){return checkCache(this.__CACHE),this.data.toBuffer()}toHex(){return checkCache(this.__CACHE),this.data.toHex()}toBase64(){return checkCache(this.__CACHE),this.data.toBase64()}updateGlobal(e){return this.data.updateGlobal(e),this}updateInput(e,t){return t.witnessScript&&checkInvalidP2WSH(t.witnessScript),this.data.updateInput(e,t),t.nonWitnessUtxo&&addNonWitnessTxCache(this.__CACHE,this.data.inputs[e],e),this}updateOutput(e,t){return this.data.updateOutput(e,t),this}addUnknownKeyValToGlobal(e){return this.data.addUnknownKeyValToGlobal(e),this}addUnknownKeyValToInput(e,t){return this.data.addUnknownKeyValToInput(e,t),this}addUnknownKeyValToOutput(e,t){return this.data.addUnknownKeyValToOutput(e,t),this}clearFinalizedInput(e){return this.data.clearFinalizedInput(e),this}}t.Psbt=Psbt;const transactionFromBuffer=e=>new PsbtTransaction(e);class PsbtTransaction{constructor(e=n.from([2,0,0,0,0,0,0,0,0,0])){this.tx=d.Transaction.fromBuffer(e),function checkTxEmpty(e){if(!e.ins.every((e=>e.script&&0===e.script.length&&e.witness&&0===e.witness.length)))throw new Error("Format Error: Transaction ScriptSigs are not empty")}(this.tx),Object.defineProperty(this,"tx",{enumerable:!1,writable:!0})}getInputOutputCounts(){return{inputCount:this.tx.ins.length,outputCount:this.tx.outs.length}}addInput(e){if(void 0===e.hash||void 0===e.index||!n.isBuffer(e.hash)&&"string"!=typeof e.hash||"number"!=typeof e.index)throw new Error("Error adding input.");const t="string"==typeof e.hash?u.reverseBuffer(n.from(e.hash,"hex")):e.hash;this.tx.addInput(t,e.index,e.sequence)}addOutput(e){if(void 0===e.script||void 0===e.value||!n.isBuffer(e.script)||"number"!=typeof e.value)throw new Error("Error adding output.");this.tx.addOutput(e.script,e.value)}toBuffer(){return this.tx.toBuffer()}}function checkCache(e){if(!1!==e.__UNSAFE_SIGN_NONSEGWIT)throw new Error("Not BIP174 compliant, can not export")}function hasSigs(e,t,r){if(!t)return!1;let n;if(n=r?r.map((e=>{const r=p.fromPublicKey(e,{compressed:!0}).publicKey;return t.find((e=>e.pubkey.equals(r)))})).filter((e=>!!e)):t,n.length>e)throw new Error("Too many signatures");return n.length===e}function isFinalized(e){return!!e.finalScriptSig||!!e.finalScriptWitness}function isPaymentFactory(e){return t=>{try{return e({output:t}),!0}catch(e){return!1}}}const v=isPaymentFactory(l.p2ms),S=isPaymentFactory(l.p2pk),b=isPaymentFactory(l.p2pkh),I=isPaymentFactory(l.p2wpkh),_=isPaymentFactory(l.p2wsh),P=isPaymentFactory(l.p2sh);function bip32DerivationIsMine(e){return t=>!!t.masterFingerprint.equals(e.fingerprint)&&!!e.derivePath(t.path).publicKey.equals(t.pubkey)}function check32Bit(e){if("number"!=typeof e||e!==Math.floor(e)||e>4294967295||e<0)throw new Error("Invalid 32 bit integer")}function checkInputsForPartialSig(e,t){e.forEach((e=>{let r=!1,i=[];if(0===(e.partialSig||[]).length){if(!e.finalScriptSig&&!e.finalScriptWitness)return;i=function getPsigsFromInputFinalScripts(e){const t=e.finalScriptSig&&f.decompile(e.finalScriptSig)||[],r=e.finalScriptWitness&&f.decompile(e.finalScriptWitness)||[];return t.concat(r).filter((e=>n.isBuffer(e)&&f.isCanonicalScriptSignature(e))).map((e=>({signature:e})))}(e)}else i=e.partialSig;if(i.forEach((e=>{const{hashType:n}=f.signature.decode(e.signature),i=[];n&d.Transaction.SIGHASH_ANYONECANPAY&&i.push("addInput");switch(31&n){case d.Transaction.SIGHASH_ALL:break;case d.Transaction.SIGHASH_SINGLE:case d.Transaction.SIGHASH_NONE:i.push("addOutput"),i.push("setInputSequence")}-1===i.indexOf(t)&&(r=!0)})),r)throw new Error("Can not modify transaction, signatures exist.")}))}function checkScriptForPubkey(e,t,r){if(!pubkeyInScript(e,t))throw new Error(`Can not ${r} for this input with the key ${e.toString("hex")}`)}function checkTxInputCache(e,t){const r=u.reverseBuffer(n.from(t.hash)).toString("hex")+":"+t.index;if(e.__TX_IN_CACHE[r])throw new Error("Duplicate input detected.");e.__TX_IN_CACHE[r]=1}function scriptCheckerFactory(e,t){return(r,n,i,s)=>{const o=e({redeem:{output:i}}).output;if(!n.equals(o))throw new Error(`${t} for ${s} #${r} doesn't match the scriptPubKey in the prevout`)}}const E=scriptCheckerFactory(l.p2sh,"Redeem script"),O=scriptCheckerFactory(l.p2wsh,"Witness script");function getTxCacheValue(e,t,r,n){if(!r.every(isFinalized))throw new Error(`PSBT must be finalized to calculate ${t}`);if("__FEE_RATE"===e&&n.__FEE_RATE)return n.__FEE_RATE;if("__FEE"===e&&n.__FEE)return n.__FEE;let i,s=!0;return n.__EXTRACTED_TX?(i=n.__EXTRACTED_TX,s=!1):i=n.__TX.clone(),inputFinalizeGetAmts(r,i,n,s),"__FEE_RATE"===e?n.__FEE_RATE:"__FEE"===e?n.__FEE:void 0}function getFinalScripts(e,t,r,n,i,s){const o=classifyScript(r);if(!function canFinalize(e,t,r){switch(r){case"pubkey":case"pubkeyhash":case"witnesspubkeyhash":return hasSigs(1,e.partialSig);case"multisig":const r=l.p2ms({output:t});return hasSigs(r.m,e.partialSig,r.pubkeys);default:return!1}}(t,r,o))throw new Error(`Can not finalize input #${e}`);return function prepareFinalScripts(e,t,r,n,i,s){let o,a;const u=function getPayment(e,t,r){let n;switch(t){case"multisig":const t=function getSortedSigs(e,t){const r=l.p2ms({output:e});return r.pubkeys.map((e=>(t.filter((t=>t.pubkey.equals(e)))[0]||{}).signature)).filter((e=>!!e))}(e,r);n=l.p2ms({output:e,signatures:t});break;case"pubkey":n=l.p2pk({output:e,signature:r[0].signature});break;case"pubkeyhash":n=l.p2pkh({output:e,pubkey:r[0].pubkey,signature:r[0].signature});break;case"witnesspubkeyhash":n=l.p2wpkh({output:e,pubkey:r[0].pubkey,signature:r[0].signature})}return n}(e,t,r),c=s?l.p2wsh({redeem:u}):null,p=i?l.p2sh({redeem:c||u}):null;n?(a=witnessStackToScriptWitness(c?c.witness:u.witness),p&&(o=p.input)):o=p?p.input:u.input;return{finalScriptSig:o,finalScriptWitness:a}}(r,o,t.partialSig,n,i,s)}function getHashAndSighashType(e,t,r,n,i,s){const a=o.checkForInput(e,t),{hash:u,sighashType:c,script:p}=getHashForSig(t,a,n,!1,s,i);return checkScriptForPubkey(r,p,"sign"),{hash:u,sighashType:c}}function getHashForSig(e,t,r,n,i,s){const o=r.__TX,a=t.sighashType||function getDefaultSighash(e){switch(e){case"bch":return g;case"btg":return y;case"none":return d.Transaction.SIGHASH_ALL}}(i);if(s&&s.indexOf(a)<0){const e=function sighashTypeToString(e){let t=e&d.Transaction.SIGHASH_ANYONECANPAY?"SIGHASH_ANYONECANPAY | ":"";e&d.Transaction.SIGHASH_BITCOINCASHBIP143&&(t+="SIGHASH_BITCOINCASHBIP143 | ");e&d.Transaction.FORKID_BTG<<8?t+="FORKID_BTG | ":t+="FORKID_BCH | ";switch(31&e){case d.Transaction.SIGHASH_ALL:t+="SIGHASH_ALL";break;case d.Transaction.SIGHASH_SINGLE:t+="SIGHASH_SINGLE";break;case d.Transaction.SIGHASH_NONE:t+="SIGHASH_NONE"}return t}(a);throw new Error(`Sighash type is not allowed. Retry the sign method passing the sighashTypes array of whitelisted types. Sighash type: ${e}`)}let u,c;const p=(a&d.Transaction.SIGHASH_BITCOINCASHBIP143)>0,h=(a&d.Transaction.FORKID_BTG<<8)>0;if(t.nonWitnessUtxo){const n=nonWitnessUtxoTxFromCache(r,t,e),i=o.ins[e].hash,s=n.getHash();if(!i.equals(s))throw new Error(`Non-witness UTXO hash for input #${e} doesn't match the hash specified in the prevout`);const a=o.ins[e].index;c=n.outs[a]}else{if(!t.witnessUtxo)throw new Error("Need a Utxo input item for signing");c=t.witnessUtxo}const{meaningfulScript:f,type:m}=getMeaningfulScript(c.script,e,"input",t.redeemScript,t.witnessScript);if(["p2sh-p2wsh","p2wsh"].indexOf(m)>=0)u=p&&h?o.hashForGoldSignature(e,f,c.value,a,!0):o.hashForWitnessV0(e,f,c.value,a);else if(I(f)){const t=l.p2pkh({hash:f.slice(2)}).output;u=p&&h?o.hashForGoldSignature(e,t,c.value,a,!0):o.hashForWitnessV0(e,t,c.value,a)}else{if(!p&&void 0===t.nonWitnessUtxo&&!1===r.__UNSAFE_SIGN_NONSEGWIT)throw new Error(`Input #${e} has witnessUtxo but non-segwit script: ${f.toString("hex")}`);n||!1===r.__UNSAFE_SIGN_NONSEGWIT||console.warn("Warning: Signing non-segwit inputs without the full parent transaction means there is a chance that a miner could feed you incorrect information to trick you into paying large fees. This behavior is the same as the old TransactionBuilder class when signing non-segwit scripts. You are not able to export this Psbt with toBuffer|toBase64|toHex since it is not BIP174 compliant.\n*********************\nPROCEED WITH CAUTION!\n*********************"),u=p&&h?o.hashForGoldSignature(e,f,c.value,a,!0):p?o.hashForCashSignature(e,f,c.value,a):o.hashForSignature(e,f,a)}return{script:f,sighashType:a,hash:u}}function getSignersFromHD(e,t,r){const n=o.checkForInput(t,e);if(!n.bip32Derivation||0===n.bip32Derivation.length)throw new Error("Need bip32Derivation to sign with HD");const i=n.bip32Derivation.map((e=>e.masterFingerprint.equals(r.fingerprint)?e:void 0)).filter((e=>!!e));if(0===i.length)throw new Error("Need one bip32Derivation masterFingerprint to match the HDSigner fingerprint");return i.map((e=>{const t=r.derivePath(e.path);if(!e.pubkey.equals(t.publicKey))throw new Error("pubkey did not match bip32Derivation");return t}))}function scriptWitnessToWitnessStack(e){let t=0;function readVarInt(){const r=s.decode(e,t);return t+=s.decode.bytes,r}function readVarSlice(){return function readSlice(r){return t+=r,e.slice(t-r,t)}(readVarInt())}return function readVector(){const e=readVarInt(),t=[];for(let r=0;r<e;r++)t.push(readVarSlice());return t}()}function witnessStackToScriptWitness(e){let t=n.allocUnsafe(0);function writeVarInt(e){const r=t.length,i=s.encodingLength(e);t=n.concat([t,n.allocUnsafe(i)]),s.encode(e,t,r)}function writeVarSlice(e){writeVarInt(e.length),function writeSlice(e){t=n.concat([t,n.from(e)])}(e)}return function writeVector(e){writeVarInt(e.length),e.forEach(writeVarSlice)}(e),t}function addNonWitnessTxCache(e,t,r){e.__NON_WITNESS_UTXO_BUF_CACHE[r]=t.nonWitnessUtxo;const n=d.Transaction.fromBuffer(t.nonWitnessUtxo);e.__NON_WITNESS_UTXO_TX_CACHE[r]=n;const i=e,s=r;delete t.nonWitnessUtxo,Object.defineProperty(t,"nonWitnessUtxo",{enumerable:!0,get(){const e=i.__NON_WITNESS_UTXO_BUF_CACHE[s],t=i.__NON_WITNESS_UTXO_TX_CACHE[s];if(void 0!==e)return e;{const e=t.toBuffer();return i.__NON_WITNESS_UTXO_BUF_CACHE[s]=e,e}},set(e){i.__NON_WITNESS_UTXO_BUF_CACHE[s]=e}})}function inputFinalizeGetAmts(e,t,r,n){let i=0;e.forEach(((e,s)=>{if(n&&e.finalScriptSig&&(t.ins[s].script=e.finalScriptSig),n&&e.finalScriptWitness&&(t.ins[s].witness=scriptWitnessToWitnessStack(e.finalScriptWitness)),e.witnessUtxo)i+=e.witnessUtxo.value;else if(e.nonWitnessUtxo){const n=nonWitnessUtxoTxFromCache(r,e,s),o=t.ins[s].index,a=n.outs[o];i+=a.value}}));const s=t.outs.reduce(((e,t)=>e+t.value),0),o=i-s;if(o<0)throw new Error("Outputs are spending more than Inputs");const a=t.virtualSize();r.__FEE=o,r.__EXTRACTED_TX=t,r.__FEE_RATE=Math.floor(o/a)}function nonWitnessUtxoTxFromCache(e,t,r){const n=e.__NON_WITNESS_UTXO_TX_CACHE;return n[r]||addNonWitnessTxCache(e,t,r),n[r]}function getScriptFromUtxo(e,t,r){if(void 0!==t.witnessUtxo)return t.witnessUtxo.script;if(void 0!==t.nonWitnessUtxo){return nonWitnessUtxoTxFromCache(r,t,e).outs[r.__TX.ins[e].index].script}throw new Error("Can't find pubkey in input without Utxo data")}function isPubkeyLike(e){return 33===e.length&&f.isCanonicalPubKey(e)}function getMeaningfulScript(e,t,r,n,i){const s=P(e),o=s&&n&&_(n),a=_(e);if(s&&void 0===n)throw new Error("scriptPubkey is P2SH but redeemScript missing");if((a||o)&&void 0===i)throw new Error("scriptPubkey or redeemScript is P2WSH but witnessScript missing");let u;return o?(u=i,E(t,e,n,r),O(t,n,i,r),checkInvalidP2WSH(u)):a?(u=i,O(t,e,i,r),checkInvalidP2WSH(u)):s?(u=n,E(t,e,n,r)):u=e,{meaningfulScript:u,type:o?"p2sh-p2wsh":s?"p2sh":a?"p2wsh":"raw"}}function checkInvalidP2WSH(e){if(I(e)||P(e))throw new Error("P2WPKH or P2SH can not be contained within P2WSH")}function pubkeyInScript(e,t){const r=c.hash160(e),n=f.decompile(t);if(null===n)throw new Error("Unknown script error");return n.some((t=>"number"!=typeof t&&(t.equals(e)||t.equals(r))))}function classifyScript(e){return I(e)?"witnesspubkeyhash":b(e)?"pubkeyhash":v(e)?"multisig":S(e)?"pubkey":"nonstandard"}function range(e){return[...Array(e).keys()]}},962119:(e,t,r)=>{"use strict";var n=r(901048).Buffer;Object.defineProperty(t,"__esModule",{value:!0});const i=r(243823),s=r(372734),o=r(701763),a=r(671821),u=r(345586),c=r(216001),p=r(420973);t.OPS=r(253610);const h=r(626355),l=t.OPS.OP_RESERVED;function isPushOnlyChunk(e){return o.Buffer(e)||function isOPInt(e){return o.Number(e)&&(e===t.OPS.OP_0||e>=t.OPS.OP_1&&e<=t.OPS.OP_16||e===t.OPS.OP_1NEGATE)}(e)}function isPushOnly(e){return o.Array(e)&&e.every(isPushOnlyChunk)}function asMinimalOP(e){return 0===e.length?t.OPS.OP_0:1===e.length?e[0]>=1&&e[0]<=16?l+e[0]:129===e[0]?t.OPS.OP_1NEGATE:void 0:void 0}function chunksIsBuffer(e){return n.isBuffer(e)}function singleChunkIsBuffer(e){return n.isBuffer(e)}function compile(e){if(chunksIsBuffer(e))return e;p(o.Array,e);const t=e.reduce(((e,t)=>singleChunkIsBuffer(t)?1===t.length&&void 0!==asMinimalOP(t)?e+1:e+c.encodingLength(t.length)+t.length:e+1),0),r=n.allocUnsafe(t);let i=0;if(e.forEach((e=>{if(singleChunkIsBuffer(e)){const t=asMinimalOP(e);if(void 0!==t)return r.writeUInt8(t,i),void(i+=1);i+=c.encode(r,e.length,i),e.copy(r,i),i+=e.length}else r.writeUInt8(e,i),i+=1})),i!==r.length)throw new Error("Could not decode chunks");return r}function decompile(e){if(function chunksIsArray(e){return o.Array(e)}(e))return e;p(o.Buffer,e);const r=[];let n=0;for(;n<e.length;){const i=e[n];if(i>t.OPS.OP_0&&i<=t.OPS.OP_PUSHDATA4){const t=c.decode(e,n);if(null===t)return null;if(n+=t.size,n+t.number>e.length)return null;const i=e.slice(n,n+t.number);n+=t.number;const s=asMinimalOP(i);void 0!==s?r.push(s):r.push(i)}else r.push(i),n+=1}return r}function isDefinedHashType(e){const t=-193&e;return t>0&&t<4}t.isPushOnly=isPushOnly,t.compile=compile,t.decompile=decompile,t.toASM=function toASM(e){return chunksIsBuffer(e)&&(e=decompile(e)),e.map((e=>{if(singleChunkIsBuffer(e)){const t=asMinimalOP(e);if(void 0===t)return e.toString("hex");e=t}return h[e]})).join(" ")},t.fromASM=function fromASM(e){return p(o.String,e),compile(e.split(" ").map((e=>void 0!==t.OPS[e]?t.OPS[e]:(p(o.Hex,e),n.from(e,"hex")))))},t.toStack=function toStack(e){return e=decompile(e),p(isPushOnly,e),e.map((e=>singleChunkIsBuffer(e)?e:e===t.OPS.OP_0?n.allocUnsafe(0):i.encode(e-l)))},t.isCanonicalPubKey=function isCanonicalPubKey(e){return u.isPoint(e)},t.isDefinedHashType=isDefinedHashType,t.isCanonicalScriptSignature=function isCanonicalScriptSignature(e){return!!n.isBuffer(e)&&(!!isDefinedHashType(e[e.length-1])&&a.check(e.slice(0,-1)))},t.number=i,t.signature=s},243823:(e,t,r)=>{"use strict";var n=r(901048).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.decode=function decode(e,t,r){t=t||4,r=void 0===r||r;const n=e.length;if(0===n)return 0;if(n>t)throw new TypeError("Script number overflow");if(r&&!(127&e[n-1]||!(n<=1)&&128&e[n-2]))throw new Error("Non-minimally encoded script number");if(5===n){const t=e.readUInt32LE(0),r=e.readUInt8(4);return 128&r?-(4294967296*(-129&r)+t):4294967296*r+t}let i=0;for(let t=0;t<n;++t)i|=e[t]<<8*t;return 128&e[n-1]?-(i&~(128<<8*(n-1))):i},t.encode=function encode(e){let t=Math.abs(e);const r=function scriptNumSize(e){return e>2147483647?5:e>8388607?4:e>32767?3:e>127?2:e>0?1:0}(t),i=n.allocUnsafe(r),s=e<0;for(let e=0;e<r;++e)i.writeUInt8(255&t,e),t>>=8;return 128&i[r-1]?i.writeUInt8(s?128:0,r-1):s&&(i[r-1]|=128),i}},372734:(e,t,r)=>{"use strict";var n=r(901048).Buffer;Object.defineProperty(t,"__esModule",{value:!0});const i=r(701763),s=r(671821),o=r(420973),a=n.alloc(1,0);function toDER(e){let t=0;for(;0===e[t];)++t;return t===e.length?a:128&(e=e.slice(t))[0]?n.concat([a,e],1+e.length):e}function fromDER(e){0===e[0]&&(e=e.slice(1));const t=n.alloc(32,0),r=Math.max(0,32-e.length);return e.copy(t,r),t}t.decode=function decode(e){const t=e.readUInt8(e.length-1),r=-193&t;if(r<=0||r>=4)throw new Error("Invalid hashType "+t);const i=s.decode(e.slice(0,-1)),o=fromDER(i.r),a=fromDER(i.s);return{signature:n.concat([o,a],64),hashType:t}},t.encode=function encode(e,t){o({signature:i.BufferN(64),hashType:i.UInt8},{signature:e,hashType:t});const r=-193&t;if(r<=0||r>=4)throw new Error("Invalid hashType "+t);const a=n.allocUnsafe(1);a.writeUInt8(t,0);const u=toDER(e.slice(0,32)),c=toDER(e.slice(32,64));return n.concat([s.encode(u,c),a])}},670645:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(649589);t.input=n;const i=r(211804);t.output=i},649589:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(962119),i=r(962119);function partialSignature(e){return e===i.OPS.OP_0||n.isCanonicalScriptSignature(e)}function check(e,t){const r=n.decompile(e);return!(r.length<2)&&(r[0]===i.OPS.OP_0&&(t?r.slice(1).every(partialSignature):r.slice(1).every(n.isCanonicalScriptSignature)))}t.check=check,check.toJSON=()=>"multisig input"},211804:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(962119),i=r(962119),s=r(701763),o=i.OPS.OP_RESERVED;function check(e,t){const r=n.decompile(e);if(r.length<4)return!1;if(r[r.length-1]!==i.OPS.OP_CHECKMULTISIG)return!1;if(!s.Number(r[0]))return!1;if(!s.Number(r[r.length-2]))return!1;const a=r[0]-o,u=r[r.length-2]-o;if(a<=0)return!1;if(u>16)return!1;if(a>u)return!1;if(u!==r.length-3)return!1;if(t)return!0;return r.slice(1,-2).every(n.isCanonicalPubKey)}t.check=check,check.toJSON=()=>"multi-sig output"},188213:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(962119),i=n.OPS;function check(e){const t=n.compile(e);return t.length>1&&t[0]===i.OP_RETURN}t.check=check,check.toJSON=()=>"null data output";const s={check};t.output=s},312213:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(702677);t.input=n;const i=r(469244);t.output=i},702677:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(962119);function check(e){const t=n.decompile(e);return 1===t.length&&n.isCanonicalScriptSignature(t[0])}t.check=check,check.toJSON=()=>"pubKey input"},469244:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(962119),i=r(962119);function check(e){const t=n.decompile(e);return 2===t.length&&n.isCanonicalPubKey(t[0])&&t[1]===i.OPS.OP_CHECKSIG}t.check=check,check.toJSON=()=>"pubKey output"},532569:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(536169);t.input=n;const i=r(442072);t.output=i},536169:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(962119);function check(e){const t=n.decompile(e);return 2===t.length&&n.isCanonicalScriptSignature(t[0])&&n.isCanonicalPubKey(t[1])}t.check=check,check.toJSON=()=>"pubKeyHash input"},442072:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(962119),i=r(962119);function check(e){const t=n.compile(e);return 25===t.length&&t[0]===i.OPS.OP_DUP&&t[1]===i.OPS.OP_HASH160&&20===t[2]&&t[23]===i.OPS.OP_EQUALVERIFY&&t[24]===i.OPS.OP_CHECKSIG}t.check=check,check.toJSON=()=>"pubKeyHash output"},970520:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(504488);t.input=n;const i=r(424363);t.output=i},504488:(e,t,r)=>{"use strict";var n=r(901048).Buffer;Object.defineProperty(t,"__esModule",{value:!0});const i=r(962119),s=r(670645),o=r(312213),a=r(532569),u=r(715715),c=r(13988);function check(e,t){const r=i.decompile(e);if(r.length<1)return!1;const p=r[r.length-1];if(!n.isBuffer(p))return!1;const h=i.decompile(i.compile(r.slice(0,-1))),l=i.decompile(p);return!!l&&(!!i.isPushOnly(h)&&(1===r.length?c.check(l)||u.check(l):!(!a.input.check(h)||!a.output.check(l))||(!(!s.input.check(h,t)||!s.output.check(l))||!(!o.input.check(h)||!o.output.check(l)))))}t.check=check,check.toJSON=()=>"scriptHash input"},424363:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(962119),i=r(962119);function check(e){const t=n.compile(e);return 23===t.length&&t[0]===i.OPS.OP_HASH160&&20===t[1]&&t[22]===i.OPS.OP_EQUAL}t.check=check,check.toJSON=()=>"scriptHash output"},741775:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(965210);t.output=n},965210:(e,t,r)=>{"use strict";var n=r(901048).Buffer;Object.defineProperty(t,"__esModule",{value:!0});const i=r(962119),s=r(962119),o=r(701763),a=r(420973),u=n.from("aa21a9ed","hex");function check(e){const t=i.compile(e);return t.length>37&&t[0]===s.OPS.OP_RETURN&&36===t[1]&&t.slice(2,6).equals(u)}t.check=check,check.toJSON=()=>"Witness commitment output",t.encode=function encode(e){a(o.Hash256bit,e);const t=n.allocUnsafe(36);return u.copy(t,0),e.copy(t,4),i.compile([s.OPS.OP_RETURN,t])},t.decode=function decode(e){return a(check,e),i.decompile(e)[1].slice(4,36)}},773408:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(161088);t.input=n;const i=r(715715);t.output=i},161088:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(962119);function check(e){const t=n.decompile(e);return 2===t.length&&n.isCanonicalScriptSignature(t[0])&&function isCompressedCanonicalPubKey(e){return n.isCanonicalPubKey(e)&&33===e.length}(t[1])}t.check=check,check.toJSON=()=>"witnessPubKeyHash input"},715715:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(962119),i=r(962119);function check(e){const t=n.compile(e);return 22===t.length&&t[0]===i.OPS.OP_0&&20===t[1]}t.check=check,check.toJSON=()=>"Witness pubKeyHash output"},637165:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(52285);t.input=n;const i=r(13988);t.output=i},52285:(e,t,r)=>{"use strict";var n=r(901048).Buffer;Object.defineProperty(t,"__esModule",{value:!0});const i=r(962119),s=r(420973),o=r(670645),a=r(312213),u=r(532569);function check(e,t){if(s(s.Array,e),e.length<1)return!1;const r=e[e.length-1];if(!n.isBuffer(r))return!1;const c=i.decompile(r);if(!c||0===c.length)return!1;const p=i.compile(e.slice(0,-1));return!(!u.input.check(p)||!u.output.check(c))||(!(!o.input.check(p,t)||!o.output.check(c))||!(!a.input.check(p)||!a.output.check(c)))}t.check=check,check.toJSON=()=>"witnessScriptHash input"},13988:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(962119),i=r(962119);function check(e){const t=n.compile(e);return 34===t.length&&t[0]===i.OPS.OP_0&&32===t[1]}t.check=check,check.toJSON=()=>"Witness scriptHash output"},432082:(e,t,r)=>{"use strict";var n=r(901048).Buffer;Object.defineProperty(t,"__esModule",{value:!0});const i=r(165649),s=r(604033),o=r(962119),a=r(962119),u=r(701763),c=r(420973),p=r(377820);function varSliceSize(e){const t=e.length;return p.encodingLength(t)+t}const h=n.allocUnsafe(0),l=[],f=n.from("0000000000000000000000000000000000000000000000000000000000000000","hex"),d=n.from("0000000000000000000000000000000000000000000000000000000000000001","hex"),g=n.from("ffffffffffffffff","hex"),y={script:h,valueBuffer:g};class Transaction{constructor(){this.version=1,this.locktime=0,this.ins=[],this.outs=[]}static fromBuffer(e,t){const r=new i.BufferReader(e),n=new Transaction;n.version=r.readInt32();const s=r.readUInt8(),o=r.readUInt8();let a=!1;s===Transaction.ADVANCED_TRANSACTION_MARKER&&o===Transaction.ADVANCED_TRANSACTION_FLAG?a=!0:r.offset-=2;const u=r.readVarInt();for(let e=0;e<u;++e)n.ins.push({hash:r.readSlice(32),index:r.readUInt32(),script:r.readVarSlice(),sequence:r.readUInt32(),witness:l});const c=r.readVarInt();for(let e=0;e<c;++e)n.outs.push({value:r.readUInt64(),script:r.readVarSlice()});if(a){for(let e=0;e<u;++e)n.ins[e].witness=r.readVector();if(!n.hasWitnesses())throw new Error("Transaction has superfluous witness data")}if(n.locktime=r.readUInt32(),t)return n;if(r.offset!==e.length)throw new Error("Transaction has unexpected data");return n}static fromHex(e){return Transaction.fromBuffer(n.from(e,"hex"),!1)}static isCoinbaseHash(e){c(u.Hash256bit,e);for(let t=0;t<32;++t)if(0!==e[t])return!1;return!0}isCoinbase(){return 1===this.ins.length&&Transaction.isCoinbaseHash(this.ins[0].hash)}addInput(e,t,r,n){return c(u.tuple(u.Hash256bit,u.UInt32,u.maybe(u.UInt32),u.maybe(u.Buffer)),arguments),u.Null(r)&&(r=Transaction.DEFAULT_SEQUENCE),this.ins.push({hash:e,index:t,script:n||h,sequence:r,witness:l})-1}addOutput(e,t){return c(u.tuple(u.Buffer,u.Satoshi),arguments),this.outs.push({script:e,value:t})-1}hasWitnesses(){return this.ins.some((e=>0!==e.witness.length))}weight(){return 3*this.byteLength(!1)+this.byteLength(!0)}virtualSize(){return Math.ceil(this.weight()/4)}byteLength(e=!0){const t=e&&this.hasWitnesses();return(t?10:8)+p.encodingLength(this.ins.length)+p.encodingLength(this.outs.length)+this.ins.reduce(((e,t)=>e+40+varSliceSize(t.script)),0)+this.outs.reduce(((e,t)=>e+8+varSliceSize(t.script)),0)+(t?this.ins.reduce(((e,t)=>e+function vectorSize(e){const t=e.length;return p.encodingLength(t)+e.reduce(((e,t)=>e+varSliceSize(t)),0)}(t.witness)),0):0)}clone(){const e=new Transaction;return e.version=this.version,e.locktime=this.locktime,e.ins=this.ins.map((e=>({hash:e.hash,index:e.index,script:e.script,sequence:e.sequence,witness:e.witness}))),e.outs=this.outs.map((e=>({script:e.script,value:e.value}))),e}hashForSignature(e,t,r){if(c(u.tuple(u.UInt32,u.Buffer,u.Number),arguments),e>=this.ins.length)return d;const i=o.compile(o.decompile(t).filter((e=>e!==a.OPS.OP_CODESEPARATOR))),p=this.clone();if((31&r)===Transaction.SIGHASH_NONE)p.outs=[],p.ins.forEach(((t,r)=>{r!==e&&(t.sequence=0)}));else if((31&r)===Transaction.SIGHASH_SINGLE){if(e>=this.outs.length)return d;p.outs.length=e+1;for(let t=0;t<e;t++)p.outs[t]=y;p.ins.forEach(((t,r)=>{r!==e&&(t.sequence=0)}))}r&Transaction.SIGHASH_ANYONECANPAY?(p.ins=[p.ins[e]],p.ins[0].script=i):(p.ins.forEach((e=>{e.script=h})),p.ins[e].script=i);const l=n.allocUnsafe(p.byteLength(!1)+4);return l.writeInt32LE(r,l.length-4),p.__toBuffer(l,0,!1),s.hash256(l)}hashForWitnessV0(e,t,r,o){c(u.tuple(u.UInt32,u.Buffer,u.Satoshi,u.UInt32),arguments);let a,p=n.from([]),h=f,l=f,d=f;if(o&Transaction.SIGHASH_ANYONECANPAY||(p=n.allocUnsafe(36*this.ins.length),a=new i.BufferWriter(p,0),this.ins.forEach((e=>{a.writeSlice(e.hash),a.writeUInt32(e.index)})),l=s.hash256(p)),o&Transaction.SIGHASH_ANYONECANPAY||(31&o)===Transaction.SIGHASH_SINGLE||(31&o)===Transaction.SIGHASH_NONE||(p=n.allocUnsafe(4*this.ins.length),a=new i.BufferWriter(p,0),this.ins.forEach((e=>{a.writeUInt32(e.sequence)})),d=s.hash256(p)),(31&o)!==Transaction.SIGHASH_SINGLE&&(31&o)!==Transaction.SIGHASH_NONE){const e=this.outs.reduce(((e,t)=>e+8+varSliceSize(t.script)),0);p=n.allocUnsafe(e),a=new i.BufferWriter(p,0),this.outs.forEach((e=>{a.writeUInt64(e.value),a.writeVarSlice(e.script)})),h=s.hash256(p)}else if((31&o)===Transaction.SIGHASH_SINGLE&&e<this.outs.length){const t=this.outs[e];p=n.allocUnsafe(8+varSliceSize(t.script)),a=new i.BufferWriter(p,0),a.writeUInt64(t.value),a.writeVarSlice(t.script),h=s.hash256(p)}p=n.allocUnsafe(156+varSliceSize(t)),a=new i.BufferWriter(p,0);const g=this.ins[e];return a.writeUInt32(this.version),a.writeSlice(l),a.writeSlice(d),a.writeSlice(g.hash),a.writeUInt32(g.index),a.writeVarSlice(t),a.writeUInt64(r),a.writeUInt32(g.sequence),a.writeSlice(h),a.writeUInt32(this.locktime),a.writeUInt32(o),s.hash256(p)}hashForCashSignature(e,t,r,n){if(c(u.tuple(u.UInt32,u.Buffer,u.Number,u.maybe(u.UInt53)),arguments),n&Transaction.SIGHASH_BITCOINCASHBIP143){if(u.Null(r))throw new Error("Bitcoin Cash sighash requires value of input to be signed.");return this.hashForWitnessV0(e,t,r,n)}return this.hashForSignature(e,t,n)}hashForGoldSignature(e,t,r,n,i){c(u.tuple(u.UInt32,u.Buffer,u.Number,u.maybe(u.UInt53)),arguments);let s=n;const o=(n&Transaction.SIGHASH_BITCOINCASHBIP143)>0;if(o&&(s|=Transaction.FORKID_BTG<<8),i||o){if(u.Null(r))throw new Error("Bitcoin Cash sighash requires value of input to be signed.");return this.hashForWitnessV0(e,t,r,s)}return this.hashForSignature(e,t,s)}getHash(e){return e&&this.isCoinbase()?n.alloc(32,0):s.hash256(this.__toBuffer(void 0,void 0,e))}getId(){return i.reverseBuffer(this.getHash(!1)).toString("hex")}toBuffer(e,t){return this.__toBuffer(e,t,!0)}toHex(){return this.toBuffer(void 0,void 0).toString("hex")}setInputScript(e,t){c(u.tuple(u.Number,u.Buffer),arguments),this.ins[e].script=t}setWitness(e,t){c(u.tuple(u.Number,[u.Buffer]),arguments),this.ins[e].witness=t}__toBuffer(e,t,r=!1){e||(e=n.allocUnsafe(this.byteLength(r)));const s=new i.BufferWriter(e,t||0);s.writeInt32(this.version);const o=r&&this.hasWitnesses();return o&&(s.writeUInt8(Transaction.ADVANCED_TRANSACTION_MARKER),s.writeUInt8(Transaction.ADVANCED_TRANSACTION_FLAG)),s.writeVarInt(this.ins.length),this.ins.forEach((e=>{s.writeSlice(e.hash),s.writeUInt32(e.index),s.writeVarSlice(e.script),s.writeUInt32(e.sequence)})),s.writeVarInt(this.outs.length),this.outs.forEach((e=>{!function isOutput(e){return void 0!==e.value}(e)?s.writeSlice(e.valueBuffer):s.writeUInt64(e.value),s.writeVarSlice(e.script)})),o&&this.ins.forEach((e=>{s.writeVector(e.witness)})),s.writeUInt32(this.locktime),void 0!==t?e.slice(t,s.offset):e}}Transaction.DEFAULT_SEQUENCE=4294967295,Transaction.SIGHASH_ALL=1,Transaction.SIGHASH_NONE=2,Transaction.SIGHASH_SINGLE=3,Transaction.SIGHASH_ANYONECANPAY=128,Transaction.SIGHASH_BITCOINCASHBIP143=64,Transaction.ADVANCED_TRANSACTION_MARKER=0,Transaction.ADVANCED_TRANSACTION_FLAG=1,Transaction.FORKID_BTG=79,Transaction.FORKID_BCH=0,t.Transaction=Transaction},497318:(e,t,r)=>{"use strict";var n=r(901048).Buffer;Object.defineProperty(t,"__esModule",{value:!0});const i=r(910150),s=r(165649),o=r(91034),a=r(604033),u=r(628596),c=r(5491),p=r(385320),h=r(962119),l=r(962119),f=r(432082),d=r(701763),g=r(420973),y=o.types,m=new Set(["p2pkh","p2pk","p2wpkh","p2ms","p2sh-p2pkh","p2sh-p2pk","p2sh-p2wpkh","p2sh-p2ms","p2wsh-p2pkh","p2wsh-p2pk","p2wsh-p2ms","p2sh-p2wsh-p2pkh","p2sh-p2wsh-p2pk","p2sh-p2wsh-p2ms"]);function tfMessage(e,t,r){try{g(e,t)}catch(e){throw new Error(r)}}class TransactionBuilder{constructor(e=c.bitcoin,t=2500){this.network=e,this.maximumFeeRate=t,this.__PREV_TX_SET={},this.__INPUTS=[],this.__BITCOINCASH=!1,this.__BITCOINGOLD=!1,this.__TX=new f.Transaction,this.__TX.version=2,this.__USE_LOW_R=!1,console.warn("Deprecation Warning: TransactionBuilder will be removed in the future. (v6.x.x or later) Please use the Psbt class instead. Examples of usage are available in the transactions-psbt.js integration test file on our Github. A high level explanation is available in the psbt.ts and psbt.js files as well.")}static fromTransaction(e,t,r){const n=new TransactionBuilder(t);return"number"==typeof r&&(r===f.Transaction.FORKID_BTG?n.enableBitcoinGold(!0):r===f.Transaction.FORKID_BCH&&n.enableBitcoinCash(!0)),n.setVersion(e.version),n.setLockTime(e.locktime),e.outs.forEach((e=>{n.addOutput(e.script,e.value)})),e.ins.forEach((e=>{n.__addInputUnsafe(e.hash,e.index,{sequence:e.sequence,script:e.script,witness:e.witness,value:e.value})})),n.__INPUTS.forEach(((t,n)=>{!function fixMultisigOrder(e,t,r,n,i){if(e.redeemScriptType!==y.P2MS||!e.redeemScript)return;if(e.pubkeys.length===e.signatures.length)return;const s=e.signatures.concat();e.signatures=e.pubkeys.map((o=>{const a=u.fromPublicKey(o);let c;return s.some(((o,u)=>{if(!o)return!1;const p=h.signature.decode(o);let l;switch(i){case f.Transaction.FORKID_BCH:l=t.hashForCashSignature(r,e.redeemScript,n,p.hashType);break;case f.Transaction.FORKID_BTG:l=t.hashForGoldSignature(r,e.redeemScript,n,p.hashType);break;default:l=e.witness?t.hashForWitnessV0(r,e.redeemScript,n,p.hashType):t.hashForSignature(r,e.redeemScript,p.hashType)}return!!a.verify(l,p.signature)&&(s[u]=void 0,c=o,!0)})),c}))}(t,e,n,t.value,r)})),n}enableBitcoinCash(e){void 0===e&&(e=!0),this.__BITCOINCASH=e}enableBitcoinGold(e){void 0===e&&(e=!0),this.__BITCOINGOLD=e}setLowR(e){return g(g.maybe(g.Boolean),e),void 0===e&&(e=!0),this.__USE_LOW_R=e,e}setLockTime(e){if(g(d.UInt32,e),this.__INPUTS.some((e=>!!e.signatures&&e.signatures.some((e=>void 0!==e)))))throw new Error("No, this would invalidate signatures");this.__TX.locktime=e}setVersion(e){g(d.UInt32,e),this.__TX.version=e}addInput(e,t,r,i){if(!this.__canModifyInputs())throw new Error("No, this would invalidate signatures");let o;if(function txIsString(e){return"string"==typeof e||e instanceof String}(e))e=s.reverseBuffer(n.from(e,"hex"));else if(function txIsTransaction(e){return e instanceof f.Transaction}(e)){const r=e.outs[t];i=r.script,o=r.value,e=e.getHash(!1)}return this.__addInputUnsafe(e,t,{sequence:r,prevOutScript:i,value:o})}addOutput(e,t){if(!this.__canModifyOutputs())throw new Error("No, this would invalidate signatures");return"string"==typeof e&&(e=i.toOutputScript(e,this.network)),this.__TX.addOutput(e,t)}build(){return this.__build(!1)}buildIncomplete(){return this.__build(!0)}sign(e,t,r,n,i,s){!function trySign({input:e,ourPubKey:t,keyPair:r,signatureHash:n,hashType:i,useLowR:s}){let o=!1;for(const[a,u]of e.pubkeys.entries()){if(!t.equals(u))continue;if(e.signatures[a])throw new Error("Signature already exists");if(33!==t.length&&e.hasWitness)throw new Error("BIP143 rejects uncompressed public keys in P2WPKH or P2WSH");const c=r.sign(n,s);e.signatures[a]=h.signature.encode(c,i),o=!0}if(!o)throw new Error("Key pair cannot sign for this input")}(function getSigningData(e,t,r,n,i,s,o,a,u,c,l,w){let v;if("number"==typeof i)console.warn("DEPRECATED: TransactionBuilder sign method arguments will change in v6, please use the TxbSignArg interface"),v=i;else{if("object"!=typeof i)throw new TypeError("TransactionBuilder sign first arg must be TxbSignArg or number");!function checkSignArgs(e,t){if(!m.has(t.prevOutScriptType))throw new TypeError(`Unknown prevOutScriptType "${t.prevOutScriptType}"`);tfMessage(g.Number,t.vin,"sign must include vin parameter as Number (input index)"),tfMessage(d.Signer,t.keyPair,"sign must include keyPair parameter as Signer interface"),tfMessage(g.maybe(g.Number),t.hashType,"sign hashType parameter must be a number");const r=(e[t.vin]||[]).prevOutType,n=t.prevOutScriptType;switch(n){case"p2pkh":if(r&&"pubkeyhash"!==r)throw new TypeError(`input #${t.vin} is not of type p2pkh: ${r}`);tfMessage(g.value(void 0),t.witnessScript,`${n} requires NO witnessScript`),tfMessage(g.value(void 0),t.redeemScript,`${n} requires NO redeemScript`),tfMessage(g.value(void 0),t.witnessValue,`${n} requires NO witnessValue`);break;case"p2pk":if(r&&"pubkey"!==r)throw new TypeError(`input #${t.vin} is not of type p2pk: ${r}`);tfMessage(g.value(void 0),t.witnessScript,`${n} requires NO witnessScript`),tfMessage(g.value(void 0),t.redeemScript,`${n} requires NO redeemScript`),tfMessage(g.value(void 0),t.witnessValue,`${n} requires NO witnessValue`);break;case"p2wpkh":if(r&&"witnesspubkeyhash"!==r)throw new TypeError(`input #${t.vin} is not of type p2wpkh: ${r}`);tfMessage(g.value(void 0),t.witnessScript,`${n} requires NO witnessScript`),tfMessage(g.value(void 0),t.redeemScript,`${n} requires NO redeemScript`),tfMessage(d.Satoshi,t.witnessValue,`${n} requires witnessValue`);break;case"p2ms":if(r&&"multisig"!==r)throw new TypeError(`input #${t.vin} is not of type p2ms: ${r}`);tfMessage(g.value(void 0),t.witnessScript,`${n} requires NO witnessScript`),tfMessage(g.value(void 0),t.redeemScript,`${n} requires NO redeemScript`),tfMessage(g.value(void 0),t.witnessValue,`${n} requires NO witnessValue`);break;case"p2sh-p2wpkh":if(r&&"scripthash"!==r)throw new TypeError(`input #${t.vin} is not of type p2sh-p2wpkh: ${r}`);tfMessage(g.value(void 0),t.witnessScript,`${n} requires NO witnessScript`),tfMessage(g.Buffer,t.redeemScript,`${n} requires redeemScript`),tfMessage(d.Satoshi,t.witnessValue,`${n} requires witnessValue`);break;case"p2sh-p2ms":case"p2sh-p2pk":case"p2sh-p2pkh":if(r&&"scripthash"!==r)throw new TypeError(`input #${t.vin} is not of type ${n}: ${r}`);tfMessage(g.value(void 0),t.witnessScript,`${n} requires NO witnessScript`),tfMessage(g.Buffer,t.redeemScript,`${n} requires redeemScript`),tfMessage(g.value(void 0),t.witnessValue,`${n} requires NO witnessValue`);break;case"p2wsh-p2ms":case"p2wsh-p2pk":case"p2wsh-p2pkh":if(r&&"witnessscripthash"!==r)throw new TypeError(`input #${t.vin} is not of type ${n}: ${r}`);tfMessage(g.Buffer,t.witnessScript,`${n} requires witnessScript`),tfMessage(g.value(void 0),t.redeemScript,`${n} requires NO redeemScript`),tfMessage(d.Satoshi,t.witnessValue,`${n} requires witnessValue`);break;case"p2sh-p2wsh-p2ms":case"p2sh-p2wsh-p2pk":case"p2sh-p2wsh-p2pkh":if(r&&"scripthash"!==r)throw new TypeError(`input #${t.vin} is not of type ${n}: ${r}`);tfMessage(g.Buffer,t.witnessScript,`${n} requires witnessScript`),tfMessage(g.Buffer,t.redeemScript,`${n} requires witnessScript`),tfMessage(d.Satoshi,t.witnessValue,`${n} requires witnessScript`)}}(t,i),({vin:v,keyPair:o,redeemScript:a,hashType:u,witnessValue:c,witnessScript:l}=i)}if(void 0===o)throw new Error("sign requires keypair");if(o.network&&o.network!==e)throw new TypeError("Inconsistent network");if(!t[v])throw new Error("No input at index: "+v);if(u=u||f.Transaction.SIGHASH_ALL,r(u))throw new Error("Transaction needs outputs");const S=t[v];if(void 0!==S.redeemScript&&a&&!S.redeemScript.equals(a))throw new Error("Inconsistent redeemScript");const b=o.publicKey||o.getPublicKey&&o.getPublicKey();if(!canSign(S)){if(void 0!==c){if(void 0!==S.value&&S.value!==c)throw new Error("Input did not match witnessValue");g(d.Satoshi,c),S.value=c}if(!canSign(S)){const e=function prepareInput(e,t,r,n){if(r&&n){const i=p.p2wsh({redeem:{output:n}}),s=p.p2wsh({output:r}),o=p.p2sh({redeem:{output:r}}),a=p.p2sh({redeem:i});if(!i.hash.equals(s.hash))throw new Error("Witness script inconsistent with prevOutScript");if(!o.hash.equals(a.hash))throw new Error("Redeem script inconsistent with prevOutScript");const u=expandOutput(i.redeem.output,t);if(!u.pubkeys)throw new Error(u.type+" not supported as witnessScript ("+h.toASM(n)+")");e.signatures&&e.signatures.some((e=>void 0!==e))&&(u.signatures=e.signatures);const c=n;if(u.type===y.P2WPKH)throw new Error("P2SH(P2WSH(P2WPKH)) is a consensus failure");return{redeemScript:r,redeemScriptType:y.P2WSH,witnessScript:n,witnessScriptType:u.type,prevOutType:y.P2SH,prevOutScript:o.output,hasWitness:!0,signScript:c,signType:u.type,pubkeys:u.pubkeys,signatures:u.signatures,maxSignatures:u.maxSignatures}}if(r){const n=p.p2sh({redeem:{output:r}});if(e.prevOutScript){let t;try{t=p.p2sh({output:e.prevOutScript})}catch(e){throw new Error("PrevOutScript must be P2SH")}if(!n.hash.equals(t.hash))throw new Error("Redeem script inconsistent with prevOutScript")}const i=expandOutput(n.redeem.output,t);if(!i.pubkeys)throw new Error(i.type+" not supported as redeemScript ("+h.toASM(r)+")");e.signatures&&e.signatures.some((e=>void 0!==e))&&(i.signatures=e.signatures);let s=r;return i.type===y.P2WPKH&&(s=p.p2pkh({pubkey:i.pubkeys[0]}).output),{redeemScript:r,redeemScriptType:i.type,prevOutType:y.P2SH,prevOutScript:n.output,hasWitness:i.type===y.P2WPKH,signScript:s,signType:i.type,pubkeys:i.pubkeys,signatures:i.signatures,maxSignatures:i.maxSignatures}}if(n){const r=p.p2wsh({redeem:{output:n}});if(e.prevOutScript){const t=p.p2wsh({output:e.prevOutScript});if(!r.hash.equals(t.hash))throw new Error("Witness script inconsistent with prevOutScript")}const i=expandOutput(r.redeem.output,t);if(!i.pubkeys)throw new Error(i.type+" not supported as witnessScript ("+h.toASM(n)+")");e.signatures&&e.signatures.some((e=>void 0!==e))&&(i.signatures=e.signatures);const s=n;if(i.type===y.P2WPKH)throw new Error("P2WSH(P2WPKH) is a consensus failure");return{witnessScript:n,witnessScriptType:i.type,prevOutType:y.P2WSH,prevOutScript:r.output,hasWitness:!0,signScript:s,signType:i.type,pubkeys:i.pubkeys,signatures:i.signatures,maxSignatures:i.maxSignatures}}if(e.prevOutType&&e.prevOutScript){if(e.prevOutType===y.P2SH)throw new Error("PrevOutScript is "+e.prevOutType+", requires redeemScript");if(e.prevOutType===y.P2WSH)throw new Error("PrevOutScript is "+e.prevOutType+", requires witnessScript");if(!e.prevOutScript)throw new Error("PrevOutScript is missing");const r=expandOutput(e.prevOutScript,t);if(!r.pubkeys)throw new Error(r.type+" not supported ("+h.toASM(e.prevOutScript)+")");e.signatures&&e.signatures.some((e=>void 0!==e))&&(r.signatures=e.signatures);let n=e.prevOutScript;return r.type===y.P2WPKH&&(n=p.p2pkh({pubkey:r.pubkeys[0]}).output),{prevOutType:r.type,prevOutScript:e.prevOutScript,hasWitness:r.type===y.P2WPKH,signScript:n,signType:r.type,pubkeys:r.pubkeys,signatures:r.signatures,maxSignatures:r.maxSignatures}}const i=p.p2pkh({pubkey:t}).output;return{prevOutType:y.P2PKH,prevOutScript:i,hasWitness:!1,signScript:i,signType:y.P2PKH,pubkeys:[t],signatures:[void 0]}}(S,b,a,l);Object.assign(S,e)}if(!canSign(S))throw Error(S.prevOutType+" not supported")}let I;I=s.btg?n.hashForGoldSignature(v,S.signScript,S.value,u,!!S.witness):s.bch?n.hashForCashSignature(v,S.signScript,S.value,u):S.hasWitness?n.hashForWitnessV0(v,S.signScript,S.value,u):n.hashForSignature(v,S.signScript,u);return{input:S,ourPubKey:b,keyPair:o,signatureHash:I,hashType:u,useLowR:!!w}}(this.network,this.__INPUTS,this.__needsOutputs.bind(this),this.__TX,e,{btg:this.__BITCOINGOLD,bch:this.__BITCOINCASH},t,r,n,i,s,this.__USE_LOW_R))}__addInputUnsafe(e,t,r){if(f.Transaction.isCoinbaseHash(e))throw new Error("coinbase inputs not supported");const n=e.toString("hex")+":"+t;if(void 0!==this.__PREV_TX_SET[n])throw new Error("Duplicate TxOut: "+n);let i={};if(void 0!==r.script&&(i=expandInput(r.script,r.witness||[])),void 0!==r.value&&(i.value=r.value),!i.prevOutScript&&r.prevOutScript){let e;if(!i.pubkeys&&!i.signatures){const t=expandOutput(r.prevOutScript);t.pubkeys&&(i.pubkeys=t.pubkeys,i.signatures=t.signatures),e=t.type}i.prevOutScript=r.prevOutScript,i.prevOutType=e||o.output(r.prevOutScript)}const s=this.__TX.addInput(e,t,r.sequence,r.scriptSig);return this.__INPUTS[s]=i,this.__PREV_TX_SET[n]=!0,s}__build(e){if(!e){if(!this.__TX.ins.length)throw new Error("Transaction has no inputs");if(!this.__TX.outs.length)throw new Error("Transaction has no outputs")}const t=this.__TX.clone();if(this.__INPUTS.forEach(((r,n)=>{if(!r.prevOutType&&!e)throw new Error("Transaction is not complete");const i=build(r.prevOutType,r,e);if(i)t.setInputScript(n,i.input),t.setWitness(n,i.witness);else{if(!e&&r.prevOutType===y.NONSTANDARD)throw new Error("Unknown input type");if(!e)throw new Error("Not enough information")}})),!e&&this.__overMaximumFees(t.virtualSize()))throw new Error("Transaction has absurd fees");return t}__canModifyInputs(){return this.__INPUTS.every((e=>!e.signatures||e.signatures.every((e=>{if(!e)return!0;return!!(signatureHashType(e)&f.Transaction.SIGHASH_ANYONECANPAY)}))))}__needsOutputs(e){return e===f.Transaction.SIGHASH_ALL?0===this.__TX.outs.length:0===this.__TX.outs.length&&this.__INPUTS.some((e=>!!e.signatures&&e.signatures.some((e=>{if(!e)return!1;return!(signatureHashType(e)&f.Transaction.SIGHASH_NONE)}))))}__canModifyOutputs(){const e=this.__TX.ins.length,t=this.__TX.outs.length;return this.__INPUTS.every((r=>void 0===r.signatures||r.signatures.every((r=>{if(!r)return!0;const n=31&signatureHashType(r);return n===f.Transaction.SIGHASH_NONE||n===f.Transaction.SIGHASH_SINGLE&&e<=t}))))}__overMaximumFees(e){return(this.__INPUTS.reduce(((e,t)=>e+(t.value>>>0)),0)-this.__TX.outs.reduce(((e,t)=>e+t.value),0))/e>this.maximumFeeRate}}function expandInput(e,t,r,n){if(0===e.length&&0===t.length)return{};if(!r){let n=o.input(e,!0),i=o.witness(t,!0);n===y.NONSTANDARD&&(n=void 0),i===y.NONSTANDARD&&(i=void 0),r=n||i}switch(r){case y.P2WPKH:{const{output:e,pubkey:r,signature:n}=p.p2wpkh({witness:t});return{prevOutScript:e,prevOutType:y.P2WPKH,pubkeys:[r],signatures:[n]}}case y.P2PKH:{const{output:t,pubkey:r,signature:n}=p.p2pkh({input:e});return{prevOutScript:t,prevOutType:y.P2PKH,pubkeys:[r],signatures:[n]}}case y.P2PK:{const{signature:t}=p.p2pk({input:e});return{prevOutType:y.P2PK,pubkeys:[void 0],signatures:[t]}}case y.P2MS:{const{m:t,pubkeys:r,signatures:i}=p.p2ms({input:e,output:n},{allowIncomplete:!0});return{prevOutType:y.P2MS,pubkeys:r,signatures:i,maxSignatures:t}}}if(r===y.P2SH){const{output:r,redeem:n}=p.p2sh({input:e,witness:t}),i=o.output(n.output),s=expandInput(n.input,n.witness,i,n.output);return s.prevOutType?{prevOutScript:r,prevOutType:y.P2SH,redeemScript:n.output,redeemScriptType:s.prevOutType,witnessScript:s.witnessScript,witnessScriptType:s.witnessScriptType,pubkeys:s.pubkeys,signatures:s.signatures}:{}}if(r===y.P2WSH){const{output:r,redeem:n}=p.p2wsh({input:e,witness:t}),i=o.output(n.output);let s;return s=i===y.P2WPKH?expandInput(n.input,n.witness,i):expandInput(h.compile(n.witness),[],i,n.output),s.prevOutType?{prevOutScript:r,prevOutType:y.P2WSH,witnessScript:n.output,witnessScriptType:s.prevOutType,pubkeys:s.pubkeys,signatures:s.signatures}:{}}return{prevOutType:y.NONSTANDARD,prevOutScript:e}}function expandOutput(e,t){g(d.Buffer,e);const r=o.output(e);switch(r){case y.P2PKH:{if(!t)return{type:r};const n=p.p2pkh({output:e}).hash,i=a.hash160(t);return n.equals(i)?{type:r,pubkeys:[t],signatures:[void 0]}:{type:r}}case y.P2WPKH:{if(!t)return{type:r};const n=p.p2wpkh({output:e}).hash,i=a.hash160(t);return n.equals(i)?{type:r,pubkeys:[t],signatures:[void 0]}:{type:r}}case y.P2PK:return{type:r,pubkeys:[p.p2pk({output:e}).pubkey],signatures:[void 0]};case y.P2MS:{const t=p.p2ms({output:e});return{type:r,pubkeys:t.pubkeys,signatures:t.pubkeys.map((()=>{})),maxSignatures:t.m}}}return{type:r}}function build(e,t,r){const n=t.pubkeys||[];let i=t.signatures||[];switch(e){case y.P2PKH:if(0===n.length)break;if(0===i.length)break;return p.p2pkh({pubkey:n[0],signature:i[0]});case y.P2WPKH:if(0===n.length)break;if(0===i.length)break;return p.p2wpkh({pubkey:n[0],signature:i[0]});case y.P2PK:if(0===n.length)break;if(0===i.length)break;return p.p2pk({signature:i[0]});case y.P2MS:{const e=t.maxSignatures;i=r?i.map((e=>e||l.OPS.OP_0)):i.filter((e=>e));const s=!r||e===i.length;return p.p2ms({m:e,pubkeys:n,signatures:i},{allowIncomplete:r,validate:s})}case y.P2SH:{const e=build(t.redeemScriptType,t,r);if(!e)return;return p.p2sh({redeem:{output:e.output||t.redeemScript,input:e.input,witness:e.witness}})}case y.P2WSH:{const e=build(t.witnessScriptType,t,r);if(!e)return;return p.p2wsh({redeem:{output:t.witnessScript,input:e.input,witness:e.witness}})}}}function canSign(e){return void 0!==e.signScript&&void 0!==e.signType&&void 0!==e.pubkeys&&void 0!==e.signatures&&e.signatures.length===e.pubkeys.length&&e.pubkeys.length>0&&(!1===e.hasWitness||void 0!==e.value)}function signatureHashType(e){return e.readUInt8(e.length-1)}t.TransactionBuilder=TransactionBuilder},701763:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(420973),i=Math.pow(2,31)-1;function BIP32Path(e){return n.String(e)&&!!e.match(/^(m\/)?(\d+'?\/)*\d+'?$/)}t.UInt31=function UInt31(e){return n.UInt32(e)&&e<=i},t.BIP32Path=BIP32Path,BIP32Path.toJSON=()=>"BIP32 derivation path",t.Signer=function Signer(e){return(n.Buffer(e.publicKey)||"function"==typeof e.getPublicKey)&&"function"==typeof e.sign};t.Satoshi=function Satoshi(e){return n.UInt53(e)&&e<=21e14},t.ECPoint=n.quacksLike("Point"),t.Network=n.compile({messagePrefix:n.oneOf(n.Buffer,n.String),bip32:{public:n.UInt32,private:n.UInt32},pubKeyHash:n.UInt8,scriptHash:n.UInt8,wif:n.UInt8}),t.Buffer256bit=n.BufferN(32),t.Hash160bit=n.BufferN(20),t.Hash256bit=n.BufferN(32),t.Number=n.Number,t.Array=n.Array,t.Boolean=n.Boolean,t.String=n.String,t.Buffer=n.Buffer,t.Hex=n.Hex,t.maybe=n.maybe,t.tuple=n.tuple,t.UInt8=n.UInt8,t.UInt32=n.UInt32,t.UInt53=n.UInt53,t.Function=n.Function,t.BufferN=n.BufferN,t.Null=n.Null,t.oneOf=n.oneOf},664864:(e,t,r)=>{var n;e=r.nmd(e);var i=function(e){"use strict";var t=1e7,r=7,n=9007199254740992,s=smallToArray(n),o=Math.log(n);function Integer(e,t){return void 0===e?Integer[0]:void 0!==t?10==+t?parseValue(e):parseBase(e,t):parseValue(e)}function BigInteger(e,t){this.value=e,this.sign=t,this.isSmall=!1}function SmallInteger(e){this.value=e,this.sign=e<0,this.isSmall=!0}function isPrecise(e){return-n<e&&e<n}function smallToArray(e){return e<1e7?[e]:e<1e14?[e%1e7,Math.floor(e/1e7)]:[e%1e7,Math.floor(e/1e7)%1e7,Math.floor(e/1e14)]}function arrayToSmall(e){trim(e);var r=e.length;if(r<4&&compareAbs(e,s)<0)switch(r){case 0:return 0;case 1:return e[0];case 2:return e[0]+e[1]*t;default:return e[0]+(e[1]+e[2]*t)*t}return e}function trim(e){for(var t=e.length;0===e[--t];);e.length=t+1}function createArray(e){for(var t=new Array(e),r=-1;++r<e;)t[r]=0;return t}function truncate(e){return e>0?Math.floor(e):Math.ceil(e)}function add(e,r){var n,i,s=e.length,o=r.length,a=new Array(s),u=0,c=t;for(i=0;i<o;i++)u=(n=e[i]+r[i]+u)>=c?1:0,a[i]=n-u*c;for(;i<s;)u=(n=e[i]+u)===c?1:0,a[i++]=n-u*c;return u>0&&a.push(u),a}function addAny(e,t){return e.length>=t.length?add(e,t):add(t,e)}function addSmall(e,r){var n,i,s=e.length,o=new Array(s),a=t;for(i=0;i<s;i++)n=e[i]-a+r,r=Math.floor(n/a),o[i]=n-r*a,r+=1;for(;r>0;)o[i++]=r%a,r=Math.floor(r/a);return o}function subtract(e,r){var n,i,s=e.length,o=r.length,a=new Array(s),u=0,c=t;for(n=0;n<o;n++)(i=e[n]-u-r[n])<0?(i+=c,u=1):u=0,a[n]=i;for(n=o;n<s;n++){if(!((i=e[n]-u)<0)){a[n++]=i;break}i+=c,a[n]=i}for(;n<s;n++)a[n]=e[n];return trim(a),a}function subtractSmall(e,r,n){var i,s,o=e.length,a=new Array(o),u=-r,c=t;for(i=0;i<o;i++)s=e[i]+u,u=Math.floor(s/c),s%=c,a[i]=s<0?s+c:s;return"number"==typeof(a=arrayToSmall(a))?(n&&(a=-a),new SmallInteger(a)):new BigInteger(a,n)}function multiplyLong(e,r){var n,i,s,o,a=e.length,u=r.length,c=createArray(a+u),p=t;for(s=0;s<a;++s){o=e[s];for(var h=0;h<u;++h)n=o*r[h]+c[s+h],i=Math.floor(n/p),c[s+h]=n-i*p,c[s+h+1]+=i}return trim(c),c}function multiplySmall(e,r){var n,i,s=e.length,o=new Array(s),a=t,u=0;for(i=0;i<s;i++)n=e[i]*r+u,u=Math.floor(n/a),o[i]=n-u*a;for(;u>0;)o[i++]=u%a,u=Math.floor(u/a);return o}function shiftLeft(e,t){for(var r=[];t-- >0;)r.push(0);return r.concat(e)}function multiplyKaratsuba(e,t){var r=Math.max(e.length,t.length);if(r<=30)return multiplyLong(e,t);r=Math.ceil(r/2);var n=e.slice(r),i=e.slice(0,r),s=t.slice(r),o=t.slice(0,r),a=multiplyKaratsuba(i,o),u=multiplyKaratsuba(n,s),c=multiplyKaratsuba(addAny(i,n),addAny(o,s)),p=addAny(addAny(a,shiftLeft(subtract(subtract(c,a),u),r)),shiftLeft(u,2*r));return trim(p),p}function multiplySmallAndArray(e,r,n){return new BigInteger(e<t?multiplySmall(r,e):multiplyLong(r,smallToArray(e)),n)}function square(e){var r,n,i,s,o=e.length,a=createArray(o+o),u=t;for(i=0;i<o;i++){n=0-(s=e[i])*s;for(var c=i;c<o;c++)r=s*e[c]*2+a[i+c]+n,n=Math.floor(r/u),a[i+c]=r-n*u;a[i+o]=n}return trim(a),a}function divModSmall(e,r){var n,i,s,o,a=e.length,u=createArray(a),c=t;for(s=0,n=a-1;n>=0;--n)s=(o=s*c+e[n])-(i=truncate(o/r))*r,u[n]=0|i;return[u,0|s]}function divModAny(e,r){var n,i,s=parseValue(r),o=e.value,a=s.value;if(0===a)throw new Error("Cannot divide by zero");if(e.isSmall)return s.isSmall?[new SmallInteger(truncate(o/a)),new SmallInteger(o%a)]:[Integer[0],e];if(s.isSmall){if(1===a)return[e,Integer[0]];if(-1==a)return[e.negate(),Integer[0]];var u=Math.abs(a);if(u<t){i=arrayToSmall((n=divModSmall(o,u))[0]);var c=n[1];return e.sign&&(c=-c),"number"==typeof i?(e.sign!==s.sign&&(i=-i),[new SmallInteger(i),new SmallInteger(c)]):[new BigInteger(i,e.sign!==s.sign),new SmallInteger(c)]}a=smallToArray(u)}var p=compareAbs(o,a);if(-1===p)return[Integer[0],e];if(0===p)return[Integer[e.sign===s.sign?1:-1],Integer[0]];n=o.length+a.length<=200?function divMod1(e,r){var n,i,s,o,a,u,c,p=e.length,h=r.length,l=t,f=createArray(r.length),d=r[h-1],g=Math.ceil(l/(2*d)),y=multiplySmall(e,g),m=multiplySmall(r,g);for(y.length<=p&&y.push(0),m.push(0),d=m[h-1],i=p-h;i>=0;i--){for(n=l-1,y[i+h]!==d&&(n=Math.floor((y[i+h]*l+y[i+h-1])/d)),s=0,o=0,u=m.length,a=0;a<u;a++)s+=n*m[a],c=Math.floor(s/l),o+=y[i+a]-(s-c*l),s=c,o<0?(y[i+a]=o+l,o=-1):(y[i+a]=o,o=0);for(;0!==o;){for(n-=1,s=0,a=0;a<u;a++)(s+=y[i+a]-l+m[a])<0?(y[i+a]=s+l,s=0):(y[i+a]=s,s=1);o+=s}f[i]=n}return y=divModSmall(y,g)[0],[arrayToSmall(f),arrayToSmall(y)]}(o,a):function divMod2(e,r){for(var n,i,s,o,a,u=e.length,c=r.length,p=[],h=[],l=t;u;)if(h.unshift(e[--u]),trim(h),compareAbs(h,r)<0)p.push(0);else{s=h[(i=h.length)-1]*l+h[i-2],o=r[c-1]*l+r[c-2],i>c&&(s=(s+1)*l),n=Math.ceil(s/o);do{if(compareAbs(a=multiplySmall(r,n),h)<=0)break;n--}while(n);p.push(n),h=subtract(h,a)}return p.reverse(),[arrayToSmall(p),arrayToSmall(h)]}(o,a),i=n[0];var h=e.sign!==s.sign,l=n[1],f=e.sign;return"number"==typeof i?(h&&(i=-i),i=new SmallInteger(i)):i=new BigInteger(i,h),"number"==typeof l?(f&&(l=-l),l=new SmallInteger(l)):l=new BigInteger(l,f),[i,l]}function compareAbs(e,t){if(e.length!==t.length)return e.length>t.length?1:-1;for(var r=e.length-1;r>=0;r--)if(e[r]!==t[r])return e[r]>t[r]?1:-1;return 0}function isBasicPrime(e){var t=e.abs();return!t.isUnit()&&(!!(t.equals(2)||t.equals(3)||t.equals(5))||!(t.isEven()||t.isDivisibleBy(3)||t.isDivisibleBy(5))&&(!!t.lesser(49)||void 0))}function millerRabinTest(e,t){for(var r,n,s,o=e.prev(),a=o,u=0;a.isEven();)a=a.divide(2),u++;e:for(n=0;n<t.length;n++)if(!e.lesser(t[n])&&!(s=i(t[n]).modPow(a,e)).equals(Integer[1])&&!s.equals(o)){for(r=u-1;0!=r;r--){if((s=s.square().mod(e)).isUnit())return!1;if(s.equals(o))continue e}return!1}return!0}BigInteger.prototype=Object.create(Integer.prototype),SmallInteger.prototype=Object.create(Integer.prototype),BigInteger.prototype.add=function(e){var t=parseValue(e);if(this.sign!==t.sign)return this.subtract(t.negate());var r=this.value,n=t.value;return t.isSmall?new BigInteger(addSmall(r,Math.abs(n)),this.sign):new BigInteger(addAny(r,n),this.sign)},BigInteger.prototype.plus=BigInteger.prototype.add,SmallInteger.prototype.add=function(e){var t=parseValue(e),r=this.value;if(r<0!==t.sign)return this.subtract(t.negate());var n=t.value;if(t.isSmall){if(isPrecise(r+n))return new SmallInteger(r+n);n=smallToArray(Math.abs(n))}return new BigInteger(addSmall(n,Math.abs(r)),r<0)},SmallInteger.prototype.plus=SmallInteger.prototype.add,BigInteger.prototype.subtract=function(e){var t=parseValue(e);if(this.sign!==t.sign)return this.add(t.negate());var r=this.value,n=t.value;return t.isSmall?subtractSmall(r,Math.abs(n),this.sign):function subtractAny(e,t,r){var n;return compareAbs(e,t)>=0?n=subtract(e,t):(n=subtract(t,e),r=!r),"number"==typeof(n=arrayToSmall(n))?(r&&(n=-n),new SmallInteger(n)):new BigInteger(n,r)}(r,n,this.sign)},BigInteger.prototype.minus=BigInteger.prototype.subtract,SmallInteger.prototype.subtract=function(e){var t=parseValue(e),r=this.value;if(r<0!==t.sign)return this.add(t.negate());var n=t.value;return t.isSmall?new SmallInteger(r-n):subtractSmall(n,Math.abs(r),r>=0)},SmallInteger.prototype.minus=SmallInteger.prototype.subtract,BigInteger.prototype.negate=function(){return new BigInteger(this.value,!this.sign)},SmallInteger.prototype.negate=function(){var e=this.sign,t=new SmallInteger(-this.value);return t.sign=!e,t},BigInteger.prototype.abs=function(){return new BigInteger(this.value,!1)},SmallInteger.prototype.abs=function(){return new SmallInteger(Math.abs(this.value))},BigInteger.prototype.multiply=function(e){var r,n=parseValue(e),i=this.value,s=n.value,o=this.sign!==n.sign;if(n.isSmall){if(0===s)return Integer[0];if(1===s)return this;if(-1===s)return this.negate();if((r=Math.abs(s))<t)return new BigInteger(multiplySmall(i,r),o);s=smallToArray(r)}return function useKaratsuba(e,t){return-.012*e-.012*t+15e-6*e*t>0}(i.length,s.length)?new BigInteger(multiplyKaratsuba(i,s),o):new BigInteger(multiplyLong(i,s),o)},BigInteger.prototype.times=BigInteger.prototype.multiply,SmallInteger.prototype._multiplyBySmall=function(e){return isPrecise(e.value*this.value)?new SmallInteger(e.value*this.value):multiplySmallAndArray(Math.abs(e.value),smallToArray(Math.abs(this.value)),this.sign!==e.sign)},BigInteger.prototype._multiplyBySmall=function(e){return 0===e.value?Integer[0]:1===e.value?this:-1===e.value?this.negate():multiplySmallAndArray(Math.abs(e.value),this.value,this.sign!==e.sign)},SmallInteger.prototype.multiply=function(e){return parseValue(e)._multiplyBySmall(this)},SmallInteger.prototype.times=SmallInteger.prototype.multiply,BigInteger.prototype.square=function(){return new BigInteger(square(this.value),!1)},SmallInteger.prototype.square=function(){var e=this.value*this.value;return isPrecise(e)?new SmallInteger(e):new BigInteger(square(smallToArray(Math.abs(this.value))),!1)},BigInteger.prototype.divmod=function(e){var t=divModAny(this,e);return{quotient:t[0],remainder:t[1]}},SmallInteger.prototype.divmod=BigInteger.prototype.divmod,BigInteger.prototype.divide=function(e){return divModAny(this,e)[0]},SmallInteger.prototype.over=SmallInteger.prototype.divide=BigInteger.prototype.over=BigInteger.prototype.divide,BigInteger.prototype.mod=function(e){return divModAny(this,e)[1]},SmallInteger.prototype.remainder=SmallInteger.prototype.mod=BigInteger.prototype.remainder=BigInteger.prototype.mod,BigInteger.prototype.pow=function(e){var t,r,n,i=parseValue(e),s=this.value,o=i.value;if(0===o)return Integer[1];if(0===s)return Integer[0];if(1===s)return Integer[1];if(-1===s)return i.isEven()?Integer[1]:Integer[-1];if(i.sign)return Integer[0];if(!i.isSmall)throw new Error("The exponent "+i.toString()+" is too large.");if(this.isSmall&&isPrecise(t=Math.pow(s,o)))return new SmallInteger(truncate(t));for(r=this,n=Integer[1];!0&o&&(n=n.times(r),--o),0!==o;)o/=2,r=r.square();return n},SmallInteger.prototype.pow=BigInteger.prototype.pow,BigInteger.prototype.modPow=function(e,t){if(e=parseValue(e),(t=parseValue(t)).isZero())throw new Error("Cannot take modPow with modulus 0");for(var r=Integer[1],n=this.mod(t);e.isPositive();){if(n.isZero())return Integer[0];e.isOdd()&&(r=r.multiply(n).mod(t)),e=e.divide(2),n=n.square().mod(t)}return r},SmallInteger.prototype.modPow=BigInteger.prototype.modPow,BigInteger.prototype.compareAbs=function(e){var t=parseValue(e),r=this.value,n=t.value;return t.isSmall?1:compareAbs(r,n)},SmallInteger.prototype.compareAbs=function(e){var t=parseValue(e),r=Math.abs(this.value),n=t.value;return t.isSmall?r===(n=Math.abs(n))?0:r>n?1:-1:-1},BigInteger.prototype.compare=function(e){if(e===1/0)return-1;if(e===-1/0)return 1;var t=parseValue(e),r=this.value,n=t.value;return this.sign!==t.sign?t.sign?1:-1:t.isSmall?this.sign?-1:1:compareAbs(r,n)*(this.sign?-1:1)},BigInteger.prototype.compareTo=BigInteger.prototype.compare,SmallInteger.prototype.compare=function(e){if(e===1/0)return-1;if(e===-1/0)return 1;var t=parseValue(e),r=this.value,n=t.value;return t.isSmall?r==n?0:r>n?1:-1:r<0!==t.sign?r<0?-1:1:r<0?1:-1},SmallInteger.prototype.compareTo=SmallInteger.prototype.compare,BigInteger.prototype.equals=function(e){return 0===this.compare(e)},SmallInteger.prototype.eq=SmallInteger.prototype.equals=BigInteger.prototype.eq=BigInteger.prototype.equals,BigInteger.prototype.notEquals=function(e){return 0!==this.compare(e)},SmallInteger.prototype.neq=SmallInteger.prototype.notEquals=BigInteger.prototype.neq=BigInteger.prototype.notEquals,BigInteger.prototype.greater=function(e){return this.compare(e)>0},SmallInteger.prototype.gt=SmallInteger.prototype.greater=BigInteger.prototype.gt=BigInteger.prototype.greater,BigInteger.prototype.lesser=function(e){return this.compare(e)<0},SmallInteger.prototype.lt=SmallInteger.prototype.lesser=BigInteger.prototype.lt=BigInteger.prototype.lesser,BigInteger.prototype.greaterOrEquals=function(e){return this.compare(e)>=0},SmallInteger.prototype.geq=SmallInteger.prototype.greaterOrEquals=BigInteger.prototype.geq=BigInteger.prototype.greaterOrEquals,BigInteger.prototype.lesserOrEquals=function(e){return this.compare(e)<=0},SmallInteger.prototype.leq=SmallInteger.prototype.lesserOrEquals=BigInteger.prototype.leq=BigInteger.prototype.lesserOrEquals,BigInteger.prototype.isEven=function(){return!(1&this.value[0])},SmallInteger.prototype.isEven=function(){return!(1&this.value)},BigInteger.prototype.isOdd=function(){return!(1&~this.value[0])},SmallInteger.prototype.isOdd=function(){return!(1&~this.value)},BigInteger.prototype.isPositive=function(){return!this.sign},SmallInteger.prototype.isPositive=function(){return this.value>0},BigInteger.prototype.isNegative=function(){return this.sign},SmallInteger.prototype.isNegative=function(){return this.value<0},BigInteger.prototype.isUnit=function(){return!1},SmallInteger.prototype.isUnit=function(){return 1===Math.abs(this.value)},BigInteger.prototype.isZero=function(){return!1},SmallInteger.prototype.isZero=function(){return 0===this.value},BigInteger.prototype.isDivisibleBy=function(e){var t=parseValue(e),r=t.value;return 0!==r&&(1===r||(2===r?this.isEven():this.mod(t).equals(Integer[0])))},SmallInteger.prototype.isDivisibleBy=BigInteger.prototype.isDivisibleBy,BigInteger.prototype.isPrime=function(t){var r=isBasicPrime(this);if(r!==e)return r;var n=this.abs(),s=n.bitLength();if(s<=64)return millerRabinTest(n,[2,325,9375,28178,450775,9780504,1795265022]);for(var o=Math.log(2)*s,a=Math.ceil(!0===t?2*Math.pow(o,2):o),u=[],c=0;c<a;c++)u.push(i(c+2));return millerRabinTest(n,u)},SmallInteger.prototype.isPrime=BigInteger.prototype.isPrime,BigInteger.prototype.isProbablePrime=function(t){var r=isBasicPrime(this);if(r!==e)return r;for(var n=this.abs(),s=t===e?5:t,o=[],a=0;a<s;a++)o.push(i.randBetween(2,n.minus(2)));return millerRabinTest(n,o)},SmallInteger.prototype.isProbablePrime=BigInteger.prototype.isProbablePrime,BigInteger.prototype.modInv=function(e){for(var t,r,n,s=i.zero,o=i.one,a=parseValue(e),u=this.abs();!u.equals(i.zero);)t=a.divide(u),r=s,n=a,s=o,a=u,o=r.subtract(t.multiply(o)),u=n.subtract(t.multiply(u));if(!a.equals(1))throw new Error(this.toString()+" and "+e.toString()+" are not co-prime");return-1===s.compare(0)&&(s=s.add(e)),this.isNegative()?s.negate():s},SmallInteger.prototype.modInv=BigInteger.prototype.modInv,BigInteger.prototype.next=function(){var e=this.value;return this.sign?subtractSmall(e,1,this.sign):new BigInteger(addSmall(e,1),this.sign)},SmallInteger.prototype.next=function(){var e=this.value;return e+1<n?new SmallInteger(e+1):new BigInteger(s,!1)},BigInteger.prototype.prev=function(){var e=this.value;return this.sign?new BigInteger(addSmall(e,1),!0):subtractSmall(e,1,this.sign)},SmallInteger.prototype.prev=function(){var e=this.value;return e-1>-n?new SmallInteger(e-1):new BigInteger(s,!0)};for(var a=[1];2*a[a.length-1]<=t;)a.push(2*a[a.length-1]);var u=a.length,c=a[u-1];function shift_isSmall(e){return("number"==typeof e||"string"==typeof e)&&+Math.abs(e)<=t||e instanceof BigInteger&&e.value.length<=1}function bitwise(e,t,r){t=parseValue(t);for(var n=e.isNegative(),s=t.isNegative(),o=n?e.not():e,a=s?t.not():t,u=0,p=0,h=null,l=null,f=[];!o.isZero()||!a.isZero();)u=(h=divModAny(o,c))[1].toJSNumber(),n&&(u=c-1-u),p=(l=divModAny(a,c))[1].toJSNumber(),s&&(p=c-1-p),o=h[0],a=l[0],f.push(r(u,p));for(var d=0!==r(n?1:0,s?1:0)?i(-1):i(0),g=f.length-1;g>=0;g-=1)d=d.multiply(c).add(i(f[g]));return d}BigInteger.prototype.shiftLeft=function(e){if(!shift_isSmall(e))throw new Error(String(e)+" is too large for shifting.");if((e=+e)<0)return this.shiftRight(-e);var t=this;if(t.isZero())return t;for(;e>=u;)t=t.multiply(c),e-=u-1;return t.multiply(a[e])},SmallInteger.prototype.shiftLeft=BigInteger.prototype.shiftLeft,BigInteger.prototype.shiftRight=function(e){var t;if(!shift_isSmall(e))throw new Error(String(e)+" is too large for shifting.");if((e=+e)<0)return this.shiftLeft(-e);for(var r=this;e>=u;){if(r.isZero()||r.isNegative()&&r.isUnit())return r;r=(t=divModAny(r,c))[1].isNegative()?t[0].prev():t[0],e-=u-1}return(t=divModAny(r,a[e]))[1].isNegative()?t[0].prev():t[0]},SmallInteger.prototype.shiftRight=BigInteger.prototype.shiftRight,BigInteger.prototype.not=function(){return this.negate().prev()},SmallInteger.prototype.not=BigInteger.prototype.not,BigInteger.prototype.and=function(e){return bitwise(this,e,(function(e,t){return e&t}))},SmallInteger.prototype.and=BigInteger.prototype.and,BigInteger.prototype.or=function(e){return bitwise(this,e,(function(e,t){return e|t}))},SmallInteger.prototype.or=BigInteger.prototype.or,BigInteger.prototype.xor=function(e){return bitwise(this,e,(function(e,t){return e^t}))},SmallInteger.prototype.xor=BigInteger.prototype.xor;var p=1<<30,h=(t&-t)*(t&-t)|p;function roughLOB(e){var r=e.value,n="number"==typeof r?r|p:r[0]+r[1]*t|h;return n&-n}function integerLogarithm(e,t){if(t.compareTo(e)<=0){var r=integerLogarithm(e,t.square(t)),n=r.p,s=r.e,o=n.multiply(t);return o.compareTo(e)<=0?{p:o,e:2*s+1}:{p:n,e:2*s}}return{p:i(1),e:0}}function max(e,t){return e=parseValue(e),t=parseValue(t),e.greater(t)?e:t}function min(e,t){return e=parseValue(e),t=parseValue(t),e.lesser(t)?e:t}function gcd(e,t){if(e=parseValue(e).abs(),t=parseValue(t).abs(),e.equals(t))return e;if(e.isZero())return t;if(t.isZero())return e;for(var r,n,i=Integer[1];e.isEven()&&t.isEven();)r=Math.min(roughLOB(e),roughLOB(t)),e=e.divide(r),t=t.divide(r),i=i.multiply(r);for(;e.isEven();)e=e.divide(roughLOB(e));do{for(;t.isEven();)t=t.divide(roughLOB(t));e.greater(t)&&(n=t,t=e,e=n),t=t.subtract(e)}while(!t.isZero());return i.isUnit()?e:e.multiply(i)}BigInteger.prototype.bitLength=function(){var e=this;return e.compareTo(i(0))<0&&(e=e.negate().subtract(i(1))),0===e.compareTo(i(0))?i(0):i(integerLogarithm(e,i(2)).e).add(i(1))},SmallInteger.prototype.bitLength=BigInteger.prototype.bitLength;var parseBase=function(e,t){for(var r=e.length,n=Math.abs(t),i=0;i<r;i++){if("-"!==(c=e[i].toLowerCase())&&/[a-z0-9]/.test(c)){if(/[0-9]/.test(c)&&+c>=n){if("1"===c&&1===n)continue;throw new Error(c+" is not a valid digit in base "+t+".")}if(c.charCodeAt(0)-87>=n)throw new Error(c+" is not a valid digit in base "+t+".")}}if(2<=t&&t<=36&&r<=o/Math.log(t)){var s=parseInt(e,t);if(isNaN(s))throw new Error(c+" is not a valid digit in base "+t+".");return new SmallInteger(parseInt(e,t))}t=parseValue(t);var a=[],u="-"===e[0];for(i=u?1:0;i<e.length;i++){var c,p=(c=e[i].toLowerCase()).charCodeAt(0);if(48<=p&&p<=57)a.push(parseValue(c));else if(97<=p&&p<=122)a.push(parseValue(c.charCodeAt(0)-87));else{if("<"!==c)throw new Error(c+" is not a valid character");var h=i;do{i++}while(">"!==e[i]);a.push(parseValue(e.slice(h+1,i)))}}return parseBaseFromArray(a,t,u)};function parseBaseFromArray(e,t,r){var n,i=Integer[0],s=Integer[1];for(n=e.length-1;n>=0;n--)i=i.add(e[n].times(s)),s=s.times(t);return r?i.negate():i}function stringify(e){return e<=35?"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e):"<"+e+">"}function toBase(e,t){if((t=i(t)).isZero()){if(e.isZero())return{value:[0],isNegative:!1};throw new Error("Cannot convert nonzero numbers to base 0.")}if(t.equals(-1)){if(e.isZero())return{value:[0],isNegative:!1};if(e.isNegative())return{value:[].concat.apply([],Array.apply(null,Array(-e)).map(Array.prototype.valueOf,[1,0])),isNegative:!1};var r=Array.apply(null,Array(+e-1)).map(Array.prototype.valueOf,[0,1]);return r.unshift([1]),{value:[].concat.apply([],r),isNegative:!1}}var n=!1;if(e.isNegative()&&t.isPositive()&&(n=!0,e=e.abs()),t.equals(1))return e.isZero()?{value:[0],isNegative:!1}:{value:Array.apply(null,Array(+e)).map(Number.prototype.valueOf,1),isNegative:n};for(var s,o=[],a=e;a.isNegative()||a.compareAbs(t)>=0;){s=a.divmod(t),a=s.quotient;var u=s.remainder;u.isNegative()&&(u=t.minus(u).abs(),a=a.next()),o.push(u.toJSNumber())}return o.push(a.toJSNumber()),{value:o.reverse(),isNegative:n}}function toBaseString(e,t){var r=toBase(e,t);return(r.isNegative?"-":"")+r.value.map(stringify).join("")}function parseStringValue(e){if(isPrecise(+e)){var t=+e;if(t===truncate(t))return new SmallInteger(t);throw new Error("Invalid integer: "+e)}var n="-"===e[0];n&&(e=e.slice(1));var i=e.split(/e/i);if(i.length>2)throw new Error("Invalid integer: "+i.join("e"));if(2===i.length){var s=i[1];if("+"===s[0]&&(s=s.slice(1)),(s=+s)!==truncate(s)||!isPrecise(s))throw new Error("Invalid integer: "+s+" is not a valid exponent.");var o=i[0],a=o.indexOf(".");if(a>=0&&(s-=o.length-a-1,o=o.slice(0,a)+o.slice(a+1)),s<0)throw new Error("Cannot include negative exponent part for integers");e=o+=new Array(s+1).join("0")}if(!/^([0-9][0-9]*)$/.test(e))throw new Error("Invalid integer: "+e);for(var u=[],c=e.length,p=r,h=c-p;c>0;)u.push(+e.slice(h,c)),(h-=p)<0&&(h=0),c-=p;return trim(u),new BigInteger(u,n)}function parseValue(e){return"number"==typeof e?function parseNumberValue(e){if(isPrecise(e)){if(e!==truncate(e))throw new Error(e+" is not an integer.");return new SmallInteger(e)}return parseStringValue(e.toString())}(e):"string"==typeof e?parseStringValue(e):e}BigInteger.prototype.toArray=function(e){return toBase(this,e)},SmallInteger.prototype.toArray=function(e){return toBase(this,e)},BigInteger.prototype.toString=function(t){if(t===e&&(t=10),10!==t)return toBaseString(this,t);for(var r,n=this.value,i=n.length,s=String(n[--i]);--i>=0;)r=String(n[i]),s+="0000000".slice(r.length)+r;return(this.sign?"-":"")+s},SmallInteger.prototype.toString=function(t){return t===e&&(t=10),10!=t?toBaseString(this,t):String(this.value)},BigInteger.prototype.toJSON=SmallInteger.prototype.toJSON=function(){return this.toString()},BigInteger.prototype.valueOf=function(){return parseInt(this.toString(),10)},BigInteger.prototype.toJSNumber=BigInteger.prototype.valueOf,SmallInteger.prototype.valueOf=function(){return this.value},SmallInteger.prototype.toJSNumber=SmallInteger.prototype.valueOf;for(var l=0;l<1e3;l++)Integer[l]=new SmallInteger(l),l>0&&(Integer[-l]=new SmallInteger(-l));return Integer.one=Integer[1],Integer.zero=Integer[0],Integer.minusOne=Integer[-1],Integer.max=max,Integer.min=min,Integer.gcd=gcd,Integer.lcm=function lcm(e,t){return e=parseValue(e).abs(),t=parseValue(t).abs(),e.divide(gcd(e,t)).multiply(t)},Integer.isInstance=function(e){return e instanceof BigInteger||e instanceof SmallInteger},Integer.randBetween=function randBetween(e,r){var n=min(e=parseValue(e),r=parseValue(r)),i=max(e,r).subtract(n).add(1);if(i.isSmall)return n.add(Math.floor(Math.random()*i));for(var s=[],o=!0,a=i.value.length-1;a>=0;a--){var u=o?i.value[a]:t,c=truncate(Math.random()*u);s.unshift(c),c<u&&(o=!1)}return s=arrayToSmall(s),n.add("number"==typeof s?new SmallInteger(s):new BigInteger(s,!1))},Integer.fromArray=function(e,t,r){return parseBaseFromArray(e.map(parseValue),parseValue(t||10),r)},Integer}();e.hasOwnProperty("exports")&&(e.exports=i),void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)},296734:(e,t,r)=>{"use strict";var n=r(282825).validate,i={q:0,p:1,z:2,r:3,y:4,9:5,x:6,8:7,g:8,f:9,2:10,t:11,v:12,d:13,w:14,0:15,s:16,3:17,j:18,n:19,5:20,4:21,k:22,h:23,c:24,e:25,6:26,m:27,u:28,a:29,7:30,l:31};e.exports={encode:function encode(e){n(e instanceof Uint8Array,"Invalid data: "+e+".");for(var t="",r=0;r<e.length;++r){var i=e[r];n(0<=i&&i<32,"Invalid value: "+i+"."),t+="qpzry9x8gf2tvdw0s3jn54khce6mua7l"[i]}return t},decode:function decode(e){n("string"==typeof e,"Invalid base32-encoded string: "+e+".");for(var t=new Uint8Array(e.length),r=0;r<e.length;++r){var s=e[r];n(s in i,"Invalid value: "+s+"."),t[r]=i[s]}return t}}},850630:(e,t,r)=>{"use strict";var n=r(296734),i=r(664864),s=r(695179),o=r(282825),a=o.validate;var u=o.ValidationError,c=["bitcoincash","bchtest","bchreg"];function prefixToUint5Array(e){for(var t=new Uint8Array(e.length),r=0;r<e.length;++r)t[r]=31&e[r].charCodeAt(0);return t}function concat(e,t){var r=new Uint8Array(e.length+t.length);return r.set(e),r.set(t,e.length),r}function polymod(e){for(var t=[656907472481,522768456162,0xf33e5fb3c4,748107326120,130178868336],r=i(1),n=0;n<e.length;++n){var s=e[n],o=r.shiftRight(35);r=r.and(34359738367).shiftLeft(5).xor(s);for(var a=0;a<t.length;++a)o.shiftRight(a).and(1).equals(1)&&(r=r.xor(t[a]))}return r.xor(1)}function hasSingleCase(e){return e===e.toLowerCase()||e===e.toUpperCase()}e.exports={encode:function encode(e,t,r){a("string"==typeof e&&function isValidPrefix(e){return hasSingleCase(e)&&-1!==c.indexOf(e.toLowerCase())}(e),"Invalid prefix: "+e+"."),a("string"==typeof t,"Invalid type: "+t+"."),a(r instanceof Uint8Array,"Invalid hash: "+r+".");var i=concat(prefixToUint5Array(e),new Uint8Array(1)),o=function getTypeBits(e){switch(e){case"P2PKH":return 0;case"P2SH":return 8;default:throw new u("Invalid type: "+e+".")}}(t)+function getHashSizeBits(e){switch(8*e.length){case 160:return 0;case 192:return 1;case 224:return 2;case 256:return 3;case 320:return 4;case 384:return 5;case 448:return 6;case 512:return 7;default:throw new u("Invalid hash size: "+e.length+".")}}(r),p=function toUint5Array(e){return s(e,8,5)}(concat(new Uint8Array([o]),r)),h=concat(concat(i,p),new Uint8Array(8)),l=concat(p,function checksumToUint5Array(e){for(var t=new Uint8Array(8),r=0;r<8;++r)t[7-r]=e.and(31).toJSNumber(),e=e.shiftRight(5);return t}(polymod(h)));return e+":"+n.encode(l)},decode:function decode(e){a("string"==typeof e&&hasSingleCase(e),"Invalid address: "+e+".");var t=e.toLowerCase().split(":");a(2===t.length,"Missing prefix: "+e+".");var r=t[0],i=n.decode(t[1]);a(function validChecksum(e,t){var r=concat(prefixToUint5Array(e),new Uint8Array(1)),n=concat(r,t);return polymod(n).equals(0)}(r,i),"Invalid checksum: "+e+".");var o=function fromUint5Array(e){return s(e,5,8,!0)}(i.subarray(0,-8)),c=o[0],p=o.subarray(1);a(function getHashSize(e){switch(7&e){case 0:return 160;case 1:return 192;case 2:return 224;case 3:return 256;case 4:return 320;case 5:return 384;case 6:return 448;case 7:return 512}}(c)===8*p.length,"Invalid hash size: "+e+".");var h=function getType(e){switch(120&e){case 0:return"P2PKH";case 8:return"P2SH";default:throw new u("Invalid address type in version byte: "+e+".")}}(c);return{prefix:r,type:h,hash:p}},ValidationError:u}},695179:(e,t,r)=>{"use strict";var n=r(282825).validate;e.exports=function(e,t,r,i){for(var s=i?Math.floor(e.length*t/r):Math.ceil(e.length*t/r),o=(1<<r)-1,a=new Uint8Array(s),u=0,c=0,p=0,h=0;h<e.length;++h){var l=e[h];for(n(0<=l&&!(l>>t),"Invalid value: "+l+"."),c=c<<t|l,p+=t;p>=r;)p-=r,a[u]=c>>p&o,++u}return i?n(p<t&&!(c<<r-p&o),"Input cannot be converted to "+r+" bits without padding, but strict mode was used."):p>0&&(a[u]=c<<r-p&o,++u),a}},282825:e=>{"use strict";function ValidationError(e){var t=new Error;this.name=t.name="ValidationError",this.message=t.message=e,this.stack=t.stack}ValidationError.prototype=Object.create(Error.prototype),e.exports={ValidationError,validate:function validate(e,t){if(!e)throw new ValidationError(t)}}},28158:(e,t,r)=>{var n=r(901048).Buffer;e.exports=function fastRoot(e,t){if(!Array.isArray(e))throw TypeError("Expected values Array");if("function"!=typeof t)throw TypeError("Expected digest Function");for(var r=e.length,i=e.concat();r>1;){for(var s=0,o=0;o<r;o+=2,++s){var a=i[o],u=o+1===r?a:i[o+1],c=n.concat([a,u]);i[s]=t(c)}r=s}return i[0]}},216001:(e,t,r)=>{var n=r(253610);function encodingLength(e){return e<n.OP_PUSHDATA1?1:e<=255?2:e<=65535?3:5}e.exports={encodingLength,encode:function encode(e,t,r){var i=encodingLength(t);return 1===i?e.writeUInt8(t,r):2===i?(e.writeUInt8(n.OP_PUSHDATA1,r),e.writeUInt8(t,r+1)):3===i?(e.writeUInt8(n.OP_PUSHDATA2,r),e.writeUInt16LE(t,r+1)):(e.writeUInt8(n.OP_PUSHDATA4,r),e.writeUInt32LE(t,r+1)),i},decode:function decode(e,t){var r,i,s=e.readUInt8(t);if(s<n.OP_PUSHDATA1)r=s,i=1;else if(s===n.OP_PUSHDATA1){if(t+2>e.length)return null;r=e.readUInt8(t+1),i=2}else if(s===n.OP_PUSHDATA2){if(t+3>e.length)return null;r=e.readUInt16LE(t+1),i=3}else{if(t+5>e.length)return null;if(s!==n.OP_PUSHDATA4)throw new Error("Unexpected opcode");r=e.readUInt32LE(t+1),i=5}return{opcode:s,number:r,size:i}}}},253610:e=>{"use strict";e.exports=JSON.parse('{"OP_FALSE":0,"OP_0":0,"OP_PUSHDATA1":76,"OP_PUSHDATA2":77,"OP_PUSHDATA4":78,"OP_1NEGATE":79,"OP_RESERVED":80,"OP_TRUE":81,"OP_1":81,"OP_2":82,"OP_3":83,"OP_4":84,"OP_5":85,"OP_6":86,"OP_7":87,"OP_8":88,"OP_9":89,"OP_10":90,"OP_11":91,"OP_12":92,"OP_13":93,"OP_14":94,"OP_15":95,"OP_16":96,"OP_NOP":97,"OP_VER":98,"OP_IF":99,"OP_NOTIF":100,"OP_VERIF":101,"OP_VERNOTIF":102,"OP_ELSE":103,"OP_ENDIF":104,"OP_VERIFY":105,"OP_RETURN":106,"OP_TOALTSTACK":107,"OP_FROMALTSTACK":108,"OP_2DROP":109,"OP_2DUP":110,"OP_3DUP":111,"OP_2OVER":112,"OP_2ROT":113,"OP_2SWAP":114,"OP_IFDUP":115,"OP_DEPTH":116,"OP_DROP":117,"OP_DUP":118,"OP_NIP":119,"OP_OVER":120,"OP_PICK":121,"OP_ROLL":122,"OP_ROT":123,"OP_SWAP":124,"OP_TUCK":125,"OP_CAT":126,"OP_SUBSTR":127,"OP_LEFT":128,"OP_RIGHT":129,"OP_SIZE":130,"OP_INVERT":131,"OP_AND":132,"OP_OR":133,"OP_XOR":134,"OP_EQUAL":135,"OP_EQUALVERIFY":136,"OP_RESERVED1":137,"OP_RESERVED2":138,"OP_1ADD":139,"OP_1SUB":140,"OP_2MUL":141,"OP_2DIV":142,"OP_NEGATE":143,"OP_ABS":144,"OP_NOT":145,"OP_0NOTEQUAL":146,"OP_ADD":147,"OP_SUB":148,"OP_MUL":149,"OP_DIV":150,"OP_MOD":151,"OP_LSHIFT":152,"OP_RSHIFT":153,"OP_BOOLAND":154,"OP_BOOLOR":155,"OP_NUMEQUAL":156,"OP_NUMEQUALVERIFY":157,"OP_NUMNOTEQUAL":158,"OP_LESSTHAN":159,"OP_GREATERTHAN":160,"OP_LESSTHANOREQUAL":161,"OP_GREATERTHANOREQUAL":162,"OP_MIN":163,"OP_MAX":164,"OP_WITHIN":165,"OP_RIPEMD160":166,"OP_SHA1":167,"OP_SHA256":168,"OP_HASH160":169,"OP_HASH256":170,"OP_CODESEPARATOR":171,"OP_CHECKSIG":172,"OP_CHECKSIGVERIFY":173,"OP_CHECKMULTISIG":174,"OP_CHECKMULTISIGVERIFY":175,"OP_NOP1":176,"OP_NOP2":177,"OP_CHECKLOCKTIMEVERIFY":177,"OP_NOP3":178,"OP_CHECKSEQUENCEVERIFY":178,"OP_NOP4":179,"OP_NOP5":180,"OP_NOP6":181,"OP_NOP7":182,"OP_NOP8":183,"OP_NOP9":184,"OP_NOP10":185,"OP_PUBKEYHASH":253,"OP_PUBKEY":254,"OP_INVALIDOPCODE":255}')}}]);