"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[78951],{326745:(e,n,t)=>{t.d(n,{u:()=>useAppRoute});var c=t(654266);function useAppRoute(){return(0,c.lq)()}},478951:(e,n,t)=>{t.r(n),t.d(n,{UrlAccountLanding:()=>UrlAccountLanding,UrlAccountPageContainer:()=>UrlAccountPageContainer});var c=t(586330),r=(t(446108),t(514041)),u=t(908867),o=t(490343),a=t(610421),s=t(325809),i=t(498356),l=t(326745),d=t(989840),A=t(162616),f=t(181447),h=t(961974),v=t(334439),m=(t(663522),t(491180)),g=t(901976),k=t(584186),w=t(714191),U=t(506851),p=t(155680),x=t(394764),j=t(153763),I=t(826339);function UrlAccountAutoReplaceHistory({num:e}){var n=(0,j.E)(),t=(0,r.useRef)(n);t.current=n;var{activeAccount:c}=(0,A.LH)({num:e}),{selectedAccount:u}=(0,A.wz)({num:e}),{sceneName:o}=(0,A.A6)(),a=(0,r.useRef)(c?.account);a.current=c?.account;var s=c?.account?.address,i=c?.network?.id,l=`${u?.walletId||""}-${u?.indexedAccountId||""}-${u?.othersWalletAccountId||""}`,d=(0,x.Z)(l),f=(0,r.useRef)(!0);d!==l&&(f.current=!1);var h=(0,r.useRef)(),v=(0,r.useCallback)((function({delay:e}){o===w.Zs.homeUrlAccount&&t.current&&(h.current=setTimeout((function(){(0,I.n2)({account:a.current,networkId:i,address:s})}),e))}),[s,i,o]);return(0,r.useEffect)((function(){v({delay:0}),f.current=!0}),[v]),(0,r.useEffect)((function(){var e;return n&&(f.current?v({delay:100}):e=setTimeout((function(){f.current=!0}),1e3)),function(){clearTimeout(e)}}),[n,v]),null}var y=t(831085),C=w.Zs.homeUrlAccount;function UrlAccountPage(){return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(p.U,{sceneName:C},C),(0,y.jsx)(UrlAccountAutoReplaceHistory,{num:0})]})}function UrlAccountAutoCreate({redirectMode:e}){var n=(0,u.A)(),t=(0,l.u)(),s=(0,i.A)(),d=t.params,g=(0,A.z$)(),[w,p]=(0,r.useState)(),x=(0,r.useRef)(d);x.current=d,(0,r.useRef)(t.path).current=t.path;var{selectedAccount:j}=(0,A.wz)({num:0}),C=(0,r.useMemo)((function(){return!(!j.indexedAccountId||j?.othersWalletAccountId)||!(!j?.othersWalletAccountId||m.A.isUrlAccountFn({accountId:j?.othersWalletAccountId}))}),[j.indexedAccountId,j?.othersWalletAccountId]);(0,r.useEffect)((function(){setTimeout((0,c.A)((function*(){var n=x.current?.networkId,t=x.current?.networkId,r=x.current?.address,fixNetworkParams=function(e){e&&(n=e.id,t=e.code)};if(!r&&n){r=n,n=void 0,t=void 0;var u=yield a.A.serviceUniversalSearch.universalSearch({input:r,searchTypes:[U.j.Address]}),o=u?.[U.j.Address]?.items?.[0]?.payload;if(o){var{network:i}=o;fixNetworkParams(i)}}var l=!1,d=yield a.A.serviceNetwork.getNetworkSafe({code:t});(d||(d=yield a.A.serviceNetwork.getNetworkSafe({networkId:n})))&&fixNetworkParams(d),n&&r||(l=!0);var A,v=(0,I.go)(),m=yield a.A.serviceAccount.getUrlDBAccountSafe();if(n&&r&&(!m||r?.toLowerCase()!==v?.address?.toLowerCase()||n!==v?.networkId||C))try{var w=yield a.A.serviceAccount.addWatchingAccount({input:r,networkId:n,deriveType:void 0,isUrlAccount:!0}),j=(A=(0,c.A)((function*(){return g.current.updateSelectedAccountForSingletonAccount({num:0,networkId:n,walletId:f.Hk,othersWalletAccountId:w?.accounts?.[0]?.id})})),function updateSelectedAccount(){return A.apply(this,arguments)});yield j(),setTimeout((function(){j()}),600)}catch(e){h.A.toastIfErrorDisable(e),l=!0}l?p("invalid"):(p("ok"),e&&(I.Jh.replaceHomePage(s),r&&(yield k.A.wait(1),yield I.Jh.pushUrlAccountPage(s,{address:r,networkId:t}))))})),0)}),[n,g,s,e,C]);var b=(0,r.useCallback)((function(){I.Jh.replaceHomePage(s)}),[s]),S=(0,r.useCallback)((function(){return(0,y.jsx)(o.NavBackButton,{onPress:b})}),[b]);return"invalid"===w?(0,y.jsxs)(o.Page,{children:[(0,y.jsx)(o.Page.Header,{headerLeft:S}),(0,y.jsxs)(o.Stack,{flex:1,ai:"center",jc:"center",children:[(0,y.jsx)(o.SizableText,{size:"$headingXl",children:n.formatMessage({id:v.ETranslations.global_404_message})}),null]})]}):"ok"!==w||e?(0,y.jsx)(o.Stack,{flex:1,alignContent:"center",justifyContent:"center",children:(0,y.jsx)(o.Spinner,{size:"small"})}):(0,y.jsx)(UrlAccountPage,{})}function UrlAccountPageContainer(){return(0,g.e)({name:"URLAccountMount:  UrlAccountPageContainer"}),(0,y.jsx)(d.wu,{children:(0,y.jsx)(s.b8,{config:{sceneName:C,sceneUrl:""},enabledNum:[0],children:(0,y.jsx)(UrlAccountAutoCreate,{})})})}function UrlAccountLanding(){return(0,g.e)({name:"URLAccountMount:  UrlAccountLanding"}),(0,y.jsx)(d.wu,{children:(0,y.jsx)(s.b8,{config:{sceneName:C,sceneUrl:""},enabledNum:[0],children:(0,y.jsx)(UrlAccountAutoCreate,{redirectMode:!0})})})}}}]);