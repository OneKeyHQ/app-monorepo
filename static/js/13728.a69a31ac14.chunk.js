"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[13728],{13728:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ExportPrivateKeys});var o=n(324586),r=n(586330),a=n(514041),i=n(908867),s=n(578104),c=n(490343),l=n(610421),d=n(325809),u=n(575995),y=n(498356),p=n(911998),f=n(162616),b=n(625931),h=n(319357),k=n(16853),w=n(334439),x=n(491180),m=n(482407),g=n(714191),v=n(831085);function CopyPrivateKeysDialog({defaultValue:e,rawKeyContent:t,showCheckBox:n}){var o=(0,i.A)(),[s,l]=(0,a.useState)(e),d=(0,a.useCallback)((function(e){l(!!e)}),[]),u=(0,c.useClipboard)();return(0,v.jsxs)(v.Fragment,{children:[n?(0,v.jsx)(c.Stack,{pr:"$1",children:(0,v.jsx)(c.Checkbox,{testID:"private-key-copy-check",value:s,onChange:d,label:o.formatMessage({id:w.ETranslations.global_private_key_copy_check})})}):null,(0,v.jsx)(c.Dialog.Footer,{onConfirmText:o.formatMessage({id:w.ETranslations.global_copy}),confirmButtonProps:{testID:"private-key-copy-confirm",disabled:n&&!s},onConfirm:(0,r.A)((function*(){u.copyText(t)}))})]})}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,o.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ExportPrivateKeysPage({indexedAccount:e,account:t,accountName:n,title:o,exportType:g}){var C,j,{activeAccount:T}=(0,f.LH)({num:0}),A=(0,y.A)(),K=(0,i.A)(),_=(0,c.useMedia)(),[E,P]=(0,a.useState)(!0),O=(0,c.useClipboard)(),I=(0,a.useMemo)((function(){return Boolean(t&&!e&&x.A.isImportedAccount({accountId:t?.id}))}),[t,e]),M=(0,a.useMemo)((function(){return Boolean(t&&!e&&x.A.isWatchingAccount({accountId:t?.id}))}),[t,e]),S=!!e,{result:D=[]}=(0,p.yk)((0,r.A)((function*(){return I&&t?.createAtNetwork||M&&t?.createAtNetwork?[t?.createAtNetwork]:(yield l.A.serviceNetwork.getSupportExportAccountKeyNetworks({exportType:g})).map((function(e){return e.network.id}))})),[t?.createAtNetwork,g,I,M]),N=(0,a.useMemo)((function(){return I||M?t?.createAtNetwork||(0,b.V)().btc:T?.network?.id||(0,b.V)().btc}),[t?.createAtNetwork,T?.network?.id,I,M]),V=(0,c.useForm)({values:{networkId:N,deriveType:null!=(C=T?.deriveType)?C:void 0,rawKeyContent:"",hiddenKeyContent:""},mode:"onChange",reValidateMode:"onBlur"}),$=V.watch("networkId"),B=V.watch("deriveType"),F=(0,a.useCallback)((function(e){e?V.setValue(e,""):(V.setValue("rawKeyContent",""),V.clearErrors("rawKeyContent"),V.setValue("hiddenKeyContent",""),P(!0))}),[V]),z=(0,a.useCallback)((j=(0,r.A)((function*({accountId:e,indexedAccountId:t,networkId:o,deriveType:r,showText:a=!1}){if(F(a?void 0:"hiddenKeyContent"),(t||e)&&o&&(!S||r))try{var i=yield l.A.serviceAccount.exportAccountKeysByType({indexedAccountId:t,accountId:e,networkId:o,deriveType:r||void 0,exportType:g,accountName:n});i&&V.setValue(a?"rawKeyContent":"hiddenKeyContent",i)}catch(e){var s;throw[h.d.PasswordPromptDialogCancel].includes(e?.className)||V.setError("rawKeyContent",null!=(s=k.Ay.toPlainErrorObject(e))?s:{message:"error"}),e}})),function(e){return j.apply(this,arguments)}),[n,g,V,S,F]),q=(0,s.YQ)(z,600),H=(0,a.useCallback)((0,r.A)((function*({noDebouncedCall:n,showText:o=!1}={}){var r=n?z:q;yield r({accountId:t?.id,indexedAccountId:e?.id,networkId:$||"",deriveType:B,showText:o})})),[t?.id,B,z,q,e?.id,$]),W=(0,a.useMemo)((function(){return[{testID:"account-key-show-btn",iconName:E?"EyeOutline":"EyeOffOutline",onPress:(t=(0,r.A)((function*(){V.getValues("rawKeyContent")?F():yield H({noDebouncedCall:!0,showText:!0}),P(!E)})),function onPress(){return t.apply(this,arguments)})},{iconName:"Copy3Outline",testID:"account-key-copy-btn",onPress:(e=(0,r.A)((function*(){var e=V.getValues("hiddenKeyContent")||"";e||(yield H({noDebouncedCall:!0})),e=V.getValues("hiddenKeyContent")||"","privateKey"===g?function showCopyPrivateKeysDialog({title:e,description:t,defaultChecked:n,rawKeyContent:o,showCheckBox:r}){return c.Dialog.show({icon:"ErrorOutline",tone:"destructive",title:e,description:t,renderContent:(0,v.jsx)(CopyPrivateKeysDialog,{rawKeyContent:o,defaultValue:n,showCheckBox:r})})}({title:K.formatMessage({id:w.ETranslations.global_private_key_copy}),description:K.formatMessage({id:w.ETranslations.global_private_key_copy_information}),showCheckBox:!0,defaultChecked:!1,rawKeyContent:e}):O.copyText(e)})),function onPress(){return e.apply(this,arguments)})}];var e,t}),[O,g,V,K,H,F,E]);(0,a.useEffect)((function(){$&&V.setValue("deriveType","")}),[V,$]),(0,a.useEffect)((function(){(0,m.Gb)($,B),F()}),[B,$,F]);var Y=(0,a.useMemo)((function(){var e="key";return"publicKey"===g&&(e=K.formatMessage({id:w.ETranslations.global_public_key})),"privateKey"===g&&(e=K.formatMessage({id:w.ETranslations.global_private_key})),e}),[g,K]);return(0,v.jsxs)(c.Page,{scrollEnabled:!0,safeAreaEnabled:!0,children:[(0,v.jsx)(c.Page.Header,{title:o}),(0,v.jsxs)(c.Page.Body,{p:"$4",children:[(0,v.jsxs)(c.Form,{form:V,children:[(0,v.jsx)(c.Form.Field,{label:K.formatMessage({id:w.ETranslations.global_network}),name:"networkId",disabled:I,children:(0,v.jsx)(d.YS,{disabled:I,editable:!I,networkIds:D})}),I||M?null:(0,v.jsx)(u.FB,{fieldName:"deriveType",networkId:$}),(0,v.jsx)(c.Form.Field,{label:Y,name:"rawKeyContent",children:(0,v.jsx)(c.TextAreaInput,{testID:"account-key-input",size:_.gtMd?"medium":"large",editable:!1,placeholder:"••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••",addOns:W,displayAsMaskWhenEmptyValue:!0})})]}),"privateKey"===g?(0,v.jsxs)(c.Stack,{py:"$4",children:[(0,v.jsx)(c.Stack,{h:"$4"}),(0,v.jsx)(c.SizableText,{color:"$textSubdued",size:"$headingSm",children:K.formatMessage({id:w.ETranslations.faq_private_key})}),(0,v.jsx)(c.SizableText,{color:"$textSubdued",size:"$bodyMd",children:K.formatMessage({id:w.ETranslations.faq_private_key_desc})}),(0,v.jsx)(c.Stack,{h:"$4"}),(0,v.jsx)(c.SizableText,{color:"$textSubdued",size:"$headingSm",children:K.formatMessage({id:w.ETranslations.faq_private_key_keep})}),(0,v.jsx)(c.SizableText,{color:"$textSubdued",size:"$bodyMd",children:K.formatMessage({id:w.ETranslations.faq_private_key_keep_desc})})]}):null,null]}),(0,v.jsx)(c.Page.Footer,{onConfirmText:K.formatMessage({id:w.ETranslations.global_done}),confirmButtonProps:{disabled:!1},onConfirm:(0,r.A)((function*(){A.popStack()}))})]})}function ExportPrivateKeys({route:e}){return(0,v.jsx)(d.b8,{enabledNum:[0],config:{sceneName:g.Zs.home,sceneUrl:""},children:(0,v.jsx)(ExportPrivateKeysPage,_objectSpread({},e.params))})}}}]);