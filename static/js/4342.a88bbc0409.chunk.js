"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[4342],{804342:(e,t,n)=>{n.r(t),n.d(t,{default:()=>SettingCurrencyModal});var r=n(586330),s=n(514041),a=n(908867),i=n(490343),o=(n(793239),n(610421)),u=n(791088),c=n(259227),l=n(334439),d=n(831085),f=[],currencyFilterFn=function(e,t){var n=e.toLowerCase();return t.id.toLowerCase().includes(n)||t.name.toLowerCase().includes(n)},CurrencyItem=function({item:e,onPress:t,currency:n}){var r=(0,s.useCallback)((function(){t(e)}),[e,t]);return(0,d.jsx)(u.c,{title:`${e.id.toUpperCase()} - ${e.unit}`,subtitle:e.name,checkMark:n?.id===e.id,onPress:r})},keyExtractor=function(e,t){return`${t}`};function SettingCurrencyModal(){var[e]=(0,c.useSettingsPersistAtom)(),[t,n]=(0,s.useState)(""),u=(0,s.useRef)({id:e.currencyInfo.id,unit:e.currencyInfo.symbol}),[m,p]=(0,s.useState)(u.current),g=(0,a.A)(),[{currencyItems:y}]=(0,c.useCurrencyPersistAtom)(),b=(0,s.useMemo)((function(){if(0===y.length)return[];for(var e={crypto:[],fiat:[],popular:[]},n=y.filter((function(e){return currencyFilterFn(t,e)})),_loop=function(){var t=n[r];t.type.forEach((function(n){e[n]&&e[n].push(t)}))},r=0;r<n.length;r+=1)_loop();return[{title:g.formatMessage({id:l.ETranslations.global_popular}),data:e.popular},{title:g.formatMessage({id:l.ETranslations.global_crypto}),data:e.crypto},{title:g.formatMessage({id:l.ETranslations.settings_fiat}),data:e.fiat}].filter((function(e){return e.data.length>0}))}),[y,t,g]),h=(0,s.useCallback)((function(e){p(e)}),[]),C=(0,s.useCallback)((function({item:e}){return(0,d.jsx)(CurrencyItem,{item:e,currency:m,onPress:h})}),[m,h]),x=(0,s.useCallback)((function({section:e}){return(0,d.jsx)(i.SectionList.SectionHeader,{title:e.title})}),[]),M=(0,s.useCallback)((0,r.A)((function*(){m&&(yield o.A.serviceSetting.setCurrency({id:m.id,symbol:m.unit}),setTimeout((function(){o.A.serviceApp.restartApp()})))})),[m]),S=(0,s.useMemo)((function(){return u.current.id===m?.id}),[m?.id]),k=(0,s.useMemo)((function(){return{onChangeText:function({nativeEvent:e}){var t=e.text.trim();n(t)},placeholder:g.formatMessage({id:l.ETranslations.global_search})}}),[g]);return(0,d.jsxs)(i.Page,{children:[(0,d.jsx)(i.Page.Header,{title:g.formatMessage({id:l.ETranslations.settings_default_currency}),headerSearchBarOptions:k}),(0,d.jsx)(i.Page.Body,{children:(0,d.jsx)(i.SectionList,{estimatedItemSize:60,ListEmptyComponent:(0,d.jsx)(i.Empty,{icon:"SearchOutline",title:g.formatMessage({id:l.ETranslations.global_no_results}),description:g.formatMessage({id:l.ETranslations.global_search_no_results_desc})}),sections:null!=b?b:f,renderItem:C,renderSectionHeader:x,extraData:m,keyExtractor})}),(0,d.jsx)(i.Page.Footer,{onConfirm:M,confirmButtonProps:{disabled:S}})]})}}}]);