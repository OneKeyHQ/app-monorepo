"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[27002],{593827:(e,r,t)=>{t.d(r,{L:()=>WalletAvatar});var a=t(503668),n=t.n(a),o=t(490343),i=t(491180),s=t(258988),d=t(831085);function WalletAvatarBase({size:e,img:r,wallet:t}){var a,n,l=r||t?.avatarInfo?.img;return l?i.A.isHwHiddenWallet({wallet:t})?(0,d.jsx)(o.Icon,{size:"$10",name:"LockSolid",color:"$iconSubdued"}):(0,d.jsxs)(o.Image,{size:e,children:[(0,d.jsx)(o.Image.Source,{source:null!=(a=s.UO[l])?a:s.UO.bear}),(0,d.jsx)(o.Image.Fallback,{delayMs:300,justifyContent:"center",alignItems:"center",children:(0,d.jsx)(o.SizableText,{children:null!=(n=t?.avatarInfo?.emoji)?n:""})})]}):null}function WalletAvatar({size:e="$10",status:r,badge:t,img:a,wallet:i}){return(0,d.jsxs)(o.Stack,{w:e,h:e,justifyContent:"center",alignItems:"center",children:[(0,d.jsx)(WalletAvatarBase,{size:e,img:a,wallet:i}),"connected"===r?(0,d.jsx)(o.Stack,{position:"absolute",bottom:-2,right:-2,bg:"$bgSidebar",p:"$0.5",borderRadius:"$full",zIndex:"$1",children:(0,d.jsx)(o.Stack,{borderRadius:"$full",w:"$2.5",h:"$2.5",bg:"$bgSuccessStrong"})}):null,n()(t)?null:(0,d.jsx)(o.Stack,{position:"absolute",h:"$4",px:"$0.5",justifyContent:"center",bottom:-2,right:-1,bg:"$bgSubdued",borderRadius:"$full",zIndex:"$1",children:(0,d.jsx)(o.SizableText,{size:"$bodySm",textAlign:"center",children:t})})]})}},326745:(e,r,t)=>{t.d(r,{u:()=>useAppRoute});var a=t(654266);function useAppRoute(){return(0,a.lq)()}},973066:(e,r,t)=>{t.d(r,{i:()=>FirmwareChangeLogContentView,z:()=>FirmwareChangeLogView});var a=t(586330),n=t(514041),o=t(908867),i=t(490343),s=t(610421),d=t(259227),l=t(334439),u=t(773831),c=t(225555),g=t(355422),p=t(443791),f=t(831085);function ChangeLogMarkdown({changelog:e}){var[{locale:r}]=(0,d.useSettingsPersistAtom)(),[t,o]=(0,n.useState)(r);return(0,n.useEffect)((function(){(0,a.A)((function*(){"system"===r&&o(yield s.A.serviceSetting.getCurrentLocale())}))()}),[r]),(0,f.jsx)(i.Markdown,{children:e?.["zh-CN"===t?"zh-CN":"en-US"]||"No change log found."})}function ChangeLogSection({title:e,icon:r,isDone:t,updateInfo:a}){var s=(0,o.A)(),[d,u]=(0,n.useState)(t),c=(0,n.useCallback)((function(){u(!d)}),[d]);return(0,f.jsxs)(i.Stack,{children:[(0,f.jsxs)(i.XStack,{gap:"$3",py:"$2",ai:"center",onPress:c,children:[(0,f.jsx)(i.Icon,{name:r,size:"$5"}),(0,f.jsxs)(i.Stack,{flex:1,children:[(0,f.jsx)(i.SizableText,{size:"$bodyLgMedium",children:e}),(0,f.jsx)(i.SizableText,{size:"$bodyMd",color:t?"$textSubdued":"$textInfo",children:t?s.formatMessage({id:l.ETranslations.update_updated_to_latest_version},{version:a?.toVersion||s.formatMessage({id:l.ETranslations.global_unknown})}):s.formatMessage({id:l.ETranslations.global_version_is_available},{version:a?.toVersion||s.formatMessage({id:l.ETranslations.global_unknown})})})]}),(0,f.jsx)(i.IconButton,{icon:d?"ChevronDownSmallOutline":"ChevronTopSmallOutline",variant:"tertiary",onPress:c})]}),d?null:(0,f.jsxs)(i.Stack,{bg:"$bgStrong",p:"$5",borderRadius:"$3",children:[(0,f.jsx)(p.Y,{fromVersion:a?.fromVersion,toVersion:a?.toVersion}),(0,f.jsx)(ChangeLogMarkdown,{changelog:a?.changelog})]})]})}function FirmwareChangeLogContentView({result:e,isDone:r}){var t=(0,o.A)();return(0,f.jsxs)(i.Stack,{mt:"$8",children:[e?.updateInfos?.bootloader?.hasUpgrade?(0,f.jsx)(ChangeLogSection,{title:t.formatMessage({id:l.ETranslations.global_bootloader}),icon:"StorageOutline",updateInfo:e?.updateInfos?.bootloader,isDone:r}):null,e?.updateInfos?.ble?.hasUpgrade?(0,f.jsx)(ChangeLogSection,{title:t.formatMessage({id:l.ETranslations.global_bluetooth}),icon:"BluetoothOutline",updateInfo:e?.updateInfos?.ble,isDone:r}):null,e?.updateInfos?.firmware?.hasUpgrade?(0,f.jsx)(ChangeLogSection,{title:t.formatMessage({id:l.ETranslations.global_firmware}),icon:"LaunchOutline",updateInfo:e?.updateInfos?.firmware,isDone:r}):null]})}function FirmwareChangeLogView({result:e}){var r=(0,o.A)(),[,t]=(0,d.useFirmwareUpdateStepInfoAtom)(),{showCheckList:a}=(0,u.B)();return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(c.nv,{onConfirmText:r.formatMessage({id:l.ETranslations.update_update_now}),onConfirm:function(){t({step:d.EFirmwareUpdateSteps.showCheckList,payload:void 0}),a({result:e})}}),(0,f.jsxs)(i.Stack,{children:[(0,f.jsx)(g.N,{result:e}),(0,f.jsx)(FirmwareChangeLogContentView,{result:e})]})]})}},139499:(e,r,t)=>{t.d(r,{k:()=>FirmwareCheckingLoading});var a=t(908867),n=t(490343),o=t(334439),i=t(831085);function FirmwareCheckingLoading({connectId:e}){var r=(0,a.A)();return(0,i.jsxs)(n.Stack,{ai:"center",jc:"center",h:500,children:[(0,i.jsx)(n.Spinner,{size:"large"}),(0,i.jsx)(n.SizableText,{my:"$6",size:"$headingLg",children:r.formatMessage({id:o.ETranslations.update_checking_for_updates})}),null]})}},723337:(e,r,t)=>{t.d(r,{u:()=>FirmwareUpdateBaseMessageView});var a=t(514041),n=t(908867),o=t(490343),i=t(726130),s=t(334439),d=(t(663522),t(831085)),getColors=function(e){switch(e){case"destructive":return{iconWrapperBg:"$bgCritical",iconColor:"$iconCritical"};case"warning":return{iconWrapperBg:"$bgCaution",iconColor:"$iconCaution"};case"success":return{iconWrapperBg:"$bgSuccess",iconColor:"$iconSuccess"};default:return{iconWrapperBg:"$bgStrong",iconColor:"$icon"}}};function UpdateErrorTroubleshooting(){var e,r=(0,n.A)();e=s.ETranslations.update_troubleshoot_connection_issues;var t=r.formatMessage({id:e,defaultMessage:"If you have any questions, please refer to the troubleshooting guide."}).split("\n");return(0,d.jsx)(o.Stack,{children:t.map((function(e,r){return e.includes("<url>")?(0,d.jsx)(o.RichSizeableText,{size:"$bodyMd",color:"$textSubdued",linkList:{url:{url:i.ks}},children:e},r):(0,d.jsx)(o.SizableText,{size:"$bodyMd",color:"$textSubdued",children:e},r)}))})}function FirmwareUpdateBaseMessageView({icon:e,title:r,tone:t,message:n,linkList:i,displayTroubleshooting:s}){var l=(0,a.useCallback)((function(){return e?.endsWith("Solid")?(0,d.jsx)(o.Icon,{name:e,size:"$14",color:getColors(t).iconColor}):(0,d.jsx)(o.Stack,{alignSelf:"flex-start",p:"$3",borderRadius:"$full",bg:getColors(t).iconWrapperBg,children:(0,d.jsx)(o.Icon,{name:e,size:"$7",color:getColors(t).iconColor})})}),[e,t]);return(0,d.jsxs)(o.Stack,{py:"$6",gap:"$5",children:[(0,d.jsxs)(o.Stack,{children:[e?l():null,r?(0,d.jsx)(o.SizableText,{my:"$4",size:"$heading2xl",children:r}):null,n?(0,d.jsx)(o.RichSizeableText,{size:"$bodyLg",color:"$textSubdued",linkList:i,children:n}):null]}),s?(0,d.jsx)(UpdateErrorTroubleshooting,{}):null]})}},853748:(e,r,t)=>{t.d(r,{_V:()=>EnterBootModeGuide,uH:()=>_,RH:()=>useFirmwareUpdateErrors});var a=t(586330),n=t(514041),o=t(813362),i=t(908867),s=t(490343),d=t(259227),l=t(726130),u=t(319357),c=t(514527),g=t(334439),p=t(117746),f=t(100645),m=t(610421);const x=t.p+"static/media/enter-boot-guide-mini.e82812de54d81a27fd02.png";var v=t(723337),w=t(225555),h=t(831085);function CommonError({message:e,title:r,icon:t,displayTroubleshooting:a}){var n=(0,i.A)();return(0,h.jsx)(v.u,{icon:t,tone:"destructive",title:r||n.formatMessage({id:g.ETranslations.global_an_error_occurred}),message:e,displayTroubleshooting:a})}function ShouldUpdateBridge({result:e}){var r=(0,i.A)();return(0,h.jsxs)(s.Stack,{children:[(0,h.jsx)(v.u,{icon:"InfoCircleOutline",title:r.formatMessage({id:g.ETranslations.update_outdated_version_detected}),message:r.formatMessage({id:g.ETranslations.update_hardware_update_requires_bridge}),linkList:{url:{url:l.F3}}}),(0,h.jsx)(w.nv,{onConfirm:function(){(0,p.Dr)(l.F3)},onConfirmText:r.formatMessage({id:g.ETranslations.global_view_tutorial})})]})}function ShouldUpdateByWeb(){var e=(0,i.A)();return(0,h.jsxs)(s.Stack,{children:[(0,h.jsx)(v.u,{icon:"InfoCircleOutline",title:e.formatMessage({id:g.ETranslations.update_update_in_official_web_tool}),message:e.formatMessage({id:g.ETranslations.update_update_in_official_web_tool_desc}),linkList:{url:{url:l.BZ}}}),(0,h.jsx)(w.nv,{onConfirm:function(){(0,p.Dr)(l.BZ)},onConfirmText:e.formatMessage({id:g.ETranslations.global_visit_website})})]})}function HowToUpdateFullResource(){var e=(0,i.A)();return(0,h.jsxs)(s.Stack,{children:[(0,h.jsx)(v.u,{icon:"InfoCircleOutline",title:e.formatMessage({id:g.ETranslations.update_outdated_version_detected}),message:e.formatMessage({id:g.ETranslations.update_outdated_version_detected_desc}),linkList:{url:{url:l.Kj}}}),(0,h.jsx)(w.nv,{onConfirm:function(){(0,p.Dr)(l.Kj)},onConfirmText:e.formatMessage({id:g.ETranslations.global_view_tutorial})})]})}function EnterBootModeGuide({deviceType:e}){var r=(0,i.A)();return"mini"===e?(0,h.jsxs)(s.Stack,{mb:"$6",children:[(0,h.jsx)(s.Image,{w:353,h:224,source:x}),(0,h.jsx)(s.SizableText,{size:"$headingMd",children:r.formatMessage({id:g.ETranslations.update_manually_entering_bootloader_mode})}),(0,h.jsx)(s.SizableText,{mt:"$2",color:"$textSubdued",children:r.formatMessage({id:g.ETranslations.update_manually_entering_bootloader_mode_desc})})]}):(0,h.jsx)(s.Stack,{mb:"$6",children:(0,h.jsx)(s.RichSizeableText,{mt:"$2",linkList:{url:{url:l.zz}},children:g.ETranslations.update_follow_online_tutorial_to_proceed_manually})})}function useFirmwareUpdateErrors({error:e,onRetry:r,result:t,lastFirmwareTipMessage:a}){var s=(0,i.A)(),d=s.formatMessage({id:g.ETranslations.global_retry});return(0,n.useMemo)((function(){if((0,c.R4)({error:e,code:[o.HardwareErrorCode.PinCancelled,o.HardwareErrorCode.ActionCancelled,o.HardwareErrorCode.DeviceInterruptedFromOutside]}))return{content:(0,h.jsx)(CommonError,{icon:"CrossedLargeOutline",title:s.formatMessage({id:g.ETranslations.update_operation_canceled}),message:s.formatMessage({id:g.ETranslations.update_operation_canceled_desc})}),onRetryHandler:r,retryText:d};if((0,c.R4)({error:e,code:o.HardwareErrorCode.FirmwareUpdateDownloadFailed}))return{content:(0,h.jsx)(CommonError,{icon:"DownloadOutline",title:s.formatMessage({id:g.ETranslations.update_download_failed}),message:s.formatMessage({id:g.ETranslations.update_check_connection_try_again})}),onRetryHandler:r,retryText:d};if((0,c.R4)({error:e,code:o.HardwareErrorCode.PinInvalid}))return{content:(0,h.jsx)(CommonError,{icon:"CrossedLargeOutline",message:s.formatMessage({id:g.ETranslations.hardware_invalid_pin_error})}),onRetryHandler:r,retryText:d};if((0,c.R4)({error:e,code:o.HardwareErrorCode.FirmwareUpdateManuallyEnterBoot})||(0,c.R4)({error:e,code:o.HardwareErrorCode.FirmwareUpdateAutoEnterBootFailure})||e&&a===f.rn.AutoRebootToBootloader)return{content:(0,h.jsx)(CommonError,{icon:"CrossedLargeOutline",title:s.formatMessage({id:g.ETranslations.update_manually_entering_bootloader_mode})}),detail:(0,h.jsx)(EnterBootModeGuide,{deviceType:t?.deviceType}),onRetryHandler:r,retryText:"mini"===t?.deviceType?s.formatMessage({id:g.ETranslations.update_verify_status_and_continue}):d};if((0,c.R4)({error:e,code:[o.HardwareErrorCode.BridgeNetworkError]}))return{content:(0,h.jsx)(CommonError,{icon:"CrossedLargeOutline",title:s.formatMessage({id:g.ETranslations.update_bridge_network_error}),message:s.formatMessage({id:g.ETranslations.update_unable_to_connect_to_bridge})}),onRetryHandler:r,retryText:d};if((0,c.R4)({error:e,code:[o.HardwareErrorCode.BridgeTimeoutError]}))return{content:(0,h.jsx)(CommonError,{icon:"CrossedLargeOutline",title:s.formatMessage({id:g.ETranslations.update_bridge_timeout_error}),message:s.formatMessage({id:g.ETranslations.update_connection_to_bridge_timed_out})}),onRetryHandler:r,retryText:d};if((0,c.R4)({error:e,code:[o.HardwareErrorCode.BridgeNotInstalled,u.o.NeedOneKeyBridge]}))return{content:(0,h.jsx)(v.u,{icon:"CrossedLargeOutline",tone:"destructive",title:s.formatMessage({id:g.ETranslations.update_bridge_not_installed}),message:s.formatMessage({id:g.ETranslations.update_hardware_update_requires_bridge}),linkList:{url:{url:l.F3}}}),onRetryHandler:r,retryText:d};if((0,c.R4)({error:e,code:u.o.NeedOneKeyBridgeUpgrade}))return{content:(0,h.jsx)(ShouldUpdateBridge,{result:t}),retryText:d};if((0,c.R4)({error:e,code:u.o.NeedFirmwareUpgradeFromWeb}))return{content:(0,h.jsx)(ShouldUpdateByWeb,{}),retryText:d};if((0,c.R4)({error:e,code:o.HardwareErrorCode.UseDesktopToUpdateFirmware}))return{content:(0,h.jsx)(HowToUpdateFullResource,{}),retryText:d};if(e){var n=e?.message;return 4500===e.code&&(n=s.formatMessage({id:g.ETranslations.feedback_hw_polling_time_out})),{content:(0,h.jsx)(CommonError,{icon:"CrossedLargeOutline",message:n,displayTroubleshooting:!0}),onRetryHandler:r,retryText:d}}return{content:null,retryText:d}}),[s,e,a,d,r,t])}var _={ShouldUpdateBridge,CommonError,EnterBootModeGuide,WorkflowErrors:function WorkflowErrors({onRetry:e,error:r,result:t}){var a=(0,i.A)(),{onRetryHandler:n,content:o,retryText:s}=useFirmwareUpdateErrors({error:r,onRetry:e,result:t,lastFirmwareTipMessage:void 0});return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(w.nv,{onConfirm:n,onConfirmText:s||a.formatMessage({id:g.ETranslations.global_retry})}),o]})},InstallingErrors:function InstallingErrors({retryInfo:e,result:r,lastFirmwareTipMessage:t}){var o=(0,i.A)(),[,s]=(0,d.useFirmwareUpdateStepInfoAtom)(),l=(0,n.useCallback)((0,a.A)((function*(){if(!e)return null;s({step:d.EFirmwareUpdateSteps.updateStart,payload:{startAtTime:Date.now()}}),yield m.A.serviceFirmwareUpdate.retryUpdateTask({id:e?.id,connectId:r?.updatingConnectId,releaseResult:r})})),[r,e,s]),{content:u,detail:c,onRetryHandler:p,retryText:f}=useFirmwareUpdateErrors({onRetry:l,result:r,lastFirmwareTipMessage:t,error:e?.error});return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(w.nv,{onConfirm:p,onConfirmText:f||o.formatMessage({id:g.ETranslations.global_retry})}),u,c]})}}},336293:(e,r,t)=>{t.d(r,{X:()=>FirmwareUpdateExitPrevent,U:()=>ForceExtensionUpdatingFromExpandTab});var a=t(334025),n=t(908867),o=t(334439),i=t(514041),s=t(355931),d=t(493360),l=t(490343),u=t(663522),c=t(498356),g=t(326745),p=t(773831),f=!1;function ForceExtensionUpdatingFromExpandTab(){return function useExtensionUpdatingFromExpandTab(){var e=(0,g.u)(),r=(0,p.B)();(0,i.useEffect)((function(){u.Ay.isExtensionUiPopup&&(r.openChangeLogOfExtension(e.params),window.close())}),[r,e.params])}(),null}function FirmwareUpdateExitPrevent({shouldPreventRemove:e=!0}){var r=(0,n.A)(),t=r.formatMessage({id:o.ETranslations.update_quit_update}),g=r.formatMessage({id:o.ETranslations.update_quit_update_desc});return(0,a.Wg)(),function useModalExitPrevent({title:e,message:r,shouldPreventRemove:t=!0}){var a=(0,n.A)(),s=(0,c.A)(),d=(0,i.useCallback)((function({data:t}){f||(f=!0,l.Dialog.show({title:e,description:r,onConfirmText:a.formatMessage({id:o.ETranslations.global_quit}),onConfirm:function(){s.dispatch(t.action)},onCancelText:a.formatMessage({id:o.ETranslations.global_cancel}),onClose:function(){f=!1}}))}),[r,s,e,a]);(0,l.usePreventRemove)(t,d)}({shouldPreventRemove:e,title:t,message:g}),function useAppExitPrevent({message:e,title:r,shouldPreventExitOnAndroid:t=!0}){var a=(0,n.A)();(0,i.useEffect)((function(){if(u.Ay.isRuntimeBrowser&&!u.Ay.isExtensionUiPopup){var fn=function(r){return r.preventDefault(),r.returnValue=!0,e};return window.addEventListener("beforeunload",fn),function(){window.removeEventListener("beforeunload",fn)}}}),[e]),(0,i.useEffect)((function(){if(t){var n=d.A.addEventListener("hardwareBackPress",(function(){return s.A.alert(r,e,[{text:a.formatMessage({id:o.ETranslations.global_cancel}),onPress:function(){},style:"cancel"},{text:a.formatMessage({id:o.ETranslations.global_quit}),onPress:function(){return d.A.exitApp()}}],{cancelable:!1}),!0}));return function(){return n.remove()}}}),[e,r,a,t])}({title:t,message:g,shouldPreventExitOnAndroid:!1}),null}},225555:(e,r,t)=>{t.d(r,{nv:()=>d,oh:()=>FirmwareUpdatePageLayout});var a=t(908867),n=t(490343),o=t(334439),i=t(498356),s=t(831085);function FirmwareUpdatePageHeader(){var e=(0,a.A)();return(0,s.jsx)(n.Page.Header,{dismissOnOverlayPress:!1,title:e.formatMessage({id:o.ETranslations.update_hardware_update})})}var d=n.Page.Footer;function FirmwareUpdatePageLayout({children:e}){(0,i.A)();return(0,s.jsxs)(n.Stack,{children:[(0,s.jsx)(FirmwareUpdatePageHeader,{}),(0,s.jsx)(n.Page.Body,{children:(0,s.jsx)(n.Stack,{p:"$5",children:e})})]})}},355422:(e,r,t)=>{t.d(r,{N:()=>FirmwareUpdateWalletProfile});var a=t(908867),n=t(490343),o=t(334439),i=t(593827),s=t(831085);function DeviceAvatar({deviceType:e,size:r}){return(0,s.jsx)(i.L,{img:e||"unknown",wallet:void 0,size:r})}function FirmwareUpdateWalletProfile({result:e}){var r=(0,a.A)();return(0,s.jsxs)(n.Stack,{onPress:function(){},children:[(0,s.jsx)(DeviceAvatar,{size:"$14",deviceType:e?.deviceType||"unknown"}),(0,s.jsxs)(n.SizableText,{mt:"$5",size:"$heading2xl",children:[r.formatMessage({id:o.ETranslations.update_new_hardware_updates})," "]})]})}},296437:(e,r,t)=>{t.d(r,{Y:()=>FirmwareUpdateWarningMessage});var a=t(908867),n=t(490343),o=t(334439),i=(t(663522),t(831085));function FirmwareUpdateWarningMessage(){var e=(0,a.A)();return(0,i.jsx)(n.Alert,{type:"warning",title:e.formatMessage({id:o.ETranslations.update_keep_usb_connected_and_app_active}),fullBleed:!0,mx:"$-5"})}},443791:(e,r,t)=>{t.d(r,{Y:()=>FirmwareVersionProgressBar});var a=t(514041),n=t(908867),o=t(302722),i=t.n(o),s=t(490343),d=t(334439),l=t(831085);function FirmwareVersionProgressBar({fromVersion:e="",toVersion:r=""}){var t=(0,n.A)().formatMessage({id:d.ETranslations.global_unknown}),o=(0,a.useCallback)((function(e){return!!e&&(!!i().valid(e)&&!i().eq(e,"0.0.0"))}),[]);return(0,l.jsxs)(s.XStack,{gap:"$2.5",alignItems:"center",children:[(0,l.jsx)(s.Badge,{badgeType:"default",badgeSize:"lg",children:o(e)?e:t}),(0,l.jsx)(s.Icon,{name:"ArrowRightSolid",size:"$4"}),(0,l.jsx)(s.Badge,{badgeType:"info",badgeSize:"lg",children:r?.length>0?r:t})]})}},806951:(e,r,t)=>{t.r(r),t.d(r,{default:()=>h});var a=t(586330),n=t(514041),o=t(490343),i=t(259227),s=t(16853),d=t(610421),l=t(498356),u=t(326745),c=t(911998),g=t(973066),p=t(139499),f=t(853748),m=t(336293),x=t(225555),v=t(296437),w=t(831085);const h=function PageFirmwareUpdateChangeLog(){var e=(0,u.u)(),r=e?.params?.connectId,[t,h]=((0,l.A)(),(0,i.useFirmwareUpdateStepInfoAtom)()),{result:_,run:E,isLoading:b}=(0,c.yk)((0,a.A)((function*(){try{var e=yield d.A.serviceFirmwareUpdate.checkAllFirmwareRelease({connectId:r});return e?.hasUpgrade&&h({step:i.EFirmwareUpdateSteps.showChangeLog,payload:void 0}),e}catch(e){h({step:i.EFirmwareUpdateSteps.error,payload:{error:(0,s.xm)(e)}})}})),[r,h],{watchLoading:!0}),T=(0,n.useMemo)((function(){return b?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(m.X,{}),(0,w.jsx)(p.k,{connectId:r})]}):t.step===i.EFirmwareUpdateSteps.error?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(v.Y,{}),(0,w.jsx)(m.X,{}),(0,w.jsx)(f.uH.WorkflowErrors,{error:t.payload.error,onRetry:E,result:_})]}):t.step===i.EFirmwareUpdateSteps.showChangeLog||t.step===i.EFirmwareUpdateSteps.showCheckList?(0,w.jsx)(g.z,{result:_}):void 0}),[r,b,_,E,t.payload,t.step]);return(0,w.jsx)(o.Page,{scrollEnabled:!0,onUnmounted:(0,a.A)((function*(){yield d.A.serviceFirmwareUpdate.exitUpdateWorkflow()})),children:(0,w.jsxs)(x.oh,{children:[(0,w.jsx)(m.U,{}),T]})})}},334025:(e,r,t)=>{t.d(r,{Wg:()=>useKeepAwake});var a,n=t(586330),o=t(72631),i=t(514041),s=t(683180),d=t(34546);!function(e){e.RELEASE="release"}(a||(a={}));var l={};const u={isAvailableAsync:()=>(0,n.A)((function*(){return!!s.A.isDOMAvailable&&"wakeLock"in navigator}))(),activate:e=>(0,n.A)((function*(){if(s.A.isDOMAvailable){var r=yield navigator.wakeLock.request("screen");l[e]=r}}))(),deactivate:e=>(0,n.A)((function*(){if(s.A.isDOMAvailable){if(!l[e])throw new d.A("ERR_KEEP_AWAKE_TAG_INVALID",`The wake lock with tag ${e} has not activated yet`);l[e].release?.(),delete l[e]}}))(),addListenerForTag(e,r){var eventListener=function(){r({state:a.RELEASE})},t=l[e];return t&&("addEventListener"in t?t.addEventListener?.("release",eventListener):t.onrelease=eventListener),{remove:function(){var r=l[e];r&&(r.removeEventListener?r.removeEventListener("release",eventListener):r.onrelease=null)}}}};var c="ExpoKeepAwakeDefaultTag";function useKeepAwake(e=c,r){(0,i.useEffect)((function(){var t=!0;return activateKeepAwakeAsync(e).then((function(){t&&u.addListenerForTag&&r?.listener&&function addListener(e,r){if(!u.addListenerForTag)throw new o.V("ExpoKeepAwake","addListenerForTag");var t="string"==typeof e?e:c,a="function"==typeof e?e:r;return u.addListenerForTag(t,a)}(e,r.listener)})),function(){t=!1,r?.suppressDeactivateWarnings?deactivateKeepAwake(e).catch((function(){})):deactivateKeepAwake(e)}}),[e])}function activateKeepAwakeAsync(){return _activateKeepAwakeAsync.apply(this,arguments)}function _activateKeepAwakeAsync(){return(_activateKeepAwakeAsync=(0,n.A)((function*(e=c){yield u.activate?.(e)}))).apply(this,arguments)}function deactivateKeepAwake(){return _deactivateKeepAwake.apply(this,arguments)}function _deactivateKeepAwake(){return(_deactivateKeepAwake=(0,n.A)((function*(e=c){yield u.deactivate?.(e)}))).apply(this,arguments)}}}]);