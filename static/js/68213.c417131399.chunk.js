"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[68213],{461483:(e,t,s)=>{s.d(t,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var n=s(586330),i=s(514041),r=s(908867),o=s(490343),a=s(610421),l=s(334439),c=s(287007),u=s(831085);const __WEBPACK_DEFAULT_EXPORT__=function({oldEncodedPassword:e,onUpdateRes:t}){var s,[d,g]=(0,i.useState)(!1),f=(0,r.A)(),p=(0,i.useCallback)((s=(0,n.A)((function*(s){g(!0);try{if(s.confirmPassword!==s.password)return void o.Toast.error({title:f.formatMessage({id:l.ETranslations.auth_error_password_not_match})});var n=yield a.A.servicePassword.encodeSensitiveText({text:s.password}),i=yield a.A.servicePassword.updatePassword(e,n);t(i),o.Toast.success({title:f.formatMessage({id:l.ETranslations.auth_password_set})})}catch(e){o.Toast.error({title:f.formatMessage({id:l.ETranslations.auth_new_password_same_as_old})})}g(!1)})),function(e){return s.apply(this,arguments)}),[e,t,f]);return(0,u.jsx)(c.A,{loading:d,onSetupPassword:p,confirmBtnText:f.formatMessage({id:l.ETranslations.global_confirm})})}},447479:(e,t,s)=>{s.d(t,{I:()=>useOptions});var n=s(514041),i=s(908867),r=s(507026),o=s(334439);function useOptions(){var e=(0,i.A)();return(0,n.useMemo)((function(){return[{title:e.formatMessage({id:o.ETranslations.global_always}),value:r.J.Always},{title:e.formatMessage({id:o.ETranslations.settings_if_away_for_1_min}),value:r.J.Minute},{title:e.formatMessage({id:o.ETranslations.settings_if_away_for_5_mins}),value:r.J.Minute5},{title:e.formatMessage({id:o.ETranslations.settings_if_away_for_30_mins}),value:r.J.Minute30},{title:e.formatMessage({id:o.ETranslations.settings_if_away_for_1_hr}),value:r.J.Hour},{title:e.formatMessage({id:o.ETranslations.settings_if_away_for_4_hrs}),value:r.J.Hour4},{title:e.formatMessage({id:o.ETranslations.global_never}),value:r.J.Never}]}),[e])}},415902:(e,t,s)=>{s.d(t,{_:()=>StartTimePanel});var n=s(490343),i=s(318003),r=s(831085);function StartTimePanel(){var{jsBundleLoadedTime:e,fpTime:t}=(0,i.useMeasureTime)();return(0,r.jsxs)(n.YStack,{children:[(0,r.jsxs)(n.SizableText,{children:["JS Bundle 加载执行时长: ",e]}),(0,r.jsxs)(n.SizableText,{children:["界面渲染时长: ",t-e]}),(0,r.jsxs)(n.SizableText,{children:["启动总时长: ",t]})]})}},460627:(e,t,s)=>{s.d(t,{u:()=>l});var n,i=s(586330),r=s(610421),o=s(948675),a=s(520202),l=(n=(0,i.A)((function*(e){var t=`${e}.txt`;o.U.setting.device.logDeviceInfo(),yield(0,a.of)(1e3);var s=yield r.A.serviceLogger.getAllMsg(),n=document.createElement("a"),i=new Blob(s,{type:"text/plain",endings:"native"});n.href=URL.createObjectURL(i),n.download=t,document.body.appendChild(n),n.click()})),function exportLogs(e){return n.apply(this,arguments)})},768213:(e,t,s)=>{s.r(t),s.d(t,{default:()=>SettingListModal});var n,i,r,o=s(514041),a=s(908867),l=s(490343),c=s(259227),u=s(713132),d=s(726130),g=s(334439),f=s(663522),p=s(117746),m=s(586330),h=s(610421),b=0,j=!1,x=(i=(0,m.A)((function*(){return new Promise((function(e,t){l.Dialog.show({title:"Danger Zone",tone:"warning",icon:"ErrorOutline",description:"Are you sure you want to enable developer-related features?",dismissOnOverlayPress:!1,confirmButtonProps:{testID:"confirm-button"},onConfirm:e,onCancel:function(e){e(),t(new Error("User canceled"))}})}))})),function showPromoteDialog(){return i.apply(this,arguments)}),v=(r=(0,m.A)((function*(e){var t=new Date;if(0===b&&e(),!j&&(void 0===n||Math.round(t.getTime()-n.getTime())>5e3?(n=t,b=0):b+=1,b>=9)){j=!0;try{yield x(),yield h.A.servicePassword.promptPasswordVerify({dialogProps:{confirmButtonProps:{testID:"confirm-button"},description:"Danger Zone: Are you sure you want to enable developer-related features?",dismissOnOverlayPress:!1}}),yield h.A.serviceDevSetting.switchDevMode(!0)}catch(e){}finally{b=0,j=!1}}})),function handleOpenDevMode(e){return r.apply(this,arguments)}),S=s(791088),_=s(498356),y=s(948675),P=s(392097),w=s(324586),A=s(831085);function ownKeys(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(s),!0).forEach((function(t){(0,w.A)(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ownKeys(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var Section=function({title:e,titleProps:t,children:s}){return(0,A.jsxs)(l.Stack,{children:[(0,A.jsx)(l.SizableText,_objectSpread(_objectSpread({size:"$headingSm",paddingHorizontal:"$4",paddingBottom:"$2",paddingTop:"$5",color:"$textSubdued"},t),{},{children:e})),(0,A.jsx)(l.Stack,{children:s})]})},HardwareBridgeListItems=function(){var e=(0,o.useCallback)((function(){(0,p.Dr)(d.By)}),[]),t=(0,a.A)();return(0,A.jsx)(A.Fragment,{children:(0,A.jsx)(S.c,{onPress:e,icon:"ApiConnectionOutline",title:t.formatMessage({id:g.ETranslations.settings_hardware_bridge_status}),children:(0,A.jsx)(S.c.IconButton,{disabled:!0,icon:"ArrowTopRightOutline",iconProps:{color:"$iconActive"}})})})},AdvancedSection=function(){var e=(0,a.A)(),t=(0,_.A)(),s=(0,o.useCallback)((function(){t.push(P.Pj.SettingAccountDerivationModal)}),[t]),n=(0,o.useCallback)((function(){y.U.setting.page.enterCustomRPC(),t.push(P.Pj.SettingCustomRPC)}),[t]),i=(0,o.useCallback)((function(){y.U.setting.page.enterCustomRPC(),t.push(P.Pj.SettingCustomNetwork)}),[t]),r=(0,o.useCallback)((function(){t.push(P.Pj.SettingAlignPrimaryAccount)}),[t]);return(0,A.jsxs)(Section,{title:e.formatMessage({id:g.ETranslations.global_advanced}),children:[(0,A.jsx)(S.c,{onPress:r,icon:"RefreshCcwOutline",title:e.formatMessage({id:g.ETranslations.settings_account_sync_modal_title}),drillIn:!0}),(0,A.jsx)(S.c,{onPress:i,icon:"GlobusOutline",title:e.formatMessage({id:g.ETranslations.custom_network_add_network_action_text}),drillIn:!0}),(0,A.jsx)(S.c,{onPress:n,icon:"BezierNodesOutline",title:e.formatMessage({id:g.ETranslations.custom_rpc_title}),drillIn:!0}),(0,A.jsx)(S.c,{onPress:s,icon:"BranchesOutline",title:e.formatMessage({id:g.ETranslations.settings_account_derivation_path}),drillIn:!0}),(0,A.jsx)(HardwareBridgeListItems,{})]})},T=s(768262),D=s(750094),C=s(265767),O=s(536039),E=(s(567807),s(215341)),I=s(281464),M=s(839850),k=["title","onPress","copyable"];function SectionPressItem_ownKeys(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function SectionPressItem(e){var{title:t,onPress:s,copyable:n}=e,i=(0,M.A)(e,k),{copyText:r}=(0,l.useClipboard)(),a=(0,o.useCallback)((function(){r(t)}),[r,t]);return(0,A.jsx)(S.c,function SectionPressItem_objectSpread(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?SectionPressItem_ownKeys(Object(s),!0).forEach((function(t){(0,w.A)(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):SectionPressItem_ownKeys(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({drillIn:!0,onPress:n?a:s,title:t,titleProps:{color:"$textCritical"}},i))}var AddressBookDevSetting=function(){var e=(0,o.useCallback)((0,m.A)((function*(){l.Dialog.show({title:"Tamper Address Book",description:"This is a feature specific to development environments. Function used to simulate address data being tampered with",confirmButtonProps:{variant:"destructive"},onConfirm:function(){h.A.serviceAddressBook.__dangerTamperVerifyHashForTest()}})})),[]);return(0,A.jsx)(SectionPressItem,{title:"Hack Address Book",testID:"temper-address-book",onPress:e})};function CrashDevSettings(){var[e,t]=(0,o.useState)({a:{b:{c:"text"}}});return(0,A.jsx)(SectionPressItem,{title:`Crash Test ${e.a.b.c}`,onPress:function(){t("")}})}function NotificationDevSettings_ownKeys(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function NotificationDevSettings_objectSpread(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?NotificationDevSettings_ownKeys(Object(s),!0).forEach((function(t){(0,w.A)(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):NotificationDevSettings_ownKeys(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function NotificationSectionFieldItem({name:e,title:t,titleProps:s={color:"$textCritical"},children:n,onValueChange:i,testID:r=""}){var[a,l]=(0,c.useNotificationsDevSettingsPersistAtom)(),u=o.Children.only(n),d=e?a?.[e]:"",g=(0,o.useCallback)(function(){var t=(0,m.A)((function*(t){e&&(l((function(s){return NotificationDevSettings_objectSpread(NotificationDevSettings_objectSpread({},s),{},{[e]:t})})),i?.(t))}));return function(e){return t.apply(this,arguments)}}(),[e,i,l]),f=u?(0,o.cloneElement)(u,NotificationDevSettings_objectSpread(NotificationDevSettings_objectSpread({},u.props),{},{value:d,onChange:g})):null;return(0,A.jsx)(S.c,{title:t,titleProps:s,testID:r,children:f})}function NotificationDevSettings(){var[,e]=(0,c.useNotificationsAtom)();return(0,A.jsxs)(l.Stack,{children:[(0,A.jsx)(NotificationSectionFieldItem,{name:"showMessagePushSource",title:"显示消息推送来源",children:(0,A.jsx)(l.Switch,{size:l.ESwitchSize.small})}),(0,A.jsx)(NotificationSectionFieldItem,{name:"disabledWebSocket",title:"禁用 WebSocket (重启生效）",children:(0,A.jsx)(l.Switch,{size:l.ESwitchSize.small})}),(0,A.jsx)(NotificationSectionFieldItem,{name:"disabledJPush",title:"禁用 JPush (重启生效）",children:(0,A.jsx)(l.Switch,{size:l.ESwitchSize.small})}),(0,A.jsx)(l.Button,{onPress:(0,m.A)((function*(){var e=yield h.A.serviceNotification.pingWebSocket({count:1,date:(new Date).toISOString()});l.Toast.success({title:"Ping Success",message:JSON.stringify(e)})})),children:"WebSocket Ping"}),(0,A.jsx)(l.Button,{onPress:function(){e((function(e){return NotificationDevSettings_objectSpread(NotificationDevSettings_objectSpread({},e),{},{firstTimeGuideOpened:!1})})),l.Toast.success({title:"重置成功",message:"首页消息中心入口，点击后将提示权限引导，而不是进入消息列表"})},children:"重置首次通知权限引导提醒"}),(0,A.jsx)(l.Button,{onPress:function(){e((function(e){return NotificationDevSettings_objectSpread(NotificationDevSettings_objectSpread({},e),{},{lastRegisterTime:void 0})})),l.Toast.success({title:"重置成功",message:"进入首页将再次发起 register 请求"})},children:"重置每日同步账户时间戳"})]})}function SectionFieldItem_ownKeys(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function SectionFieldItem_objectSpread(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?SectionFieldItem_ownKeys(Object(s),!0).forEach((function(t){(0,w.A)(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):SectionFieldItem_ownKeys(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function SectionFieldItem({name:e,title:t,subtitle:s,children:n,onValueChange:i,titleProps:r={color:"$textCritical"},testID:a="",onBeforeValueChange:l}){var[u]=(0,c.useDevSettingsPersistAtom)(),d=o.Children.only(n),g=e?u?.settings?.[e]:"",f=(0,o.useCallback)(function(){var t=(0,m.A)((function*(t){e&&(l&&(yield l()),yield h.A.serviceDevSetting.updateDevSetting(e,t),i?.(t))}));return function(e){return t.apply(this,arguments)}}(),[e,l,i]),p=d?(0,o.cloneElement)(d,SectionFieldItem_objectSpread(SectionFieldItem_objectSpread({},d.props),{},{value:g,onChange:f})):null;return(0,A.jsx)(S.c,{title:t,subtitle:s,titleProps:r,testID:a,children:p})}var F=s(415902);function DevSettingsSection_ownKeys(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function DevSettingsSection_objectSpread(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?DevSettingsSection_ownKeys(Object(s),!0).forEach((function(t){(0,w.A)(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):DevSettingsSection_ownKeys(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function showDevOnlyPasswordDialog({title:e,description:t,onConfirm:s,confirmButtonProps:n}){l.Dialog.show({title:e,description:t,confirmButtonProps:DevSettingsSection_objectSpread({variant:"destructive"},n),renderContent:(0,A.jsx)(l.Dialog.Form,{formProps:{values:{password:""}},children:(0,A.jsx)(l.Dialog.FormField,{name:"password",rules:{required:{value:!0,message:"password is required."}},children:(0,A.jsx)(l.Input,{testID:"dev-only-password",placeholder:"devOnlyPassword"})})}),onConfirm:function(){var e=(0,m.A)((function*({getForm:e}){var t=e();if(t){yield t.trigger();var{password:n}=t.getValues()||{};if(!(0,O.tB)(n))return;var i={$$devOnlyPassword:n};yield s(i)}}));return function onConfirm(t){return e.apply(this,arguments)}}()})}var DevSettingsSection=function(){var[e]=(0,c.useSettingsPersistAtom)(),[t]=(0,C.LA)(),s=(0,a.A)(),n=(0,_.A)(),{copyText:i}=(0,l.useClipboard)(),r=(0,o.useCallback)((function(){l.Dialog.show({title:"关闭开发者模式",onConfirm:function(){h.A.serviceDevSetting.switchDevMode(!1)}})}),[]),u=((0,o.useCallback)((function(){showDevOnlyPasswordDialog({title:"Danger Zone: Open Chrome DevTools",onConfirm:function(){var e=(0,m.A)((function*(){window?.desktopApi.changeDevTools(!0)}));return function onConfirm(){return e.apply(this,arguments)}}()})}),[]),(0,o.useCallback)((function(){D.A.forceRTL(!D.A.isRTL),h.A.serviceApp.restartApp()}),[]));return t.enabled?(0,A.jsxs)(Section,{title:s.formatMessage({id:g.ETranslations.global_dev_mode}),titleProps:{color:"$textCritical"},children:[(0,A.jsx)(SectionPressItem,{title:"关闭开发者模式",onPress:r}),null,(0,A.jsx)(SectionPressItem,{copyable:!0,title:e.instanceId,subtitle:"InstanceId"}),f.Ay.githubSHA?(0,A.jsx)(SectionPressItem,{copyable:!0,title:f.Ay.githubSHA,subtitle:"BuildHash"}):null,(0,A.jsx)(SectionFieldItem,{name:"enableTestEndpoint",title:"启用 OneKey 测试网络节点",subtitle:t.settings?.enableTestEndpoint?d.Nv:d.E5,onBeforeValueChange:(0,m.A)((function*(){try{yield h.A.serviceNotification.unregisterClient()}catch(e){}})),onValueChange:function(e){setTimeout((function(){h.A.serviceApp.restartApp()}),300)},children:(0,A.jsx)(l.Switch,{size:l.ESwitchSize.small})}),(0,A.jsx)(SectionPressItem,{title:"force RTL",subtitle:"强制启用 RTL 布局",drillIn:!1,children:(0,A.jsx)(l.Switch,{onChange:u,size:l.ESwitchSize.small,value:D.A.isRTL})}),(0,A.jsx)(SectionFieldItem,{name:"showTradingView",title:"显示 Trading View",children:(0,A.jsx)(l.Switch,{size:l.ESwitchSize.small})}),(0,A.jsx)(SectionFieldItem,{name:"showDevOverlayWindow",title:"开发者悬浮窗",subtitle:"始终悬浮于全局的开发调试工具栏",testID:"show-dev-overlay",children:(0,A.jsx)(l.Switch,{size:l.ESwitchSize.small})}),(0,A.jsx)(SectionFieldItem,{name:"alwaysSignOnlySendTx",title:"始终只签名不广播",testID:"always-sign-only-send-tx",children:(0,A.jsx)(l.Switch,{size:l.ESwitchSize.small})}),(0,A.jsx)(SectionFieldItem,{name:"showDevExportPrivateKey",title:"首页导出私钥临时入口",subtitle:"",testID:"export-private-key",children:(0,A.jsx)(l.Switch,{size:l.ESwitchSize.small})}),(0,A.jsx)(SectionPressItem,{title:"Export Accounts Data",onPress:function(){var e;showDevOnlyPasswordDialog({title:"Danger Zone",description:"Export Accounts Data",onConfirm:(e=(0,m.A)((function*(e){l.Dialog.cancel({title:"Export Accounts Data",renderContent:(0,A.jsx)(l.YStack,{children:(0,A.jsx)(SectionPressItem,{title:"Export Accounts Data",onPress:(0,m.A)((function*(){var t=yield h.A.serviceE2E.exportAllAccountsData(e);i((0,I.JB)(t))}))})})})})),function onConfirm(t){return e.apply(this,arguments)})})}}),(0,A.jsx)(SectionPressItem,{title:"FirmwareUpdateDevSettings",testID:"firmware-update-dev-settings-menu",onPress:function(){n.push(P.Pj.SettingDevFirmwareUpdateModal)}}),(0,A.jsx)(SectionPressItem,{title:"NotificationDevSettings",onPress:function(){l.Dialog.cancel({title:"NotificationDevSettings",renderContent:(0,A.jsx)(NotificationDevSettings,{})})}}),null,(0,A.jsx)(SectionPressItem,{title:"V4MigrationDevSettings",testID:"v4-migration-dev-settings-menu",onPress:function(){l.Dialog.show({title:"!!!!  Danger Zone: Clear all your data",description:"This is a feature specific to development environments. Function used to erase all data in the app.",confirmButtonProps:{variant:"destructive"},onConfirm:function(){n.push(P.Pj.SettingDevV4MigrationModal)}})}}),(0,A.jsx)(SectionPressItem,{title:"Clear App Data (E2E release only)",testID:"clear-data-menu",onPress:function(){var e;showDevOnlyPasswordDialog({title:"Danger Zone: Clear all your data",confirmButtonProps:{variant:"destructive",testID:"clear-double-confirm"},description:"This is a feature specific to development environments.\n                  Function used to erase all data in the app.",onConfirm:(e=(0,m.A)((function*(e){l.Dialog.cancel({title:"Clear App Data (E2E release only)",renderContent:(0,A.jsxs)(l.YStack,{children:[(0,A.jsx)(SectionPressItem,{title:"Clear Discovery Data",testID:"clear-discovery-data",onPress:(0,m.A)((function*(){yield h.A.serviceE2E.clearDiscoveryPageData(e),l.Toast.success({title:"Success"})}))}),(0,A.jsx)(SectionPressItem,{title:"Clear Address Book Data",testID:"clear-address-book-data",onPress:(0,m.A)((function*(){yield h.A.serviceE2E.clearAddressBook(e),l.Toast.success({title:"Success"})}))}),(0,A.jsx)(SectionPressItem,{title:"Clear Wallets & Accounts Data",testID:"clear-wallets-data",onPress:(0,m.A)((function*(){yield h.A.serviceE2E.clearWalletsAndAccounts(e),l.Toast.success({title:"Success"})}))}),(0,A.jsx)(SectionPressItem,{title:"Clear Password",testID:"clear-password",onPress:(0,m.A)((function*(){yield h.A.serviceE2E.clearPassword(e),l.Toast.success({title:"Success"})}))}),(0,A.jsx)(SectionPressItem,{title:"Clear History",testID:"clear-history",onPress:(0,m.A)((function*(){yield h.A.serviceE2E.clearHistoryData(e),l.Toast.success({title:"Success"})}))}),(0,A.jsx)(SectionPressItem,{title:"Clear Settings",testID:"clear-settings",onPress:(0,m.A)((function*(){yield h.A.serviceE2E.clearSettings(e),l.Toast.success({title:"Success"})}))}),(0,A.jsx)(SectionPressItem,{title:"Clear Wallet Connect Sessions",testID:"wallet-connect-session",onPress:(0,m.A)((function*(){yield h.A.serviceWalletConnect.disconnectAllSessions(),l.Toast.success({title:"Success"})}))})]})})})),function onConfirm(t){return e.apply(this,arguments)})})}}),(0,A.jsx)(SectionPressItem,{title:"Startup Time(ms)",onPress:function(){l.Dialog.cancel({title:"Startup Time(ms)",renderContent:(0,A.jsx)(F._,{})})}}),(0,A.jsx)(SectionPressItem,{title:"Reset Spotlight",onPress:function(){h.A.serviceSpotlight.reset()}}),f.Ay.isNativeAndroid?(0,A.jsx)(SectionPressItem,{copyable:!0,title:"Android Channel: "}):null,null,(0,A.jsx)(S.c,{drillIn:!0,onPress:function(){(0,E.RI)(),window.location.reload()},title:`Switch web mode: ${(0,E.uP)()?"dapp":"wallet"} mode`,titleProps:{color:"$textCritical"}}),(0,A.jsx)(AddressBookDevSetting,{}),(0,A.jsx)(CrashDevSettings,{})]}):null},B=s(603465),N=s(788316),ThemeListItem=function(){var[{theme:e}]=(0,c.useSettingsPersistAtom)(),{setFreezeOnBlur:t}=(0,o.useContext)(B.k),s=(0,a.A)(),n=(0,o.useMemo)((function(){return[{label:s.formatMessage({id:g.ETranslations.global_auto}),description:s.formatMessage({id:g.ETranslations.global_follow_the_system}),value:"system"},{label:s.formatMessage({id:g.ETranslations.global_light}),value:"light"},{label:s.formatMessage({id:g.ETranslations.global_dark}),value:"dark"}]}),[s]),i=(0,o.useCallback)(function(){var e=(0,m.A)((function*(e){t(!1),yield h.A.serviceSetting.setTheme(e),t(!0)}));return function(t){return e.apply(this,arguments)}}(),[t]);return(0,A.jsx)(l.Select,{offset:{mainAxis:-4,crossAxis:-10},title:s.formatMessage({id:g.ETranslations.settings_theme}),items:n,value:e,onChange:i,placement:"bottom-end",renderTrigger:function({label:e}){return(0,A.jsx)(S.c,{userSelect:"none",icon:"PaletteOutline",title:s.formatMessage({id:g.ETranslations.settings_theme}),children:(0,A.jsxs)(l.XStack,{children:[(0,A.jsx)(S.c.Text,{primary:e,align:"right"}),(0,A.jsx)(S.c.DrillIn,{ml:"$1.5",name:"ChevronDownSmallSolid"})]})})}})},LanguageListItem=function(){var e=(0,N._)(),t=(0,a.A)(),[{locale:s,currencyInfo:n}]=(0,c.useSettingsPersistAtom)(),i=(0,o.useCallback)(function(){var e=(0,m.A)((function*(e){yield h.A.serviceSetting.setLocale(e),setTimeout((function(){h.A.serviceApp.restartApp()}),0)}));return function(t){return e.apply(this,arguments)}}(),[]);return(0,A.jsx)(l.Select,{offset:{mainAxis:-4,crossAxis:-10},title:t.formatMessage({id:g.ETranslations.global_language}),items:e,value:s,onChange:i,placement:"bottom-end",floatingPanelProps:{maxHeight:280},sheetProps:{snapPoints:[80],snapPointsMode:"percent"},renderTrigger:function({label:e}){return(0,A.jsx)(S.c,{userSelect:"none",icon:"TranslateOutline",title:t.formatMessage({id:g.ETranslations.global_language}),children:(0,A.jsxs)(l.XStack,{children:[(0,A.jsx)(S.c.Text,{primary:e,align:"right"}),(0,A.jsx)(S.c.DrillIn,{ml:"$1.5",name:"ChevronDownSmallSolid"})]})})}})},CurrencyListItem=function(){var e,t=(0,_.A)(),s=(0,o.useCallback)((function(){t.push(P.Pj.SettingCurrencyModal)}),[t]),n=(0,a.A)(),[i]=(0,c.useSettingsPersistAtom)(),r=null!=(e=i.currencyInfo?.id)?e:"";return(0,A.jsx)(S.c,{userSelect:"none",icon:"DollarOutline",title:n.formatMessage({id:g.ETranslations.settings_default_currency}),drillIn:!0,onPress:s,children:(0,A.jsx)(S.c.Text,{primary:r.toUpperCase(),align:"right"})})},NotificationsListItem=function(){var e=(0,_.A)();(0,a.A)(),(0,o.useCallback)((function(){e.push(P.Pj.SettingNotifications)}),[e]);return null},PreferenceSection=function(){var e=(0,a.A)();return(0,A.jsxs)(Section,{title:e.formatMessage({id:g.ETranslations.global_preferences}),children:[(0,A.jsx)(CurrencyListItem,{}),(0,A.jsx)(LanguageListItem,{}),(0,A.jsx)(ThemeListItem,{}),(0,A.jsx)(NotificationsListItem,{})]})},$=s(536612),z=s(390334),UrlExternalListItem=function({icon:e,title:t,url:s,drillIn:n}){var i=(0,o.useCallback)((function(){(0,p.Dr)(s)}),[s]);return(0,A.jsx)(S.c,{onPress:i,icon:e,title:t,drillIn:n})},CustomNetworkConfigItem=function(){var e=(0,a.A)(),t=(0,_.A)(),s=(0,o.useCallback)((function(){t.navigate(P.Pj.SettingExportCustomNetworkConfig)}),[t]);return(0,A.jsx)(S.c,{onPress:s,icon:"FileDownloadOutline",title:e.formatMessage({id:g.ETranslations.settings_export_network_config_label}),drillIn:!0})},L=f.Ay.isNativeAndroidGooglePlay||f.Ay.isNativeIOS,RateAppItem=function(){var e=(0,a.A)(),t=(0,o.useCallback)((function(){f.Ay.isNativeAndroidGooglePlay?(0,p.Dr)(d.M6):f.Ay.isNativeIOS&&(0,p.Dr)(d.nw)}),[e]);return L?(0,A.jsx)(S.c,{onPress:t,icon:"StarOutline",title:e.formatMessage({id:g.ETranslations.settings_rate_app}),drillIn:!0}):null},R=s(460627),StateLogsItem=function(){var e=(0,a.A)(),{copyText:t}=(0,l.useClipboard)(),s=(0,o.useCallback)((function(){l.Dialog.show({icon:"FileDownloadOutline",title:e.formatMessage({id:g.ETranslations.settings_export_state_logs}),renderContent:(0,A.jsxs)(l.Stack,{children:[(0,A.jsx)(l.SizableText,{size:"$bodyLg",children:e.formatMessage({id:g.ETranslations.settings_logs_do_not_include_sensitive_data})}),(0,A.jsx)(l.Stack,{h:"$5"}),(0,A.jsx)(l.SizableText,{size:"$bodyLg",children:e.formatMessage({id:g.ETranslations.settings_export_state_logs_desc},{email:(0,A.jsx)(l.SizableText,{size:"$bodyLg",textDecorationLine:"underline",onPress:function(){return t("hi@onekey.so")},children:"hi@onekey.so"})})})]}),confirmButtonProps:{variant:"primary"},onConfirmText:e.formatMessage({id:g.ETranslations.global_export}),onConfirm:function(){var e=(new Date).toISOString().replace(/[-:.]/g,"");(0,R.u)(`OneKeyLogs-${e}`)}})}),[t,e]);return(0,A.jsx)(S.c,{icon:"FileDownloadOutline",onPress:s,title:e.formatMessage({id:g.ETranslations.settings_export_state_logs}),drillIn:!0})};function ListVersionItem(){var e=(0,a.A)(),t=(0,$.SX)(),s=(0,o.useCallback)((function(){t.toUpdatePreviewPage()}),[t]);return t.isNeedUpdate?(0,A.jsx)(S.c,{onPress:s,icon:"InfoCircleOutline",iconProps:{color:"$textInfo"},title:e.formatMessage({id:g.ETranslations.settings_app_update_available}),titleProps:{color:"$textInfo"},drillIn:!0,children:(0,A.jsx)(S.c.Text,{primary:(0,A.jsx)(l.Badge,{badgeType:"info",badgeSize:"lg",children:t.data.latestVersion}),align:"right"})}):(0,A.jsx)(S.c,{onPress:t.onViewReleaseInfo,icon:"InfoCircleOutline",title:e.formatMessage({id:g.ETranslations.settings_whats_new}),drillIn:!0,children:(0,A.jsx)(S.c.Text,{primary:f.Ay.version,align:"right"})})}var ResourceSection=function(){var e=(0,z.P)({path:"articles/360002014776"}),t=(0,z.P)({path:"articles/360002003315"}),s=(0,z.P)({path:"requests/new"}),n=(0,z.P)({path:""}),i=(0,a.A)();return(0,A.jsxs)(Section,{title:i.formatMessage({id:g.ETranslations.settings_resources}),children:[(0,A.jsx)(ListVersionItem,{}),(0,A.jsx)(UrlExternalListItem,{icon:"HelpSupportOutline",title:i.formatMessage({id:g.ETranslations.settings_help_center}),url:n,drillIn:!0}),(0,A.jsx)(UrlExternalListItem,{icon:"EditOutline",title:i.formatMessage({id:g.ETranslations.settings_submit_request}),url:s,drillIn:!0}),(0,A.jsx)(RateAppItem,{}),(0,A.jsx)(UrlExternalListItem,{icon:"PeopleOutline",title:i.formatMessage({id:g.ETranslations.settings_user_agreement}),url:e,drillIn:!0}),(0,A.jsx)(UrlExternalListItem,{icon:"FileTextOutline",title:i.formatMessage({id:g.ETranslations.settings_privacy_policy}),url:t,drillIn:!0}),(0,A.jsx)(CustomNetworkConfigItem,{}),(0,A.jsx)(StateLogsItem,{})]})},V=s(215189),H=s(461483),K=s(222165),U=s(456628),W=s(15159),J=s(447479),G=s(318822),ClearCacheOnAppContent=function(){var e=(0,a.A)();return(0,A.jsx)(l.Dialog.Form,{formProps:{defaultValues:{tokenAndNFT:!0,transactionHistory:!0,swapHistory:!0,browserCache:!0,appUpdateCache:!0,browserHistory:!1,connectSites:!1,signatureRecord:!1,customToken:!1,customRpc:!1,serverNetworks:!1}},children:(0,A.jsxs)(l.Stack,{children:[(0,A.jsx)(l.Dialog.FormField,{name:"tokenAndNFT",children:(0,A.jsx)(l.Checkbox,{label:e.formatMessage({id:g.ETranslations.settings_token_nft_data})})}),(0,A.jsx)(l.Dialog.FormField,{name:"transactionHistory",children:(0,A.jsx)(l.Checkbox,{label:e.formatMessage({id:g.ETranslations.settings_transaction_history})})}),(0,A.jsx)(l.Dialog.FormField,{name:"swapHistory",children:(0,A.jsx)(l.Checkbox,{label:e.formatMessage({id:g.ETranslations.settings_swap_history})})}),(0,A.jsx)(l.Dialog.FormField,{name:"browserCache",children:(0,A.jsx)(l.Checkbox,{label:e.formatMessage({id:g.ETranslations.settings_browser_cache})})}),(0,A.jsx)(l.Dialog.FormField,{name:"appUpdateCache",children:(0,A.jsx)(l.Checkbox,{label:e.formatMessage({id:g.ETranslations.settings_app_update_cache})})}),(0,A.jsx)(l.Dialog.FormField,{name:"browserHistory",children:(0,A.jsx)(l.Checkbox,{label:e.formatMessage({id:g.ETranslations.settings_browser_history_bookmarks_pins_risk_dapp_whitelist}),labelProps:{flex:1}})}),(0,A.jsx)(l.Dialog.FormField,{name:"customToken",children:(0,A.jsx)(l.Checkbox,{label:e.formatMessage({id:g.ETranslations.manage_token_custom_token_title})})}),(0,A.jsx)(l.Dialog.FormField,{name:"customRpc",children:(0,A.jsx)(l.Checkbox,{label:e.formatMessage({id:g.ETranslations.custom_rpc_title})})}),(0,A.jsx)(l.Dialog.FormField,{name:"serverNetworks",children:(0,A.jsx)(l.Checkbox,{label:e.formatMessage({id:g.ETranslations.clear_build_in_networks_data})})}),(0,A.jsx)(l.Dialog.FormField,{name:"connectSites",children:(0,A.jsx)(l.Checkbox,{label:e.formatMessage({id:g.ETranslations.settings_connected_sites})})}),(0,A.jsx)(l.Dialog.FormField,{name:"signatureRecord",children:(0,A.jsx)(l.Checkbox,{label:e.formatMessage({id:g.ETranslations.settings_signature_record})})})]})})},CleanDataItem=function(){var{copyText:e}=(0,l.useClipboard)(),t=(0,a.A)(),s=(0,N.Q)();return(0,A.jsx)(l.ActionList,{offset:{mainAxis:-4,crossAxis:-10},title:t.formatMessage({id:g.ETranslations.settings_clear_data}),renderTrigger:(0,A.jsx)(S.c,{title:t.formatMessage({id:g.ETranslations.settings_clear_data}),icon:"FolderDeleteOutline",testID:"setting-clear-data",children:(0,A.jsx)(S.c.DrillIn,{name:"ChevronDownSmallOutline"})}),items:[{label:t.formatMessage({id:g.ETranslations.settings_clear_cache_on_app}),onPress:function(){l.Dialog.show({title:t.formatMessage({id:g.ETranslations.settings_clear_cache_on_app}),renderContent:(0,A.jsx)(ClearCacheOnAppContent,{}),tone:"destructive",confirmButtonProps:{disabledOn:function({getForm:e}){var{getValues:t}=e()||{};if(t){var s=t();return!Object.values(s).some((function(e){return Boolean(e)}))}return!0}},onConfirm:function(){var s=(0,m.A)((function*(s){var n=s.getForm()?.getValues();if(n&&(yield h.A.serviceSetting.clearCacheOnApp(n),l.Toast.success({title:t.formatMessage({id:g.ETranslations.global_success})}),n?.browserCache))if(f.Ay.isRuntimeChrome||f.Ay.isRuntimeEdge){var i="chrome://settings/clearBrowserData";f.Ay.isRuntimeEdge&&(i="edge://settings/clearBrowserData"),l.Dialog.show({title:t.formatMessage({id:g.ETranslations.settings_clear_browser_cache}),description:t.formatMessage({id:g.ETranslations.settings_clear_browser_cache_desc},{url:i}),onConfirm:function(){e(i)},showCancelButton:!1,confirmButtonProps:{variant:"primary",size:"large",icon:"Copy3Outline"},onConfirmText:t.formatMessage({id:g.ETranslations.global_copy})})}else l.Dialog.show({title:t.formatMessage({id:g.ETranslations.settings_clear_browser_cache}),description:t.formatMessage({id:g.ETranslations.settings_clear_browser_cache_desc2}),showCancelButton:!1,confirmButtonProps:{variant:"primary",size:"large",icon:"Copy1Outline"}})}));return function onConfirm(e){return s.apply(this,arguments)}}()})}},{label:t.formatMessage({id:g.ETranslations.settings_clear_pending_transactions}),onPress:function(){l.Dialog.show({title:t.formatMessage({id:g.ETranslations.settings_clear_pending_transactions}),description:t.formatMessage({id:g.ETranslations.settings_clear_pending_transactions_desc}),tone:"destructive",onConfirmText:t.formatMessage({id:g.ETranslations.global_clear}),onConfirm:function(){var e=(0,m.A)((function*(){yield h.A.serviceSetting.clearPendingTransaction(),G.iL.emit(G.Tu.ClearLocalHistoryPendingTxs,void 0),l.Toast.success({title:t.formatMessage({id:g.ETranslations.global_success})})}));return function onConfirm(){return e.apply(this,arguments)}}()})}},{label:t.formatMessage({id:g.ETranslations.settings_reset_app}),destructive:!0,onPress:s,testID:"setting-erase-data"}]})},AppAutoLockItem=function(){var[{isPasswordSet:e,appLockDuration:t}]=(0,U.MW)(),s=(0,_.A)(),n=(0,o.useCallback)((function(){s.push(P.Pj.SettingAppAutoLockModal)}),[s]),i=(0,a.A)(),r=(0,J.I)(),l=(0,o.useMemo)((function(){var e,s=r.find((function(e){return e.value===String(t)}));return null!=(e=s?.title)?e:""}),[r,t]);return e?(0,A.jsx)(S.c,{onPress:n,icon:"ClockTimeHistoryOutline",title:i.formatMessage({id:g.ETranslations.settings_auto_lock}),drillIn:!0,children:(0,A.jsx)(S.c.Text,{primary:l,align:"right"})}):null},SetPasswordItem=function(){var e=(0,a.A)();return(0,A.jsx)(S.c,{testID:"setting-set-password",onPress:function(){h.A.servicePassword.promptPasswordVerify()},icon:"KeyOutline",title:e.formatMessage({id:g.ETranslations.global_set_password}),drillIn:!0})},ChangePasswordItem=function(){var e=(0,a.A)(),t=(0,o.useCallback)((0,m.A)((function*(){var t=yield h.A.servicePassword.promptPasswordVerify({reason:W.a.Security}),s=l.Dialog.show({title:e.formatMessage({id:g.ETranslations.global_change_password}),renderContent:(0,A.jsx)(H.A,{oldEncodedPassword:t.password,onUpdateRes:function(){var e=(0,m.A)((function*(e){e&&(yield s.close())}));return function(t){return e.apply(this,arguments)}}()}),showFooter:!1})})),[e]);return(0,A.jsx)(S.c,{onPress:t,icon:"KeyOutline",title:e.formatMessage({id:g.ETranslations.global_change_password}),drillIn:!0})},PasswordItem=function(){var[{isPasswordSet:e}]=(0,U.MW)();return e?(0,A.jsx)(ChangePasswordItem,{}):(0,A.jsx)(SetPasswordItem,{})},FaceIdItem=function(){var[{isPasswordSet:e}]=(0,U.MW)(),[{isSupport:t,authType:s}]=(0,U.Bd)(),[{isSupport:n}]=(0,U.GZ)(),{title:i,icon:r}=(0,K.c)();return e&&(t||n)?(0,A.jsx)(S.c,{icon:r,title:i,children:(0,A.jsx)(V.V,{})}):null},ProtectionItem=function(){var e=(0,a.A)(),[{isPasswordSet:t}]=(0,U.MW)(),s=(0,_.A)(),n=(0,o.useCallback)((function(){s.push(P.Pj.SettingProtectModal)}),[s]);return t?(0,A.jsx)(S.c,{onPress:n,icon:"ShieldCheckDoneOutline",title:e.formatMessage({id:g.ETranslations.settings_protection}),drillIn:!0}):null},ConnectedSitesItem=function(){var e=(0,a.A)(),t=(0,_.A)(),s=(0,o.useCallback)((function(){t.pushModal(P.ry.DAppConnectionModal,{screen:P.EB.ConnectionList})}),[t]);return(0,A.jsx)(S.c,{title:e.formatMessage({id:g.ETranslations.settings_connected_sites}),icon:"LinkOutline",drillIn:!0,onPress:s})},SignatureRecordItem=function(){var e=(0,a.A)(),t=(0,_.A)(),s=(0,o.useCallback)((function(){t.push(P.Pj.SettingSignatureRecordModal)}),[t]);return(0,A.jsx)(S.c,{onPress:s,icon:"NoteOutline",title:e.formatMessage({id:g.ETranslations.settings_signature_record}),drillIn:!0})},SecuritySection=function(){var e=(0,a.A)();return(0,A.jsxs)(Section,{title:e.formatMessage({id:g.ETranslations.global_security}),children:[(0,A.jsx)(o.Suspense,{fallback:null,children:(0,A.jsx)(FaceIdItem,{})}),(0,A.jsx)(AppAutoLockItem,{}),(0,A.jsx)(PasswordItem,{}),f.Ay.isWebDappMode?null:(0,A.jsx)(ConnectedSitesItem,{}),(0,A.jsx)(SignatureRecordItem,{}),(0,A.jsx)(ProtectionItem,{}),(0,A.jsx)(CleanDataItem,{})]})},SocialButton=function({icon:e,url:t,text:s}){var n=(0,o.useCallback)((function(){(0,p.Dr)(t)}),[t]);return(0,A.jsx)(l.Tooltip,{renderTrigger:(0,A.jsx)(l.IconButton,{bg:"$bgSubdued",width:"$14",height:"$14",icon:e,borderRadius:"$full",onPress:n}),renderContent:s,placement:"top"})},SocialButtonGroup=function(){var e,t,s=(0,a.A)(),{copyText:n}=(0,l.useClipboard)(),[i]=(0,c.useAppUpdatePersistAtom)(),r=s.formatMessage({id:g.ETranslations.settings_version_versionnum},{versionNum:`${null!=(e=f.Ay.version)?e:""} ${null!=(t=f.Ay.buildNumber)?t:""}`}),p=(0,o.useCallback)((function(){v((function(){return n(`${r}-${f.Ay.githubSHA||""}`)}))}),[n,r]);return(0,A.jsxs)(l.YStack,{children:[(0,A.jsx)(l.XStack,{justifyContent:"center",children:(0,A.jsxs)(l.XStack,{gap:"$3",paddingVertical:"$3",my:"$3",children:[(0,A.jsx)(SocialButton,{icon:"OnekeyBrand",url:d.eG,text:s.formatMessage({id:g.ETranslations.global_official_website})}),(0,A.jsx)(SocialButton,{icon:"DiscordBrand",url:d.zp,text:s.formatMessage({id:g.ETranslations.global_discord})}),(0,A.jsx)(SocialButton,{icon:"Xbrand",url:d.Gz,text:s.formatMessage({id:g.ETranslations.global_x})}),(0,A.jsx)(SocialButton,{icon:"GithubBrand",url:d.Oe,text:s.formatMessage({id:g.ETranslations.global_github})})]})}),(0,A.jsxs)(l.YStack,{jc:"center",py:"$4",ai:"center",userSelect:"none",testID:"setting-version",children:[(0,A.jsx)(l.SizableText,{color:"$textSubdued",onPress:p,children:r}),i.status===u.ue.done?(0,A.jsx)(l.SizableText,{color:"$textSubdued",children:s.formatMessage({id:g.ETranslations.update_app_up_to_date})}):null]})]})};function SettingListModal(){var e=(0,a.A)(),{bottom:t}=(0,l.useSafeAreaInsets)();return(0,A.jsxs)(l.Page,{scrollEnabled:!0,safeAreaEnabled:!1,children:[(0,A.jsx)(l.Page.Header,{title:e.formatMessage({id:g.ETranslations.settings_settings})}),(0,A.jsxs)(l.Page.Body,{children:[(0,A.jsx)(T.B,{}),(0,A.jsx)(PreferenceSection,{}),(0,A.jsx)(SecuritySection,{}),(0,A.jsx)(AdvancedSection,{}),(0,A.jsx)(ResourceSection,{}),(0,A.jsx)(DevSettingsSection,{}),(0,A.jsx)(SocialButtonGroup,{}),t>0?(0,A.jsx)(l.Stack,{height:t||"$2"}):null]})]})}}}]);