"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[10172],{405405:(o,c,v)=>{function assign(o,c){if(null==o)throw new TypeError("assign requires that input parameter not be null or undefined");for(var v in c)Object.prototype.hasOwnProperty.call(c,v)&&(o[v]=c[v]);return o}v.d(c,{A:()=>assign})},639794:(o,c,v)=>{v.d(c,{A:()=>cloneObject});var d=v(405405);function cloneObject(o){return(0,d.A)({},o)}},724726:(o,c,v)=>{v.d(c,{A:()=>formatDistanceStrict});var d=v(766017),y=v(57641),_=v(247803),B=v(95286),z=v(639794),E=v(405405),R=v(372231),W=v(981092),O=6e4,G=1440,V=30*G,F=365*G;function formatDistanceStrict(o,c,v){var X,Y,J;(0,W.A)(2,arguments);var I=(0,d.q)(),Z=null!==(X=null!==(Y=null==v?void 0:v.locale)&&void 0!==Y?Y:I.locale)&&void 0!==X?X:R.A;if(!Z.formatDistance)throw new RangeError("locale must contain localize.formatDistance property");var K=(0,_.A)(o,c);if(isNaN(K))throw new RangeError("Invalid time value");var Q,$,tt=(0,E.A)((0,z.A)(v),{addSuffix:Boolean(null==v?void 0:v.addSuffix),comparison:K});K>0?(Q=(0,B.A)(c),$=(0,B.A)(o)):(Q=(0,B.A)(o),$=(0,B.A)(c));var nt,et=String(null!==(J=null==v?void 0:v.roundingMethod)&&void 0!==J?J:"round");if("floor"===et)nt=Math.floor;else if("ceil"===et)nt=Math.ceil;else{if("round"!==et)throw new RangeError("roundingMethod must be 'floor', 'ceil' or 'round'");nt=Math.round}var st,rt=$.getTime()-Q.getTime(),ot=rt/O,ut=(rt-((0,y.A)($)-(0,y.A)(Q)))/O,lt=null==v?void 0:v.unit;if("second"===(st=lt?String(lt):ot<1?"second":ot<60?"minute":ot<G?"hour":ut<V?"day":ut<F?"month":"year")){var ct=nt(rt/1e3);return Z.formatDistance("xSeconds",ct,tt)}if("minute"===st){var ft=nt(ot);return Z.formatDistance("xMinutes",ft,tt)}if("hour"===st){var pt=nt(ot/60);return Z.formatDistance("xHours",pt,tt)}if("day"===st){var yt=nt(ut/G);return Z.formatDistance("xDays",yt,tt)}if("month"===st){var gt=nt(ut/V);return 12===gt&&"month"!==lt?Z.formatDistance("xYears",1,tt):Z.formatDistance("xMonths",gt,tt)}if("year"===st){var mt=nt(ut/F);return Z.formatDistance("xYears",mt,tt)}throw new RangeError("unit must be 'second', 'minute', 'hour', 'day', 'month' or 'year'")}},584941:(o,c,v)=>{v.d(c,{A:()=>formatDistanceToNow});var d=v(766017),y=v(247803),_=v(28268),B=v(847245),z=v(981092),E=v(362622);var R=v(372231),W=v(95286),O=v(639794),G=v(405405),V=v(57641),F=1440,X=2520,Y=43200,J=86400;function formatDistance(o,c,v){var I,Z;(0,z.A)(2,arguments);var K=(0,d.q)(),Q=null!==(I=null!==(Z=null==v?void 0:v.locale)&&void 0!==Z?Z:K.locale)&&void 0!==I?I:R.A;if(!Q.formatDistance)throw new RangeError("locale must contain formatDistance property");var $=(0,y.A)(o,c);if(isNaN($))throw new RangeError("Invalid time value");var tt,nt,et=(0,G.A)((0,O.A)(v),{addSuffix:Boolean(null==v?void 0:v.addSuffix),comparison:$});$>0?(tt=(0,W.A)(c),nt=(0,W.A)(o)):(tt=(0,W.A)(o),nt=(0,W.A)(c));var st,rt=function differenceInSeconds(o,c,v){(0,z.A)(2,arguments);var d=(0,B.A)(o,c)/1e3;return(0,E.u)(null==v?void 0:v.roundingMethod)(d)}(nt,tt),ot=((0,V.A)(nt)-(0,V.A)(tt))/1e3,ut=Math.round((rt-ot)/60);if(ut<2)return null!=v&&v.includeSeconds?rt<5?Q.formatDistance("lessThanXSeconds",5,et):rt<10?Q.formatDistance("lessThanXSeconds",10,et):rt<20?Q.formatDistance("lessThanXSeconds",20,et):rt<40?Q.formatDistance("halfAMinute",0,et):rt<60?Q.formatDistance("lessThanXMinutes",1,et):Q.formatDistance("xMinutes",1,et):0===ut?Q.formatDistance("lessThanXMinutes",1,et):Q.formatDistance("xMinutes",ut,et);if(ut<45)return Q.formatDistance("xMinutes",ut,et);if(ut<90)return Q.formatDistance("aboutXHours",1,et);if(ut<F){var lt=Math.round(ut/60);return Q.formatDistance("aboutXHours",lt,et)}if(ut<X)return Q.formatDistance("xDays",1,et);if(ut<Y){var ct=Math.round(ut/F);return Q.formatDistance("xDays",ct,et)}if(ut<J)return st=Math.round(ut/Y),Q.formatDistance("aboutXMonths",st,et);if((st=(0,_.A)(nt,tt))<12){var ft=Math.round(ut/Y);return Q.formatDistance("xMonths",ft,et)}var pt=st%12,yt=Math.floor(st/12);return pt<3?Q.formatDistance("aboutXYears",yt,et):pt<9?Q.formatDistance("overXYears",yt,et):Q.formatDistance("almostXYears",yt+1,et)}function formatDistanceToNow(o,c){return(0,z.A)(1,arguments),formatDistance(o,Date.now(),c)}},121684:(o,c,v)=>{v.d(c,{A:()=>formatDuration});var d=v(766017),y=v(372231),_=["years","months","weeks","days","hours","minutes","seconds"];function formatDuration(o,c){var v,B,z,E,R;if(arguments.length<1)throw new TypeError("1 argument required, but only ".concat(arguments.length," present"));var W=(0,d.q)(),O=null!==(v=null!==(B=null==c?void 0:c.locale)&&void 0!==B?B:W.locale)&&void 0!==v?v:y.A,G=null!==(z=null==c?void 0:c.format)&&void 0!==z?z:_,V=null!==(E=null==c?void 0:c.zero)&&void 0!==E&&E,F=null!==(R=null==c?void 0:c.delimiter)&&void 0!==R?R:" ";return O.formatDistance?G.reduce((function(c,v){var d="x".concat(v.replace(/(^.)/,(function(o){return o.toUpperCase()}))),y=o[v];return"number"==typeof y&&(V||o[v])?c.concat(O.formatDistance(d,y)):c}),[]).join(F):""}},223946:(o,c,v)=>{v.d(c,{R9:()=>Ls});var d={allowDownsampling:!0};var y,_,B,z=function(){function DevicePixelRatioBinding(o,c){var v=this;this._resolutionMediaQueryList=null,this._resolutionListener=function(o){return v._onResolutionChanged()},this._canvasConfiguredListeners=[],this.canvas=o,this._canvasSize={width:this.canvas.clientWidth,height:this.canvas.clientHeight},this._options=c,this._configureCanvas(),this._installResolutionListener()}return DevicePixelRatioBinding.prototype.destroy=function(){this._canvasConfiguredListeners.length=0,this._uninstallResolutionListener(),this.canvas=null},Object.defineProperty(DevicePixelRatioBinding.prototype,"canvasSize",{get:function(){return{width:this._canvasSize.width,height:this._canvasSize.height}},enumerable:!0,configurable:!0}),DevicePixelRatioBinding.prototype.resizeCanvas=function(o){this._canvasSize={width:o.width,height:o.height},this._configureCanvas()},Object.defineProperty(DevicePixelRatioBinding.prototype,"pixelRatio",{get:function(){var o=this.canvas.ownerDocument.defaultView;if(null==o)throw new Error("No window is associated with the canvas");return o.devicePixelRatio>1||this._options.allowDownsampling?o.devicePixelRatio:1},enumerable:!0,configurable:!0}),DevicePixelRatioBinding.prototype.subscribeCanvasConfigured=function(o){this._canvasConfiguredListeners.push(o)},DevicePixelRatioBinding.prototype.unsubscribeCanvasConfigured=function(o){this._canvasConfiguredListeners=this._canvasConfiguredListeners.filter((function(c){return c!=o}))},DevicePixelRatioBinding.prototype._configureCanvas=function(){var o=this.pixelRatio;this.canvas.style.width=this._canvasSize.width+"px",this.canvas.style.height=this._canvasSize.height+"px",this.canvas.width=this._canvasSize.width*o,this.canvas.height=this._canvasSize.height*o,this._emitCanvasConfigured()},DevicePixelRatioBinding.prototype._emitCanvasConfigured=function(){var o=this;this._canvasConfiguredListeners.forEach((function(c){return c.call(o)}))},DevicePixelRatioBinding.prototype._installResolutionListener=function(){if(null!==this._resolutionMediaQueryList)throw new Error("Resolution listener is already installed");var o=this.canvas.ownerDocument.defaultView;if(null==o)throw new Error("No window is associated with the canvas");var c=o.devicePixelRatio;this._resolutionMediaQueryList=o.matchMedia("all and (resolution: "+c+"dppx)"),this._resolutionMediaQueryList.addListener(this._resolutionListener)},DevicePixelRatioBinding.prototype._uninstallResolutionListener=function(){null!==this._resolutionMediaQueryList&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},DevicePixelRatioBinding.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},DevicePixelRatioBinding.prototype._onResolutionChanged=function(){this._configureCanvas(),this._reinstallResolutionListener()},DevicePixelRatioBinding}();function s(o,c){var v,d=((v={})[0]=[],v[1]=[o.lineWidth,o.lineWidth],v[2]=[2*o.lineWidth,2*o.lineWidth],v[3]=[6*o.lineWidth,6*o.lineWidth],v[4]=[o.lineWidth,4*o.lineWidth],v)[c];o.setLineDash(d)}function h(o,c,v,d){o.beginPath();var y=o.lineWidth%2?.5:0;o.moveTo(v,c+y),o.lineTo(d,c+y),o.stroke()}function r(o,c){if(!o)throw new Error("Assertion failed"+(c?": "+c:""))}function e(o){if(void 0===o)throw new Error("Value is undefined");return o}function u(o){if(null===o)throw new Error("Value is null");return o}function a(o){return u(e(o))}(B=y||(y={}))[B.Simple=0]="Simple",B[B.WithSteps=1]="WithSteps",function(o){o[o.Solid=0]="Solid",o[o.Dotted=1]="Dotted",o[o.Dashed=2]="Dashed",o[o.LargeDashed=3]="LargeDashed",o[o.SparseDotted=4]="SparseDotted"}(_||(_={}));var E={khaki:"#f0e68c",azure:"#f0ffff",aliceblue:"#f0f8ff",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",gray:"#808080",green:"#008000",honeydew:"#f0fff0",floralwhite:"#fffaf0",lightblue:"#add8e6",lightcoral:"#f08080",lemonchiffon:"#fffacd",hotpink:"#ff69b4",lightyellow:"#ffffe0",greenyellow:"#adff2f",lightgoldenrodyellow:"#fafad2",limegreen:"#32cd32",linen:"#faf0e6",lightcyan:"#e0ffff",magenta:"#f0f",maroon:"#800000",olive:"#808000",orange:"#ffa500",oldlace:"#fdf5e6",mediumblue:"#0000cd",transparent:"#0000",lime:"#0f0",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",midnightblue:"#191970",orchid:"#da70d6",mediumorchid:"#ba55d3",mediumturquoise:"#48d1cc",orangered:"#ff4500",royalblue:"#4169e1",powderblue:"#b0e0e6",red:"#f00",coral:"#ff7f50",turquoise:"#40e0d0",white:"#fff",whitesmoke:"#f5f5f5",wheat:"#f5deb3",teal:"#008080",steelblue:"#4682b4",bisque:"#ffe4c4",aquamarine:"#7fffd4",aqua:"#0ff",sienna:"#a0522d",silver:"#c0c0c0",springgreen:"#00ff7f",antiquewhite:"#faebd7",burlywood:"#deb887",brown:"#a52a2a",beige:"#f5f5dc",chocolate:"#d2691e",chartreuse:"#7fff00",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cadetblue:"#5f9ea0",tomato:"#ff6347",fuchsia:"#f0f",blue:"#00f",salmon:"#fa8072",blanchedalmond:"#ffebcd",slateblue:"#6a5acd",slategray:"#708090",thistle:"#d8bfd8",tan:"#d2b48c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",blueviolet:"#8a2be2",black:"#000",darkmagenta:"#8b008b",darkslateblue:"#483d8b",darkkhaki:"#bdb76b",darkorchid:"#9932cc",darkorange:"#ff8c00",darkgreen:"#006400",darkred:"#8b0000",dodgerblue:"#1e90ff",darkslategray:"#2f4f4f",dimgray:"#696969",deepskyblue:"#00bfff",firebrick:"#b22222",forestgreen:"#228b22",indigo:"#4b0082",ivory:"#fffff0",lavenderblush:"#fff0f5",feldspar:"#d19275",indianred:"#cd5c5c",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightskyblue:"#87cefa",lightslategray:"#789",lightslateblue:"#8470ff",snow:"#fffafa",lightseagreen:"#20b2aa",lightsalmon:"#ffa07a",darksalmon:"#e9967a",darkviolet:"#9400d3",mediumpurple:"#9370d8",mediumaquamarine:"#66cdaa",skyblue:"#87ceeb",lavender:"#e6e6fa",lightsteelblue:"#b0c4de",mediumvioletred:"#c71585",mintcream:"#f5fffa",navajowhite:"#ffdead",navy:"#000080",olivedrab:"#6b8e23",palevioletred:"#d87093",violetred:"#d02090",yellow:"#ff0",yellowgreen:"#9acd32",lawngreen:"#7cfc00",pink:"#ffc0cb",paleturquoise:"#afeeee",palegoldenrod:"#eee8aa",darkolivegreen:"#556b2f",darkseagreen:"#8fbc8f",darkturquoise:"#00ced1",peachpuff:"#ffdab9",deeppink:"#ff1493",violet:"#ee82ee",palegreen:"#98fb98",mediumseagreen:"#3cb371",peru:"#cd853f",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",purple:"#800080",seagreen:"#2e8b57",seashell:"#fff5ee",papayawhip:"#ffefd5",mediumslateblue:"#7b68ee",plum:"#dda0dd",mediumspringgreen:"#00fa9a"};function l(o){return o<0?0:o>255?255:Math.round(o)||0}function f(o){return o<=0||o>0?o<0?0:o>1?1:Math.round(1e4*o)/1e4:0}var R=/^#([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])?$/i,W=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i,O=/^rgb\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*\)$/,G=/^rgba\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?[\d]{0,10}(?:\.\d+)?)\s*\)$/;function w(o){var c;if((o=o.toLowerCase())in E&&(o=E[o]),c=G.exec(o)||O.exec(o))return[l(parseInt(c[1],10)),l(parseInt(c[2],10)),l(parseInt(c[3],10)),f(c.length<5?1:parseFloat(c[4]))];if(c=W.exec(o))return[l(parseInt(c[1],16)),l(parseInt(c[2],16)),l(parseInt(c[3],16)),1];if(c=R.exec(o))return[l(17*parseInt(c[1],16)),l(17*parseInt(c[2],16)),l(17*parseInt(c[3],16)),1];throw new Error("Cannot parse color: ".concat(o))}function M(o){var c,v=w(o);return{t:"rgb(".concat(v[0],", ").concat(v[1],", ").concat(v[2],")"),i:(c=v,.199*c[0]+.687*c[1]+.114*c[2]>160?"black":"white")}}var b=function(o,c){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,c){o.__proto__=c}||function(o,c){for(var v in c)Object.prototype.hasOwnProperty.call(c,v)&&(o[v]=c[v])},b(o,c)};function m(o,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function n(){this.constructor=o}b(o,c),o.prototype=null===c?Object.create(c):(n.prototype=c.prototype,new n)}var p=function(){return p=Object.assign||function(o){for(var c,v=1,d=arguments.length;v<d;v++)for(var y in c=arguments[v])Object.prototype.hasOwnProperty.call(c,y)&&(o[y]=c[y]);return o},p.apply(this,arguments)};function g(o,c,v){if(v||2===arguments.length)for(var d,y=0,_=c.length;y<_;y++)!d&&y in c||(d||(d=Array.prototype.slice.call(c,0,y)),d[y]=c[y]);return o.concat(d||Array.prototype.slice.call(c))}var V=function(){function t(){this.h=[]}return t.prototype.u=function(o,c,v){var d={o,l:c,v:!0===v};this.h.push(d)},t.prototype._=function(o){var c=this.h.findIndex((function(c){return o===c.o}));c>-1&&this.h.splice(c,1)},t.prototype.M=function(o){this.h=this.h.filter((function(c){return c.l!==o}))},t.prototype.m=function(o,c){var v=g([],this.h,!0);this.h=this.h.filter((function(o){return!o.v})),v.forEach((function(v){return v.o(o,c)}))},t.prototype.p=function(){return this.h.length>0},t.prototype.g=function(){this.h=[]},t}();function k(o){for(var c=[],v=1;v<arguments.length;v++)c[v-1]=arguments[v];for(var d=0,y=c;d<y.length;d++){var _=y[d];for(var B in _)void 0!==_[B]&&("object"!=typeof _[B]||void 0===o[B]?o[B]=_[B]:k(o[B],_[B]))}return o}function N(o){return"number"==typeof o&&isFinite(o)}function x(o){return"number"==typeof o&&o%1==0}function C(o){return"string"==typeof o}function S(o){return"boolean"==typeof o}function T(o){var c,v,d,y=o;if(!y||"object"!=typeof y)return y;for(v in c=Array.isArray(y)?[]:{},y)y.hasOwnProperty(v)&&(d=y[v],c[v]=d&&"object"==typeof d?T(d):d);return c}function D(o){return null!==o}function A(o){return null===o?void 0:o}var F="'Trebuchet MS', Roboto, Ubuntu, sans-serif";function L(o,c,v){return v=void 0!==v?"".concat(v," "):"",void 0===c&&(c=F),"".concat(v).concat(o,"px ").concat(c)}var X=function(){function t(o){this.k={N:1,C:4,S:NaN,T:"",D:"",A:"",B:0,L:0,F:0,O:0,V:0},this.P=o}return t.prototype.W=function(){var o=this.k,c=this.R(),v=this.I();return o.S===c&&o.D===v||(o.S=c,o.D=v,o.T=L(c,v),o.O=Math.floor(c/3.5),o.B=o.O,o.L=Math.max(Math.ceil(c/2-o.C/2),0),o.F=Math.ceil(c/2+o.C/2),o.V=Math.round(c/10)),o.A=this.j(),this.k},t.prototype.j=function(){return this.P.W().layout.textColor},t.prototype.R=function(){return this.P.W().layout.fontSize},t.prototype.I=function(){return this.P.W().layout.fontFamily},t}(),Y=function(){function t(){this.q=[]}return t.prototype.U=function(o){this.q=o},t.prototype.H=function(o,c,v,d){this.q.forEach((function(y){o.save(),y.H(o,c,v,d),o.restore()}))},t}(),J=function(){function t(){}return t.prototype.H=function(o,c,v,d){o.save(),o.scale(c,c),this.Y(o,v,d),o.restore()},t.prototype.$=function(o,c,v,d){o.save(),o.scale(c,c),this.K(o,v,d),o.restore()},t.prototype.K=function(o,c,v){},t}(),I=function(o){function i(){var c=null!==o&&o.apply(this,arguments)||this;return c.X=null,c}return m(i,o),i.prototype.Z=function(o){this.X=o},i.prototype.Y=function(o){if(null!==this.X&&null!==this.X.J){var c=this.X.J,v=this.X,s=function(d){o.beginPath();for(var y=c.to-1;y>=c.from;--y){var _=v.G[y];o.moveTo(_.tt,_.it),o.arc(_.tt,_.it,d,0,2*Math.PI)}o.fill()};o.fillStyle=v.nt,s(v.st+2),o.fillStyle=v.ht,s(v.st)}},i}(J);function P(){return{G:[{tt:0,it:0,rt:0,et:0}],ht:"",nt:"",st:0,J:null}}var Z={from:0,to:1},K=function(){function t(o,c){this.ut=new Y,this.ot=[],this.lt=[],this.ft=!0,this.P=o,this.ct=c,this.ut.U(this.ot)}return t.prototype.vt=function(o){var c=this.P._t();c.length!==this.ot.length&&(this.lt=c.map(P),this.ot=this.lt.map((function(o){var c=new I;return c.Z(o),c})),this.ut.U(this.ot)),this.ft=!0},t.prototype.dt=function(o,c,v){return this.ft&&(this.wt(o),this.ft=!1),this.ut},t.prototype.wt=function(o){var c=this,v=this.P._t(),d=this.ct.Mt(),y=this.P.bt();v.forEach((function(v,_){var B,z=c.lt[_],E=v.gt(d);if(null!==E&&v.yt()){var R=u(v.kt());z.ht=E.Nt,z.st=E.st,z.G[0].et=E.et,z.G[0].it=v.Ct().xt(E.et,R.St),z.nt=null!==(B=E.Tt)&&void 0!==B?B:c.P.Dt(z.G[0].it/o),z.G[0].rt=d,z.G[0].tt=y.At(d),z.J=Z}else z.J=null}))},t}(),Q=function(){function t(o){this.Bt=o}return t.prototype.H=function(o,c,v,d){if(null!==this.Bt){var y=this.Bt.Lt.yt,_=this.Bt.Et.yt;if(y||_){o.save();var B=Math.round(this.Bt.tt*c),z=Math.round(this.Bt.it*c),E=Math.ceil(this.Bt.Ft*c),R=Math.ceil(this.Bt.Ot*c);o.lineCap="butt",y&&B>=0&&(o.lineWidth=Math.floor(this.Bt.Lt.Vt*c),o.strokeStyle=this.Bt.Lt.A,o.fillStyle=this.Bt.Lt.A,s(o,this.Bt.Lt.Pt),function(o,c,v,d){o.beginPath();var y=o.lineWidth%2?.5:0;o.moveTo(c+y,0),o.lineTo(c+y,d),o.stroke()}(o,B,0,R)),_&&z>=0&&(o.lineWidth=Math.floor(this.Bt.Et.Vt*c),o.strokeStyle=this.Bt.Et.A,o.fillStyle=this.Bt.Et.A,s(o,this.Bt.Et.Pt),h(o,z,0,E)),o.restore()}}},t}(),$=function(){function t(o){this.ft=!0,this.Wt={Lt:{Vt:1,Pt:0,A:"",yt:!1},Et:{Vt:1,Pt:0,A:"",yt:!1},Ft:0,Ot:0,tt:0,it:0},this.zt=new Q(this.Wt),this.Rt=o}return t.prototype.vt=function(){this.ft=!0},t.prototype.dt=function(o,c){return this.ft&&(this.wt(),this.ft=!1),this.zt},t.prototype.wt=function(){var o=this.Rt.yt(),c=u(this.Rt.It()),v=c.jt().W().crosshair,d=this.Wt;d.Et.yt=o&&this.Rt.qt(c),d.Lt.yt=o&&this.Rt.Ut(),d.Et.Vt=v.horzLine.width,d.Et.Pt=v.horzLine.style,d.Et.A=v.horzLine.color,d.Lt.Vt=v.vertLine.width,d.Lt.Pt=v.vertLine.style,d.Lt.A=v.vertLine.color,d.Ft=c.Ht(),d.Ot=c.Yt(),d.tt=this.Rt.$t(),d.it=this.Rt.Kt()},t}();function j(o,c,v,d,y,_){o.fillRect(c+_,v,d-2*_,_),o.fillRect(c+_,v+y-_,d-2*_,_),o.fillRect(c,v,_,y),o.fillRect(c+d-_,v,_,y)}function q(o,c,v){o.save(),o.scale(c,c),v(),o.restore()}function U(o,c,v,d,y,_){o.save(),o.globalCompositeOperation="copy",o.fillStyle=_,o.fillRect(c,v,d,y),o.restore()}function H(o,c,v,d,y,_,B){o.save(),o.globalCompositeOperation="copy";var z=o.createLinearGradient(0,0,0,y);z.addColorStop(0,_),z.addColorStop(1,B),o.fillStyle=z,o.fillRect(c,v,d,y),o.restore()}var tt,nt=function(){function t(o,c){this.Z(o,c)}return t.prototype.Z=function(o,c){this.Bt=o,this.Xt=c},t.prototype.H=function(o,c,v,d,y,_){if(this.Bt.yt){o.font=c.T;var B=this.Bt.Zt||!this.Bt.Jt?c.C:0,z=c.N,E=c.O,R=c.B,W=c.L,O=c.F,G=this.Bt.Gt,V=Math.ceil(v.Qt(o,G)),F=c.V,X=c.S+E+R,Y=Math.ceil(.5*X),J=z+V+W+O+B,I=this.Xt.ti;this.Xt.ii&&(I=this.Xt.ii);var Z,K,Q=(I=Math.round(I))-Y,$=Q+X,tt="right"===y,nt=tt?d:0,et=Math.ceil(d*_),st=nt;if(o.fillStyle=this.Xt.t,o.lineWidth=1,o.lineCap="butt",G){tt?(Z=nt-B,K=(st=nt-J)+O):(st=nt+J,Z=nt+B,K=nt+z+B+W);var rt=Math.max(1,Math.floor(_)),ot=Math.max(1,Math.floor(z*_)),ut=tt?et:0,lt=Math.round(Q*_),ct=Math.round(st*_),ft=Math.round(I*_)-Math.floor(.5*_),pt=ft+rt+(ft-lt),yt=Math.round(Z*_);o.save(),o.beginPath(),o.moveTo(ut,lt),o.lineTo(ct,lt),o.lineTo(ct,pt),o.lineTo(ut,pt),o.fill(),o.fillStyle=this.Bt.Tt,o.fillRect(tt?et-ot:0,lt,ot,pt-lt),this.Bt.Zt&&(o.fillStyle=this.Xt.A,o.fillRect(ut,ft,yt-ut,rt)),o.textAlign="left",o.fillStyle=this.Xt.A,q(o,_,(function(){o.fillText(G,K,$-R-F)})),o.restore()}}},t.prototype.Yt=function(o,c){return this.Bt.yt?o.S+o.O+o.B:0},t}(),et=function(){function t(o){this.ni={ti:0,A:"#FFF",t:"#000"},this.si={Gt:"",yt:!1,Zt:!0,Jt:!1,Tt:""},this.hi={Gt:"",yt:!1,Zt:!1,Jt:!0,Tt:""},this.ft=!0,this.ri=new(o||nt)(this.si,this.ni),this.ei=new(o||nt)(this.hi,this.ni)}return t.prototype.Gt=function(){return this.ui(),this.si.Gt},t.prototype.ti=function(){return this.ui(),this.ni.ti},t.prototype.vt=function(){this.ft=!0},t.prototype.Yt=function(o,c){return void 0===c&&(c=!1),Math.max(this.ri.Yt(o,c),this.ei.Yt(o,c))},t.prototype.ai=function(){return this.ni.ii||0},t.prototype.oi=function(o){this.ni.ii=o},t.prototype.li=function(){return this.ui(),this.si.yt||this.hi.yt},t.prototype.fi=function(){return this.ui(),this.si.yt},t.prototype.dt=function(o){return this.ui(),this.si.Zt=this.si.Zt&&o.W().drawTicks,this.hi.Zt=this.hi.Zt&&o.W().drawTicks,this.ri.Z(this.si,this.ni),this.ei.Z(this.hi,this.ni),this.ri},t.prototype.ci=function(){return this.ui(),this.ri.Z(this.si,this.ni),this.ei.Z(this.hi,this.ni),this.ei},t.prototype.ui=function(){this.ft&&(this.si.Zt=!0,this.hi.Zt=!1,this.vi(this.si,this.hi,this.ni))},t}(),st=function(o){function i(c,v,d){var y=o.call(this)||this;return y.Rt=c,y._i=v,y.di=d,y}return m(i,o),i.prototype.vi=function(o,c,v){o.yt=!1;var d=this.Rt.W().horzLine;if(d.labelVisible){var y=this._i.kt();if(this.Rt.yt()&&!this._i.wi()&&null!==y){var _=M(d.labelBackgroundColor);v.t=_.t,v.A=_.i;var B=this.di(this._i);v.ti=B.ti,o.Gt=this._i.Mi(B.et,y),o.yt=!0}}},i}(et),rt=/[1-9]/g,ot=function(){function t(){this.Bt=null}return t.prototype.Z=function(o){this.Bt=o},t.prototype.H=function(o,c,v){var d=this;if(null!==this.Bt&&!1!==this.Bt.yt&&0!==this.Bt.Gt.length){o.font=c.T;var y=Math.round(c.bi.Qt(o,this.Bt.Gt,rt));if(!(y<=0)){o.save();var _=c.mi,B=y+2*_,z=B/2,E=this.Bt.Ht,R=this.Bt.ti,W=Math.floor(R-z)+.5;W<0?(R+=Math.abs(0-W),W=Math.floor(R-z)+.5):W+B>E&&(R-=Math.abs(E-(W+B)),W=Math.floor(R-z)+.5);var O=W+B,G=0+c.N+c.O+c.S+c.B;o.fillStyle=this.Bt.t;var V=Math.round(W*v),F=Math.round(0*v),X=Math.round(O*v),Y=Math.round(G*v);o.fillRect(V,F,X-V,Y-F);var J=Math.round(this.Bt.ti*v),I=F,Z=Math.round((I+c.N+c.C)*v);o.fillStyle=this.Bt.A;var K=Math.max(1,Math.floor(v)),Q=Math.floor(.5*v);o.fillRect(J-Q,I,K,Z-I);var $=G-c.V-c.B;o.textAlign="left",o.fillStyle=this.Bt.A,q(o,v,(function(){o.fillText(u(d.Bt).Gt,W+_,$)})),o.restore()}}},t}(),ut=function(){function t(o,c,v){this.ft=!0,this.zt=new ot,this.Wt={yt:!1,t:"#4c525e",A:"white",Gt:"",Ht:0,ti:NaN},this.ct=o,this.pi=c,this.di=v}return t.prototype.vt=function(){this.ft=!0},t.prototype.dt=function(){return this.ft&&(this.wt(),this.ft=!1),this.zt.Z(this.Wt),this.zt},t.prototype.wt=function(){var o=this.Wt;o.yt=!1;var c=this.ct.W().vertLine;if(c.labelVisible){var v=this.pi.bt();if(!v.wi()){var d=v.gi(this.ct.Mt());o.Ht=v.Ht();var y=this.di();if(y.rt){o.ti=y.ti,o.Gt=v.yi(u(d)),o.yt=!0;var _=M(c.labelBackgroundColor);o.t=_.t,o.A=_.i}}}},t}(),lt=function(){function t(){this.ki=null,this.Ni=0}return t.prototype.xi=function(){return this.Ni},t.prototype.Ci=function(o){this.Ni=o},t.prototype.Ct=function(){return this.ki},t.prototype.Si=function(o){this.ki=o},t.prototype.Ti=function(){return[]},t.prototype.yt=function(){return!0},t}();!function(o){o[o.Normal=0]="Normal",o[o.Magnet=1]="Magnet"}(tt||(tt={}));var ct=function(o){function i(c,v){var d,y,_=o.call(this)||this;_.Di=null,_.Ai=NaN,_.Bi=0,_.Li=!0,_.Ei=new Map,_.Fi=!1,_.Oi=NaN,_.Vi=NaN,_.Pi=NaN,_.Wi=NaN,_.pi=c,_.zi=v,_.Ri=new K(c,_),_.Ii=(d=function(){return _.Ai},y=function(){return _.Vi},function(o){var c=y(),v=d();if(o===u(_.Di).ji())return{et:v,ti:c};var B=u(o.kt());return{et:o.qi(c,B),ti:c}});var e=function(){return{rt:_.pi.bt().gi(_.Bi),ti:_.$t()}};return _.Ui=new ut(_,c,e),_.Hi=new $(_),_}return m(i,o),i.prototype.W=function(){return this.zi},i.prototype.Yi=function(o,c){this.Pi=o,this.Wi=c},i.prototype.$i=function(){this.Pi=NaN,this.Wi=NaN},i.prototype.Ki=function(){return this.Pi},i.prototype.Xi=function(){return this.Wi},i.prototype.Zi=function(o,c,v){this.Fi||(this.Fi=!0),this.Li=!0,this.Ji(o,c,v)},i.prototype.Mt=function(){return this.Bi},i.prototype.$t=function(){return this.Oi},i.prototype.Kt=function(){return this.Vi},i.prototype.yt=function(){return this.Li},i.prototype.Gi=function(){this.Li=!1,this.Qi(),this.Ai=NaN,this.Oi=NaN,this.Vi=NaN,this.Di=null,this.$i()},i.prototype.tn=function(o){return null!==this.Di?[this.Hi,this.Ri]:[]},i.prototype.qt=function(o){return o===this.Di&&this.zi.horzLine.visible},i.prototype.Ut=function(){return this.zi.vertLine.visible},i.prototype.nn=function(o,c){this.Li&&this.Di===o||this.Ei.clear();var v=[];return this.Di===o&&v.push(this.sn(this.Ei,c,this.Ii)),v},i.prototype.Ti=function(){return this.Li?[this.Ui]:[]},i.prototype.It=function(){return this.Di},i.prototype.hn=function(){this.Hi.vt(),this.Ei.forEach((function(o){return o.vt()})),this.Ui.vt(),this.Ri.vt()},i.prototype.rn=function(o){return o&&!o.ji().wi()?o.ji():null},i.prototype.Ji=function(o,c,v){this.en(o,c,v)&&this.hn()},i.prototype.en=function(o,c,v){var d=this.Oi,y=this.Vi,_=this.Ai,B=this.Bi,z=this.Di,E=this.rn(v);this.Bi=o,this.Oi=isNaN(o)?NaN:this.pi.bt().At(o),this.Di=v;var R=null!==E?E.kt():null;return null!==E&&null!==R?(this.Ai=c,this.Vi=E.xt(c,R)):(this.Ai=NaN,this.Vi=NaN),d!==this.Oi||y!==this.Vi||B!==this.Bi||_!==this.Ai||z!==this.Di},i.prototype.Qi=function(){var o=this.pi._t().map((function(o){return o.an().un()})).filter(D),c=0===o.length?null:Math.max.apply(Math,o);this.Bi=null!==c?c:NaN},i.prototype.sn=function(o,c,v){var d=o.get(c);return void 0===d&&(d=new st(this,c,v),o.set(c,d)),d},i}(lt);function it(o){return"left"===o||"right"===o}var ft=function(){function t(o){this.on=new Map,this.ln=[],this.fn=o}return t.prototype.cn=function(o,c){var v=function(o,c){return void 0===o?c:{vn:Math.max(o.vn,c.vn),_n:o._n||c._n}}(this.on.get(o),c);this.on.set(o,v)},t.prototype.dn=function(){return this.fn},t.prototype.wn=function(o){var c=this.on.get(o);return void 0===c?{vn:this.fn}:{vn:Math.max(this.fn,c.vn),_n:c._n}},t.prototype.Mn=function(){this.ln=[{bn:0}]},t.prototype.mn=function(o){this.ln=[{bn:1,St:o}]},t.prototype.pn=function(){this.ln=[{bn:4}]},t.prototype.gn=function(o){this.ln.push({bn:2,St:o})},t.prototype.yn=function(o){this.ln.push({bn:3,St:o})},t.prototype.kn=function(){return this.ln},t.prototype.Nn=function(o){for(var c=this,v=0,d=o.ln;v<d.length;v++){var y=d[v];this.xn(y)}this.fn=Math.max(this.fn,o.fn),o.on.forEach((function(o,v){c.cn(v,o)}))},t.prototype.xn=function(o){switch(o.bn){case 0:this.Mn();break;case 1:this.mn(o.St);break;case 2:this.gn(o.St);break;case 3:this.yn(o.St);break;case 4:this.pn()}},t}();function ht(o,c){if(!N(o))return"n/a";if(!x(c))throw new TypeError("invalid length");if(c<0||c>16)throw new TypeError("invalid length");return 0===c?o.toString():("0000000000000000"+o.toString()).slice(-c)}var pt=function(){function t(o,c){if(c||(c=1),N(o)&&x(o)||(o=100),o<0)throw new TypeError("invalid base");this._i=o,this.Cn=c,this.Sn()}return t.prototype.format=function(o){var c=o<0?"−":"";return o=Math.abs(o),c+this.Tn(o)},t.prototype.Sn=function(){if(this.Dn=0,this._i>0&&this.Cn>0)for(var o=this._i;o>1;)o/=10,this.Dn++},t.prototype.Tn=function(o){var c=this._i/this.Cn,v=Math.floor(o),d="",y=void 0!==this.Dn?this.Dn:NaN;if(c>1){var _=+(Math.round(o*c)-v*c).toFixed(this.Dn);_>=c&&(_-=c,v+=1),d="."+ht(+_.toFixed(this.Dn)*this.Cn,y)}else v=Math.round(v*c)/c,y>0&&(d="."+ht(0,y));return v.toFixed(0)+d},t}(),yt=function(o){function i(c){return void 0===c&&(c=100),o.call(this,c)||this}return m(i,o),i.prototype.format=function(c){return"".concat(o.prototype.format.call(this,c),"%")},i}(pt),gt=function(){function t(o){this.An=o}return t.prototype.format=function(o){var c="";return o<0&&(c="-",o=-o),o<995?c+this.Bn(o):o<999995?c+this.Bn(o/1e3)+"K":o<999999995?(o=1e3*Math.round(o/1e3),c+this.Bn(o/1e6)+"M"):(o=1e6*Math.round(o/1e6),c+this.Bn(o/1e9)+"B")},t.prototype.Bn=function(o){var c=Math.pow(10,this.An);return((o=Math.round(o*c)/c)>=1e-15&&o<1?o.toFixed(this.An).replace(/\.?0+$/,""):String(o)).replace(/(\.[1-9]*)0+$/,(function(o,c){return c}))},t}();function at(o,c,v,d){if(0!==c.length){var y=c[d.from].tt,_=c[d.from].it;o.moveTo(y,_);for(var B=d.from+1;B<d.to;++B){var z=c[B];if(1===v){var E=c[B-1].it,R=z.tt;o.lineTo(R,E)}o.lineTo(z.tt,z.it)}}}var mt=function(o){function i(){var c=null!==o&&o.apply(this,arguments)||this;return c.X=null,c}return m(i,o),i.prototype.Z=function(o){this.X=o},i.prototype.Y=function(o){if(null!==this.X&&0!==this.X.G.length&&null!==this.X.J){if(o.lineCap="butt",o.lineJoin="round",o.lineWidth=this.X.Vt,s(o,this.X.Pt),o.lineWidth=1,o.beginPath(),1===this.X.G.length){var c=this.X.G[0],v=this.X.Ln/2;o.moveTo(c.tt-v,this.X.En),o.lineTo(c.tt-v,c.it),o.lineTo(c.tt+v,c.it),o.lineTo(c.tt+v,this.X.En)}else o.moveTo(this.X.G[this.X.J.from].tt,this.X.En),o.lineTo(this.X.G[this.X.J.from].tt,this.X.G[this.X.J.from].it),at(o,this.X.G,this.X.Fn,this.X.J),this.X.J.to>this.X.J.from&&(o.lineTo(this.X.G[this.X.J.to-1].tt,this.X.En),o.lineTo(this.X.G[this.X.J.from].tt,this.X.En));o.closePath(),o.fillStyle=this.On(o),o.fill()}},i}(J),bt=function(o){function i(){return null!==o&&o.apply(this,arguments)||this}return m(i,o),i.prototype.On=function(o){var c=this.X,v=o.createLinearGradient(0,0,0,c.Vn);return v.addColorStop(0,c.Pn),v.addColorStop(1,c.Wn),v},i}(mt),Bt=function(o){function i(){var c=null!==o&&o.apply(this,arguments)||this;return c.X=null,c}return m(i,o),i.prototype.Z=function(o){this.X=o},i.prototype.Y=function(o){if(null!==this.X&&0!==this.X.G.length&&null!==this.X.J)if(o.lineCap="butt",o.lineWidth=this.X.Vt,s(o,this.X.Pt),o.strokeStyle=this.zn(o),o.lineJoin="round",1===this.X.G.length){o.beginPath();var c=this.X.G[0];o.moveTo(c.tt-this.X.Ln/2,c.it),o.lineTo(c.tt+this.X.Ln/2,c.it),void 0!==c.A&&(o.strokeStyle=c.A),o.stroke()}else this.Rn(o,this.X)},i.prototype.Rn=function(o,c){o.beginPath(),at(o,c.G,c.Fn,c.J),o.stroke()},i}(J),Dt=function(o){function i(){return null!==o&&o.apply(this,arguments)||this}return m(i,o),i.prototype.Rn=function(o,c){var v,d,y=c.G,_=c.J,B=c.Fn,z=c.ht;if(0!==y.length&&null!==_){o.beginPath();var E=y[_.from];o.moveTo(E.tt,E.it);var R=null!==(v=E.A)&&void 0!==v?v:z;o.strokeStyle=R;for(var l=function(c){o.stroke(),o.beginPath(),o.strokeStyle=c,R=c},W=_.from+1;W<_.to;++W){var O=y[W],G=y[W-1],V=null!==(d=O.A)&&void 0!==d?d:z;1===B&&(o.lineTo(O.tt,G.it),V!==R&&(l(V),o.moveTo(O.tt,G.it))),o.lineTo(O.tt,O.it),1!==B&&V!==R&&(l(V),o.moveTo(O.tt,O.it))}o.stroke()}},i.prototype.zn=function(){return this.X.ht},i}(Bt);function vt(o,c,v,d,y){void 0===d&&(d=0),void 0===y&&(y=o.length);for(var _=y-d;0<_;){var B=_>>1,z=d+B;v(o[z],c)?(d=z+1,_-=B+1):_=B}return d}function _t(o,c,v,d,y){void 0===d&&(d=0),void 0===y&&(y=o.length);for(var _=y-d;0<_;){var B=_>>1,z=d+B;v(c,o[z])?_=B:(d=z+1,_-=B+1)}return d}function dt(o,c){return o.rt<c}function wt(o,c){return o<c.rt}function Mt(o,c,v){var d=c.In(),y=c.jn(),_=vt(o,d,dt),B=_t(o,y,wt);if(!v)return{from:_,to:B};var z=_,E=B;return _>0&&_<o.length&&o[_].rt>=d&&(z=_-1),B>0&&B<o.length&&o[B-1].rt<=y&&(E=B+1),{from:z,to:E}}var zt=function(){function t(o,c,v){this.qn=!0,this.Un=!0,this.Hn=!0,this.Yn=[],this.$n=null,this.Kn=o,this.Xn=c,this.Zn=v}return t.prototype.vt=function(o){this.qn=!0,"data"===o&&(this.Un=!0),"options"===o&&(this.Hn=!0)},t.prototype.Jn=function(){this.Un&&(this.Gn(),this.Un=!1),this.qn&&(this.Qn(),this.qn=!1),this.Hn&&(this.ts(),this.Hn=!1)},t.prototype.ns=function(){this.$n=null},t.prototype.Qn=function(){var o=this.Kn.Ct(),c=this.Xn.bt();if(this.ns(),!c.wi()&&!o.wi()){var v=c.ss();if(null!==v&&0!==this.Kn.an().hs()){var d=this.Kn.kt();null!==d&&(this.$n=Mt(this.Yn,v,this.Zn),this.rs(o,c,d.St))}}},t}(),kt=function(o){function i(c,v){return o.call(this,c,v,!0)||this}return m(i,o),i.prototype.rs=function(o,c,v){c.es(this.Yn,A(this.$n)),o.us(this.Yn,v,A(this.$n))},i.prototype.os=function(o,c){return{rt:o,et:c,tt:NaN,it:NaN}},i.prototype.ts=function(){},i.prototype.Gn=function(){var o=this,c=this.Kn.ls();this.Yn=this.Kn.an().fs().map((function(v){var d=v.St[3];return o.cs(v.vs,d,c)}))},i}(zt),Pt=function(o){function i(c,v){var d=o.call(this,c,v)||this;return d.zt=new Y,d._s=new bt,d.ds=new Dt,d.zt.U([d._s,d.ds]),d}return m(i,o),i.prototype.dt=function(o,c){if(!this.Kn.yt())return null;var v=this.Kn.W();return this.Jn(),this._s.Z({Fn:v.lineType,G:this.Yn,Pt:v.lineStyle,Vt:v.lineWidth,Pn:v.topColor,Wn:v.bottomColor,En:o,Vn:o,J:this.$n,Ln:this.Xn.bt().ws()}),this.ds.Z({Fn:v.lineType,G:this.Yn,ht:v.lineColor,Pt:v.lineStyle,Vt:v.lineWidth,J:this.$n,Ln:this.Xn.bt().ws()}),this.zt},i.prototype.cs=function(o,c){return this.os(o,c)},i}(kt),Et=function(){function t(){this.Bt=null,this.Ms=0,this.bs=0}return t.prototype.Z=function(o){this.Bt=o},t.prototype.H=function(o,c,v,d){if(null!==this.Bt&&0!==this.Bt.an.length&&null!==this.Bt.J){this.Ms=this.ps(c),this.Ms>=2&&Math.max(1,Math.floor(c))%2!=this.Ms%2&&this.Ms--,this.bs=this.Bt.gs?Math.min(this.Ms,Math.floor(c)):this.Ms;for(var y=null,_=this.bs<=this.Ms&&this.Bt.ws>=Math.floor(1.5*c),B=this.Bt.J.from;B<this.Bt.J.to;++B){var z=this.Bt.an[B];y!==z.A&&(o.fillStyle=z.A,y=z.A);var E=Math.floor(.5*this.bs),R=Math.round(z.tt*c),W=R-E,O=this.bs,G=W+O-1,V=Math.min(z.ys,z.ks),F=Math.max(z.ys,z.ks),X=Math.round(V*c)-E,Y=Math.round(F*c)+E,J=Math.max(Y-X,this.bs);o.fillRect(W,X,O,J);var I=Math.ceil(1.5*this.Ms);if(_){if(this.Bt.Ns){var Z=R-I,K=Math.max(X,Math.round(z.xs*c)-E),Q=K+O-1;Q>X+J-1&&(K=(Q=X+J-1)-O+1),o.fillRect(Z,K,W-Z,Q-K+1)}var $=R+I,tt=Math.max(X,Math.round(z.Cs*c)-E),nt=tt+O-1;nt>X+J-1&&(tt=(nt=X+J-1)-O+1),o.fillRect(G+1,tt,$-G,nt-tt+1)}}}},t.prototype.ps=function(o){var c=Math.floor(o);return Math.max(c,Math.floor(function(o,c){return Math.floor(.3*o*c)}(u(this.Bt).ws,o)))},t}(),Lt=function(o){function i(c,v){return o.call(this,c,v,!1)||this}return m(i,o),i.prototype.rs=function(o,c,v){c.es(this.Yn,A(this.$n)),o.Ss(this.Yn,v,A(this.$n))},i.prototype.Ts=function(o,c,v){return{rt:o,open:c.St[0],high:c.St[1],low:c.St[2],close:c.St[3],tt:NaN,xs:NaN,ys:NaN,ks:NaN,Cs:NaN}},i.prototype.Gn=function(){var o=this,c=this.Kn.ls();this.Yn=this.Kn.an().fs().map((function(v){return o.cs(v.vs,v,c)}))},i}(zt),At=function(o){function i(){var c=null!==o&&o.apply(this,arguments)||this;return c.zt=new Et,c}return m(i,o),i.prototype.dt=function(o,c){if(!this.Kn.yt())return null;var v=this.Kn.W();this.Jn();var d={an:this.Yn,ws:this.Xn.bt().ws(),Ns:v.openVisible,gs:v.thinBars,J:this.$n};return this.zt.Z(d),this.zt},i.prototype.ts=function(){var o=this;this.Yn.forEach((function(c){c.A=o.Kn.ls().As(c.rt).Ds}))},i.prototype.cs=function(o,c,v){return p(p({},this.Ts(o,c,v)),{A:v.As(o).Ds})},i}(Lt);function Nt(o,c,v){return Math.min(Math.max(o,c),v)}function xt(o,c,v){return c-o<=v}function Ct(o){return o<=0?NaN:Math.log(o)/Math.log(10)}function St(o){var c=Math.ceil(o);return c%2!=0?c-1:c}function Tt(o){var c=Math.ceil(o);return c%2==0?c-1:c}var Rt=function(o){function i(){return null!==o&&o.apply(this,arguments)||this}return m(i,o),i.prototype.On=function(o){var c=this.X,v=o.createLinearGradient(0,0,0,c.Vn),d=Nt(c.En/c.Vn,0,1);return v.addColorStop(0,c.Bs),v.addColorStop(d,c.Ls),v.addColorStop(d,c.Es),v.addColorStop(1,c.Fs),v},i}(mt),Wt=function(o){function i(){return null!==o&&o.apply(this,arguments)||this}return m(i,o),i.prototype.zn=function(o){var c=this.X,v=o.createLinearGradient(0,0,0,c.Vn),d=Nt(c.En/c.Vn,0,1);return v.addColorStop(0,c.Pn),v.addColorStop(d,c.Pn),v.addColorStop(d,c.Wn),v.addColorStop(1,c.Wn),v},i}(Bt),Ft=function(o){function i(c,v){var d=o.call(this,c,v)||this;return d.Os=new Rt,d.Vs=new Wt,d.ut=new Y,d.ut.U([d.Os,d.Vs]),d}return m(i,o),i.prototype.dt=function(o,c){if(!this.Kn.yt())return null;var v=this.Kn.kt();if(null===v)return null;var d=this.Kn.W();this.Jn();var y=this.Kn.Ct().xt(d.baseValue.price,v.St),_=this.Xn.bt().ws();return this.Os.Z({G:this.Yn,Bs:d.topFillColor1,Ls:d.topFillColor2,Es:d.bottomFillColor1,Fs:d.bottomFillColor2,Vt:d.lineWidth,Pt:d.lineStyle,Fn:0,En:y,Vn:o,J:this.$n,Ln:_}),this.Vs.Z({G:this.Yn,Pn:d.topLineColor,Wn:d.bottomLineColor,Vt:d.lineWidth,Pt:d.lineStyle,Fn:0,En:y,Vn:o,J:this.$n,Ln:_}),this.ut},i.prototype.cs=function(o,c){return this.os(o,c)},i}(kt),Yt=function(){function t(){this.Bt=null,this.Ms=0}return t.prototype.Z=function(o){this.Bt=o},t.prototype.H=function(o,c,v,d){if(null!==this.Bt&&0!==this.Bt.an.length&&null!==this.Bt.J){this.Ms=function(o,c){if(o>=2.5&&o<=4)return Math.floor(3*c);var v=1-.2*Math.atan(Math.max(4,o)-4)/(.5*Math.PI),d=Math.floor(o*v*c),y=Math.floor(o*c),_=Math.min(d,y);return Math.max(Math.floor(c),_)}(this.Bt.ws,c),this.Ms>=2&&Math.floor(c)%2!=this.Ms%2&&this.Ms--;var y=this.Bt.an;this.Bt.Ps&&this.Ws(o,y,this.Bt.J,c),this.Bt.zs&&this.Rs(o,y,this.Bt.J,this.Bt.ws,c);var _=this.Is(c);(!this.Bt.zs||this.Ms>2*_)&&this.js(o,y,this.Bt.J,c)}},t.prototype.Ws=function(o,c,v,d){if(null!==this.Bt){var y="",_=Math.min(Math.floor(d),Math.floor(this.Bt.ws*d));_=Math.max(Math.floor(d),Math.min(_,this.Ms));for(var B=Math.floor(.5*_),z=null,E=v.from;E<v.to;E++){var R=c[E];R.qs!==y&&(o.fillStyle=R.qs,y=R.qs);var W=Math.round(Math.min(R.xs,R.Cs)*d),O=Math.round(Math.max(R.xs,R.Cs)*d),G=Math.round(R.ys*d),V=Math.round(R.ks*d),F=Math.round(d*R.tt)-B,X=F+_-1;null!==z&&(F=Math.max(z+1,F),F=Math.min(F,X));var Y=X-F+1;o.fillRect(F,G,Y,W-G),o.fillRect(F,O+1,Y,V-O),z=X}}},t.prototype.Is=function(o){var c=Math.floor(1*o);this.Ms<=2*c&&(c=Math.floor(.5*(this.Ms-1)));var v=Math.max(Math.floor(o),c);return this.Ms<=2*v?Math.max(Math.floor(o),Math.floor(1*o)):v},t.prototype.Rs=function(o,c,v,d,y){if(null!==this.Bt)for(var _="",B=this.Is(y),z=null,E=v.from;E<v.to;E++){var R=c[E];R.Tt!==_&&(o.fillStyle=R.Tt,_=R.Tt);var W=Math.round(R.tt*y)-Math.floor(.5*this.Ms),O=W+this.Ms-1,G=Math.round(Math.min(R.xs,R.Cs)*y),V=Math.round(Math.max(R.xs,R.Cs)*y);if(null!==z&&(W=Math.max(z+1,W),W=Math.min(W,O)),this.Bt.ws*y>2*B)j(o,W,G,O-W+1,V-G+1,B);else{var F=O-W+1;o.fillRect(W,G,F,V-G+1)}z=O}},t.prototype.js=function(o,c,v,d){if(null!==this.Bt)for(var y="",_=this.Is(d),B=v.from;B<v.to;B++){var z=c[B],E=Math.round(Math.min(z.xs,z.Cs)*d),R=Math.round(Math.max(z.xs,z.Cs)*d),W=Math.round(z.tt*d)-Math.floor(.5*this.Ms),O=W+this.Ms-1;if(z.A!==y){var G=z.A;o.fillStyle=G,y=G}this.Bt.zs&&(W+=_,E+=_,O-=_,R-=_),E>R||o.fillRect(W,E,O-W+1,R-E+1)}},t}(),jt=function(o){function i(){var c=null!==o&&o.apply(this,arguments)||this;return c.zt=new Yt,c}return m(i,o),i.prototype.dt=function(o,c){if(!this.Kn.yt())return null;var v=this.Kn.W();this.Jn();var d={an:this.Yn,ws:this.Xn.bt().ws(),Ps:v.wickVisible,zs:v.borderVisible,J:this.$n};return this.zt.Z(d),this.zt},i.prototype.ts=function(){var o=this;this.Yn.forEach((function(c){var v=o.Kn.ls().As(c.rt);c.A=v.Ds,c.qs=v.Us,c.Tt=v.Hs}))},i.prototype.cs=function(o,c,v){var d=v.As(o);return p(p({},this.Ts(o,c,v)),{A:d.Ds,qs:d.Us,Tt:d.Hs})},i}(Lt),It=function(){function t(){this.Bt=null,this.Ys=[]}return t.prototype.Z=function(o){this.Bt=o,this.Ys=[]},t.prototype.H=function(o,c,v,d){if(null!==this.Bt&&0!==this.Bt.G.length&&null!==this.Bt.J){this.Ys.length||this.$s(c);for(var y=Math.max(1,Math.floor(c)),_=Math.round(this.Bt.Ks*c)-Math.floor(y/2),B=_+y,z=this.Bt.J.from;z<this.Bt.J.to;z++){var E=this.Bt.G[z],R=this.Ys[z-this.Bt.J.from],W=Math.round(E.it*c);o.fillStyle=E.A;var O=void 0,G=void 0;W<=_?(O=W,G=B):(O=_,G=W-Math.floor(y/2)+y),o.fillRect(R.In,O,R.jn-R.In+1,G-O)}}},t.prototype.$s=function(o){if(null!==this.Bt&&0!==this.Bt.G.length&&null!==this.Bt.J){var c=Math.ceil(this.Bt.ws*o)<=1?0:Math.max(1,Math.floor(o)),v=Math.round(this.Bt.ws*o)-c;this.Ys=new Array(this.Bt.J.to-this.Bt.J.from);for(var d=this.Bt.J.from;d<this.Bt.J.to;d++){var y,_=this.Bt.G[d],B=Math.round(_.tt*o),z=void 0,E=void 0;v%2?(z=B-(y=(v-1)/2),E=B+y):(z=B-(y=v/2),E=B+y-1),this.Ys[d-this.Bt.J.from]={In:z,jn:E,Xs:B,Zs:_.tt*o,rt:_.rt}}for(d=this.Bt.J.from+1;d<this.Bt.J.to;d++){var R=this.Ys[d-this.Bt.J.from],W=this.Ys[d-this.Bt.J.from-1];R.rt===W.rt+1&&R.In-W.jn!==c+1&&(W.Xs>W.Zs?W.jn=R.In-c-1:R.In=W.jn+c+1)}var O=Math.ceil(this.Bt.ws*o);for(d=this.Bt.J.from;d<this.Bt.J.to;d++){(R=this.Ys[d-this.Bt.J.from]).jn<R.In&&(R.jn=R.In);var G=R.jn-R.In+1;O=Math.min(G,O)}if(c>0&&O<4)for(d=this.Bt.J.from;d<this.Bt.J.to;d++)(G=(R=this.Ys[d-this.Bt.J.from]).jn-R.In+1)>O&&(R.Xs>R.Zs?R.jn-=1:R.In+=1)}else this.Ys=[]},t}();function Ot(o){return{G:[],ws:o,Ks:NaN,J:null}}function Vt(o,c,v){return{rt:o,et:c,tt:NaN,it:NaN,A:v}}var Zt=function(o){function i(c,v){var d=o.call(this,c,v,!1)||this;return d.ut=new Y,d.Js=Ot(0),d.zt=new It,d}return m(i,o),i.prototype.dt=function(o,c){return this.Kn.yt()?(this.Jn(),this.ut):null},i.prototype.Gn=function(){var o=this.Xn.bt().ws();this.Js=Ot(o);for(var c=0,v=0,d=this.Kn.W().color,y=0,_=this.Kn.an().fs();y<_.length;y++){var B=_[y],z=B.St[3],E=void 0!==B.A?B.A:d,R=Vt(B.vs,z,E);++c<this.Js.G.length?this.Js.G[c]=R:this.Js.G.push(R),this.Yn[v++]={rt:B.vs,tt:0}}this.zt.Z(this.Js),this.ut.U([this.zt])},i.prototype.ts=function(){},i.prototype.ns=function(){o.prototype.ns.call(this),this.Js.J=null},i.prototype.rs=function(o,c,v){if(null!==this.$n){var d=c.ws(),y=u(c.ss()),_=o.xt(this.Kn.W().base,v);c.es(this.Js.G),o.us(this.Js.G,v),this.Js.Ks=_,this.Js.J=Mt(this.Js.G,y,!1),this.Js.ws=d,this.zt.Z(this.Js)}},i}(zt),Ht=function(o){function i(c,v){var d=o.call(this,c,v)||this;return d.ds=new Dt,d}return m(i,o),i.prototype.dt=function(o,c){if(!this.Kn.yt())return null;var v=this.Kn.W();this.Jn();var d={G:this.Yn,ht:v.color,Pt:v.lineStyle,Fn:v.lineType,Vt:v.lineWidth,J:this.$n,Ln:this.Xn.bt().ws()};return this.ds.Z(d),this.ds},i.prototype.ts=function(){var o=this;this.Yn.forEach((function(c){c.A=o.Kn.ls().As(c.rt).Ds}))},i.prototype.cs=function(o,c,v){var d=this.os(o,c);return d.A=v.As(o).Ds,d},i}(kt),Ut=/[2-9]/g,qt=function(){function t(o){void 0===o&&(o=50),this.Gs=new Map,this.Qs=0,this.th=Array.from(new Array(o))}return t.prototype.ih=function(){this.Gs.clear(),this.th.fill(void 0)},t.prototype.Qt=function(o,c,v){var d=v||Ut,y=String(c).replace(d,"0"),_=this.Gs.get(y);if(void 0===_){if(0===(_=o.measureText(y).width)&&0!==c.length)return 0;var B=this.th[this.Qs];void 0!==B&&this.Gs.delete(B),this.th[this.Qs]=y,this.Qs=(this.Qs+1)%this.th.length,this.Gs.set(y,_)}return _},t}(),$t=function(){function t(o){this.nh=null,this.k=null,this.sh="right",this.hh=0,this.rh=o}return t.prototype.eh=function(o,c,v,d){this.nh=o,this.k=c,this.hh=v,this.sh=d},t.prototype.H=function(o,c){null!==this.k&&null!==this.nh&&this.nh.H(o,this.k,this.rh,this.hh,this.sh,c)},t}(),oi=function(){function t(o,c,v){this.uh=o,this.rh=new qt(50),this.ah=c,this.P=v,this.R=-1,this.zt=new $t(this.rh)}return t.prototype.dt=function(o,c){var v=this.P.oh(this.ah);if(null===v)return null;var d=v.lh(this.ah)?v.fh():this.ah.Ct();if(null===d)return null;var y=v._h(d);if("overlay"===y)return null;var _=this.P.dh();return _.S!==this.R&&(this.R=_.S,this.rh.ih()),this.zt.eh(this.uh.ci(),_,c,y),this.zt},t}(),hi=function(){function t(){this.Bt=null}return t.prototype.Z=function(o){this.Bt=o},t.prototype.H=function(o,c,v,d){if(null!==this.Bt&&!1!==this.Bt.yt){var y=Math.round(this.Bt.it*c);if(!(y<0||y>Math.ceil(this.Bt.Yt*c))){var _=Math.ceil(this.Bt.Ht*c);o.lineCap="butt",o.strokeStyle=this.Bt.A,o.lineWidth=Math.floor(this.Bt.Vt*c),s(o,this.Bt.Pt),h(o,y,0,_)}}},t}(),ai=function(){function t(o){this.wh={Ht:0,Yt:0,it:0,A:"rgba(0, 0, 0, 0)",Vt:1,Pt:0,yt:!1},this.Mh=new hi,this.ft=!0,this.Kn=o,this.Xn=o.jt(),this.Mh.Z(this.wh)}return t.prototype.vt=function(){this.ft=!0},t.prototype.dt=function(o,c){return this.Kn.yt()?(this.ft&&(this.bh(o,c),this.ft=!1),this.Mh):null},t}(),li=function(o){function i(c){return o.call(this,c)||this}return m(i,o),i.prototype.bh=function(o,c){this.wh.yt=!1;var v=this.Kn.Ct(),d=v.mh().mh;if(2===d||3===d){var y=this.Kn.W();if(y.baseLineVisible&&this.Kn.yt()){var _=this.Kn.kt();null!==_&&(this.wh.yt=!0,this.wh.it=v.xt(_.St,_.St),this.wh.Ht=c,this.wh.Yt=o,this.wh.A=y.baseLineColor,this.wh.Vt=y.baseLineWidth,this.wh.Pt=y.baseLineStyle)}}},i}(ai),ci=function(){function t(){this.Bt=null}return t.prototype.Z=function(o){this.Bt=o},t.prototype.ph=function(){return this.Bt},t.prototype.H=function(o,c,v,d){var y=this.Bt;if(null!==y){o.save();var _=Math.max(1,Math.floor(c)),B=_%2/2,z=Math.round(y.Zs.x*c)+B,E=y.Zs.y*c;o.fillStyle=y.gh,o.beginPath();var R=Math.max(2,1.5*y.yh)*c;o.arc(z,E,R,0,2*Math.PI,!1),o.fill(),o.fillStyle=y.kh,o.beginPath(),o.arc(z,E,y.st*c,0,2*Math.PI,!1),o.fill(),o.lineWidth=_,o.strokeStyle=y.Nh,o.beginPath(),o.arc(z,E,y.st*c+_/2,0,2*Math.PI,!1),o.stroke(),o.restore()}},t}(),fi=[{xh:0,Ch:.25,Sh:4,Th:10,Dh:.25,Ah:0,Bh:.4,Lh:.8},{xh:.25,Ch:.525,Sh:10,Th:14,Dh:0,Ah:0,Bh:.8,Lh:0},{xh:.525,Ch:1,Sh:14,Th:14,Dh:0,Ah:0,Bh:0,Lh:0}];function Kt(o,c,v,d){return function(o,c){if("transparent"===o)return o;var v=w(o),d=v[3];return"rgba(".concat(v[0],", ").concat(v[1],", ").concat(v[2],", ").concat(c*d,")")}(o,v+(d-v)*c)}function Xt(o,c){for(var v,d=o%2600/2600,y=0,_=fi;y<_.length;y++){var B=_[y];if(d>=B.xh&&d<=B.Ch){v=B;break}}r(void 0!==v,"Last price animation internal logic error");var z,E,R,W=(d-v.xh)/(v.Ch-v.xh);return{kh:Kt(c,W,v.Dh,v.Ah),Nh:Kt(c,W,v.Bh,v.Lh),st:(z=W,E=v.Sh,R=v.Th,E+(R-E)*z)}}var vi=function(){function t(o){this.zt=new ci,this.ft=!0,this.Eh=!0,this.Fh=performance.now(),this.Oh=this.Fh-1,this.Vh=o}return t.prototype.Ph=function(){this.Oh=this.Fh-1,this.vt()},t.prototype.Wh=function(){if(this.vt(),2===this.Vh.W().lastPriceAnimation){var o=performance.now(),c=this.Oh-o;if(c>0)return void(c<650&&(this.Oh+=2600));this.Fh=o,this.Oh=o+2600}},t.prototype.vt=function(){this.ft=!0},t.prototype.zh=function(){this.Eh=!0},t.prototype.yt=function(){return 0!==this.Vh.W().lastPriceAnimation},t.prototype.Rh=function(){switch(this.Vh.W().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.Oh}},t.prototype.dt=function(o,c){return this.ft?(this.wt(o,c),this.ft=!1,this.Eh=!1):this.Eh&&(this.Ih(),this.Eh=!1),this.zt},t.prototype.wt=function(o,c){this.zt.Z(null);var v=this.Vh.jt().bt(),d=v.ss(),y=this.Vh.kt();if(null!==d&&null!==y){var _=this.Vh.jh(!0);if(!_.qh&&d.Uh(_.vs)){var B={x:v.At(_.vs),y:this.Vh.Ct().xt(_.et,y.St)},z=_.A,E=this.Vh.W().lineWidth,R=Xt(this.Hh(),z);this.zt.Z({gh:z,yh:E,kh:R.kh,Nh:R.Nh,st:R.st,Zs:B})}}},t.prototype.Ih=function(){var o=this.zt.ph();if(null!==o){var c=Xt(this.Hh(),o.gh);o.kh=c.kh,o.Nh=c.Nh,o.st=c.st}},t.prototype.Hh=function(){return this.Rh()?performance.now()-this.Fh:2599},t}();function Jt(o,c){return Tt(Math.min(Math.max(o,12),30)*c)}function Gt(o,c){switch(o){case"arrowDown":case"arrowUp":return Jt(c,1);case"circle":return Jt(c,.8);case"square":return Jt(c,.7)}}function Qt(o){return St(Jt(o,1))}function ti(o){return Math.max(Jt(o,.1),3)}function ii(o,c,v,d,y){var _=Gt("square",v),B=(_-1)/2,z=o-B,E=c-B;return d>=z&&d<=z+_&&y>=E&&y<=E+_}function ni(o,c,v,d,y){var _=(Gt("arrowUp",y)-1)/2,B=(Tt(y/2)-1)/2;c.beginPath(),o?(c.moveTo(v-_,d),c.lineTo(v,d-_),c.lineTo(v+_,d),c.lineTo(v+B,d),c.lineTo(v+B,d+_),c.lineTo(v-B,d+_),c.lineTo(v-B,d)):(c.moveTo(v-_,d),c.lineTo(v,d+_),c.lineTo(v+_,d),c.lineTo(v+B,d),c.lineTo(v+B,d-_),c.lineTo(v-B,d-_),c.lineTo(v-B,d)),c.fill()}var di=function(o){function i(){var c=null!==o&&o.apply(this,arguments)||this;return c.Bt=null,c.rh=new qt,c.R=-1,c.I="",c.Yh="",c}return m(i,o),i.prototype.Z=function(o){this.Bt=o},i.prototype.eh=function(o,c){this.R===o&&this.I===c||(this.R=o,this.I=c,this.Yh=L(o,c),this.rh.ih())},i.prototype.$h=function(o,c){if(null===this.Bt||null===this.Bt.J)return null;for(var v=this.Bt.J.from;v<this.Bt.J.to;v++){var d=this.Bt.G[v];if(ei(d,o,c))return{Kh:d.Xh,Zh:d.Zh}}return null},i.prototype.Y=function(o,c,v){if(null!==this.Bt&&null!==this.Bt.J){o.textBaseline="middle",o.font=this.Yh;for(var d=this.Bt.J.from;d<this.Bt.J.to;d++){var y=this.Bt.G[d];void 0!==y.Gt&&(y.Gt.Ht=this.rh.Qt(o,y.Gt.Jh),y.Gt.Yt=this.R),ri(y,o)}}},i}(J);function ri(o,c){c.fillStyle=o.A,void 0!==o.Gt&&function(o,c,v,d){o.fillText(c,v,d)}(c,o.Gt.Jh,o.tt-o.Gt.Ht/2,o.Gt.it),function(o,c){if(0!==o.hs){switch(o.Gh){case"arrowDown":return void ni(!1,c,o.tt,o.it,o.hs);case"arrowUp":return void ni(!0,c,o.tt,o.it,o.hs);case"circle":return void function(o,c,v,d){var y=(Gt("circle",d)-1)/2;o.beginPath(),o.arc(c,v,y,0,2*Math.PI,!1),o.fill()}(c,o.tt,o.it,o.hs);case"square":return void function(o,c,v,d){var y=Gt("square",d),_=(y-1)/2,B=c-_,z=v-_;o.fillRect(B,z,y,y)}(c,o.tt,o.it,o.hs)}o.Gh}}(o,c)}function ei(o,c,v){return!(void 0===o.Gt||!function(o,c,v,d,y,_){var B=d/2;return y>=o&&y<=o+v&&_>=c-B&&_<=c+B}(o.tt,o.Gt.it,o.Gt.Ht,o.Gt.Yt,c,v))||function(o,c,v){if(0===o.hs)return!1;switch(o.Gh){case"arrowDown":case"arrowUp":return function si(o,c,v,d,y,_){return ii(c,v,d,y,_)}(0,o.tt,o.it,o.hs,c,v);case"circle":return function(o,c,v,d,y){var _=2+Gt("circle",v)/2,B=o-d,z=c-y;return Math.sqrt(B*B+z*z)<=_}(o.tt,o.it,o.hs,c,v);case"square":return ii(o.tt,o.it,o.hs,c,v)}}(o,c,v)}function ui(o,c,v,d,y,_,B,z,E){var R=N(v)?v:v.close,W=N(v)?v:v.high,O=N(v)?v:v.low,G=N(c.size)?Math.max(c.size,0):1,V=Qt(z.ws())*G,F=V/2;switch(o.hs=V,c.position){case"inBar":return o.it=B.xt(R,E),void(void 0!==o.Gt&&(o.Gt.it=o.it+F+_+.6*y));case"aboveBar":return o.it=B.xt(W,E)-F-d.Qh,void 0!==o.Gt&&(o.Gt.it=o.it-F-.6*y,d.Qh+=1.2*y),void(d.Qh+=V+_);case"belowBar":return o.it=B.xt(O,E)+F+d.tr,void 0!==o.Gt&&(o.Gt.it=o.it+F+_+.6*y,d.tr+=1.2*y),void(d.tr+=V+_)}c.position}var yi=function(){function t(o,c){this.ft=!0,this.ir=!0,this.nr=!0,this.sr=null,this.zt=new di,this.Vh=o,this.pi=c,this.Bt={G:[],J:null}}return t.prototype.vt=function(o){this.ft=!0,this.nr=!0,"data"===o&&(this.ir=!0)},t.prototype.dt=function(o,c,v){if(!this.Vh.yt())return null;this.ft&&this.Jn();var d=this.pi.W().layout;return this.zt.eh(d.fontSize,d.fontFamily),this.zt.Z(this.Bt),this.zt},t.prototype.hr=function(){if(this.nr){if(this.Vh.rr().length>0){var o=this.pi.bt().ws(),c=ti(o),v=1.5*Qt(o)+2*c;this.sr={above:v,below:v}}else this.sr=null;this.nr=!1}return this.sr},t.prototype.Jn=function(){var o=this.Vh.Ct(),c=this.pi.bt(),v=this.Vh.rr();this.ir&&(this.Bt.G=v.map((function(o){return{rt:o.time,tt:0,it:0,hs:0,Gh:o.shape,A:o.color,Xh:o.Xh,Zh:o.id,Gt:void 0}})),this.ir=!1);var d=this.pi.W().layout;this.Bt.J=null;var y=c.ss();if(null!==y){var _=this.Vh.kt();if(null!==_&&0!==this.Bt.G.length){var B=NaN,z=ti(c.ws()),E={Qh:z,tr:z};this.Bt.J=Mt(this.Bt.G,y,!0);for(var R=this.Bt.J.from;R<this.Bt.J.to;R++){var W=v[R];W.time!==B&&(E.Qh=z,E.tr=z,B=W.time);var O=this.Bt.G[R];O.tt=c.At(W.time),void 0!==W.text&&W.text.length>0&&(O.Gt={Jh:W.text,it:0,Ht:0,Yt:0});var G=this.Vh.er(W.time);null!==G&&ui(O,W,G,E,d.fontSize,z,o,c,_.St)}this.ft=!1}}},t}(),wi=function(o){function i(c){return o.call(this,c)||this}return m(i,o),i.prototype.bh=function(o,c){var v=this.wh;v.yt=!1;var d=this.Kn.W();if(d.priceLineVisible&&this.Kn.yt()){var y=this.Kn.jh(0===d.priceLineSource);y.qh||(v.yt=!0,v.it=y.ti,v.A=this.Kn.ur(y.A),v.Ht=c,v.Yt=o,v.Vt=d.priceLineWidth,v.Pt=d.priceLineStyle)}},i}(ai),gi=function(o){function i(c){var v=o.call(this)||this;return v.Rt=c,v}return m(i,o),i.prototype.vi=function(o,c,v){o.yt=!1,c.yt=!1;var d=this.Rt;if(d.yt()){var y=d.W(),_=y.lastValueVisible,B=""!==d.ar(),z=0===y.seriesLastValueMode,E=d.jh(!1);if(!E.qh){_&&(o.Gt=this.lr(E,_,z),o.yt=0!==o.Gt.length),(B||z)&&(c.Gt=this.cr(E,_,B,z),c.yt=c.Gt.length>0);var R=d.ur(E.A),W=M(R);v.t=W.t,v.A=W.i,v.ti=E.ti,c.Tt=d.jt().Dt(E.ti/d.Ct().Yt()),o.Tt=R}}},i.prototype.cr=function(o,c,v,d){var y="",_=this.Rt.ar();return v&&0!==_.length&&(y+="".concat(_," ")),c&&d&&(y+=this.Rt.Ct().vr()?o._r:o.dr),y.trim()},i.prototype.lr=function(o,c,v){return c?v?this.Rt.Ct().vr()?o.dr:o._r:o.Gt:""},i}(et),mi=function(){function t(o,c){this.wr=o,this.Mr=c}return t.prototype.br=function(o){return null!==o&&this.wr===o.wr&&this.Mr===o.Mr},t.prototype.mr=function(){return new t(this.wr,this.Mr)},t.prototype.pr=function(){return this.wr},t.prototype.gr=function(){return this.Mr},t.prototype.yr=function(){return this.Mr-this.wr},t.prototype.wi=function(){return this.Mr===this.wr||Number.isNaN(this.Mr)||Number.isNaN(this.wr)},t.prototype.Nn=function(o){return null===o?this:new t(Math.min(this.pr(),o.pr()),Math.max(this.gr(),o.gr()))},t.prototype.kr=function(o){if(N(o)&&0!=this.Mr-this.wr){var c=.5*(this.Mr+this.wr),v=this.Mr-c,d=this.wr-c;v*=o,d*=o,this.Mr=c+v,this.wr=c+d}},t.prototype.Nr=function(o){N(o)&&(this.Mr+=o,this.wr+=o)},t.prototype.Cr=function(){return{minValue:this.wr,maxValue:this.Mr}},t.Sr=function(o){return null===o?null:new t(o.minValue,o.maxValue)},t}(),Mi=function(){function t(o,c){this.Tr=o,this.Dr=c||null}return t.prototype.Ar=function(){return this.Tr},t.prototype.Br=function(){return this.Dr},t.prototype.Cr=function(){return null===this.Tr?null:{priceRange:this.Tr.Cr(),margins:this.Dr||void 0}},t.Sr=function(o){return null===o?null:new t(mi.Sr(o.priceRange),o.margins)},t}(),_i=function(o){function i(c,v){var d=o.call(this,c)||this;return d.Lr=v,d}return m(i,o),i.prototype.bh=function(o,c){var v=this.wh;v.yt=!1;var d=this.Lr.W();if(this.Kn.yt()&&d.lineVisible){var y=this.Lr.Er();null!==y&&(v.yt=!0,v.it=y,v.A=d.color,v.Ht=c,v.Yt=o,v.Vt=d.lineWidth,v.Pt=d.lineStyle)}},i}(ai),bi=function(o){function i(c,v){var d=o.call(this)||this;return d.Vh=c,d.Lr=v,d}return m(i,o),i.prototype.vi=function(o,c,v){o.yt=!1,c.yt=!1;var d=this.Lr.W(),y=d.axisLabelVisible,_=""!==d.title,B=this.Vh;if(y&&B.yt()){var z=this.Lr.Er();if(null!==z){_&&(c.Gt=d.title,c.yt=!0),c.Tt=B.jt().Dt(z/B.Ct().Yt()),o.Gt=B.Ct().Fr(d.price),o.yt=!0;var E=M(d.color);v.t=E.t,v.A=E.i,v.ti=z}}},i}(et),Ci=function(){function t(o,c){this.Vh=o,this.zi=c,this.Or=new _i(o,this),this.uh=new bi(o,this),this.Vr=new oi(this.uh,o,o.jt())}return t.prototype.Pr=function(o){k(this.zi,o),this.vt(),this.Vh.jt().Wr()},t.prototype.W=function(){return this.zi},t.prototype.tn=function(){return[this.Or,this.Vr]},t.prototype.zr=function(){return this.uh},t.prototype.vt=function(){this.Or.vt(),this.uh.vt()},t.prototype.Er=function(){var o=this.Vh,c=o.Ct();if(o.jt().bt().wi()||c.wi())return null;var v=o.kt();return null===v?null:c.xt(this.zi.price,v.St)},t}(),xi=function(o){function i(c){var v=o.call(this)||this;return v.pi=c,v}return m(i,o),i.prototype.jt=function(){return this.pi},i}(lt),ki={Ds:"",Hs:"",Us:""},Pi=function(){function t(o){this.Vh=o}return t.prototype.As=function(o,c){var v=this.Vh.Rr(),d=this.Vh.W();switch(v){case"Line":return this.Ir(d,o,c);case"Area":return this.jr(d);case"Baseline":return this.qr(d,o,c);case"Bar":return this.Ur(d,o,c);case"Candlestick":return this.Hr(d,o,c);case"Histogram":return this.Yr(d,o,c)}throw new Error("Unknown chart style")},t.prototype.Ur=function(o,c,v){var d=p({},ki),y=o.upColor,_=o.downColor,B=y,z=_,E=u(this.$r(c,v)),R=a(E.St[0])<=a(E.St[3]);return void 0!==E.A?(d.Ds=E.A,d.Hs=E.A):(d.Ds=R?y:_,d.Hs=R?B:z),d},t.prototype.Hr=function(o,c,v){var d,y,_,B=p({},ki),z=o.upColor,E=o.downColor,R=o.borderUpColor,W=o.borderDownColor,O=o.wickUpColor,G=o.wickDownColor,V=u(this.$r(c,v)),F=a(V.St[0])<=a(V.St[3]);return B.Ds=null!==(d=V.A)&&void 0!==d?d:F?z:E,B.Hs=null!==(y=V.Tt)&&void 0!==y?y:F?R:W,B.Us=null!==(_=V.qs)&&void 0!==_?_:F?O:G,B},t.prototype.jr=function(o){return p(p({},ki),{Ds:o.lineColor})},t.prototype.qr=function(o,c,v){var d=u(this.$r(c,v)).St[3]>=o.baseValue.price;return p(p({},ki),{Ds:d?o.topLineColor:o.bottomLineColor})},t.prototype.Ir=function(o,c,v){var d,y=u(this.$r(c,v));return p(p({},ki),{Ds:null!==(d=y.A)&&void 0!==d?d:o.color})},t.prototype.Yr=function(o,c,v){var d=p({},ki),y=u(this.$r(c,v));return d.Ds=void 0!==y.A?y.A:o.color,d},t.prototype.$r=function(o,c){return void 0!==c?c.St:this.Vh.an().Kr(o)},t}(),Ni=function(){function t(){this.Xr=[],this.Zr=new Map,this.Jr=new Map}return t.prototype.Gr=function(){return this.hs()>0?this.Xr[this.Xr.length-1]:null},t.prototype.Qr=function(){return this.hs()>0?this.te(0):null},t.prototype.un=function(){return this.hs()>0?this.te(this.Xr.length-1):null},t.prototype.hs=function(){return this.Xr.length},t.prototype.wi=function(){return 0===this.hs()},t.prototype.Uh=function(o){return null!==this.ie(o,0)},t.prototype.Kr=function(o){return this.ne(o)},t.prototype.ne=function(o,c){void 0===c&&(c=0);var v=this.ie(o,c);return null===v?null:p(p({},this.se(v)),{vs:this.te(v)})},t.prototype.fs=function(){return this.Xr},t.prototype.he=function(o,c,v){if(this.wi())return null;for(var d=null,y=0,_=v;y<_.length;y++){var B=_[y];d=pi(d,this.re(o,c,B))}return d},t.prototype.Z=function(o){this.Jr.clear(),this.Zr.clear(),this.Xr=o},t.prototype.te=function(o){return this.Xr[o].vs},t.prototype.se=function(o){return this.Xr[o]},t.prototype.ie=function(o,c){var v=this.ee(o);if(null===v&&0!==c)switch(c){case-1:return this.ue(o);case 1:return this.ae(o);default:throw new TypeError("Unknown search mode")}return v},t.prototype.ue=function(o){var c=this.oe(o);return c>0&&(c-=1),c!==this.Xr.length&&this.te(c)<o?c:null},t.prototype.ae=function(o){var c=this.le(o);return c!==this.Xr.length&&o<this.te(c)?c:null},t.prototype.ee=function(o){var c=this.oe(o);return c===this.Xr.length||o<this.Xr[c].vs?null:c},t.prototype.oe=function(o){return vt(this.Xr,o,(function(o,c){return o.vs<c}))},t.prototype.le=function(o){return _t(this.Xr,o,(function(o,c){return c.vs>o}))},t.prototype.fe=function(o,c,v){for(var d=null,y=o;y<c;y++){var _=this.Xr[y].St[v];Number.isNaN(_)||(null===d?d={ce:_,ve:_}:(_<d.ce&&(d.ce=_),_>d.ve&&(d.ve=_)))}return d},t.prototype.re=function(o,c,v){if(this.wi())return null;var d=null,y=u(this.Qr()),_=u(this.un()),B=Math.max(o,y),z=Math.min(c,_),E=30*Math.ceil(B/30),R=Math.max(E,30*Math.floor(z/30)),W=this.oe(B),O=this.le(Math.min(z,E,c));d=pi(d,this.fe(W,O,v));var G=this.Zr.get(v);void 0===G&&(G=new Map,this.Zr.set(v,G));for(var V=Math.max(E+1,B);V<R;V+=30){var F=Math.floor(V/30),X=G.get(F);if(void 0===X){var Y=this.oe(30*F),J=this.le(30*(F+1)-1);X=this.fe(Y,J,v),G.set(F,X)}d=pi(d,X)}return W=this.oe(R),O=this.le(z),pi(d,this.fe(W,O,v))},t}();function pi(o,c){return null===o?c:null===c?o:{ce:Math.min(o.ce,c.ce),ve:Math.max(o.ve,c.ve)}}var Ri=function(o){function i(c,v,d){var y=o.call(this,c)||this;y.Bt=new Ni,y.Or=new wi(y),y._e=[],y.de=new li(y),y.we=null,y.Me=null,y.be=[],y.me=[],y.pe=null,y.zi=v,y.ge=d;var _=new gi(y);return y.Ei=[_],y.Vr=new oi(_,y,c),"Area"!==d&&"Line"!==d&&"Baseline"!==d||(y.we=new vi(y)),y.ye(),y.ke(),y}return m(i,o),i.prototype.g=function(){null!==this.pe&&clearTimeout(this.pe)},i.prototype.ur=function(o){return this.zi.priceLineColor||o},i.prototype.jh=function(o){var c={qh:!0},v=this.Ct();if(this.jt().bt().wi()||v.wi()||this.Bt.wi())return c;var d,y,_=this.jt().bt().ss(),B=this.kt();if(null===_||null===B)return c;if(o){var z=this.Bt.Gr();if(null===z)return c;d=z,y=z.vs}else{var E=this.Bt.ne(_.jn(),-1);if(null===E)return c;if(null===(d=this.Bt.Kr(E.vs)))return c;y=E.vs}var R=d.St[3],W=this.ls().As(y,{St:d}),O=v.xt(R,B.St);return{qh:!1,et:R,Gt:v.Mi(R,B.St),_r:v.Fr(R),dr:v.Ne(R,B.St),A:W.Ds,ti:O,vs:y}},i.prototype.ls=function(){return null!==this.Me||(this.Me=new Pi(this)),this.Me},i.prototype.W=function(){return this.zi},i.prototype.Pr=function(o){var c=o.priceScaleId;void 0!==c&&c!==this.zi.priceScaleId&&this.jt().xe(this,c),k(this.zi,o),null!==this.ki&&void 0!==o.scaleMargins&&this.ki.Pr({scaleMargins:o.scaleMargins}),void 0!==o.priceFormat&&(this.ye(),this.jt().Ce()),this.jt().Se(this),this.jt().Te(),this.Hi.vt("options")},i.prototype.Z=function(o,c){this.Bt.Z(o),this.De(),this.Hi.vt("data"),this.Ri.vt("data"),null!==this.we&&(c&&c.Ae?this.we.Wh():0===o.length&&this.we.Ph());var v=this.jt().oh(this);this.jt().Be(v),this.jt().Se(this),this.jt().Te(),this.jt().Wr()},i.prototype.Le=function(o){this.be=o.map((function(o){return p({},o)})),this.De();var c=this.jt().oh(this);this.Ri.vt("data"),this.jt().Be(c),this.jt().Se(this),this.jt().Te(),this.jt().Wr()},i.prototype.rr=function(){return this.me},i.prototype.Ee=function(o){var c=new Ci(this,o);return this._e.push(c),this.jt().Se(this),c},i.prototype.Fe=function(o){var c=this._e.indexOf(o);-1!==c&&this._e.splice(c,1),this.jt().Se(this)},i.prototype.Rr=function(){return this.ge},i.prototype.kt=function(){var o=this.Oe();return null===o?null:{St:o.St[3],Ve:o.rt}},i.prototype.Oe=function(){var o=this.jt().bt().ss();if(null===o)return null;var c=o.In();return this.Bt.ne(c,1)},i.prototype.an=function(){return this.Bt},i.prototype.er=function(o){var c=this.Bt.Kr(o);return null===c?null:"Bar"===this.ge||"Candlestick"===this.ge?{open:c.St[0],high:c.St[1],low:c.St[2],close:c.St[3]}:c.St[3]},i.prototype.Pe=function(o){var c=this,v=this.we;return null!==v&&v.yt()?(null===this.pe&&v.Rh()&&(this.pe=setTimeout((function(){c.pe=null,c.jt().We()}),0)),v.zh(),[v]):[]},i.prototype.tn=function(){var o=[];this.ze()||o.push(this.de);for(var c=0,v=this._e;c<v.length;c++){var d=v[c];o.push.apply(o,d.tn())}return o.push(this.Hi,this.Or,this.Vr,this.Ri),o},i.prototype.nn=function(o,c){if(c!==this.ki&&!this.ze())return[];for(var v=g([],this.Ei,!0),d=0,y=this._e;d<y.length;d++){var _=y[d];v.push(_.zr())}return v},i.prototype.Re=function(o,c){var v=this;if(void 0!==this.zi.autoscaleInfoProvider){var d=this.zi.autoscaleInfoProvider((function(){var d=v.Ie(o,c);return null===d?null:d.Cr()}));return Mi.Sr(d)}return this.Ie(o,c)},i.prototype.je=function(){return this.zi.priceFormat.minMove},i.prototype.qe=function(){return this.Ue},i.prototype.hn=function(){var o;this.Hi.vt(),this.Ri.vt();for(var c=0,v=this.Ei;c<v.length;c++)v[c].vt();for(var d=0,y=this._e;d<y.length;d++)y[d].vt();this.Or.vt(),this.de.vt(),null===(o=this.we)||void 0===o||o.vt()},i.prototype.Ct=function(){return u(o.prototype.Ct.call(this))},i.prototype.gt=function(o){if("Line"!==this.ge&&"Area"!==this.ge&&"Baseline"!==this.ge||!this.zi.crosshairMarkerVisible)return null;var c=this.Bt.Kr(o);return null===c?null:{et:c.St[3],st:this.He(),Tt:this.Ye(),Nt:this.$e(o)}},i.prototype.ar=function(){return this.zi.title},i.prototype.yt=function(){return this.zi.visible},i.prototype.ze=function(){return!it(this.Ct().Ke())},i.prototype.Ie=function(o,c){if(!x(o)||!x(c)||this.Bt.wi())return null;var v="Line"===this.ge||"Area"===this.ge||"Baseline"===this.ge||"Histogram"===this.ge?[3]:[2,1],d=this.Bt.he(o,c,v),y=null!==d?new mi(d.ce,d.ve):null;if("Histogram"===this.Rr()){var _=this.zi.base,B=new mi(_,_);y=null!==y?y.Nn(B):B}return new Mi(y,this.Ri.hr())},i.prototype.He=function(){switch(this.ge){case"Line":case"Area":case"Baseline":return this.zi.crosshairMarkerRadius}return 0},i.prototype.Ye=function(){switch(this.ge){case"Line":case"Area":case"Baseline":var o=this.zi.crosshairMarkerBorderColor;if(0!==o.length)return o}return null},i.prototype.$e=function(o){switch(this.ge){case"Line":case"Area":case"Baseline":var c=this.zi.crosshairMarkerBackgroundColor;if(0!==c.length)return c}return this.ls().As(o).Ds},i.prototype.ye=function(){switch(this.zi.priceFormat.type){case"custom":this.Ue={format:this.zi.priceFormat.formatter};break;case"volume":this.Ue=new gt(this.zi.priceFormat.precision);break;case"percent":this.Ue=new yt(this.zi.priceFormat.precision);break;default:var o=Math.pow(10,this.zi.priceFormat.precision);this.Ue=new pt(o,this.zi.priceFormat.minMove*o)}null!==this.ki&&this.ki.Xe()},i.prototype.De=function(){var o=this,c=this.jt().bt();if(c.wi()||0===this.Bt.hs())this.me=[];else{var v=u(this.Bt.Qr());this.me=this.be.map((function(d,y){var _=u(c.Ze(d.time,!0)),B=_<v?1:-1;return{time:u(o.Bt.ne(_,B)).vs,position:d.position,shape:d.shape,color:d.color,id:d.id,Xh:y,text:d.text,size:d.size}}))}},i.prototype.ke=function(){switch(this.Ri=new yi(this,this.jt()),this.ge){case"Bar":this.Hi=new At(this,this.jt());break;case"Candlestick":this.Hi=new jt(this,this.jt());break;case"Line":this.Hi=new Ht(this,this.jt());break;case"Area":this.Hi=new Pt(this,this.jt());break;case"Baseline":this.Hi=new Ft(this,this.jt());break;case"Histogram":this.Hi=new Zt(this,this.jt());break;default:throw Error("Unknown chart style assigned: "+this.ge)}},i}(xi),Wi=function(){function t(o){this.zi=o}return t.prototype.Je=function(o,c,v){var d=o;if(0===this.zi.mode)return d;var y=v.ji(),_=y.kt();if(null===_)return d;var B=y.xt(o,_),z=v.Ge().filter((function(o){return o instanceof Ri})).reduce((function(o,d){if(v.lh(d)||!d.yt())return o;var y=d.Ct(),_=d.an();if(y.wi()||!_.Uh(c))return o;var B=_.Kr(c);if(null===B)return o;var z=a(d.kt());return o.concat([y.xt(B.St[3],z.St)])}),[]);if(0===z.length)return d;z.sort((function(o,c){return Math.abs(o-B)-Math.abs(c-B)}));var E=z[0];return y.qi(E,_)},t}(),Vi=function(){function t(){this.Bt=null}return t.prototype.Z=function(o){this.Bt=o},t.prototype.H=function(o,c,v,d){var y=this;if(null!==this.Bt){var _=Math.max(1,Math.floor(c));o.lineWidth=_;var B=Math.ceil(this.Bt.Ot*c),z=Math.ceil(this.Bt.Ft*c);!function(o,c){o.save(),o.lineWidth%2&&o.translate(.5,.5),c(),o.restore()}(o,(function(){var v=u(y.Bt);if(v.Qe){o.strokeStyle=v.tu,s(o,v.iu),o.beginPath();for(var d=0,E=v.nu;d<E.length;d++){var R=E[d],W=Math.round(R.su*c);o.moveTo(W,-_),o.lineTo(W,B+_)}o.stroke()}if(v.hu){o.strokeStyle=v.ru,s(o,v.eu),o.beginPath();for(var O=0,G=v.uu;O<G.length;O++){var V=G[O],F=Math.round(V.su*c);o.moveTo(-_,F),o.lineTo(z+_,F)}o.stroke()}}))}},t}(),Xi=function(){function t(o){this.zt=new Vi,this.ft=!0,this.Di=o}return t.prototype.vt=function(){this.ft=!0},t.prototype.dt=function(o,c){if(this.ft){var v=this.Di.jt().W().grid,d={Ot:o,Ft:c,hu:v.horzLines.visible,Qe:v.vertLines.visible,ru:v.horzLines.color,tu:v.vertLines.color,eu:v.horzLines.style,iu:v.vertLines.style,uu:this.Di.ji().au(),nu:this.Di.jt().bt().au()||[]};this.zt.Z(d),this.ft=!1}return this.zt},t}(),Yi=function(){function t(o){this.Hi=new Xi(o)}return t.prototype.ou=function(){return this.Hi},t}(),ji={lu:4,fu:1e-4};function Si(o,c){var v=100*(o-c)/c;return c<0?-v:v}function Ti(o,c){var v=Si(o.pr(),c),d=Si(o.gr(),c);return new mi(v,d)}function Di(o,c){var v=100*(o-c)/c+100;return c<0?-v:v}function Ai(o,c){var v=Di(o.pr(),c),d=Di(o.gr(),c);return new mi(v,d)}function Bi(o,c){var v=Math.abs(o);if(v<1e-15)return 0;var d=Ct(v+c.fu)+c.lu;return o<0?-d:d}function Li(o,c){var v=Math.abs(o);if(v<1e-15)return 0;var d=Math.pow(10,v-c.lu)-c.fu;return o<0?-d:d}function Ei(o,c){if(null===o)return null;var v=Bi(o.pr(),c),d=Bi(o.gr(),c);return new mi(v,d)}function Fi(o,c){if(null===o)return null;var v=Li(o.pr(),c),d=Li(o.gr(),c);return new mi(v,d)}function Oi(o){if(null===o)return ji;var c=Math.abs(o.gr()-o.pr());if(c>=1||c<1e-15)return ji;var v=Math.ceil(Math.abs(Math.log10(c))),d=ji.lu+v;return{lu:d,fu:1/Math.pow(10,d)}}var Ji,Ii=function(){function t(o,c){if(this.cu=o,this.vu=c,function(o){if(o<0)return!1;for(var c=o;c>1;c/=10)if(c%10!=0)return!1;return!0}(this.cu))this._u=[2,2.5,2];else{this._u=[];for(var v=this.cu;1!==v;){if(v%2==0)this._u.push(2),v/=2;else{if(v%5!=0)throw new Error("unexpected base");this._u.push(2,2.5),v/=5}if(this._u.length>100)throw new Error("something wrong with base")}}}return t.prototype.du=function(o,c,v){for(var d,y=0===this.cu?0:1/this.cu,_=Math.pow(10,Math.max(0,Math.ceil(Ct(o-c)))),B=0,z=this.vu[0];;){var E=xt(_,y,1e-14)&&_>y+1e-14,R=xt(_,v*z,1e-14),W=xt(_,1,1e-14);if(!(E&&R&&W))break;_/=z,z=this.vu[++B%this.vu.length]}if(_<=y+1e-14&&(_=y),_=Math.max(1,_),this._u.length>0&&(d=_,1,1e-14,Math.abs(d-1)<1e-14))for(B=0,z=this._u[0];xt(_,v*z,1e-14)&&_>y+1e-14;)_/=z,z=this._u[++B%this._u.length];return _},t}(),Zi=function(){function t(o,c,v,d){this.wu=[],this._i=o,this.cu=c,this.Mu=v,this.bu=d}return t.prototype.du=function(o,c){if(o<c)throw new Error("high < low");var v=this._i.Yt(),d=(o-c)*this.mu()/v,y=new Ii(this.cu,[2,2.5,2]),_=new Ii(this.cu,[2,2,2.5]),B=new Ii(this.cu,[2.5,2,2]),z=[];return z.push(y.du(o,c,d),_.du(o,c,d),B.du(o,c,d)),function(o){if(o.length<1)throw Error("array is empty");for(var c=o[0],v=1;v<o.length;++v)o[v]<c&&(c=o[v]);return c}(z)},t.prototype.pu=function(){var o=this._i,c=o.kt();if(null!==c){var v=o.Yt(),d=this.Mu(v-1,c),y=this.Mu(0,c),_=this._i.W().entireTextOnly?this.gu()/2:0,B=_,z=v-1-_,E=Math.max(d,y),R=Math.min(d,y);if(E!==R){for(var W=this.du(E,R),O=E%W,G=E>=R?1:-1,V=null,F=0,X=E-(O+=O<0?W:0);X>R;X-=W){var Y=this.bu(X,c,!0);null!==V&&Math.abs(Y-V)<this.mu()||Y<B||Y>z||(F<this.wu.length?(this.wu[F].su=Y,this.wu[F].yu=o.ku(X)):this.wu.push({su:Y,yu:o.ku(X)}),F++,V=Y,o.Nu()&&(W=this.du(X*G,R)))}this.wu.length=F}else this.wu=[]}else this.wu=[]},t.prototype.au=function(){return this.wu},t.prototype.gu=function(){return this._i.S()},t.prototype.mu=function(){return Math.ceil(2.5*this.gu())},t}();function zi(o){return o.slice().sort((function(o,c){return u(o.xi())-u(c.xi())}))}!function(o){o[o.Normal=0]="Normal",o[o.Logarithmic=1]="Logarithmic",o[o.Percentage=2]="Percentage",o[o.IndexedTo100=3]="IndexedTo100"}(Ji||(Ji={}));var Ki=new yt,qi=new pt(100,1),Qi=function(){function t(o,c,v,d){this.xu=0,this.Cu=null,this.Tr=null,this.Su=null,this.Tu={Du:!1,Au:null},this.Bu=0,this.Lu=0,this.Eu=new V,this.Fu=new V,this.Ou=[],this.Vu=null,this.Pu=null,this.Wu=null,this.zu=null,this.Ue=qi,this.Ru=Oi(null),this.Iu=o,this.zi=c,this.ju=v,this.qu=d,this.Uu=new Zi(this,100,this.Hu.bind(this),this.Yu.bind(this))}return t.prototype.Ke=function(){return this.Iu},t.prototype.W=function(){return this.zi},t.prototype.Pr=function(o){if(k(this.zi,o),this.Xe(),void 0!==o.mode&&this.$u({mh:o.mode}),void 0!==o.scaleMargins){var c=e(o.scaleMargins.top),v=e(o.scaleMargins.bottom);if(c<0||c>1)throw new Error("Invalid top margin - expect value between 0 and 1, given=".concat(c));if(v<0||v>1||c+v>1)throw new Error("Invalid bottom margin - expect value between 0 and 1, given=".concat(v));if(c+v>1)throw new Error("Invalid margins - sum of margins must be less than 1, given=".concat(c+v));this.Ku(),this.Pu=null}},t.prototype.Xu=function(){return this.zi.autoScale},t.prototype.Nu=function(){return 1===this.zi.mode},t.prototype.vr=function(){return 2===this.zi.mode},t.prototype.Zu=function(){return 3===this.zi.mode},t.prototype.mh=function(){return{_n:this.zi.autoScale,Ju:this.zi.invertScale,mh:this.zi.mode}},t.prototype.$u=function(o){var c=this.mh(),v=null;void 0!==o._n&&(this.zi.autoScale=o._n),void 0!==o.mh&&(this.zi.mode=o.mh,2!==o.mh&&3!==o.mh||(this.zi.autoScale=!0),this.Tu.Du=!1),1===c.mh&&o.mh!==c.mh&&(function(o,c){if(null===o)return!1;var v=Li(o.pr(),c),d=Li(o.gr(),c);return isFinite(v)&&isFinite(d)}(this.Tr,this.Ru)?null!==(v=Fi(this.Tr,this.Ru))&&this.Gu(v):this.zi.autoScale=!0),1===o.mh&&o.mh!==c.mh&&null!==(v=Ei(this.Tr,this.Ru))&&this.Gu(v);var d=c.mh!==this.zi.mode;d&&(2===c.mh||this.vr())&&this.Xe(),d&&(3===c.mh||this.Zu())&&this.Xe(),void 0!==o.Ju&&c.Ju!==o.Ju&&(this.zi.invertScale=o.Ju,this.Qu()),this.Fu.m(c,this.mh())},t.prototype.ta=function(){return this.Fu},t.prototype.S=function(){return this.ju.fontSize},t.prototype.Yt=function(){return this.xu},t.prototype.ia=function(o){this.xu!==o&&(this.xu=o,this.Ku(),this.Pu=null)},t.prototype.na=function(){if(this.Cu)return this.Cu;var o=this.Yt()-this.sa()-this.ha();return this.Cu=o,o},t.prototype.Ar=function(){return this.ra(),this.Tr},t.prototype.Gu=function(o,c){var v=this.Tr;(c||null===v&&null!==o||null!==v&&!v.br(o))&&(this.Pu=null,this.Tr=o)},t.prototype.wi=function(){return this.ra(),0===this.xu||!this.Tr||this.Tr.wi()},t.prototype.ea=function(o){return this.Ju()?o:this.Yt()-1-o},t.prototype.xt=function(o,c){return this.vr()?o=Si(o,c):this.Zu()&&(o=Di(o,c)),this.Yu(o,c)},t.prototype.us=function(o,c,v){this.ra();for(var d=this.ha(),y=u(this.Ar()),_=y.pr(),B=y.gr(),z=this.na()-1,E=this.Ju(),R=z/(B-_),W=void 0===v?0:v.from,O=void 0===v?o.length:v.to,G=this.ua(),V=W;V<O;V++){var F=o[V],X=F.et;if(!isNaN(X)){var Y=X;null!==G&&(Y=G(F.et,c));var J=d+R*(Y-_),I=E?J:this.xu-1-J;F.it=I}}},t.prototype.Ss=function(o,c,v){this.ra();for(var d=this.ha(),y=u(this.Ar()),_=y.pr(),B=y.gr(),z=this.na()-1,E=this.Ju(),R=z/(B-_),W=void 0===v?0:v.from,O=void 0===v?o.length:v.to,G=this.ua(),V=W;V<O;V++){var F=o[V],X=F.open,Y=F.high,J=F.low,I=F.close;null!==G&&(X=G(F.open,c),Y=G(F.high,c),J=G(F.low,c),I=G(F.close,c));var Z=d+R*(X-_),K=E?Z:this.xu-1-Z;F.xs=K,Z=d+R*(Y-_),K=E?Z:this.xu-1-Z,F.ys=K,Z=d+R*(J-_),K=E?Z:this.xu-1-Z,F.ks=K,Z=d+R*(I-_),K=E?Z:this.xu-1-Z,F.Cs=K}},t.prototype.qi=function(o,c){var v=this.Hu(o,c);return this.aa(v,c)},t.prototype.aa=function(o,c){var v=o;return this.vr()?v=function(o,c){return c<0&&(o=-o),o/100*c+c}(v,c):this.Zu()&&(v=function(o,c){return o-=100,c<0&&(o=-o),o/100*c+c}(v,c)),v},t.prototype.Ge=function(){return this.Ou},t.prototype.oa=function(){if(this.Vu)return this.Vu;for(var o=[],c=0;c<this.Ou.length;c++){var v=this.Ou[c];null===v.xi()&&v.Ci(c+1),o.push(v)}return o=zi(o),this.Vu=o,this.Vu},t.prototype.la=function(o){-1===this.Ou.indexOf(o)&&(this.Ou.push(o),this.Xe(),this.fa())},t.prototype.ca=function(o){var c=this.Ou.indexOf(o);if(-1===c)throw new Error("source is not attached to scale");this.Ou.splice(c,1),0===this.Ou.length&&(this.$u({_n:!0}),this.Gu(null)),this.Xe(),this.fa()},t.prototype.kt=function(){for(var o=null,c=0,v=this.Ou;c<v.length;c++){var d=v[c].kt();null!==d&&(null===o||d.Ve<o.Ve)&&(o=d)}return null===o?null:o.St},t.prototype.Ju=function(){return this.zi.invertScale},t.prototype.au=function(){var o=null===this.kt();if(null!==this.Pu&&(o||this.Pu.va===o))return this.Pu.au;this.Uu.pu();var c=this.Uu.au();return this.Pu={au:c,va:o},this.Eu.m(),c},t.prototype._a=function(){return this.Eu},t.prototype.da=function(o){this.vr()||this.Zu()||null===this.Wu&&null===this.Su&&(this.wi()||(this.Wu=this.xu-o,this.Su=u(this.Ar()).mr()))},t.prototype.wa=function(o){if(!this.vr()&&!this.Zu()&&null!==this.Wu){this.$u({_n:!1}),(o=this.xu-o)<0&&(o=0);var c=(this.Wu+.2*(this.xu-1))/(o+.2*(this.xu-1)),v=u(this.Su).mr();c=Math.max(c,.1),v.kr(c),this.Gu(v)}},t.prototype.Ma=function(){this.vr()||this.Zu()||(this.Wu=null,this.Su=null)},t.prototype.ba=function(o){this.Xu()||null===this.zu&&null===this.Su&&(this.wi()||(this.zu=o,this.Su=u(this.Ar()).mr()))},t.prototype.ma=function(o){if(!this.Xu()&&null!==this.zu){var c=u(this.Ar()).yr()/(this.na()-1),v=o-this.zu;this.Ju()&&(v*=-1);var d=v*c,y=u(this.Su).mr();y.Nr(d),this.Gu(y,!0),this.Pu=null}},t.prototype.pa=function(){this.Xu()||null!==this.zu&&(this.zu=null,this.Su=null)},t.prototype.qe=function(){return this.Ue||this.Xe(),this.Ue},t.prototype.Mi=function(o,c){switch(this.zi.mode){case 2:return this.qe().format(Si(o,c));case 3:return this.qe().format(Di(o,c));default:return this.ga(o)}},t.prototype.ku=function(o){switch(this.zi.mode){case 2:case 3:return this.qe().format(o);default:return this.ga(o)}},t.prototype.Fr=function(o){return this.ga(o,u(this.ya()).qe())},t.prototype.Ne=function(o,c){return o=Si(o,c),Ki.format(o)},t.prototype.ka=function(){return this.Ou},t.prototype.Na=function(o){this.Tu={Au:o,Du:!1}},t.prototype.hn=function(){this.Ou.forEach((function(o){return o.hn()}))},t.prototype.Xe=function(){this.Pu=null;var o=this.ya(),c=100;null!==o&&(c=Math.round(1/o.je())),this.Ue=qi,this.vr()?(this.Ue=Ki,c=100):this.Zu()?(this.Ue=new pt(100,1),c=100):null!==o&&(this.Ue=o.qe()),this.Uu=new Zi(this,c,this.Hu.bind(this),this.Yu.bind(this)),this.Uu.pu()},t.prototype.fa=function(){this.Vu=null},t.prototype.ya=function(){return this.Ou[0]||null},t.prototype.sa=function(){return this.Ju()?this.zi.scaleMargins.bottom*this.Yt()+this.Lu:this.zi.scaleMargins.top*this.Yt()+this.Bu},t.prototype.ha=function(){return this.Ju()?this.zi.scaleMargins.top*this.Yt()+this.Bu:this.zi.scaleMargins.bottom*this.Yt()+this.Lu},t.prototype.ra=function(){this.Tu.Du||(this.Tu.Du=!0,this.xa())},t.prototype.Ku=function(){this.Cu=null},t.prototype.Yu=function(o,c){if(this.ra(),this.wi())return 0;o=this.Nu()&&o?Bi(o,this.Ru):o;var v=u(this.Ar()),d=this.ha()+(this.na()-1)*(o-v.pr())/v.yr();return this.ea(d)},t.prototype.Hu=function(o,c){if(this.ra(),this.wi())return 0;var v=this.ea(o),d=u(this.Ar()),y=d.pr()+d.yr()*((v-this.ha())/(this.na()-1));return this.Nu()?Li(y,this.Ru):y},t.prototype.Qu=function(){this.Pu=null,this.Uu.pu()},t.prototype.xa=function(){var o=this.Tu.Au;if(null!==o){for(var c,v,d=null,y=0,_=0,B=0,z=this.ka();B<z.length;B++){var E=z[B];if(E.yt()){var R=E.kt();if(null!==R){var W=E.Re(o.In(),o.jn()),O=W&&W.Ar();if(null!==O){switch(this.zi.mode){case 1:O=Ei(O,this.Ru);break;case 2:O=Ti(O,R.St);break;case 3:O=Ai(O,R.St)}if(d=null===d?O:d.Nn(u(O)),null!==W){var G=W.Br();null!==G&&(y=Math.max(y,G.above),_=Math.max(y,G.below))}}}}}if(y===this.Bu&&_===this.Lu||(this.Bu=y,this.Lu=_,this.Pu=null,this.Ku()),null!==d){if(d.pr()===d.gr()){var V=this.ya(),F=5*(null===V||this.vr()||this.Zu()?1:V.je());this.Nu()&&(d=Fi(d,this.Ru)),d=new mi(d.pr()-F,d.gr()+F),this.Nu()&&(d=Ei(d,this.Ru))}if(this.Nu()){var X=Fi(d,this.Ru),Y=Oi(X);if(c=Y,v=this.Ru,c.lu!==v.lu||c.fu!==v.fu){var J=null!==this.Su?Fi(this.Su,this.Ru):null;this.Ru=Y,d=Ei(X,Y),null!==J&&(this.Su=Ei(J,Y))}}this.Gu(d)}else null===this.Tr&&(this.Gu(new mi(-.5,.5)),this.Ru=Oi(null));this.Tu.Du=!0}},t.prototype.ua=function(){var o=this;return this.vr()?Si:this.Zu()?Di:this.Nu()?function(c){return Bi(c,o.Ru)}:null},t.prototype.ga=function(o,c){return void 0===this.qu.priceFormatter?(void 0===c&&(c=this.qe()),c.format(o)):this.qu.priceFormatter(o)},t}(),$i=function(){function t(o,c){this.Ou=[],this.Ca=new Map,this.xu=0,this.hh=0,this.Sa=1e3,this.Vu=null,this.Ta=new V,this.Da=o,this.pi=c,this.Aa=new Yi(this);var v=c.W();this.Ba=this.La("left",v.leftPriceScale),this.Ea=this.La("right",v.rightPriceScale),this.Ba.ta().u(this.Fa.bind(this,this.Ba),this),this.Ea.ta().u(this.Fa.bind(this,this.Ba),this),this.Oa(v)}return t.prototype.Oa=function(o){if(o.leftPriceScale&&this.Ba.Pr(o.leftPriceScale),o.rightPriceScale&&this.Ea.Pr(o.rightPriceScale),o.localization&&(this.Ba.Xe(),this.Ea.Xe()),o.overlayPriceScales)for(var c=0,v=Array.from(this.Ca.values());c<v.length;c++){var d=u(v[c][0].Ct());d.Pr(o.overlayPriceScales),o.localization&&d.Xe()}},t.prototype.Va=function(o){switch(o){case"left":return this.Ba;case"right":return this.Ea}return this.Ca.has(o)?e(this.Ca.get(o))[0].Ct():null},t.prototype.g=function(){this.jt().Pa().M(this),this.Ba.ta().M(this),this.Ea.ta().M(this),this.Ou.forEach((function(o){o.g&&o.g()})),this.Ta.m()},t.prototype.Wa=function(){return this.Sa},t.prototype.za=function(o){this.Sa=o},t.prototype.jt=function(){return this.pi},t.prototype.Ht=function(){return this.hh},t.prototype.Yt=function(){return this.xu},t.prototype.Ra=function(o){this.hh=o,this.Ia()},t.prototype.ia=function(o){var c=this;this.xu=o,this.Ba.ia(o),this.Ea.ia(o),this.Ou.forEach((function(v){if(c.lh(v)){var d=v.Ct();null!==d&&d.ia(o)}})),this.Ia()},t.prototype.Ge=function(){return this.Ou},t.prototype.lh=function(o){var c=o.Ct();return null===c||this.Ba!==c&&this.Ea!==c},t.prototype.la=function(o,c,v){var d=void 0!==v?v:this.qa().ja+1;this.Ua(o,c,d)},t.prototype.ca=function(o){var c=this.Ou.indexOf(o);r(-1!==c,"removeDataSource: invalid data source"),this.Ou.splice(c,1);var v=u(o.Ct()).Ke();if(this.Ca.has(v)){var d=e(this.Ca.get(v)),y=d.indexOf(o);-1!==y&&(d.splice(y,1),0===d.length&&this.Ca.delete(v))}var _=o.Ct();_&&_.Ge().indexOf(o)>=0&&_.ca(o),null!==_&&(_.fa(),this.Ha(_)),this.Vu=null},t.prototype._h=function(o){return o===this.Ba?"left":o===this.Ea?"right":"overlay"},t.prototype.Ya=function(){return this.Ba},t.prototype.$a=function(){return this.Ea},t.prototype.Ka=function(o,c){o.da(c)},t.prototype.Xa=function(o,c){o.wa(c),this.Ia()},t.prototype.Za=function(o){o.Ma()},t.prototype.Ja=function(o,c){o.ba(c)},t.prototype.Ga=function(o,c){o.ma(c),this.Ia()},t.prototype.Qa=function(o){o.pa()},t.prototype.Ia=function(){this.Ou.forEach((function(o){o.hn()}))},t.prototype.ji=function(){var o=null;return this.pi.W().rightPriceScale.visible&&0!==this.Ea.Ge().length?o=this.Ea:this.pi.W().leftPriceScale.visible&&0!==this.Ba.Ge().length?o=this.Ba:0!==this.Ou.length&&(o=this.Ou[0].Ct()),null===o&&(o=this.Ea),o},t.prototype.fh=function(){var o=null;return this.pi.W().rightPriceScale.visible?o=this.Ea:this.pi.W().leftPriceScale.visible&&(o=this.Ba),o},t.prototype.Ha=function(o){null!==o&&o.Xu()&&this.io(o)},t.prototype.no=function(o){var c=this.Da.ss();o.$u({_n:!0}),null!==c&&o.Na(c),this.Ia()},t.prototype.so=function(){this.io(this.Ba),this.io(this.Ea)},t.prototype.ho=function(){var o=this;this.Ha(this.Ba),this.Ha(this.Ea),this.Ou.forEach((function(c){o.lh(c)&&o.Ha(c.Ct())})),this.Ia(),this.pi.Wr()},t.prototype.oa=function(){return null===this.Vu&&(this.Vu=zi(this.Ou)),this.Vu},t.prototype.ro=function(){return this.Ta},t.prototype.eo=function(){return this.Aa},t.prototype.io=function(o){var c=o.ka();if(c&&c.length>0&&!this.Da.wi()){var v=this.Da.ss();null!==v&&o.Na(v)}o.hn()},t.prototype.qa=function(){var o=this.oa();if(0===o.length)return{uo:0,ja:0};for(var c=0,v=0,d=0;d<o.length;d++){var y=o[d].xi();null!==y&&(y<c&&(c=y),y>v&&(v=y))}return{uo:c,ja:v}},t.prototype.Ua=function(o,c,v){var d=this.Va(c);if(null===d&&(d=this.La(c,this.pi.W().overlayPriceScales)),this.Ou.push(o),!it(c)){var y=this.Ca.get(c)||[];y.push(o),this.Ca.set(c,y)}d.la(o),o.Si(d),o.Ci(v),this.Ha(d),this.Vu=null},t.prototype.Fa=function(o,c,v){c.mh!==v.mh&&this.io(o)},t.prototype.La=function(o,c){var v=p({visible:!0,autoScale:!0},T(c)),d=new Qi(o,v,this.pi.W().layout,this.pi.W().localization);return d.ia(this.Yt()),d},t}(),Ui=function(o){return o.getUTCFullYear()};var tn=function(){function t(o,c){void 0===o&&(o="yyyy-MM-dd"),void 0===c&&(c="default"),this.ao=o,this.oo=c}return t.prototype.lo=function(o){return function Hi(o,c,v){return c.replace(/yyyy/g,function(o){return ht(Ui(o),4)}(o)).replace(/yy/g,function(o){return ht(Ui(o)%100,2)}(o)).replace(/MMMM/g,function(o,c){return new Date(o.getUTCFullYear(),o.getUTCMonth(),1).toLocaleString(c,{month:"long"})}(o,v)).replace(/MMM/g,function(o,c){return new Date(o.getUTCFullYear(),o.getUTCMonth(),1).toLocaleString(c,{month:"short"})}(o,v)).replace(/MM/g,function(o){return ht(function(o){return o.getUTCMonth()+1}(o),2)}(o)).replace(/dd/g,function(o){return ht(function(o){return o.getUTCDate()}(o),2)}(o))}(o,this.ao,this.oo)},t}(),nn=function(){function t(o){this.fo=o||"%h:%m:%s"}return t.prototype.lo=function(o){return this.fo.replace("%h",ht(o.getUTCHours(),2)).replace("%m",ht(o.getUTCMinutes(),2)).replace("%s",ht(o.getUTCSeconds(),2))},t}(),en={co:"yyyy-MM-dd",vo:"%h:%m:%s",_o:" ",do:"default"},sn=function(){function t(o){void 0===o&&(o={});var c=p(p({},en),o);this.wo=new tn(c.co,c.do),this.Mo=new nn(c.vo),this.bo=c._o}return t.prototype.lo=function(o){return"".concat(this.wo.lo(o)).concat(this.bo).concat(this.Mo.lo(o))},t}(),rn=function(){function t(o,c){void 0===c&&(c=50),this.mo=0,this.po=1,this.yo=1,this.Gs=new Map,this.ko=new Map,this.No=o,this.xo=c}return t.prototype.lo=function(o){var c=void 0===o.Co?new Date(1e3*o.So).getTime():new Date(Date.UTC(o.Co.year,o.Co.month-1,o.Co.day)).getTime(),v=this.Gs.get(c);if(void 0!==v)return v.To;if(this.mo===this.xo){var d=this.ko.get(this.yo);this.ko.delete(this.yo),this.Gs.delete(e(d)),this.yo++,this.mo--}var y=this.No(o);return this.Gs.set(c,{To:y,Do:this.po}),this.ko.set(this.po,c),this.mo++,this.po++,y},t}(),on=function(){function t(o,c){r(o<=c,"right should be >= left"),this.Ao=o,this.Bo=c}return t.prototype.In=function(){return this.Ao},t.prototype.jn=function(){return this.Bo},t.prototype.Lo=function(){return this.Bo-this.Ao+1},t.prototype.Uh=function(o){return this.Ao<=o&&o<=this.Bo},t.prototype.br=function(o){return this.Ao===o.In()&&this.Bo===o.jn()},t}();function Gi(o,c){return null===o||null===c?o===c:o.br(c)}var hn,un=function(){function t(){this.Eo=new Map,this.Gs=null}return t.prototype.Fo=function(o,c){this.Oo(c),this.Gs=null;for(var v=c;v<o.length;++v){var d=o[v],y=this.Eo.get(d.Vo);void 0===y&&(y=[],this.Eo.set(d.Vo,y)),y.push({vs:v,rt:d.rt,Po:d.Vo})}},t.prototype.Wo=function(o,c){var v=Math.ceil(c/o);return null!==this.Gs&&this.Gs.zo===v||(this.Gs={au:this.Ro(v),zo:v}),this.Gs.au},t.prototype.Oo=function(o){if(0!==o){var c=[];this.Eo.forEach((function(v,d){o<=v[0].vs?c.push(d):v.splice(vt(v,o,(function(c){return c.vs<o})),1/0)}));for(var v=0,d=c;v<d.length;v++){var y=d[v];this.Eo.delete(y)}}else this.Eo.clear()},t.prototype.Ro=function(o){for(var c=[],v=0,d=Array.from(this.Eo.keys()).sort((function(o,c){return c-o}));v<d.length;v++){var y=d[v];if(this.Eo.get(y)){var _=c;c=[];for(var B=_.length,z=0,E=e(this.Eo.get(y)),R=E.length,W=1/0,O=-1/0,G=0;G<R;G++){for(var V=E[G],F=V.vs;z<B;){var X=_[z],Y=X.vs;if(!(Y<F)){W=Y;break}z++,c.push(X),O=Y,W=1/0}W-F>=o&&F-O>=o&&(c.push(V),O=F)}for(;z<B;z++)c.push(_[z])}}return c},t}(),an=function(){function t(o){this.Io=o}return t.prototype.jo=function(){return null===this.Io?null:new on(Math.floor(this.Io.In()),Math.ceil(this.Io.jn()))},t.prototype.qo=function(){return this.Io},t.Uo=function(){return new t(null)},t}();!function(o){o[o.Year=0]="Year",o[o.Month=1]="Month",o[o.DayOfMonth=2]="DayOfMonth",o[o.Time=3]="Time",o[o.TimeWithSeconds=4]="TimeWithSeconds"}(hn||(hn={}));var ln,fn=function(){function t(o,c,v){this.hh=0,this.Ho=null,this.Yo=[],this.zu=null,this.Wu=null,this.$o=new un,this.Ko=new Map,this.Xo=an.Uo(),this.Zo=!0,this.Jo=new V,this.Go=new V,this.Qo=new V,this.tl=null,this.il=null,this.nl=[],this.zi=c,this.qu=v,this.sl=c.rightOffset,this.hl=c.barSpacing,this.pi=o,this.rl()}return t.prototype.W=function(){return this.zi},t.prototype.el=function(o){k(this.qu,o),this.ul(),this.rl()},t.prototype.Pr=function(o,c){var v;k(this.zi,o),this.zi.fixLeftEdge&&this.al(),this.zi.fixRightEdge&&this.ol(),void 0!==o.barSpacing&&this.pi.gn(o.barSpacing),void 0!==o.rightOffset&&this.pi.yn(o.rightOffset),void 0!==o.minBarSpacing&&this.pi.gn(null!==(v=o.barSpacing)&&void 0!==v?v:this.hl),this.ul(),this.rl(),this.Qo.m()},t.prototype.gi=function(o){var c;return(null===(c=this.Yo[o])||void 0===c?void 0:c.rt)||null},t.prototype.Ze=function(o,c){if(this.Yo.length<1)return null;if(o.So>this.Yo[this.Yo.length-1].rt.So)return c?this.Yo.length-1:null;var v=vt(this.Yo,o.So,(function(o,c){return o.rt.So<c}));return o.So<this.Yo[v].rt.So?c?v:null:v},t.prototype.wi=function(){return 0===this.hh||0===this.Yo.length||null===this.Ho},t.prototype.ss=function(){return this.ll(),this.Xo.jo()},t.prototype.fl=function(){return this.ll(),this.Xo.qo()},t.prototype.cl=function(){var o=this.ss();if(null===o)return null;var c={from:o.In(),to:o.jn()};return this.vl(c)},t.prototype.vl=function(o){var c=Math.round(o.from),v=Math.round(o.to),d=u(this._l()),y=u(this.dl());return{from:u(this.gi(Math.max(d,c))),to:u(this.gi(Math.min(y,v)))}},t.prototype.wl=function(o){return{from:u(this.Ze(o.from,!0)),to:u(this.Ze(o.to,!0))}},t.prototype.Ht=function(){return this.hh},t.prototype.Ra=function(o){if(isFinite(o)&&!(o<=0)&&this.hh!==o){if(this.zi.lockVisibleTimeRangeOnResize&&this.hh){var c=this.hl*o/this.hh;this.hl=c}if(this.zi.fixLeftEdge){var v=this.ss();if(null!==v&&v.In()<=0){var d=this.hh-o;this.sl-=Math.round(d/this.hl)+1}}this.hh=o,this.Zo=!0,this.Ml(),this.bl()}},t.prototype.At=function(o){if(this.wi()||!x(o))return 0;var c=this.ml()+this.sl-o;return this.hh-(c+.5)*this.hl-1},t.prototype.es=function(o,c){for(var v=this.ml(),d=void 0===c?0:c.from,y=void 0===c?o.length:c.to,_=d;_<y;_++){var B=o[_].rt,z=v+this.sl-B,E=this.hh-(z+.5)*this.hl-1;o[_].tt=E}},t.prototype.pl=function(o){return Math.ceil(this.gl(o))},t.prototype.yn=function(o){this.Zo=!0,this.sl=o,this.bl(),this.pi.yl(),this.pi.Wr()},t.prototype.ws=function(){return this.hl},t.prototype.gn=function(o){this.kl(o),this.bl(),this.pi.yl(),this.pi.Wr()},t.prototype.Nl=function(){return this.sl},t.prototype.au=function(){if(this.wi())return null;if(null!==this.il)return this.il;for(var o=this.hl,c=5*(this.pi.W().layout.fontSize+4),v=Math.round(c/o),d=u(this.ss()),y=Math.max(d.In(),d.In()-v),_=Math.max(d.jn(),d.jn()-v),B=this.$o.Wo(o,c),z=this._l()+v,E=this.dl()-v,R=this.xl(),W=this.zi.fixLeftEdge||R,O=this.zi.fixRightEdge||R,G=0,V=0,F=B;V<F.length;V++){var X=F[V];if(y<=X.vs&&X.vs<=_){var Y=void 0;G<this.nl.length?((Y=this.nl[G]).su=this.At(X.vs),Y.yu=this.Cl(X.rt,X.Po),Y.Po=X.Po):(Y={Sl:!1,su:this.At(X.vs),yu:this.Cl(X.rt,X.Po),Po:X.Po},this.nl.push(Y)),this.hl>c/2&&!R?Y.Sl=!1:Y.Sl=W&&X.vs<=z||O&&X.vs>=E,G++}}return this.nl.length=G,this.il=this.nl,this.nl},t.prototype.Tl=function(){this.Zo=!0,this.gn(this.zi.barSpacing),this.yn(this.zi.rightOffset)},t.prototype.Dl=function(o){this.Zo=!0,this.Ho=o,this.bl(),this.al()},t.prototype.Al=function(o,c){var v=this.gl(o),d=this.ws(),y=d+c*(d/10);this.gn(y),this.zi.rightBarStaysOnScroll||this.yn(this.Nl()+(v-this.gl(o)))},t.prototype.da=function(o){this.zu&&this.pa(),null===this.Wu&&null===this.tl&&(this.wi()||(this.Wu=o,this.Bl()))},t.prototype.wa=function(o){if(null!==this.tl){var c=Nt(this.hh-o,0,this.hh),v=Nt(this.hh-u(this.Wu),0,this.hh);0!==c&&0!==v&&this.gn(this.tl.ws*c/v)}},t.prototype.Ma=function(){null!==this.Wu&&(this.Wu=null,this.Ll())},t.prototype.ba=function(o){null===this.zu&&null===this.tl&&(this.wi()||(this.zu=o,this.Bl()))},t.prototype.ma=function(o){if(null!==this.zu){var c=(this.zu-o)/this.ws();this.sl=u(this.tl).Nl+c,this.Zo=!0,this.bl()}},t.prototype.pa=function(){null!==this.zu&&(this.zu=null,this.Ll())},t.prototype.El=function(){this.Fl(this.zi.rightOffset)},t.prototype.Fl=function(o,c){var v=this;if(void 0===c&&(c=400),!isFinite(o))throw new RangeError("offset is required and must be finite number");if(!isFinite(c)||c<=0)throw new RangeError("animationDuration (optional) must be finite positive number");var d=this.sl,y=performance.now(),r=function(){var _=(performance.now()-y)/c,B=_>=1,z=B?o:d+(o-d)*_;v.yn(z),B||setTimeout(r,20)};r()},t.prototype.vt=function(o,c){this.Zo=!0,this.Yo=o,this.$o.Fo(o,c),this.bl()},t.prototype.Ol=function(){return this.Jo},t.prototype.Vl=function(){return this.Go},t.prototype.Pl=function(){return this.Qo},t.prototype.ml=function(){return this.Ho||0},t.prototype.Wl=function(o){var c=o.Lo();this.kl(this.hh/c),this.sl=o.jn()-this.ml(),this.bl(),this.Zo=!0,this.pi.yl(),this.pi.Wr()},t.prototype.zl=function(){var o=this._l(),c=this.dl();null!==o&&null!==c&&this.Wl(new on(o,c+this.zi.rightOffset))},t.prototype.Rl=function(o){var c=new on(o.from,o.to);this.Wl(c)},t.prototype.yi=function(o){return void 0!==this.qu.timeFormatter?this.qu.timeFormatter(o.Co||o.So):this.Il.lo(new Date(1e3*o.So))},t.prototype.xl=function(){var o=this.pi.W(),c=o.handleScroll,v=o.handleScale;return!(c.horzTouchDrag||c.mouseWheel||c.pressedMouseMove||c.vertTouchDrag||v.axisDoubleClickReset||v.axisPressedMouseMove.time||v.mouseWheel||v.pinch)},t.prototype._l=function(){return 0===this.Yo.length?null:0},t.prototype.dl=function(){return 0===this.Yo.length?null:this.Yo.length-1},t.prototype.jl=function(o){return(this.hh-1-o)/this.hl},t.prototype.gl=function(o){var c=this.jl(o),v=this.ml()+this.sl-c;return Math.round(1e6*v)/1e6},t.prototype.kl=function(o){var c=this.hl;this.hl=o,this.Ml(),c!==this.hl&&(this.Zo=!0,this.ql())},t.prototype.ll=function(){if(this.Zo)if(this.Zo=!1,this.wi())this.Ul(an.Uo());else{var o=this.ml(),c=this.hh/this.hl,v=this.sl+o,d=new on(v-c+1,v);this.Ul(new an(d))}},t.prototype.Ml=function(){var o=this.Hl();if(this.hl<o&&(this.hl=o,this.Zo=!0),0!==this.hh){var c=.5*this.hh;this.hl>c&&(this.hl=c,this.Zo=!0)}},t.prototype.Hl=function(){return this.zi.fixLeftEdge&&this.zi.fixRightEdge&&0!==this.Yo.length?this.hh/this.Yo.length:this.zi.minBarSpacing},t.prototype.bl=function(){var o=this.Yl();this.sl>o&&(this.sl=o,this.Zo=!0);var c=this.$l();null!==c&&this.sl<c&&(this.sl=c,this.Zo=!0)},t.prototype.$l=function(){var o=this._l(),c=this.Ho;return null===o||null===c?null:o-c-1+(this.zi.fixLeftEdge?this.hh/this.hl:Math.min(2,this.Yo.length))},t.prototype.Yl=function(){return this.zi.fixRightEdge?0:this.hh/this.hl-Math.min(2,this.Yo.length)},t.prototype.Bl=function(){this.tl={ws:this.ws(),Nl:this.Nl()}},t.prototype.Ll=function(){this.tl=null},t.prototype.Cl=function(o,c){var v=this,d=this.Ko.get(c);return void 0===d&&(d=new rn((function(o){return v.Kl(o,c)})),this.Ko.set(c,d)),d.lo(o)},t.prototype.Kl=function(o,c){var v,d=function(o,c,v){switch(o){case 0:case 10:return c?v?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return c?3:2;case 50:return 2;case 60:return 1;case 70:return 0}}(c,this.zi.timeVisible,this.zi.secondsVisible);return void 0!==this.zi.tickMarkFormatter?this.zi.tickMarkFormatter(null!==(v=o.Co)&&void 0!==v?v:o.So,d,this.qu.locale):function(o,c,v){var d={};switch(c){case 0:d.year="numeric";break;case 1:d.month="short";break;case 2:d.day="numeric";break;case 3:d.hour12=!1,d.hour="2-digit",d.minute="2-digit";break;case 4:d.hour12=!1,d.hour="2-digit",d.minute="2-digit",d.second="2-digit"}var y=void 0===o.Co?new Date(1e3*o.So):new Date(Date.UTC(o.Co.year,o.Co.month-1,o.Co.day));return new Date(y.getUTCFullYear(),y.getUTCMonth(),y.getUTCDate(),y.getUTCHours(),y.getUTCMinutes(),y.getUTCSeconds(),y.getUTCMilliseconds()).toLocaleString(v,d)}(o,d,this.qu.locale)},t.prototype.Ul=function(o){var c=this.Xo;this.Xo=o,Gi(c.jo(),this.Xo.jo())||this.Jo.m(),Gi(c.qo(),this.Xo.qo())||this.Go.m(),this.ql()},t.prototype.ql=function(){this.il=null},t.prototype.ul=function(){this.ql(),this.Ko.clear()},t.prototype.rl=function(){var o=this.qu.dateFormat;this.zi.timeVisible?this.Il=new sn({co:o,vo:this.zi.secondsVisible?"%h:%m:%s":"%h:%m",_o:"   ",do:this.qu.locale}):this.Il=new tn(o,this.qu.locale)},t.prototype.al=function(){if(this.zi.fixLeftEdge){var o=this._l();if(null!==o){var c=this.ss();if(null!==c){var v=c.In()-o;if(v<0){var d=this.sl-v-1;this.yn(d)}this.Ml()}}}},t.prototype.ol=function(){this.bl(),this.Ml()},t}(),dn=function(o){function i(c){var v=o.call(this)||this;return v.Xl=new Map,v.Bt=c,v}return m(i,o),i.prototype.Y=function(o){},i.prototype.K=function(o){if(this.Bt.yt){o.save();for(var c=0,v=0,d=this.Bt.Zl;v<d.length;v++)if(0!==(E=d[v]).Gt.length){o.font=E.T;var y=this.Jl(o,E.Gt);y>this.Bt.Ht?E.Al=this.Bt.Ht/y:E.Al=1,c+=E.Gl*E.Al}var _=0;switch(this.Bt.Ql){case"top":_=0;break;case"center":_=Math.max((this.Bt.Yt-c)/2,0);break;case"bottom":_=Math.max(this.Bt.Yt-c,0)}o.fillStyle=this.Bt.A;for(var B=0,z=this.Bt.Zl;B<z.length;B++){var E=z[B];o.save();var R=0;switch(this.Bt.tf){case"left":o.textAlign="left",R=E.Gl/2;break;case"center":o.textAlign="center",R=this.Bt.Ht/2;break;case"right":o.textAlign="right",R=this.Bt.Ht-1-E.Gl/2}o.translate(R,_),o.textBaseline="top",o.font=E.T,o.scale(E.Al,E.Al),o.fillText(E.Gt,0,E.if),o.restore(),_+=E.Gl*E.Al}o.restore()}},i.prototype.Jl=function(o,c){var v=this.nf(o.font),d=v.get(c);return void 0===d&&(d=o.measureText(c).width,v.set(c,d)),d},i.prototype.nf=function(o){var c=this.Xl.get(o);return void 0===c&&(c=new Map,this.Xl.set(o,c)),c},i}(J),yn=function(){function t(o){this.ft=!0,this.Wt={yt:!1,A:"",Yt:0,Ht:0,Zl:[],Ql:"center",tf:"center"},this.zt=new dn(this.Wt),this.Rt=o}return t.prototype.vt=function(){this.ft=!0},t.prototype.dt=function(o,c){return this.ft&&(this.wt(o,c),this.ft=!1),this.zt},t.prototype.wt=function(o,c){var v=this.Rt.W(),d=this.Wt;d.yt=v.visible,d.yt&&(d.A=v.color,d.Ht=c,d.Yt=o,d.tf=v.horzAlign,d.Ql=v.vertAlign,d.Zl=[{Gt:v.text,T:L(v.fontSize,v.fontFamily,v.fontStyle),Gl:1.2*v.fontSize,if:0,Al:0}])},t}(),Sn=function(o){function i(c,v){var d=o.call(this)||this;return d.zi=v,d.Hi=new yn(d),d}return m(i,o),i.prototype.nn=function(){return[]},i.prototype.tn=function(){return[this.Hi]},i.prototype.W=function(){return this.zi},i.prototype.hn=function(){this.Hi.vt()},i}(lt);!function(o){o[o.OnTouchEnd=0]="OnTouchEnd",o[o.OnNextTap=1]="OnNextTap"}(ln||(ln={}));var zn,kn,En,Rn=function(){function t(o,c){this.sf=[],this.hf=[],this.hh=0,this.rf=null,this.ef=null,this.uf=new V,this.af=new V,this.lf=null,this.ff=o,this.zi=c,this.cf=new X(this),this.Da=new fn(this,c.timeScale,this.zi.localization),this.ct=new ct(this,c.crosshair),this.vf=new Wi(c.crosshair),this._f=new Sn(this,c.watermark),this.df(),this.sf[0].za(2e3),this.wf=this.Mf(0),this.bf=this.Mf(1)}return t.prototype.Ce=function(){this.mf(new ft(3))},t.prototype.Wr=function(){this.mf(new ft(2))},t.prototype.We=function(){this.mf(new ft(1))},t.prototype.Se=function(o){var c=this.pf(o);this.mf(c)},t.prototype.gf=function(){return this.ef},t.prototype.yf=function(o){var c=this.ef;this.ef=o,null!==c&&this.Se(c.kf),null!==o&&this.Se(o.kf)},t.prototype.W=function(){return this.zi},t.prototype.Pr=function(o){k(this.zi,o),this.sf.forEach((function(c){return c.Oa(o)})),void 0!==o.timeScale&&this.Da.Pr(o.timeScale),void 0!==o.localization&&this.Da.el(o.localization),(o.leftPriceScale||o.rightPriceScale)&&this.uf.m(),this.wf=this.Mf(0),this.bf=this.Mf(1),this.Ce()},t.prototype.Nf=function(o,c){if("left"!==o)if("right"!==o){var v=this.xf(o);null!==v&&(v.Ct.Pr(c),this.uf.m())}else this.Pr({rightPriceScale:c});else this.Pr({leftPriceScale:c})},t.prototype.xf=function(o){for(var c=0,v=this.sf;c<v.length;c++){var d=v[c],y=d.Va(o);if(null!==y)return{It:d,Ct:y}}return null},t.prototype.bt=function(){return this.Da},t.prototype.Cf=function(){return this.sf},t.prototype.Sf=function(){return this._f},t.prototype.Tf=function(){return this.ct},t.prototype.Df=function(){return this.af},t.prototype.Af=function(o,c){o.ia(c),this.yl()},t.prototype.Ra=function(o){this.hh=o,this.Da.Ra(this.hh),this.sf.forEach((function(c){return c.Ra(o)})),this.yl()},t.prototype.df=function(o){var c=new $i(this.Da,this);void 0!==o?this.sf.splice(o,0,c):this.sf.push(c);var v=void 0===o?this.sf.length-1:o,d=new ft(3);return d.cn(v,{vn:0,_n:!0}),this.mf(d),c},t.prototype.Ka=function(o,c,v){o.Ka(c,v)},t.prototype.Xa=function(o,c,v){o.Xa(c,v),this.Te(),this.mf(this.Bf(o,2))},t.prototype.Za=function(o,c){o.Za(c),this.mf(this.Bf(o,2))},t.prototype.Ja=function(o,c,v){c.Xu()||o.Ja(c,v)},t.prototype.Ga=function(o,c,v){c.Xu()||(o.Ga(c,v),this.Te(),this.mf(this.Bf(o,2)))},t.prototype.Qa=function(o,c){c.Xu()||(o.Qa(c),this.mf(this.Bf(o,2)))},t.prototype.no=function(o,c){o.no(c),this.mf(this.Bf(o,2))},t.prototype.Lf=function(o){this.Da.da(o)},t.prototype.Ef=function(o,c){var v=this.bt();if(!v.wi()&&0!==c){var d=v.Ht();o=Math.max(1,Math.min(o,d)),v.Al(o,c),this.yl()}},t.prototype.Ff=function(o){this.Of(0),this.Vf(o),this.Pf()},t.prototype.Wf=function(o){this.Da.wa(o),this.yl()},t.prototype.zf=function(){this.Da.Ma(),this.Wr()},t.prototype.Of=function(o){this.rf=o,this.Da.ba(o)},t.prototype.Vf=function(o){var c=!1;return null!==this.rf&&Math.abs(o-this.rf)>20&&(this.rf=null,c=!0),this.Da.ma(o),this.yl(),c},t.prototype.Pf=function(){this.Da.pa(),this.Wr(),this.rf=null},t.prototype._t=function(){return this.hf},t.prototype.Rf=function(o,c,v){this.ct.Yi(o,c);var d=NaN,y=this.Da.pl(o),_=this.Da.ss();null!==_&&(y=Math.min(Math.max(_.In(),y),_.jn()));var B=v.ji(),z=B.kt();null!==z&&(d=B.qi(c,z)),d=this.vf.Je(d,y,v),this.ct.Zi(y,d,v),this.We(),this.af.m(this.ct.Mt(),{x:o,y:c})},t.prototype.If=function(){this.Tf().Gi(),this.We(),this.af.m(null,null)},t.prototype.Te=function(){var o=this.ct.It();if(null!==o){var c=this.ct.Ki(),v=this.ct.Xi();this.Rf(c,v,o)}this.ct.hn()},t.prototype.jf=function(o,c,v){var d=this.Da.gi(0);void 0!==c&&void 0!==v&&this.Da.vt(c,v);var y=this.Da.gi(0),_=this.Da.ml(),B=this.Da.ss();if(null!==B&&null!==d&&null!==y){var z=B.Uh(_),E=d.So>y.So,R=null!==o&&o>_&&!E,W=z&&this.Da.W().shiftVisibleRangeOnNewBar;if(R&&!W){var O=o-_;this.Da.yn(this.Da.Nl()-O)}}this.Da.Dl(o)},t.prototype.Be=function(o){null!==o&&o.ho()},t.prototype.oh=function(o){var c=this.sf.find((function(c){return c.oa().includes(o)}));return void 0===c?null:c},t.prototype.yl=function(){this._f.hn(),this.sf.forEach((function(o){return o.ho()})),this.Te()},t.prototype.g=function(){this.sf.forEach((function(o){return o.g()})),this.sf.length=0,this.zi.localization.priceFormatter=void 0,this.zi.localization.timeFormatter=void 0},t.prototype.qf=function(){return this.cf},t.prototype.dh=function(){return this.cf.W()},t.prototype.Pa=function(){return this.uf},t.prototype.Uf=function(o,c){var v=this.sf[0],d=this.Hf(c,o,v);return this.hf.push(d),1===this.hf.length?this.Ce():this.Wr(),d},t.prototype.Yf=function(o){var c=this.oh(o),v=this.hf.indexOf(o);r(-1!==v,"Series not found"),this.hf.splice(v,1),u(c).ca(o),o.g&&o.g()},t.prototype.xe=function(o,c){var v=u(this.oh(o));v.ca(o);var d=this.xf(c);if(null===d){var y=o.xi();v.la(o,c,y)}else y=d.It===v?o.xi():void 0,d.It.la(o,c,y)},t.prototype.zl=function(){var o=new ft(2);o.Mn(),this.mf(o)},t.prototype.$f=function(o){var c=new ft(2);c.mn(o),this.mf(c)},t.prototype.pn=function(){var o=new ft(2);o.pn(),this.mf(o)},t.prototype.gn=function(o){var c=new ft(2);c.gn(o),this.mf(c)},t.prototype.yn=function(o){var c=new ft(2);c.yn(o),this.mf(c)},t.prototype.Kf=function(){return this.zi.rightPriceScale.visible?"right":"left"},t.prototype.Xf=function(){return this.bf},t.prototype.Zf=function(){return this.wf},t.prototype.Dt=function(o){var c=this.bf,v=this.wf;if(c===v)return c;if(o=Math.max(0,Math.min(100,Math.round(100*o))),null===this.lf||this.lf.Pn!==v||this.lf.Wn!==c)this.lf={Pn:v,Wn:c,Jf:new Map};else{var d=this.lf.Jf.get(o);if(void 0!==d)return d}var y=function(o,c,v){var d=w(o),y=d[0],_=d[1],B=d[2],z=d[3],E=w(c),R=E[0],W=E[1],O=E[2],G=E[3],V=[l(y+v*(R-y)),l(_+v*(W-_)),l(B+v*(O-B)),f(z+v*(G-z))];return"rgba(".concat(V[0],", ").concat(V[1],", ").concat(V[2],", ").concat(V[3],")")}(v,c,o/100);return this.lf.Jf.set(o,y),y},t.prototype.Bf=function(o,c){var v=new ft(c);if(null!==o){var d=this.sf.indexOf(o);v.cn(d,{vn:c})}return v},t.prototype.pf=function(o,c){return void 0===c&&(c=2),this.Bf(this.oh(o),c)},t.prototype.mf=function(o){this.ff&&this.ff(o),this.sf.forEach((function(o){return o.eo().ou().vt()}))},t.prototype.Hf=function(o,c,v){var d=new Ri(this,o,c),y=void 0!==o.priceScaleId?o.priceScaleId:this.Kf();return v.la(d,y),it(y)||d.Pr(o),d},t.prototype.Mf=function(o){var c=this.zi.layout;return"gradient"===c.background.type?0===o?c.background.topColor:c.background.bottomColor:c.background.color},t}();function cn(o){void 0!==o.borderColor&&(o.borderUpColor=o.borderColor,o.borderDownColor=o.borderColor),void 0!==o.wickColor&&(o.wickUpColor=o.wickColor,o.wickDownColor=o.wickColor)}function vn(o){return!N(o)&&!C(o)}function _n(o){return N(o)}!function(o){o[o.Disabled=0]="Disabled",o[o.Continuous=1]="Continuous",o[o.OnDataUpdate=2]="OnDataUpdate"}(zn||(zn={})),function(o){o[o.LastBar=0]="LastBar",o[o.LastVisible=1]="LastVisible"}(kn||(kn={})),function(o){o.Solid="solid",o.VerticalGradient="gradient"}(En||(En={}));var Gn=function(){function t(o,c){this.Ft=o,this.Ot=c}return t.prototype.br=function(o){return this.Ft===o.Ft&&this.Ot===o.Ot},t}();function wn(o){return o.ownerDocument&&o.ownerDocument.defaultView&&o.ownerDocument.defaultView.devicePixelRatio||1}function Mn(o){var c=u(o.getContext("2d"));return c.setTransform(1,0,0,1,0,0),c}function bn(o,c){var v=o.createElement("canvas"),d=wn(v);return v.style.width="".concat(c.Ft,"px"),v.style.height="".concat(c.Ot,"px"),v.width=c.Ft*d,v.height=c.Ot*d,v}function mn(o,c){var v=u(o.ownerDocument).createElement("canvas");o.appendChild(v);var y=function bindToDevicePixelRatio(o,c){return void 0===c&&(c=d),new z(o,c)}(v,{allowDownsampling:!1});return y.resizeCanvas({width:c.Ft,height:c.Ot}),y}function pn(o,c){return o.Gf-c.Gf}function gn(o,c,v){var d=(o.Gf-c.Gf)/(o.rt-c.rt);return Math.sign(d)*Math.min(Math.abs(d),v)}var Fn=function(){function t(o,c,v,d){this.Qf=null,this.tc=null,this.ic=null,this.nc=null,this.sc=null,this.hc=0,this.rc=0,this.ec=!1,this.uc=o,this.ac=c,this.oc=v,this.Cn=d}return t.prototype.lc=function(o,c){if(null!==this.Qf){if(this.Qf.rt===c)return void(this.Qf.Gf=o);if(Math.abs(this.Qf.Gf-o)<this.Cn)return}this.nc=this.ic,this.ic=this.tc,this.tc=this.Qf,this.Qf={rt:c,Gf:o}},t.prototype.xh=function(o,c){if(null!==this.Qf&&null!==this.tc&&!(c-this.Qf.rt>50)){var v=0,d=gn(this.Qf,this.tc,this.ac),y=pn(this.Qf,this.tc),_=[d],B=[y];if(v+=y,null!==this.ic){var z=gn(this.tc,this.ic,this.ac);if(Math.sign(z)===Math.sign(d)){var E=pn(this.tc,this.ic);if(_.push(z),B.push(E),v+=E,null!==this.nc){var R=gn(this.ic,this.nc,this.ac);if(Math.sign(R)===Math.sign(d)){var W=pn(this.ic,this.nc);_.push(R),B.push(W),v+=W}}}}for(var O,G,V,F=0,X=0;X<_.length;++X)F+=B[X]/v*_[X];Math.abs(F)<this.uc||(this.sc={Gf:o,rt:c},this.rc=F,this.hc=(O=Math.abs(F),G=this.oc,V=Math.log(G),Math.log(1*V/-O)/V))}},t.prototype.fc=function(o){var c=u(this.sc),v=o-c.rt;return c.Gf+this.rc*(Math.pow(this.oc,v)-1)/Math.log(this.oc)},t.prototype.cc=function(o){return null===this.sc||this.vc(o)===this.hc},t.prototype._c=function(){return this.ec},t.prototype.dc=function(){this.ec=!0},t.prototype.vc=function(o){var c=o-u(this.sc).rt;return Math.min(c,this.hc)},t}(),jn="undefined"!=typeof window;function Nn(){return!!jn&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function xn(){return!!jn&&/iPhone|iPad|iPod/.test(window.navigator.platform)}var Kn=function(){function t(o,c,v){var d=this;this.wc=0,this.Mc=null,this.bc={tt:Number.NEGATIVE_INFINITY,it:Number.POSITIVE_INFINITY},this.mc=0,this.gc=null,this.yc={tt:Number.NEGATIVE_INFINITY,it:Number.POSITIVE_INFINITY},this.kc=null,this.Nc=!1,this.xc=null,this.Cc=null,this.Sc=!1,this.Tc=!1,this.Dc=!1,this.Ac=null,this.Bc=null,this.Lc=null,this.Ec=null,this.Fc=null,this.Oc=null,this.Vc=null,this.Pc=0,this.Wc=!1,this.zc=!1,this.Rc=!1,this.Ic=0,this.jc=null,this.qc=!xn(),this.Uc=function(o){d.Hc(o)},this.Yc=function(o){if(d.$c(o)){var c=d.Kc(o);++d.mc,d.gc&&d.mc>1&&(d.Zc(An(o),d.yc).Xc<30&&!d.Dc&&d.Jc(c,d.Qc.Gc),d.tv())}else c=d.Kc(o),++d.wc,d.Mc&&d.wc>1&&(d.Zc(An(o),d.bc).Xc<5&&!d.Tc&&d.iv(c,d.Qc.nv),d.sv())},this.hv=o,this.Qc=c,this.zi=v,this.rv()}return t.prototype.g=function(){null!==this.Ac&&(this.Ac(),this.Ac=null),null!==this.Bc&&(this.Bc(),this.Bc=null),null!==this.Ec&&(this.Ec(),this.Ec=null),null!==this.Fc&&(this.Fc(),this.Fc=null),null!==this.Oc&&(this.Oc(),this.Oc=null),null!==this.Lc&&(this.Lc(),this.Lc=null),this.ev(),this.sv()},t.prototype.uv=function(o){var c=this;this.Ec&&this.Ec();var v=this.av.bind(this);if(this.Ec=function(){c.hv.removeEventListener("mousemove",v)},this.hv.addEventListener("mousemove",v),!this.$c(o)){var d=this.Kc(o);this.iv(d,this.Qc.ov),this.qc=!0}},t.prototype.sv=function(){null!==this.Mc&&clearTimeout(this.Mc),this.wc=0,this.Mc=null,this.bc={tt:Number.NEGATIVE_INFINITY,it:Number.POSITIVE_INFINITY}},t.prototype.tv=function(){null!==this.gc&&clearTimeout(this.gc),this.mc=0,this.gc=null,this.yc={tt:Number.NEGATIVE_INFINITY,it:Number.POSITIVE_INFINITY}},t.prototype.av=function(o){if(!this.Rc&&null===this.Cc&&!this.$c(o)){var c=this.Kc(o);this.iv(c,this.Qc.lv),this.qc=!0}},t.prototype.fv=function(o){var c=Ln(o.changedTouches,u(this.jc));if(null!==c&&(this.Ic=Bn(o),null===this.Vc&&!this.zc)){this.Wc=!0;var v=this.Zc(An(c),u(this.Cc)),d=v.cv,y=v.vv,_=v.Xc;if(this.Sc||!(_<5)){if(!this.Sc){var B=.5*d,z=y>=B&&!this.zi._v(),E=B>y&&!this.zi.dv();z||E||(this.zc=!0),this.Sc=!0,this.Dc=!0,this.ev(),this.tv()}if(!this.zc){var R=this.Kc(o,c);this.Jc(R,this.Qc.wv),Dn(o)}}}},t.prototype.Mv=function(o){if(0===o.button&&(this.Zc(An(o),u(this.xc)).Xc>=5&&(this.Tc=!0,this.sv()),this.Tc)){var c=this.Kc(o);this.iv(c,this.Qc.bv)}},t.prototype.Zc=function(o,c){var v=Math.abs(c.tt-o.tt),d=Math.abs(c.it-o.it);return{cv:v,vv:d,Xc:v+d}},t.prototype.mv=function(o){var c=Ln(o.changedTouches,u(this.jc));if(null===c&&0===o.touches.length&&(c=o.changedTouches[0]),null!==c){this.jc=null,this.Ic=Bn(o),this.ev(),this.Cc=null,this.Oc&&(this.Oc(),this.Oc=null);var v=this.Kc(o,c);this.Jc(v,this.Qc.pv),++this.mc,this.gc&&this.mc>1?(this.Zc(An(c),this.yc).Xc<30&&!this.Dc&&this.Jc(v,this.Qc.Gc),this.tv()):this.Dc||(this.Jc(v,this.Qc.gv),this.Qc.gv&&Dn(o)),0===this.mc&&Dn(o),0===o.touches.length&&this.Nc&&(this.Nc=!1,Dn(o))}},t.prototype.Hc=function(o){if(0===o.button){var c=this.Kc(o);this.xc=null,this.Rc=!1,this.Fc&&(this.Fc(),this.Fc=null),Nn()&&this.hv.ownerDocument.documentElement.removeEventListener("mouseleave",this.Uc),this.$c(o)||(this.iv(c,this.Qc.yv),++this.wc,this.Mc&&this.wc>1?(this.Zc(An(o),this.bc).Xc<5&&!this.Tc&&this.iv(c,this.Qc.nv),this.sv()):this.Tc||this.iv(c,this.Qc.kv))}},t.prototype.ev=function(){null!==this.kc&&(clearTimeout(this.kc),this.kc=null)},t.prototype.Nv=function(o){if(null===this.jc){var c=o.changedTouches[0];this.jc=c.identifier,this.Ic=Bn(o);var v=this.hv.ownerDocument.documentElement;this.Dc=!1,this.Sc=!1,this.zc=!1,this.Cc=An(c),this.Oc&&(this.Oc(),this.Oc=null);var d=this.fv.bind(this),y=this.mv.bind(this);this.Oc=function(){v.removeEventListener("touchmove",d),v.removeEventListener("touchend",y)},v.addEventListener("touchmove",d,{passive:!1}),v.addEventListener("touchend",y,{passive:!1}),this.ev(),this.kc=setTimeout(this.xv.bind(this,o),240);var _=this.Kc(o,c);this.Jc(_,this.Qc.Cv),this.gc||(this.mc=0,this.gc=setTimeout(this.tv.bind(this),500),this.yc=An(c))}},t.prototype.Sv=function(o){if(0===o.button){var c=this.hv.ownerDocument.documentElement;Nn()&&c.addEventListener("mouseleave",this.Uc),this.Tc=!1,this.xc=An(o),this.Fc&&(this.Fc(),this.Fc=null);var v=this.Mv.bind(this),d=this.Hc.bind(this);if(this.Fc=function(){c.removeEventListener("mousemove",v),c.removeEventListener("mouseup",d)},c.addEventListener("mousemove",v),c.addEventListener("mouseup",d),this.Rc=!0,!this.$c(o)){var y=this.Kc(o);this.iv(y,this.Qc.Tv),this.Mc||(this.wc=0,this.Mc=setTimeout(this.sv.bind(this),500),this.bc=An(o))}}},t.prototype.rv=function(){var o=this;this.hv.addEventListener("mouseenter",this.uv.bind(this)),this.hv.addEventListener("touchcancel",this.ev.bind(this));var c=this.hv.ownerDocument,n=function(c){o.Qc.Dv&&(c.target&&o.hv.contains(c.target)||o.Qc.Dv())};this.Bc=function(){c.removeEventListener("touchstart",n)},this.Ac=function(){c.removeEventListener("mousedown",n)},c.addEventListener("mousedown",n),c.addEventListener("touchstart",n,{passive:!0}),xn()&&(this.Lc=function(){o.hv.removeEventListener("dblclick",o.Yc)},this.hv.addEventListener("dblclick",this.Yc)),this.hv.addEventListener("mouseleave",this.Av.bind(this)),this.hv.addEventListener("touchstart",this.Nv.bind(this),{passive:!0}),function Cn(o){jn&&void 0!==window.chrome&&o.addEventListener("mousedown",(function(o){if(1===o.button)return o.preventDefault(),!1}))}(this.hv),this.hv.addEventListener("mousedown",this.Sv.bind(this)),this.Bv(),this.hv.addEventListener("touchmove",(function(){}),{passive:!1})},t.prototype.Bv=function(){var o=this;void 0===this.Qc.Lv&&void 0===this.Qc.Ev&&void 0===this.Qc.Fv||(this.hv.addEventListener("touchstart",(function(c){return o.Ov(c.touches)}),{passive:!0}),this.hv.addEventListener("touchmove",(function(c){if(2===c.touches.length&&null!==o.Vc&&void 0!==o.Qc.Ev){var v=Tn(c.touches[0],c.touches[1])/o.Pc;o.Qc.Ev(o.Vc,v),Dn(c)}}),{passive:!1}),this.hv.addEventListener("touchend",(function(c){o.Ov(c.touches)})))},t.prototype.Ov=function(o){1===o.length&&(this.Wc=!1),2!==o.length||this.Wc||this.Nc?this.Vv():this.Pv(o)},t.prototype.Pv=function(o){var c=this.hv.getBoundingClientRect()||{left:0,top:0};this.Vc={tt:(o[0].clientX-c.left+(o[1].clientX-c.left))/2,it:(o[0].clientY-c.top+(o[1].clientY-c.top))/2},this.Pc=Tn(o[0],o[1]),void 0!==this.Qc.Lv&&this.Qc.Lv(),this.ev()},t.prototype.Vv=function(){null!==this.Vc&&(this.Vc=null,void 0!==this.Qc.Fv&&this.Qc.Fv())},t.prototype.Av=function(o){if(this.Ec&&this.Ec(),!this.$c(o)&&this.qc){var c=this.Kc(o);this.iv(c,this.Qc.Wv),this.qc=!xn()}},t.prototype.xv=function(o){var c=Ln(o.touches,u(this.jc));if(null!==c){var v=this.Kc(o,c);this.Jc(v,this.Qc.zv),this.Dc=!0,this.Nc=!0}},t.prototype.$c=function(o){return o.sourceCapabilities&&void 0!==o.sourceCapabilities.firesTouchEvents?o.sourceCapabilities.firesTouchEvents:Bn(o)<this.Ic+500},t.prototype.Jc=function(o,c){c&&c.call(this.Qc,o)},t.prototype.iv=function(o,c){c&&c.call(this.Qc,o)},t.prototype.Kc=function(o,c){var v=c||o,d=this.hv.getBoundingClientRect()||{left:0,top:0};return{Rv:v.clientX,Iv:v.clientY,jv:v.pageX,qv:v.pageY,Uv:v.screenX,Hv:v.screenY,Yv:v.clientX-d.left,$v:v.clientY-d.top,Kv:o.ctrlKey,Xv:o.altKey,Zv:o.shiftKey,Jv:o.metaKey,Gv:!o.type.startsWith("mouse")&&"contextmenu"!==o.type&&"click"!==o.type,Qv:o.type,t_:v.target,i_:o.view,n_:function(){"touchstart"!==o.type&&Dn(o)}}},t}();function Tn(o,c){var v=o.clientX-c.clientX,d=o.clientY-c.clientY;return Math.sqrt(v*v+d*d)}function Dn(o){o.cancelable&&o.preventDefault()}function An(o){return{tt:o.pageX,it:o.pageY}}function Bn(o){return o.timeStamp||performance.now()}function Ln(o,c){for(var v=0;v<o.length;++v)if(o[v].identifier===c)return o[v];return null}var qn=function(){function t(o,c,v,d){this.rh=new qt(200),this.R=0,this.s_="",this.Yh="",this.th=[],this.h_=new Map,this.R=o,this.s_=c,this.Yh=L(o,v,d)}return t.prototype.g=function(){this.rh.ih(),this.th=[],this.h_.clear()},t.prototype.r_=function(o,c,v,d,y){var _=this.e_(o,c);if("left"!==y){var B=wn(o.canvas);v-=Math.floor(_.u_*B)}d-=Math.floor(_.Yt/2),o.drawImage(_.a_,v,d,_.Ht,_.Yt)},t.prototype.e_=function(o,c){var v,d=this;if(this.h_.has(c))v=e(this.h_.get(c));else{if(this.th.length>=200){var y=e(this.th.shift());this.h_.delete(y)}var _=wn(o.canvas),B=Math.ceil(this.R/4.5),z=Math.round(this.R/10),E=Math.ceil(this.rh.Qt(o,c)),R=St(Math.round(E+2*B)),W=St(this.R+2*B),O=bn(document,new Gn(R,W));v={Gt:c,u_:Math.round(Math.max(1,E)),Ht:Math.ceil(R*_),Yt:Math.ceil(W*_),a_:O},0!==E&&(this.th.push(v.Gt),this.h_.set(v.Gt,v)),q(o=Mn(v.a_),_,(function(){o.font=d.Yh,o.fillStyle=d.s_,o.fillText(c,0,W-B-z)}))}return v},t}(),Qn=function(){function t(o,c,v,d){var y=this;this._i=null,this.o_=null,this.l_=!1,this.f_=new qt(50),this.c_=new qn(11,"#000"),this.s_=null,this.Yh=null,this.v_=0,this.__=!1,this.d_=function(){y.w_(y.cf.W()),y.__||y.Di.M_().jt().Wr()},this.b_=function(){y.__||y.Di.M_().jt().Wr()},this.Di=o,this.zi=c,this.cf=v,this.m_="left"===d,this.p_=document.createElement("div"),this.p_.style.height="100%",this.p_.style.overflow="hidden",this.p_.style.width="25px",this.p_.style.left="0",this.p_.style.position="relative",this.g_=mn(this.p_,new Gn(16,16)),this.g_.subscribeCanvasConfigured(this.d_);var _=this.g_.canvas;_.style.position="absolute",_.style.zIndex="1",_.style.left="0",_.style.top="0",this.y_=mn(this.p_,new Gn(16,16)),this.y_.subscribeCanvasConfigured(this.b_);var B=this.y_.canvas;B.style.position="absolute",B.style.zIndex="2",B.style.left="0",B.style.top="0";var z={Tv:this.k_.bind(this),Cv:this.k_.bind(this),bv:this.N_.bind(this),wv:this.N_.bind(this),Dv:this.x_.bind(this),yv:this.C_.bind(this),pv:this.C_.bind(this),nv:this.S_.bind(this),Gc:this.S_.bind(this),ov:this.T_.bind(this),Wv:this.D_.bind(this)};this.A_=new Kn(this.y_.canvas,z,{_v:function(){return!1},dv:function(){return!0}})}return t.prototype.g=function(){this.A_.g(),this.y_.unsubscribeCanvasConfigured(this.b_),this.y_.destroy(),this.g_.unsubscribeCanvasConfigured(this.d_),this.g_.destroy(),null!==this._i&&this._i._a().M(this),this._i=null,this.c_.g()},t.prototype.B_=function(){return this.p_},t.prototype.ht=function(){return u(this._i).W().borderColor},t.prototype.L_=function(){return this.zi.textColor},t.prototype.S=function(){return this.zi.fontSize},t.prototype.E_=function(){return L(this.S(),this.zi.fontFamily)},t.prototype.F_=function(){var o=this.cf.W(),c=this.s_!==o.A,v=this.Yh!==o.T;return(c||v)&&(this.w_(o),this.s_=o.A),v&&(this.f_.ih(),this.Yh=o.T),o},t.prototype.O_=function(){if(null===this._i)return 0;var o=0,c=this.F_(),v=Mn(this.g_.canvas),d=this._i.au();v.font=this.E_(),d.length>0&&(o=Math.max(this.f_.Qt(v,d[0].yu),this.f_.Qt(v,d[d.length-1].yu)));for(var y=this.V_(),_=y.length;_--;){var B=this.f_.Qt(v,y[_].Gt());B>o&&(o=B)}var z=this._i.kt();if(null!==z&&null!==this.o_){var E=this._i.qi(1,z),R=this._i.qi(this.o_.Ot-2,z);o=Math.max(o,this.f_.Qt(v,this._i.Mi(Math.floor(Math.min(E,R))+.11111111111111,z)),this.f_.Qt(v,this._i.Mi(Math.ceil(Math.max(E,R))-.11111111111111,z)))}var W=o||34,O=Math.ceil(c.N+c.C+c.L+c.F+W);return O+O%2},t.prototype.P_=function(o){if(o.Ft<0||o.Ot<0)throw new Error("Try to set invalid size to PriceAxisWidget "+JSON.stringify(o));null!==this.o_&&this.o_.br(o)||(this.o_=o,this.__=!0,this.g_.resizeCanvas({width:o.Ft,height:o.Ot}),this.y_.resizeCanvas({width:o.Ft,height:o.Ot}),this.__=!1,this.p_.style.width=o.Ft+"px",this.p_.style.height=o.Ot+"px",this.p_.style.minWidth=o.Ft+"px")},t.prototype.W_=function(){return u(this.o_).Ft},t.prototype.Si=function(o){this._i!==o&&(null!==this._i&&this._i._a().M(this),this._i=o,o._a().u(this.Eu.bind(this),this))},t.prototype.Ct=function(){return this._i},t.prototype.ih=function(){var o=this.Di.z_();this.Di.M_().jt().no(o,u(this.Ct()))},t.prototype.R_=function(o){if(null!==this.o_){if(1!==o){var c=Mn(this.g_.canvas);this.I_(),this.j_(c,this.g_.pixelRatio),this.Rs(c,this.g_.pixelRatio),this.q_(c,this.g_.pixelRatio),this.U_(c,this.g_.pixelRatio)}var v=Mn(this.y_.canvas),d=this.o_.Ft,y=this.o_.Ot;q(v,this.y_.pixelRatio,(function(){v.clearRect(0,0,d,y)})),this.H_(v,this.y_.pixelRatio)}},t.prototype.Y_=function(){return this.g_.canvas},t.prototype.vt=function(){var o;null===(o=this._i)||void 0===o||o.au()},t.prototype.k_=function(o){if(null!==this._i&&!this._i.wi()&&this.Di.M_().W().handleScale.axisPressedMouseMove.price){var c=this.Di.M_().jt(),v=this.Di.z_();this.l_=!0,c.Ka(v,this._i,o.$v)}},t.prototype.N_=function(o){if(null!==this._i&&this.Di.M_().W().handleScale.axisPressedMouseMove.price){var c=this.Di.M_().jt(),v=this.Di.z_(),d=this._i;c.Xa(v,d,o.$v)}},t.prototype.x_=function(){if(null!==this._i&&this.Di.M_().W().handleScale.axisPressedMouseMove.price){var o=this.Di.M_().jt(),c=this.Di.z_(),v=this._i;this.l_&&(this.l_=!1,o.Za(c,v))}},t.prototype.C_=function(o){if(null!==this._i&&this.Di.M_().W().handleScale.axisPressedMouseMove.price){var c=this.Di.M_().jt(),v=this.Di.z_();this.l_=!1,c.Za(v,this._i)}},t.prototype.S_=function(o){this.Di.M_().W().handleScale.axisDoubleClickReset&&this.ih()},t.prototype.T_=function(o){null!==this._i&&(!this.Di.M_().jt().W().handleScale.axisPressedMouseMove.price||this._i.vr()||this._i.Zu()||this.K_(1))},t.prototype.D_=function(o){this.K_(0)},t.prototype.V_=function(){var o=this,c=[],v=null===this._i?void 0:this._i;return function(d){for(var y=0;y<d.length;++y)for(var _=d[y].nn(o.Di.z_(),v),B=0;B<_.length;B++)c.push(_[B])}(this.Di.z_().oa()),c},t.prototype.j_=function(o,c){var v=this;if(null!==this.o_){var d=this.o_.Ft,y=this.o_.Ot;q(o,c,(function(){var c=v.Di.z_().jt(),_=c.Zf(),B=c.Xf();_===B?U(o,0,0,d,y,_):H(o,0,0,d,y,_,B)}))}},t.prototype.Rs=function(o,c){if(null!==this.o_&&null!==this._i&&this._i.W().borderVisible){o.save(),o.fillStyle=this.ht();var v,d=Math.max(1,Math.floor(this.F_().N*c));v=this.m_?Math.floor(this.o_.Ft*c)-d:0,o.fillRect(v,0,d,Math.ceil(this.o_.Ot*c)),o.restore()}},t.prototype.q_=function(o,c){if(null!==this.o_&&null!==this._i){var v=this._i.au();o.save(),o.strokeStyle=this.ht(),o.font=this.E_(),o.fillStyle=this.ht();var d=this.F_(),y=this._i.W().borderVisible&&this._i.W().drawTicks,_=this.m_?Math.floor((this.o_.Ft-d.C)*c-d.N*c):Math.floor(d.N*c),B=this.m_?Math.round(_-d.L*c):Math.round(_+d.C*c+d.L*c),z=this.m_?"right":"left",E=Math.max(1,Math.floor(c)),R=Math.floor(.5*c);if(y){var W=Math.round(d.C*c);o.beginPath();for(var O=0,G=v;O<G.length;O++){var V=G[O];o.rect(_,Math.round(V.su*c)-R,W,E)}o.fill()}o.fillStyle=this.L_();for(var F=0,X=v;F<X.length;F++)V=X[F],this.c_.r_(o,V.yu,B,Math.round(V.su*c),z);o.restore()}},t.prototype.I_=function(){if(null!==this.o_&&null!==this._i){var o=this.o_.Ot/2,c=[],v=this._i.oa().slice(),d=this.Di.z_(),y=this.F_();this._i===d.fh()&&this.Di.z_().oa().forEach((function(o){d.lh(o)&&v.push(o)}));var _=this._i.Ge()[0],B=this._i;v.forEach((function(v){var y=v.nn(d,B);y.forEach((function(o){o.oi(null),o.li()&&c.push(o)})),_===v&&y.length>0&&(o=y[0].ti())}));var z=c.filter((function(c){return c.ti()<=o})),E=c.filter((function(c){return c.ti()>o}));if(z.sort((function(o,c){return c.ti()-o.ti()})),z.length&&E.length&&E.push(z[0]),E.sort((function(o,c){return o.ti()-c.ti()})),c.forEach((function(o){return o.oi(o.ti())})),this._i.W().alignLabels){for(var R=1;R<z.length;R++){var W=z[R],O=(V=z[R-1]).Yt(y,!1);W.ti()>(F=V.ai())-O&&W.oi(F-O)}for(var G=1;G<E.length;G++){var V,F;W=E[G],O=(V=E[G-1]).Yt(y,!0),W.ti()<(F=V.ai())+O&&W.oi(F+O)}}}},t.prototype.U_=function(o,c){var v=this;if(null!==this.o_){o.save();var d=this.o_,y=this.V_(),_=this.F_(),B=this.m_?"right":"left";y.forEach((function(y){if(y.fi()){var z=y.dt(u(v._i));o.save(),z.H(o,_,v.f_,d.Ft,B,c),o.restore()}})),o.restore()}},t.prototype.H_=function(o,c){var v=this;if(null!==this.o_&&null!==this._i){o.save();var d=this.o_,y=this.Di.M_().jt(),_=[],B=this.Di.z_(),z=y.Tf().nn(B,this._i);z.length&&_.push(z);var E=this.F_(),R=this.m_?"right":"left";_.forEach((function(y){y.forEach((function(y){o.save(),y.dt(u(v._i)).H(o,E,v.f_,d.Ft,R,c),o.restore()}))})),o.restore()}},t.prototype.K_=function(o){this.p_.style.cursor=1===o?"ns-resize":"default"},t.prototype.Eu=function(){var o=this.O_();this.v_<o&&this.Di.M_().jt().Ce(),this.v_=o},t.prototype.w_=function(o){this.c_.g(),this.c_=new qn(o.S,o.A,o.D)},t}();function On(o,c,v,d,y){o.$&&o.$(c,v,d,y)}function Vn(o,c,v,d,y){o.H(c,v,d,y)}function Pn(o,c){return o.tn(c)}function Wn(o,c){return void 0!==o.Pe?o.Pe(c):[]}var te=function(){function t(o,c){var v=this;this.o_=new Gn(0,0),this.X_=null,this.Z_=null,this.J_=null,this.G_=!1,this.Q_=new V,this.td=0,this.nd=!1,this.sd=null,this.hd=!1,this.rd=null,this.ed=null,this.__=!1,this.d_=function(){v.__||null===v.ud||v.pi().Wr()},this.b_=function(){v.__||null===v.ud||v.pi().Wr()},this.ad=o,this.ud=c,this.ud.ro().u(this.od.bind(this),this,!0),this.ld=document.createElement("td"),this.ld.style.padding="0",this.ld.style.position="relative";var d=document.createElement("div");d.style.width="100%",d.style.height="100%",d.style.position="relative",d.style.overflow="hidden",this.fd=document.createElement("td"),this.fd.style.padding="0",this.vd=document.createElement("td"),this.vd.style.padding="0",this.ld.appendChild(d),this.g_=mn(d,new Gn(16,16)),this.g_.subscribeCanvasConfigured(this.d_);var y=this.g_.canvas;y.style.position="absolute",y.style.zIndex="1",y.style.left="0",y.style.top="0",this.y_=mn(d,new Gn(16,16)),this.y_.subscribeCanvasConfigured(this.b_);var _=this.y_.canvas;_.style.position="absolute",_.style.zIndex="2",_.style.left="0",_.style.top="0",this._d=document.createElement("tr"),this._d.appendChild(this.fd),this._d.appendChild(this.ld),this._d.appendChild(this.vd),this.dd(),this.A_=new Kn(this.y_.canvas,this,{_v:function(){return null===v.sd&&!v.ad.W().handleScroll.vertTouchDrag},dv:function(){return null===v.sd&&!v.ad.W().handleScroll.horzTouchDrag}})}return t.prototype.g=function(){null!==this.X_&&this.X_.g(),null!==this.Z_&&this.Z_.g(),this.y_.unsubscribeCanvasConfigured(this.b_),this.y_.destroy(),this.g_.unsubscribeCanvasConfigured(this.d_),this.g_.destroy(),null!==this.ud&&this.ud.ro().M(this),this.A_.g()},t.prototype.z_=function(){return u(this.ud)},t.prototype.wd=function(o){null!==this.ud&&this.ud.ro().M(this),this.ud=o,null!==this.ud&&this.ud.ro().u(t.prototype.od.bind(this),this,!0),this.dd()},t.prototype.M_=function(){return this.ad},t.prototype.B_=function(){return this._d},t.prototype.dd=function(){if(null!==this.ud&&(this.Md(),0!==this.pi()._t().length)){if(null!==this.X_){var o=this.ud.Ya();this.X_.Si(u(o))}if(null!==this.Z_){var c=this.ud.$a();this.Z_.Si(u(c))}}},t.prototype.bd=function(){null!==this.X_&&this.X_.vt(),null!==this.Z_&&this.Z_.vt()},t.prototype.Wa=function(){return null!==this.ud?this.ud.Wa():0},t.prototype.za=function(o){this.ud&&this.ud.za(o)},t.prototype.ov=function(o){if(this.ud){this.md();var c=o.Yv,v=o.$v;this.pd(c,v)}},t.prototype.Tv=function(o){this.md(),this.gd(),this.pd(o.Yv,o.$v)},t.prototype.lv=function(o){if(this.ud){this.md();var c=o.Yv,v=o.$v;this.pd(c,v);var d=this.$h(c,v);this.pi().yf(d&&{kf:d.kf,yd:d.yd})}},t.prototype.kv=function(o){if(null!==this.ud){this.md();var c=o.Yv,v=o.$v;if(this.Q_.p()){var d=this.pi().Tf().Mt();this.Q_.m(d,{x:c,y:v})}}},t.prototype.bv=function(o){this.md(),this.kd(o),this.pd(o.Yv,o.$v)},t.prototype.yv=function(o){null!==this.ud&&(this.md(),this.nd=!1,this.Nd(o))},t.prototype.zv=function(o){if(this.nd=!0,null===this.sd){var c={x:o.Yv,y:o.$v};this.xd(c,c)}},t.prototype.Wv=function(o){null!==this.ud&&(this.md(),this.ud.jt().yf(null),this.Cd())},t.prototype.Sd=function(){return this.Q_},t.prototype.Lv=function(){this.td=1,this.Td()},t.prototype.Ev=function(o,c){if(this.ad.W().handleScale.pinch){var v=5*(c-this.td);this.td=c,this.pi().Ef(o.tt,v)}},t.prototype.Cv=function(o){if(this.nd=!1,this.hd=null!==this.sd,this.gd(),null!==this.sd){var c=this.pi().Tf();this.rd={x:c.$t(),y:c.Kt()},this.sd={x:o.Yv,y:o.$v}}},t.prototype.wv=function(o){if(null!==this.ud){var c=o.Yv,v=o.$v;if(null===this.sd)this.kd(o);else{this.hd=!1;var d=u(this.rd),y=d.x+(c-this.sd.x),_=d.y+(v-this.sd.y);this.pd(y,_)}}},t.prototype.pv=function(o){0===this.M_().W().trackingMode.exitMode&&(this.hd=!0),this.Dd(),this.Nd(o)},t.prototype.$h=function(o,c){var v=this.ud;if(null===v)return null;for(var d=0,y=v.oa();d<y.length;d++){var _=y[d],B=this.Ad(_.tn(v),o,c);if(null!==B)return{kf:_,i_:B.i_,yd:B.yd}}return null},t.prototype.Bd=function(o,c){u("left"===c?this.X_:this.Z_).P_(new Gn(o,this.o_.Ot))},t.prototype.Ld=function(){return this.o_},t.prototype.P_=function(o){if(o.Ft<0||o.Ot<0)throw new Error("Try to set invalid size to PaneWidget "+JSON.stringify(o));this.o_.br(o)||(this.o_=o,this.__=!0,this.g_.resizeCanvas({width:o.Ft,height:o.Ot}),this.y_.resizeCanvas({width:o.Ft,height:o.Ot}),this.__=!1,this.ld.style.width=o.Ft+"px",this.ld.style.height=o.Ot+"px")},t.prototype.Ed=function(){var o=u(this.ud);o.Ha(o.Ya()),o.Ha(o.$a());for(var c=0,v=o.Ge();c<v.length;c++){var d=v[c];if(o.lh(d)){var y=d.Ct();null!==y&&o.Ha(y),d.hn()}}},t.prototype.Y_=function(){return this.g_.canvas},t.prototype.R_=function(o){if(0!==o&&null!==this.ud){if(o>1&&this.Ed(),null!==this.X_&&this.X_.R_(o),null!==this.Z_&&this.Z_.R_(o),1!==o){var c=Mn(this.g_.canvas);c.save(),this.j_(c,this.g_.pixelRatio),this.ud&&(this.Fd(c,this.g_.pixelRatio),this.Od(c,this.g_.pixelRatio),this.Vd(c,this.g_.pixelRatio,Pn)),c.restore()}var v=Mn(this.y_.canvas);v.clearRect(0,0,Math.ceil(this.o_.Ft*this.y_.pixelRatio),Math.ceil(this.o_.Ot*this.y_.pixelRatio)),this.Vd(v,this.g_.pixelRatio,Wn),this.Pd(v,this.y_.pixelRatio)}},t.prototype.Wd=function(){return this.X_},t.prototype.zd=function(){return this.Z_},t.prototype.od=function(){null!==this.ud&&this.ud.ro().M(this),this.ud=null},t.prototype.j_=function(o,c){var v=this;q(o,c,(function(){var c=v.pi(),d=c.Zf(),y=c.Xf();d===y?U(o,0,0,v.o_.Ft,v.o_.Ot,y):H(o,0,0,v.o_.Ft,v.o_.Ot,d,y)}))},t.prototype.Fd=function(o,c){var v=u(this.ud),d=v.eo().ou().dt(v.Yt(),v.Ht());null!==d&&(o.save(),d.H(o,c,!1),o.restore())},t.prototype.Od=function(o,c){var v=this.pi().Sf();this.Rd(o,c,Pn,On,v),this.Rd(o,c,Pn,Vn,v)},t.prototype.Pd=function(o,c){this.Rd(o,c,Pn,Vn,this.pi().Tf())},t.prototype.Vd=function(o,c,v){for(var d=u(this.ud).oa(),y=0,_=d;y<_.length;y++){var B=_[y];this.Rd(o,c,v,On,B)}for(var z=0,E=d;z<E.length;z++)B=E[z],this.Rd(o,c,v,Vn,B)},t.prototype.Rd=function(o,c,v,d,y){for(var _=u(this.ud),B=v(y,_),z=_.Yt(),E=_.Ht(),R=_.jt().gf(),W=null!==R&&R.kf===y,O=null!==R&&W&&void 0!==R.yd?R.yd.Kh:void 0,G=0,V=B;G<V.length;G++){var F=V[G].dt(z,E);null!==F&&(o.save(),d(F,o,c,W,O),o.restore())}},t.prototype.Ad=function(o,c,v){for(var d=0,y=o;d<y.length;d++){var _=y[d],B=_.dt(this.o_.Ot,this.o_.Ft);if(null!==B&&B.$h){var z=B.$h(c,v);if(null!==z)return{i_:_,yd:z}}}return null},t.prototype.Md=function(){if(null!==this.ud){var o=this.ad,c=this.ud.Ya().W().visible,v=this.ud.$a().W().visible;c||null===this.X_||(this.fd.removeChild(this.X_.B_()),this.X_.g(),this.X_=null),v||null===this.Z_||(this.vd.removeChild(this.Z_.B_()),this.Z_.g(),this.Z_=null);var d=o.jt().qf();c&&null===this.X_&&(this.X_=new Qn(this,o.W().layout,d,"left"),this.fd.appendChild(this.X_.B_())),v&&null===this.Z_&&(this.Z_=new Qn(this,o.W().layout,d,"right"),this.vd.appendChild(this.Z_.B_()))}},t.prototype.Id=function(o){return o.Gv&&this.nd||null!==this.sd},t.prototype.jd=function(o){return Math.max(0,Math.min(o,this.o_.Ft-1))},t.prototype.qd=function(o){return Math.max(0,Math.min(o,this.o_.Ot-1))},t.prototype.pd=function(o,c){this.pi().Rf(this.jd(o),this.qd(c),u(this.ud))},t.prototype.Cd=function(){this.pi().If()},t.prototype.Dd=function(){this.hd&&(this.sd=null,this.Cd())},t.prototype.xd=function(o,c){this.sd=o,this.hd=!1,this.pd(c.x,c.y);var v=this.pi().Tf();this.rd={x:v.$t(),y:v.Kt()}},t.prototype.pi=function(){return this.ad.jt()},t.prototype.Ud=function(){var o=this.pi(),c=this.z_(),v=c.ji();o.Qa(c,v),o.Pf(),this.J_=null,this.G_=!1},t.prototype.Nd=function(o){var c=this;if(this.G_){var v=performance.now();if(null!==this.ed&&this.ed.xh(o.Yv,v),null===this.ed||this.ed.cc(v))this.Ud();else{var d=this.pi(),y=d.bt(),_=this.ed,e=function(){if(!_._c()){var o=performance.now(),v=_.cc(o);if(!_._c()){var B=y.Nl();d.Vf(_.fc(o)),B===y.Nl()&&(v=!0,c.ed=null)}v?c.Ud():requestAnimationFrame(e)}};requestAnimationFrame(e)}}},t.prototype.md=function(){this.sd=null},t.prototype.gd=function(){if(this.ud){if(this.Td(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)u(document.activeElement).blur();else{var o=document.getSelection();null!==o&&o.removeAllRanges()}!this.ud.ji().wi()&&this.pi().bt().wi()}},t.prototype.kd=function(o){if(null!==this.ud){var c=this.pi();if(!c.bt().wi()){var v=this.ad.W(),d=v.handleScroll,y=v.kineticScroll;if(d.pressedMouseMove&&!o.Gv||(d.horzTouchDrag||d.vertTouchDrag)&&o.Gv){var _=this.ud.ji(),B=performance.now();null!==this.J_||this.Id(o)||(this.J_={x:o.Rv,y:o.Iv,So:B,Yv:o.Yv,$v:o.$v}),null!==this.ed&&this.ed.lc(o.Yv,B),null===this.J_||this.G_||this.J_.x===o.Rv&&this.J_.y===o.Iv||(null===this.ed&&(o.Gv&&y.touch||!o.Gv&&y.mouse)&&(this.ed=new Fn(.2,7,.997,15),this.ed.lc(this.J_.Yv,this.J_.So),this.ed.lc(o.Yv,B)),_.wi()||c.Ja(this.ud,_,o.$v),c.Of(o.Yv),this.G_=!0),this.G_&&(_.wi()||c.Ga(this.ud,_,o.$v),c.Vf(o.Yv))}}}},t.prototype.Td=function(){var o=performance.now(),c=null===this.ed||this.ed.cc(o);null!==this.ed&&(c||this.Ud()),null!==this.ed&&(this.ed.dc(),this.ed=null)},t}(),ie=function(){function t(o,c,v,d,y){var _=this;this.ft=!0,this.o_=new Gn(0,0),this.d_=function(){return _.R_(3)},this.m_="left"===o,this.cf=v.qf,this.zi=c,this.Hd=d,this.Yd=y,this.p_=document.createElement("div"),this.p_.style.width="25px",this.p_.style.height="100%",this.p_.style.overflow="hidden",this.g_=mn(this.p_,new Gn(16,16)),this.g_.subscribeCanvasConfigured(this.d_)}return t.prototype.g=function(){this.g_.unsubscribeCanvasConfigured(this.d_),this.g_.destroy()},t.prototype.B_=function(){return this.p_},t.prototype.Ld=function(){return this.o_},t.prototype.P_=function(o){if(o.Ft<0||o.Ot<0)throw new Error("Try to set invalid size to PriceAxisStub "+JSON.stringify(o));this.o_.br(o)||(this.o_=o,this.g_.resizeCanvas({width:o.Ft,height:o.Ot}),this.p_.style.width="".concat(o.Ft,"px"),this.p_.style.minWidth="".concat(o.Ft,"px"),this.p_.style.height="".concat(o.Ot,"px"),this.ft=!0)},t.prototype.R_=function(o){if((!(o<3)||this.ft)&&0!==this.o_.Ft&&0!==this.o_.Ot){this.ft=!1;var c=Mn(this.g_.canvas);this.j_(c,this.g_.pixelRatio),this.Rs(c,this.g_.pixelRatio)}},t.prototype.Y_=function(){return this.g_.canvas},t.prototype.Rs=function(o,c){if(this.Hd()){var v=this.o_.Ft;o.save(),o.fillStyle=this.zi.timeScale.borderColor;var d=Math.floor(this.cf.W().N*c),y=this.m_?Math.round(v*c)-d:0;o.fillRect(y,0,d,d),o.restore()}},t.prototype.j_=function(o,c){var v=this;q(o,c,(function(){U(o,0,0,v.o_.Ft,v.o_.Ot,v.Yd())}))},t}();function In(o,c){return o.Po>c.Po?o:c}var ne=function(){function t(o){var c=this;this.$d=null,this.Kd=null,this.k=null,this.Xd=!1,this.o_=new Gn(0,0),this.Zd=new V,this.f_=new qt(5),this.__=!1,this.d_=function(){c.__||c.ad.jt().Wr()},this.b_=function(){c.__||c.ad.jt().Wr()},this.ad=o,this.zi=o.W().layout,this.Jd=document.createElement("tr"),this.Gd=document.createElement("td"),this.Gd.style.padding="0",this.Qd=document.createElement("td"),this.Qd.style.padding="0",this.p_=document.createElement("td"),this.p_.style.height="25px",this.p_.style.padding="0",this.tw=document.createElement("div"),this.tw.style.width="100%",this.tw.style.height="100%",this.tw.style.position="relative",this.tw.style.overflow="hidden",this.p_.appendChild(this.tw),this.g_=mn(this.tw,new Gn(16,16)),this.g_.subscribeCanvasConfigured(this.d_);var v=this.g_.canvas;v.style.position="absolute",v.style.zIndex="1",v.style.left="0",v.style.top="0",this.y_=mn(this.tw,new Gn(16,16)),this.y_.subscribeCanvasConfigured(this.b_);var d=this.y_.canvas;d.style.position="absolute",d.style.zIndex="2",d.style.left="0",d.style.top="0",this.Jd.appendChild(this.Gd),this.Jd.appendChild(this.p_),this.Jd.appendChild(this.Qd),this.iw(),this.ad.jt().Pa().u(this.iw.bind(this),this),this.A_=new Kn(this.y_.canvas,this,{_v:function(){return!0},dv:function(){return!1}})}return t.prototype.g=function(){this.A_.g(),null!==this.$d&&this.$d.g(),null!==this.Kd&&this.Kd.g(),this.y_.unsubscribeCanvasConfigured(this.b_),this.y_.destroy(),this.g_.unsubscribeCanvasConfigured(this.d_),this.g_.destroy()},t.prototype.B_=function(){return this.Jd},t.prototype.nw=function(){return this.$d},t.prototype.sw=function(){return this.Kd},t.prototype.Tv=function(o){if(!this.Xd){this.Xd=!0;var c=this.ad.jt();!c.bt().wi()&&this.ad.W().handleScale.axisPressedMouseMove.time&&c.Lf(o.Yv)}},t.prototype.Cv=function(o){this.Tv(o)},t.prototype.Dv=function(){var o=this.ad.jt();!o.bt().wi()&&this.Xd&&(this.Xd=!1,this.ad.W().handleScale.axisPressedMouseMove.time&&o.zf())},t.prototype.bv=function(o){var c=this.ad.jt();!c.bt().wi()&&this.ad.W().handleScale.axisPressedMouseMove.time&&c.Wf(o.Yv)},t.prototype.wv=function(o){this.bv(o)},t.prototype.yv=function(){this.Xd=!1;var o=this.ad.jt();o.bt().wi()&&!this.ad.W().handleScale.axisPressedMouseMove.time||o.zf()},t.prototype.pv=function(){this.yv()},t.prototype.nv=function(){this.ad.W().handleScale.axisDoubleClickReset&&this.ad.jt().pn()},t.prototype.Gc=function(){this.nv()},t.prototype.ov=function(){this.ad.jt().W().handleScale.axisPressedMouseMove.time&&this.K_(1)},t.prototype.Wv=function(){this.K_(0)},t.prototype.Ld=function(){return this.o_},t.prototype.hw=function(){return this.Zd},t.prototype.rw=function(o,c,v){this.o_&&this.o_.br(o)||(this.o_=o,this.__=!0,this.g_.resizeCanvas({width:o.Ft,height:o.Ot}),this.y_.resizeCanvas({width:o.Ft,height:o.Ot}),this.__=!1,this.p_.style.width=o.Ft+"px",this.p_.style.height=o.Ot+"px",this.Zd.m(o)),null!==this.$d&&this.$d.P_(new Gn(c,o.Ot)),null!==this.Kd&&this.Kd.P_(new Gn(v,o.Ot))},t.prototype.ew=function(){var o=this.uw();return Math.ceil(o.N+o.C+o.S+o.O+o.B)},t.prototype.vt=function(){this.ad.jt().bt().au()},t.prototype.Y_=function(){return this.g_.canvas},t.prototype.R_=function(o){if(0!==o){if(1!==o){var c=Mn(this.g_.canvas);this.j_(c,this.g_.pixelRatio),this.Rs(c,this.g_.pixelRatio),this.q_(c,this.g_.pixelRatio),null!==this.$d&&this.$d.R_(o),null!==this.Kd&&this.Kd.R_(o)}var v=Mn(this.y_.canvas),d=this.y_.pixelRatio;v.clearRect(0,0,Math.ceil(this.o_.Ft*d),Math.ceil(this.o_.Ot*d)),this.aw([this.ad.jt().Tf()],v,d)}},t.prototype.j_=function(o,c){var v=this;q(o,c,(function(){U(o,0,0,v.o_.Ft,v.o_.Ot,v.ad.jt().Xf())}))},t.prototype.Rs=function(o,c){if(this.ad.W().timeScale.borderVisible){o.save(),o.fillStyle=this.ow();var v=Math.max(1,Math.floor(this.uw().N*c));o.fillRect(0,0,Math.ceil(this.o_.Ft*c),v),o.restore()}},t.prototype.q_=function(o,c){var v=this,d=this.ad.jt().bt().au();if(d&&0!==d.length){var y=d.reduce(In,d[0]).Po;y>30&&y<50&&(y=30),o.save(),o.strokeStyle=this.ow();var _=this.uw(),B=_.N+_.C+_.O+_.S-_.V;o.textAlign="center",o.fillStyle=this.ow();var z=Math.floor(this.uw().N*c),E=Math.max(1,Math.floor(c)),R=Math.floor(.5*c);if(this.ad.jt().bt().W().borderVisible){o.beginPath();for(var W=Math.round(_.C*c),O=d.length;O--;){var G=Math.round(d[O].su*c);o.rect(G-R,z,E,W)}o.fill()}o.fillStyle=this.j(),q(o,c,(function(){o.font=v.lw();for(var c=0,_=d;c<_.length;c++)if((W=_[c]).Po<y){var z=W.Sl?v.fw(o,W.su,W.yu):W.su;o.fillText(W.yu,z,B)}o.font=v.cw();for(var E=0,R=d;E<R.length;E++){var W;(W=R[E]).Po>=y&&(z=W.Sl?v.fw(o,W.su,W.yu):W.su,o.fillText(W.yu,z,B))}})),o.restore()}},t.prototype.fw=function(o,c,v){var d=this.f_.Qt(o,v),y=d/2,_=Math.floor(c-y)+.5;return _<0?c+=Math.abs(0-_):_+d>this.o_.Ft&&(c-=Math.abs(this.o_.Ft-(_+d))),c},t.prototype.aw=function(o,c,v){for(var d=this.uw(),y=0,_=o;y<_.length;y++)for(var B=0,z=_[y].Ti();B<z.length;B++){var E=z[B];c.save(),E.dt().H(c,d,v),c.restore()}},t.prototype.ow=function(){return this.ad.W().timeScale.borderColor},t.prototype.j=function(){return this.zi.textColor},t.prototype.R=function(){return this.zi.fontSize},t.prototype.lw=function(){return L(this.R(),this.zi.fontFamily)},t.prototype.cw=function(){return L(this.R(),this.zi.fontFamily,"bold")},t.prototype.uw=function(){null===this.k&&(this.k={N:1,V:NaN,O:NaN,B:NaN,mi:NaN,C:3,S:NaN,T:"",bi:new qt});var o=this.k,c=this.lw();if(o.T!==c){var v=this.R();o.S=v,o.T=c,o.O=Math.ceil(v/2.5),o.B=o.O,o.mi=Math.ceil(v/2),o.V=Math.round(this.R()/5),o.bi.ih()}return this.k},t.prototype.K_=function(o){this.p_.style.cursor=1===o?"ew-resize":"default"},t.prototype.iw=function(){var o=this.ad.jt(),c=o.W();c.leftPriceScale.visible||null===this.$d||(this.Gd.removeChild(this.$d.B_()),this.$d.g(),this.$d=null),c.rightPriceScale.visible||null===this.Kd||(this.Qd.removeChild(this.Kd.B_()),this.Kd.g(),this.Kd=null);var v={qf:this.ad.jt().qf()},s=function(){return c.leftPriceScale.borderVisible&&o.bt().W().borderVisible},h=function(){return o.Xf()};c.leftPriceScale.visible&&null===this.$d&&(this.$d=new ie("left",c,v,s,h),this.Gd.appendChild(this.$d.B_())),c.rightPriceScale.visible&&null===this.Kd&&(this.Kd=new ie("right",c,v,s,h),this.Qd.appendChild(this.Kd.B_()))},t}(),ee=function(){function t(o,c){var v;this._w=[],this.dw=0,this.xu=0,this.hh=0,this.ww=0,this.Mw=0,this.bw=null,this.mw=!1,this.Q_=new V,this.af=new V,this.zi=c,this.Jd=document.createElement("div"),this.Jd.classList.add("tv-lightweight-charts"),this.Jd.style.overflow="hidden",this.Jd.style.width="100%",this.Jd.style.height="100%",(v=this.Jd).style.userSelect="none",v.style.webkitUserSelect="none",v.style.msUserSelect="none",v.style.MozUserSelect="none",v.style.webkitTapHighlightColor="transparent",this.pw=document.createElement("table"),this.pw.setAttribute("cellspacing","0"),this.Jd.appendChild(this.pw),this.gw=this.yw.bind(this),this.Jd.addEventListener("wheel",this.gw,{passive:!1}),this.pi=new Rn(this.ff.bind(this),this.zi),this.jt().Df().u(this.kw.bind(this),this),this.Nw=new ne(this),this.pw.appendChild(this.Nw.B_());var d=this.zi.width,y=this.zi.height;if(0===d||0===y){var _=o.getBoundingClientRect();0===d&&(d=Math.floor(_.width),d-=d%2),0===y&&(y=Math.floor(_.height),y-=y%2)}this.xw(d,y),this.Cw(),o.appendChild(this.Jd),this.Sw(),this.pi.bt().Pl().u(this.pi.Ce.bind(this.pi),this),this.pi.Pa().u(this.pi.Ce.bind(this.pi),this)}return t.prototype.jt=function(){return this.pi},t.prototype.W=function(){return this.zi},t.prototype.Tw=function(){return this._w},t.prototype.Dw=function(){return this.Nw},t.prototype.g=function(){this.Jd.removeEventListener("wheel",this.gw),0!==this.dw&&window.cancelAnimationFrame(this.dw),this.pi.Df().M(this),this.pi.bt().Pl().M(this),this.pi.Pa().M(this),this.pi.g();for(var o=0,c=this._w;o<c.length;o++){var v=c[o];this.pw.removeChild(v.B_()),v.Sd().M(this),v.g()}this._w=[],u(this.Nw).g(),null!==this.Jd.parentElement&&this.Jd.parentElement.removeChild(this.Jd),this.af.g(),this.Q_.g()},t.prototype.xw=function(o,c,v){if(void 0===v&&(v=!1),this.xu!==c||this.hh!==o){this.xu=c,this.hh=o;var d=c+"px",y=o+"px";u(this.Jd).style.height=d,u(this.Jd).style.width=y,this.pw.style.height=d,this.pw.style.width=y,v?this.Aw(new ft(3)):this.pi.Ce()}},t.prototype.R_=function(o){void 0===o&&(o=new ft(3));for(var c=0;c<this._w.length;c++)this._w[c].R_(o.wn(c).vn);this.zi.timeScale.visible&&this.Nw.R_(o.dn())},t.prototype.Pr=function(o){this.pi.Pr(o),this.Sw();var c=o.width||this.hh,v=o.height||this.xu;this.xw(c,v)},t.prototype.Sd=function(){return this.Q_},t.prototype.Df=function(){return this.af},t.prototype.Bw=function(){var o=this;null!==this.bw&&(this.Aw(this.bw),this.bw=null);var c=this._w[0],v=bn(document,new Gn(this.hh,this.xu)),d=Mn(v),y=wn(v);return q(d,y,(function(){var v=0,y=0,r=function(c){for(var _=0;_<o._w.length;_++){var B=o._w[_],z=B.Ld().Ot,E=u("left"===c?B.Wd():B.zd()),R=E.Y_();d.drawImage(R,v,y,E.W_(),z),y+=z}};o.Lw()&&(r("left"),v=u(c.Wd()).W_()),y=0;for(var _=0;_<o._w.length;_++){var B=o._w[_],z=B.Ld(),E=B.Y_();d.drawImage(E,v,y,z.Ft,z.Ot),y+=z.Ot}v+=c.Ld().Ft,o.Ew()&&(y=0,r("right"));var f=function(c){var _=u("left"===c?o.Nw.nw():o.Nw.sw()),B=_.Ld(),z=_.Y_();d.drawImage(z,v,y,B.Ft,B.Ot)};if(o.zi.timeScale.visible){v=0,o.Lw()&&(f("left"),v=u(c.Wd()).W_());var R=o.Nw.Ld();E=o.Nw.Y_(),d.drawImage(E,v,y,R.Ft,R.Ot),o.Ew()&&(v+=c.Ld().Ft,f("right"),d.restore())}})),v},t.prototype.Fw=function(o){return"none"===o||"left"===o&&!this.Lw()||"right"===o&&!this.Ew()||0===this._w.length?0:u("left"===o?this._w[0].Wd():this._w[0].zd()).W_()},t.prototype.Ow=function(){for(var o=0,c=0,v=0,d=0,y=this._w;d<y.length;d++){var _=y[d];this.Lw()&&(c=Math.max(c,u(_.Wd()).O_())),this.Ew()&&(v=Math.max(v,u(_.zd()).O_())),o+=_.Wa()}var B=this.hh,z=this.xu,E=Math.max(B-c-v,0),R=this.zi.timeScale.visible,W=R?this.Nw.ew():0;W%2&&(W+=1);for(var O=0+W,G=z<O?0:z-O,V=G/o,F=0,X=0;X<this._w.length;++X){(_=this._w[X]).wd(this.pi.Cf()[X]);var Y,J;J=X===this._w.length-1?G-F:Math.round(_.Wa()*V),F+=Y=Math.max(J,2),_.P_(new Gn(E,Y)),this.Lw()&&_.Bd(c,"left"),this.Ew()&&_.Bd(v,"right"),_.z_()&&this.pi.Af(_.z_(),Y)}this.Nw.rw(new Gn(R?E:0,W),R?c:0,R?v:0),this.pi.Ra(E),this.ww!==c&&(this.ww=c),this.Mw!==v&&(this.Mw=v)},t.prototype.yw=function(o){var c=o.deltaX/100,v=-o.deltaY/100;if(0!==c&&this.zi.handleScroll.mouseWheel||0!==v&&this.zi.handleScale.mouseWheel){switch(o.cancelable&&o.preventDefault(),o.deltaMode){case o.DOM_DELTA_PAGE:c*=120,v*=120;break;case o.DOM_DELTA_LINE:c*=32,v*=32}if(0!==v&&this.zi.handleScale.mouseWheel){var d=Math.sign(v)*Math.min(1,Math.abs(v)),y=o.clientX-this.Jd.getBoundingClientRect().left;this.jt().Ef(y,d)}0!==c&&this.zi.handleScroll.mouseWheel&&this.jt().Ff(-80*c)}},t.prototype.Aw=function(o){var c,v=o.dn();3===v&&this.Vw(),3!==v&&2!==v||(this.Pw(o),this.Ww(o),this.Nw.vt(),this._w.forEach((function(o){o.bd()})),3===(null===(c=this.bw)||void 0===c?void 0:c.dn())&&(this.bw.Nn(o),this.Vw(),this.Pw(this.bw),this.Ww(this.bw),o=this.bw,this.bw=null)),this.R_(o)},t.prototype.Ww=function(o){for(var c=0,v=o.kn();c<v.length;c++){var d=v[c];this.xn(d)}},t.prototype.Pw=function(o){for(var c=this.pi.Cf(),v=0;v<c.length;v++)o.wn(v)._n&&c[v].so()},t.prototype.xn=function(o){var c=this.pi.bt();switch(o.bn){case 0:c.zl();break;case 1:c.Rl(o.St);break;case 2:c.gn(o.St);break;case 3:c.yn(o.St);break;case 4:c.Tl()}},t.prototype.ff=function(o){var c=this;null!==this.bw?this.bw.Nn(o):this.bw=o,this.mw||(this.mw=!0,this.dw=window.requestAnimationFrame((function(){if(c.mw=!1,c.dw=0,null!==c.bw){var o=c.bw;c.bw=null,c.Aw(o)}})))},t.prototype.Vw=function(){this.Cw()},t.prototype.Cw=function(){for(var o=this.pi.Cf(),c=o.length,v=this._w.length,d=c;d<v;d++){var y=e(this._w.pop());this.pw.removeChild(y.B_()),y.Sd().M(this),y.g()}for(d=v;d<c;d++)(y=new te(this,o[d])).Sd().u(this.zw.bind(this),this),this._w.push(y),this.pw.insertBefore(y.B_(),this.Nw.B_());for(d=0;d<c;d++){var _=o[d];(y=this._w[d]).z_()!==_?y.wd(_):y.dd()}this.Sw(),this.Ow()},t.prototype.Rw=function(o,c){var v,d=new Map;if(null!==o&&this.pi._t().forEach((function(c){var v=c.er(o);null!==v&&d.set(c,v)})),null!==o){var y=this.pi.bt().gi(o);null!==y&&(v=y)}var _=this.jt().gf(),B=null!==_&&_.kf instanceof Ri?_.kf:void 0,z=null!==_&&void 0!==_.yd?_.yd.Zh:void 0;return{rt:v,Iw:c||void 0,jw:B,qw:d,Uw:z}},t.prototype.zw=function(o,c){var v=this;this.Q_.m((function(){return v.Rw(o,c)}))},t.prototype.kw=function(o,c){var v=this;this.af.m((function(){return v.Rw(o,c)}))},t.prototype.Sw=function(){var o=this.zi.timeScale.visible?"":"none";this.Nw.B_().style.display=o},t.prototype.Lw=function(){return this._w[0].z_().Ya().W().visible},t.prototype.Ew=function(){return this._w[0].z_().$a().W().visible},t}();function Un(o,c,v){var d=v.value;return{vs:c,rt:o,St:[d,d,d,d]}}function Hn(o,c,v){var d=v.value,y={vs:c,rt:o,St:[d,d,d,d]};return"color"in v&&void 0!==v.color&&(y.A=v.color),y}function Yn(o){return void 0!==o.St}function $n(o){return function(c,v,d){return void 0===(y=d).open&&void 0===y.value?{rt:c,vs:v}:o(c,v,d);var y}}var se={Candlestick:$n((function(o,c,v){var d={vs:c,rt:o,St:[v.open,v.high,v.low,v.close]};return"color"in v&&void 0!==v.color&&(d.A=v.color),"borderColor"in v&&void 0!==v.borderColor&&(d.Tt=v.borderColor),"wickColor"in v&&void 0!==v.wickColor&&(d.qs=v.wickColor),d})),Bar:$n((function(o,c,v){var d={vs:c,rt:o,St:[v.open,v.high,v.low,v.close]};return"color"in v&&void 0!==v.color&&(d.A=v.color),d})),Area:$n(Un),Baseline:$n(Un),Histogram:$n(Hn),Line:$n(Hn)};function Xn(o){return se[o]}function Zn(o){return 60*o*60*1e3}function Jn(o){return 60*o*1e3}var re=[{Hw:(1,1e3),Po:10},{Hw:Jn(1),Po:20},{Hw:Jn(5),Po:21},{Hw:Jn(30),Po:22},{Hw:Zn(1),Po:30},{Hw:Zn(3),Po:31},{Hw:Zn(6),Po:32},{Hw:Zn(12),Po:33}];function ts(o,c){if(o.getUTCFullYear()!==c.getUTCFullYear())return 70;if(o.getUTCMonth()!==c.getUTCMonth())return 60;if(o.getUTCDate()!==c.getUTCDate())return 50;for(var v=re.length-1;v>=0;--v)if(Math.floor(c.getTime()/re[v].Hw)!==Math.floor(o.getTime()/re[v].Hw))return re[v].Po;return 0}function is(o,c){if(void 0===c&&(c=0),0!==o.length){for(var v=0===c?null:o[c-1].rt.So,d=null!==v?new Date(1e3*v):null,y=0,_=c;_<o.length;++_){var B=o[_],z=new Date(1e3*B.rt.So);null!==d&&(B.Vo=ts(z,d)),y+=B.rt.So-(v||B.rt.So),v=B.rt.So,d=z}if(0===c&&o.length>1){var E=Math.ceil(y/(o.length-1)),R=new Date(1e3*(o[0].rt.So-E));o[0].Vo=ts(new Date(1e3*o[0].rt.So),R)}}}function ns(o){if(!vn(o))throw new Error("time must be of type BusinessDay");var c=new Date(Date.UTC(o.year,o.month-1,o.day,0,0,0,0));return{So:Math.round(c.getTime()/1e3),Co:o}}function ss(o){if(!_n(o))throw new Error("time must be of type isUTCTimestamp");return{So:o}}function hs(o){return 0===o.length?null:vn(o[0].time)?ns:ss}function rs(o){return _n(o)?ss(o):vn(o)?ns(o):ns(es(o))}function es(o){var c=new Date(o);if(isNaN(c.getTime()))throw new Error("Invalid date string=".concat(o,", expected format=yyyy-mm-dd"));return{day:c.getUTCDate(),month:c.getUTCMonth()+1,year:c.getUTCFullYear()}}function us(o){C(o.time)&&(o.time=es(o.time))}function as(o){return{vs:0,Yw:new Map,Ve:o}}function os(o){if(void 0!==o&&0!==o.length)return{$w:o[0].rt.So,Kw:o[o.length-1].rt.So}}var oe=function(){function t(){this.Xw=new Map,this.Zw=new Map,this.Jw=new Map,this.Gw=[]}return t.prototype.g=function(){this.Xw.clear(),this.Zw.clear(),this.Jw.clear(),this.Gw=[]},t.prototype.Qw=function(o,c){var v=this,d=0!==this.Xw.size,y=!1,_=this.Zw.get(o);if(void 0!==_)if(1===this.Zw.size)d=!1,y=!0,this.Xw.clear();else for(var B=0,z=this.Gw;B<z.length;B++)z[B].pointData.Yw.delete(o)&&(y=!0);var E=[];if(0!==c.length){!function(o){o.forEach(us)}(c);var R=u(hs(c)),W=Xn(o.Rr());E=c.map((function(c){var d=R(c.time),_=v.Xw.get(d.So);void 0===_&&(_=as(d),v.Xw.set(d.So,_),y=!0);var B=W(d,_.vs,c);return _.Yw.set(o,B),B}))}d&&this.tM(),this.iM(o,E);var O=-1;if(y){var G=[];this.Xw.forEach((function(o){G.push({Vo:0,rt:o.Ve,pointData:o})})),G.sort((function(o,c){return o.rt.So-c.rt.So})),O=this.nM(G)}return this.sM(o,O,function(o,c){var v=os(o),d=os(c);if(void 0!==v&&void 0!==d)return{Ae:v.Kw>=d.Kw&&v.$w>=d.$w}}(this.Zw.get(o),_))},t.prototype.Yf=function(o){return this.Qw(o,[])},t.prototype.hM=function(o,c){us(c);var v=u(hs([c]))(c.time),d=this.Jw.get(o);if(void 0!==d&&v.So<d.So)throw new Error("Cannot update oldest data, last time=".concat(d.So,", new time=").concat(v.So));var y=this.Xw.get(v.So),_=void 0===y;void 0===y&&(y=as(v),this.Xw.set(v.So,y));var B=Xn(o.Rr())(v,y.vs,c);y.Yw.set(o,B),this.rM(o,B);var z={Ae:Yn(B)};if(!_)return this.sM(o,-1,z);var E={Vo:0,rt:y.Ve,pointData:y},R=vt(this.Gw,E.rt.So,(function(o,c){return o.rt.So<c}));this.Gw.splice(R,0,E);for(var W=R;W<this.Gw.length;++W)fs(this.Gw[W].pointData,W);return is(this.Gw,R),this.sM(o,R,z)},t.prototype.rM=function(o,c){var v=this.Zw.get(o);void 0===v&&(v=[],this.Zw.set(o,v));var d=0!==v.length?v[v.length-1]:null;null===d||c.rt.So>d.rt.So?Yn(c)&&v.push(c):Yn(c)?v[v.length-1]=c:v.splice(-1,1),this.Jw.set(o,c.rt)},t.prototype.iM=function(o,c){0!==c.length?(this.Zw.set(o,c.filter(Yn)),this.Jw.set(o,c[c.length-1].rt)):(this.Zw.delete(o),this.Jw.delete(o))},t.prototype.tM=function(){for(var o=0,c=this.Gw;o<c.length;o++){var v=c[o];0===v.pointData.Yw.size&&this.Xw.delete(v.rt.So)}},t.prototype.nM=function(o){for(var c=-1,v=0;v<this.Gw.length&&v<o.length;++v){var d=this.Gw[v],y=o[v];if(d.rt.So!==y.rt.So){c=v;break}y.Vo=d.Vo,fs(y.pointData,v)}if(-1===c&&this.Gw.length!==o.length&&(c=Math.min(this.Gw.length,o.length)),-1===c)return-1;for(v=c;v<o.length;++v)fs(o[v].pointData,v);return is(o,c),this.Gw=o,c},t.prototype.eM=function(){if(0===this.Zw.size)return null;var o=0;return this.Zw.forEach((function(c){0!==c.length&&(o=Math.max(o,c[c.length-1].vs))})),o},t.prototype.sM=function(o,c,v){var d={uM:new Map,bt:{ml:this.eM()}};if(-1!==c)this.Zw.forEach((function(c,y){d.uM.set(y,{ph:c,aM:y===o?v:void 0})})),this.Zw.has(o)||d.uM.set(o,{ph:[],aM:v}),d.bt.oM=this.Gw,d.bt.lM=c;else{var y=this.Zw.get(o);d.uM.set(o,{ph:y||[],aM:v})}return d},t}();function fs(o,c){o.vs=c,o.Yw.forEach((function(o){o.vs=c}))}var he={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:""},ue=function(){function t(o){this.Lr=o}return t.prototype.applyOptions=function(o){this.Lr.Pr(o)},t.prototype.options=function(){return this.Lr.W()},t.prototype.fM=function(){return this.Lr},t}();function _s(o){var c=o.overlay,v=function(o,c){var v={};for(var d in o)Object.prototype.hasOwnProperty.call(o,d)&&c.indexOf(d)<0&&(v[d]=o[d]);if(null!=o&&"function"==typeof Object.getOwnPropertySymbols){var y=0;for(d=Object.getOwnPropertySymbols(o);y<d.length;y++)c.indexOf(d[y])<0&&Object.prototype.propertyIsEnumerable.call(o,d[y])&&(v[d[y]]=o[d[y]])}return v}(o,["overlay"]);return c&&(v.priceScaleId=""),v}var ae=function(){function t(o,c,v){this.Kn=o,this.cM=c,this.vM=v}return t.prototype.priceFormatter=function(){return this.Kn.qe()},t.prototype.priceToCoordinate=function(o){var c=this.Kn.kt();return null===c?null:this.Kn.Ct().xt(o,c.St)},t.prototype.coordinateToPrice=function(o){var c=this.Kn.kt();return null===c?null:this.Kn.Ct().qi(o,c.St)},t.prototype.barsInLogicalRange=function(o){if(null===o)return null;var c=new an(new on(o.from,o.to)).jo(),v=this.Kn.an();if(v.wi())return null;var d=v.ne(c.In(),1),y=v.ne(c.jn(),-1),_=u(v.Qr()),B=u(v.un());if(null!==d&&null!==y&&d.vs>y.vs)return{barsBefore:o.from-_,barsAfter:B-o.to};var z={barsBefore:null===d||d.vs===_?o.from-_:d.vs-_,barsAfter:null===y||y.vs===B?B-o.to:B-y.vs};return null!==d&&null!==y&&(z.from=d.rt.Co||d.rt.So,z.to=y.rt.Co||y.rt.So),z},t.prototype.setData=function(o){this.Kn.Rr(),this.cM._M(this.Kn,o)},t.prototype.update=function(o){this.Kn.Rr(),this.cM.dM(this.Kn,o)},t.prototype.setMarkers=function(o){var c=o.map((function(o){return p(p({},o),{time:rs(o.time)})}));this.Kn.Le(c)},t.prototype.applyOptions=function(o){var c=_s(o);this.Kn.Pr(c)},t.prototype.options=function(){return T(this.Kn.W())},t.prototype.priceScale=function(){return this.vM.priceScale(this.Kn.Ct().Ke())},t.prototype.createPriceLine=function(o){var c=k(T(he),o),v=this.Kn.Ee(c);return new ue(v)},t.prototype.removePriceLine=function(o){this.Kn.Fe(o.fM())},t.prototype.seriesType=function(){return this.Kn.Rr()},t}(),le=function(o){function i(){return null!==o&&o.apply(this,arguments)||this}return m(i,o),i.prototype.applyOptions=function(c){cn(c),o.prototype.applyOptions.call(this,c)},i}(ae),ce={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,drawTicks:!0,scaleMargins:{bottom:.1,top:.2}},fe={color:"rgba(0, 0, 0, 0)",visible:!1,fontSize:48,fontFamily:F,fontStyle:"",text:"",horzAlign:"center",vertAlign:"center"},pe={width:0,height:0,layout:{background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:11,fontFamily:F},crosshair:{vertLine:{color:"#758696",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#4c525e"},horzLine:{color:"#758696",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#4c525e"},mode:1},grid:{vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},overlayPriceScales:p({},ce),leftPriceScale:p(p({},ce),{visible:!1}),rightPriceScale:p(p({},ce),{visible:!0}),timeScale:{rightOffset:0,barSpacing:6,minBarSpacing:.5,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0},watermark:fe,localization:{locale:jn?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:!0,mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}},ve={upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},de={upColor:"#26a69a",downColor:"#ef5350",openVisible:!0,thinBars:!0},ye={color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBackgroundColor:"",lastPriceAnimation:0},we={topColor:"rgba( 46, 220, 135, 0.4)",bottomColor:"rgba( 40, 221, 100, 0)",lineColor:"#33D778",lineStyle:0,lineWidth:3,lineType:0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBackgroundColor:"",lastPriceAnimation:0},ge={baseValue:{type:"price",price:0},topFillColor1:"rgba(38, 166, 154, 0.28)",topFillColor2:"rgba(38, 166, 154, 0.05)",topLineColor:"rgba(38, 166, 154, 1)",bottomFillColor1:"rgba(239, 83, 80, 0.05)",bottomFillColor2:"rgba(239, 83, 80, 0.28)",bottomLineColor:"rgba(239, 83, 80, 1)",lineWidth:3,lineStyle:0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBackgroundColor:"",lastPriceAnimation:0},me={color:"#26a69a",base:0},Me={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}},_e=function(){function t(o,c){this.wM=o,this.MM=c}return t.prototype.applyOptions=function(o){this.wM.jt().Nf(this.MM,o)},t.prototype.options=function(){return this._i().W()},t.prototype.width=function(){return it(this.MM)?this.wM.Fw("left"===this.MM?"left":"right"):0},t.prototype._i=function(){return u(this.wM.jt().xf(this.MM)).Ct},t}(),be=function(){function t(o,c){this.bM=new V,this.Go=new V,this.Zd=new V,this.pi=o,this.Da=o.bt(),this.Nw=c,this.Da.Ol().u(this.mM.bind(this)),this.Da.Vl().u(this.pM.bind(this)),this.Nw.hw().u(this.gM.bind(this))}return t.prototype.g=function(){this.Da.Ol().M(this),this.Da.Vl().M(this),this.Nw.hw().M(this),this.bM.g(),this.Go.g(),this.Zd.g()},t.prototype.scrollPosition=function(){return this.Da.Nl()},t.prototype.scrollToPosition=function(o,c){c?this.Da.Fl(o,1e3):this.pi.yn(o)},t.prototype.scrollToRealTime=function(){this.Da.El()},t.prototype.getVisibleRange=function(){var o,c,v=this.Da.cl();return null===v?null:{from:null!==(o=v.from.Co)&&void 0!==o?o:v.from.So,to:null!==(c=v.to.Co)&&void 0!==c?c:v.to.So}},t.prototype.setVisibleRange=function(o){var c={from:rs(o.from),to:rs(o.to)},v=this.Da.wl(c);this.pi.$f(v)},t.prototype.getVisibleLogicalRange=function(){var o=this.Da.fl();return null===o?null:{from:o.In(),to:o.jn()}},t.prototype.setVisibleLogicalRange=function(o){r(o.from<=o.to,"The from index cannot be after the to index."),this.pi.$f(o)},t.prototype.resetTimeScale=function(){this.pi.pn()},t.prototype.fitContent=function(){this.pi.zl()},t.prototype.logicalToCoordinate=function(o){var c=this.pi.bt();return c.wi()?null:c.At(o)},t.prototype.coordinateToLogical=function(o){return this.Da.wi()?null:this.Da.pl(o)},t.prototype.timeToCoordinate=function(o){var c=rs(o),v=this.Da.Ze(c,!1);return null===v?null:this.Da.At(v)},t.prototype.coordinateToTime=function(o){var c,v=this.pi.bt(),d=v.pl(o),y=v.gi(d);return null===y?null:null!==(c=y.Co)&&void 0!==c?c:y.So},t.prototype.width=function(){return this.Nw.Ld().Ft},t.prototype.height=function(){return this.Nw.Ld().Ot},t.prototype.subscribeVisibleTimeRangeChange=function(o){this.bM.u(o)},t.prototype.unsubscribeVisibleTimeRangeChange=function(o){this.bM._(o)},t.prototype.subscribeVisibleLogicalRangeChange=function(o){this.Go.u(o)},t.prototype.unsubscribeVisibleLogicalRangeChange=function(o){this.Go._(o)},t.prototype.subscribeSizeChange=function(o){this.Zd.u(o)},t.prototype.unsubscribeSizeChange=function(o){this.Zd._(o)},t.prototype.applyOptions=function(o){this.Da.Pr(o)},t.prototype.options=function(){return T(this.Da.W())},t.prototype.mM=function(){this.bM.p()&&this.bM.m(this.getVisibleRange())},t.prototype.pM=function(){this.Go.p()&&this.Go.m(this.getVisibleLogicalRange())},t.prototype.gM=function(o){this.Zd.m(o.Ft,o.Ot)},t}();function Ds(o){if(void 0!==o&&"custom"!==o.type){var c=o;void 0!==c.minMove&&void 0===c.precision&&(c.precision=function(o){if(o>=1)return 0;for(var c=0;c<8;c++){var v=Math.round(o);if(Math.abs(v-o)<1e-8)return c;o*=10}return c}(c.minMove))}}function As(o){return function(o){if(S(o.handleScale)){var c=o.handleScale;o.handleScale={axisDoubleClickReset:c,axisPressedMouseMove:{time:c,price:c},mouseWheel:c,pinch:c}}else if(void 0!==o.handleScale&&S(o.handleScale.axisPressedMouseMove)){var v=o.handleScale.axisPressedMouseMove;o.handleScale.axisPressedMouseMove={time:v,price:v}}var d=o.handleScroll;S(d)&&(o.handleScroll={horzTouchDrag:d,vertTouchDrag:d,mouseWheel:d,pressedMouseMove:d})}(o),function(o){if(o.priceScale){o.leftPriceScale=o.leftPriceScale||{},o.rightPriceScale=o.rightPriceScale||{};var c=o.priceScale.position;delete o.priceScale.position,o.leftPriceScale=k(o.leftPriceScale,o.priceScale),o.rightPriceScale=k(o.rightPriceScale,o.priceScale),"left"===c&&(o.leftPriceScale.visible=!0,o.rightPriceScale.visible=!1),"right"===c&&(o.leftPriceScale.visible=!1,o.rightPriceScale.visible=!0),"none"===c&&(o.leftPriceScale.visible=!1,o.rightPriceScale.visible=!1),o.overlayPriceScales=o.overlayPriceScales||{},void 0!==o.priceScale.invertScale&&(o.overlayPriceScales.invertScale=o.priceScale.invertScale),void 0!==o.priceScale.scaleMargins&&(o.overlayPriceScales.scaleMargins=o.priceScale.scaleMargins)}}(o),function(o){o.layout&&o.layout.backgroundColor&&!o.layout.background&&(o.layout.background={type:"solid",color:o.layout.backgroundColor})}(o),o}var Se=function(){function t(o,c){var v=this;this.yM=new oe,this.kM=new Map,this.NM=new Map,this.xM=new V,this.CM=new V;var d=void 0===c?T(pe):k(T(pe),As(c));this.wM=new ee(o,d),this.wM.Sd().u((function(o){v.xM.p()&&v.xM.m(v.SM(o()))}),this),this.wM.Df().u((function(o){v.CM.p()&&v.CM.m(v.SM(o()))}),this);var y=this.wM.jt();this.TM=new be(y,this.wM.Dw())}return t.prototype.remove=function(){this.wM.Sd().M(this),this.wM.Df().M(this),this.TM.g(),this.wM.g(),this.kM.clear(),this.NM.clear(),this.xM.g(),this.CM.g(),this.yM.g()},t.prototype.resize=function(o,c,v){this.wM.xw(o,c,v)},t.prototype.addAreaSeries=function(o){void 0===o&&(o={}),Ds((o=_s(o)).priceFormat);var c=k(T(Me),we,o),v=this.wM.jt().Uf("Area",c),d=new ae(v,this,this);return this.kM.set(d,v),this.NM.set(v,d),d},t.prototype.addBaselineSeries=function(o){void 0===o&&(o={}),Ds((o=_s(o)).priceFormat);var c=k(T(Me),T(ge),o),v=this.wM.jt().Uf("Baseline",c),d=new ae(v,this,this);return this.kM.set(d,v),this.NM.set(v,d),d},t.prototype.addBarSeries=function(o){void 0===o&&(o={}),Ds((o=_s(o)).priceFormat);var c=k(T(Me),de,o),v=this.wM.jt().Uf("Bar",c),d=new ae(v,this,this);return this.kM.set(d,v),this.NM.set(v,d),d},t.prototype.addCandlestickSeries=function(o){void 0===o&&(o={}),cn(o=_s(o)),Ds(o.priceFormat);var c=k(T(Me),ve,o),v=this.wM.jt().Uf("Candlestick",c),d=new le(v,this,this);return this.kM.set(d,v),this.NM.set(v,d),d},t.prototype.addHistogramSeries=function(o){void 0===o&&(o={}),Ds((o=_s(o)).priceFormat);var c=k(T(Me),me,o),v=this.wM.jt().Uf("Histogram",c),d=new ae(v,this,this);return this.kM.set(d,v),this.NM.set(v,d),d},t.prototype.addLineSeries=function(o){void 0===o&&(o={}),Ds((o=_s(o)).priceFormat);var c=k(T(Me),ye,o),v=this.wM.jt().Uf("Line",c),d=new ae(v,this,this);return this.kM.set(d,v),this.NM.set(v,d),d},t.prototype.removeSeries=function(o){var c=e(this.kM.get(o)),v=this.yM.Yf(c);this.wM.jt().Yf(c),this.DM(v),this.kM.delete(o),this.NM.delete(c)},t.prototype._M=function(o,c){this.DM(this.yM.Qw(o,c))},t.prototype.dM=function(o,c){this.DM(this.yM.hM(o,c))},t.prototype.subscribeClick=function(o){this.xM.u(o)},t.prototype.unsubscribeClick=function(o){this.xM._(o)},t.prototype.subscribeCrosshairMove=function(o){this.CM.u(o)},t.prototype.unsubscribeCrosshairMove=function(o){this.CM._(o)},t.prototype.priceScale=function(o){return void 0===o&&(o=this.wM.jt().Kf()),new _e(this.wM,o)},t.prototype.timeScale=function(){return this.TM},t.prototype.applyOptions=function(o){this.wM.Pr(As(o))},t.prototype.options=function(){return this.wM.W()},t.prototype.takeScreenshot=function(){return this.wM.Bw()},t.prototype.DM=function(o){var c=this.wM.jt();c.jf(o.bt.ml,o.bt.oM,o.bt.lM),o.uM.forEach((function(o,c){return c.Z(o.ph,o.aM)})),c.yl()},t.prototype.AM=function(o){return e(this.NM.get(o))},t.prototype.SM=function(o){var c=this,v=new Map;o.qw.forEach((function(o,d){v.set(c.AM(d),o)}));var d=void 0===o.jw?void 0:this.AM(o.jw);return{time:o.rt&&(o.rt.Co||o.rt.So),point:o.Iw,hoveredSeries:d,hoveredMarkerId:o.Uw,seriesPrices:v}},t}();function Ls(o,c){var v;if(C(o)){var d=document.getElementById(o);r(null!==d,"Cannot find element in DOM with id=".concat(o)),v=d}else v=o;return new Se(v,c)}}}]);