"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[71214],{331250:(e,a,t)=>{t.d(a,{l:()=>ViewUpdateHistory});var s=t(514041),n=t(908867),r=t(490343),o=t(334439),i=t(117746),d=t(831085);function ViewUpdateHistory(){var e=(0,n.A)(),a=(0,s.useCallback)((function(){(0,i.Dr)("https://github.com/OneKeyHQ/app-monorepo/releases")}),[]);return(0,d.jsx)(r.XStack,{children:(0,d.jsx)(r.Button,{mt:"$5",iconAfter:"ArrowTopRightOutline",onPress:a,size:"small",children:e.formatMessage({id:o.ETranslations.update_update_history})})})}},671214:(e,a,t)=>{t.r(a),t.d(a,{default:()=>x});var s=t(654266),n=t(908867),r=t(490343),o=t(334439),i=t(663522),d=t(536612),l=t(586330),u=t(514041),c=t(713132),g=t(639451),p=t(117746),f=t(831085),UpdatePreviewActionButton=function({autoClose:e}){var a=(0,n.A)(),t=(0,d.SX)(),s=(0,d.sx)(),i=(0,u.useCallback)((function(){}),[]),h=(0,u.useCallback)((function(){}),[]),x=(0,g.xf)(i,h),m=(0,u.useCallback)((function(a){t.data&&(t.data.storeUrl?(0,p.Dr)(t.data.storeUrl):t.data.downloadUrl&&(s(t.data),e&&a()))}),[t.data,e,s]),j=(0,u.useCallback)((0,l.A)((function*(){try{yield(0,g.Ed)(t.data)}catch(a){var{message:e}=a;e&&r.Toast.error({title:e})}})),[t.data]),w=[c.ue.downloading,c.ue.verifying].includes(t.data?.status),b=c.ue.ready===t.data?.status,k=(0,u.useCallback)((function(){switch(t.data?.status){case c.ue.downloading:return a.formatMessage({id:o.ETranslations.update_progress_downloading},{progress:x});case c.ue.verifying:return a.formatMessage({id:o.ETranslations.update_verifying});default:return a.formatMessage({id:o.ETranslations.update_update_now})}}),[t.data?.status,a,x]);return(0,f.jsx)(r.Page.Footer,{children:(0,f.jsx)(r.YStack,{children:(0,f.jsx)(r.Page.FooterActions,{confirmButtonProps:{disabled:w,loading:w},onConfirmText:k(),onConfirm:b?j:m})})})},h=t(331250),ExtPluginText=function(){return null};const x=function UpdatePreview({route:e}){var a=(0,n.A)(),{latestVersion:t,isForceUpdate:l,autoClose:u=!1}=e.params||{};(0,s.Fw)(!!l,(function(){}));var c=(0,d.x7)(t);return(0,f.jsxs)(r.Page,{children:[(0,f.jsx)(r.Page.Header,{title:a.formatMessage({id:o.ETranslations.update_app_update})}),(0,f.jsxs)(r.Page.Body,{m:"$5",children:[(0,f.jsxs)(r.YStack,{gap:"$3",children:[(0,f.jsx)(r.Heading,{size:"$heading2xl",children:a.formatMessage({id:o.ETranslations.update_new_app_version})}),(0,f.jsx)(ExtPluginText,{}),(0,f.jsxs)(r.XStack,{gap:"$2.5",alignItems:"center",children:[(0,f.jsx)(r.Badge,{badgeType:"default",badgeSize:"lg",children:i.Ay.version}),(0,f.jsx)(r.Icon,{name:"ArrowRightSolid",size:"$4"}),(0,f.jsx)(r.Badge,{badgeType:"info",badgeSize:"lg",children:t})]})]}),c?(0,f.jsxs)(r.ScrollView,{mt:"$7",contentInsetAdjustmentBehavior:"automatic",contentContainerStyle:{pb:"$5"},children:[(0,f.jsx)(r.Markdown,{children:c}),(0,f.jsx)(h.l,{})]}):null]}),(0,f.jsx)(UpdatePreviewActionButton,{autoClose:u})]})}}}]);