"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[5380],{183259:(e,r,t)=>{t.d(r,{U:()=>s});var n=t(514041),o=t(17617),a=t(490343),i=t(831085);var s=(0,n.memo)((function BasicDiscoveryIcon({uri:e,size:r,borderRadius:t="$2"}){return e?(0,i.jsxs)(a.Image,{size:r,borderRadius:t,borderWidth:o.A.hairlineWidth,borderColor:"$borderSubdued",borderCurve:"continuous",children:[(0,i.jsx)(a.Image.Source,{source:{uri:decodeURIComponent(e)}}),(0,i.jsx)(a.Image.Fallback,{children:(0,i.jsx)(a.Stack,{bg:"$bgStrong",ai:"center",jc:"center",width:"100%",height:"100%",children:(0,i.jsx)(a.Icon,{name:"GlobusOutline",width:"100%",height:"100%"})})}),(0,i.jsx)(a.Image.Loading,{children:(0,i.jsx)(a.Skeleton,{width:"100%",height:"100%"})})]}):(0,i.jsx)(a.Skeleton,{width:r,height:r,radius:"round"})}))},105380:(e,r,t)=>{t.r(r),t.d(r,{default:()=>x});var n=t(324586),o=t(586330),a=t(514041),i=t(908867),s=t(490343),c=t(610421),l=t(791088),u=t(498356),d=t(911998),m=t(657412),f=t(334439),g=t(948675),b=t(899035),p=t(183259),h=t(564452),j=t(831085);function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){(0,n.A)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}const x=(0,h.k)((function BookmarkListModal(){var e,r=(0,u.A)(),t=(0,i.A)(),{buildBookmarkData:n,removeBrowserBookmark:h,modifyBrowserBookmark:x}=(0,m.Gd)().current,{handleOpenWebSite:k}=(0,m.yZ)().current,[y,v]=(0,a.useState)([]),{run:w,result:O}=(0,d.yk)((0,o.A)((function*(){var e=yield c.A.serviceDiscovery.getBookmarkData({generateIcon:!0});return v(e||[]),e||[]})),[],{watchLoading:!0}),P=(0,a.useCallback)((function(e){s.Dialog.confirm({title:t.formatMessage({id:f.ETranslations.explore_rename}),renderContent:(0,j.jsx)(s.Dialog.Form,{formProps:{defaultValues:{name:e.title}},children:(0,j.jsx)(s.Dialog.FormField,{name:"name",rules:{required:{value:!0,message:t.formatMessage({id:f.ETranslations.global_name})}},children:(0,j.jsx)(s.Input,{autoFocus:!0,flex:1})})}),onConfirm:function(r){var n=r.getForm()?.getValues();n?.name&&x(_objectSpread(_objectSpread({},e),{},{title:n.name})),s.Toast.success({title:t.formatMessage({id:f.ETranslations.explore_bookmark_renamed})}),setTimeout((function(){w()}),200)}})}),[x,w,t]),S=(0,a.useRef)(!1),[I,D]=(0,a.useState)(!1),T=(0,a.useCallback)((e=(0,o.A)((function*(e){var r=e();void 0!==r&&(yield h(y[r].url),S.current=!0,setTimeout((0,o.A)((function*(){yield w()})),200))})),function(r){return e.apply(this,arguments)}),[h,w,y]);(0,a.useEffect)((function(){S.current&&0===O?.length&&(r.pop(),S.current=!1)}),[O?.length,r]);var _=(0,a.useCallback)((function(e){n({data:e}),v(e)}),[n]),M=(0,a.useCallback)((function(){return(0,j.jsx)(s.Button,{variant:"tertiary",onPress:function(){D((function(e){return!e}))},children:I?t.formatMessage({id:f.ETranslations.global_done}):t.formatMessage({id:f.ETranslations.global_edit})})}),[I,t]),{gtMd:B}=(0,s.useMedia)();return(0,j.jsxs)(s.Page,{children:[(0,j.jsx)(s.Page.Header,{title:t.formatMessage({id:f.ETranslations.explore_bookmarks}),headerRight:M}),(0,j.jsx)(s.Page.Body,{children:(0,j.jsx)(s.SortableListView,{data:y,enabled:I,keyExtractor:function(e){return`${e.url}`},getItemLayout:function(e,r){return{length:60,offset:60*r,index:r}},onDragEnd:function(e){return _(e.data)},renderItem:function({item:e,getIndex:n,drag:o,dragProps:a}){return(0,j.jsxs)(l.c,_objectSpread(_objectSpread({h:60,testID:`search-modal-${e.url.toLowerCase()}`},!I&&{onPress:function(){k({navigation:r,switchToMultiTabBrowser:B,webSite:{url:e.url,title:e.title}}),g.U.discovery.dapp.enterDapp({dappDomain:e.url,dappName:e.title,enterMethod:b.z.bookmark})}}),{},{children:[I?(0,j.jsx)(l.c.IconButton,{title:t.formatMessage({id:f.ETranslations.global_remove}),icon:"MinusCircleSolid",iconProps:{color:"$iconCritical"},onPress:function(){T(n),s.Toast.success({title:t.formatMessage({id:f.ETranslations.explore_removed_success})})},testID:"action-list-item-rename"},"remove"):null,(0,j.jsx)(l.c.Avatar,{avatar:(0,j.jsx)(p.U,{size:"$10",uri:e.logo})}),(0,j.jsx)(l.c.Text,{primary:e.title,primaryTextProps:{numberOfLines:1},secondary:e.url,secondaryTextProps:{numberOfLines:1},flex:1}),I?(0,j.jsxs)(s.XStack,{gap:"$6",children:[(0,j.jsx)(l.c.IconButton,{title:t.formatMessage({id:f.ETranslations.explore_rename}),icon:"PencilOutline",onPress:function(){return P(e)},testID:"action-list-item-rename"},"rename"),(0,j.jsx)(l.c.IconButton,{cursor:"move",icon:"DragOutline",onPressIn:o,dataSet:a},"darg")]}):null]}))}})})]})}))}}]);